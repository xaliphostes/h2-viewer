/*! For license information please see main.f4042650.js.LICENSE.txt */
(()=>{var e={4:(e,t,n)=>{"use strict";var r=n(853),o=n(43),a=n(950);function i(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function l(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function u(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function c(e){if(31===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function d(e){if(l(e)!==e)throw Error(i(188))}function f(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=f(e)))return t;e=e.sibling}return null}var p=Object.assign,h=Symbol.for("react.element"),m=Symbol.for("react.transitional.element"),g=Symbol.for("react.portal"),v=Symbol.for("react.fragment"),y=Symbol.for("react.strict_mode"),b=Symbol.for("react.profiler"),_=Symbol.for("react.consumer"),T=Symbol.for("react.context"),x=Symbol.for("react.forward_ref"),S=Symbol.for("react.suspense"),w=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),P=Symbol.for("react.lazy");Symbol.for("react.scope");var A=Symbol.for("react.activity");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var E=Symbol.for("react.memo_cache_sentinel");Symbol.for("react.view_transition");var I=Symbol.iterator;function O(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=I&&e[I]||e["@@iterator"])?e:null}var M=Symbol.for("react.client.reference");function R(e){if(null==e)return null;if("function"===typeof e)return e.$$typeof===M?null:e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case v:return"Fragment";case b:return"Profiler";case y:return"StrictMode";case S:return"Suspense";case w:return"SuspenseList";case A:return"Activity"}if("object"===typeof e)switch(e.$$typeof){case g:return"Portal";case T:return e.displayName||"Context";case _:return(e._context.displayName||"Context")+".Consumer";case x:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case C:return null!==(t=e.displayName||null)?t:R(e.type)||"Memo";case P:t=e._payload,e=e._init;try{return R(e(t))}catch(n){}}return null}var L=Array.isArray,k=o.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,D=a.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,B={pending:!1,data:null,method:null,action:null},N=[],V=-1;function F(e){return{current:e}}function U(e){0>V||(e.current=N[V],N[V]=null,V--)}function z(e,t){V++,N[V]=e.current,e.current=t}var G,W,H=F(null),j=F(null),K=F(null),Z=F(null);function q(e,t){switch(z(K,t),z(j,e),z(H,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?vd(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=yd(t=vd(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}U(H),z(H,e)}function X(){U(H),U(j),U(K)}function Y(e){null!==e.memoizedState&&z(Z,e);var t=H.current,n=yd(t,e.type);t!==n&&(z(j,e),z(H,n))}function Q(e){j.current===e&&(U(H),U(j)),Z.current===e&&(U(Z),df._currentValue=B)}function $(e){if(void 0===G)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);G=t&&t[1]||"",W=-1<n.stack.indexOf("\n    at")?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+G+e+W}var J=!1;function ee(e,t){if(!e||J)return"";J=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(o){var r=o}Reflect.construct(e,[],n)}else{try{n.call()}catch(a){r=a}e.call(n.prototype)}}else{try{throw Error()}catch(i){r=i}(n=e())&&"function"===typeof n.catch&&n.catch(function(){})}}catch(s){if(s&&r&&"string"===typeof s.stack)return[s.stack,r.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var o=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");o&&o.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var a=r.DetermineComponentFrameRoot(),i=a[0],s=a[1];if(i&&s){var l=i.split("\n"),u=s.split("\n");for(o=r=0;r<l.length&&!l[r].includes("DetermineComponentFrameRoot");)r++;for(;o<u.length&&!u[o].includes("DetermineComponentFrameRoot");)o++;if(r===l.length||o===u.length)for(r=l.length-1,o=u.length-1;1<=r&&0<=o&&l[r]!==u[o];)o--;for(;1<=r&&0<=o;r--,o--)if(l[r]!==u[o]){if(1!==r||1!==o)do{if(r--,0>--o||l[r]!==u[o]){var c="\n"+l[r].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}}while(1<=r&&0<=o);break}}}finally{J=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?$(n):""}function te(e,t){switch(e.tag){case 26:case 27:case 5:return $(e.type);case 16:return $("Lazy");case 13:return e.child!==t&&null!==t?$("Suspense Fallback"):$("Suspense");case 19:return $("SuspenseList");case 0:case 15:return ee(e.type,!1);case 11:return ee(e.type.render,!1);case 1:return ee(e.type,!0);case 31:return $("Activity");default:return""}}function ne(e){try{var t="",n=null;do{t+=te(e,n),n=e,e=e.return}while(e);return t}catch(r){return"\nError generating stack: "+r.message+"\n"+r.stack}}var re=Object.prototype.hasOwnProperty,oe=r.unstable_scheduleCallback,ae=r.unstable_cancelCallback,ie=r.unstable_shouldYield,se=r.unstable_requestPaint,le=r.unstable_now,ue=r.unstable_getCurrentPriorityLevel,ce=r.unstable_ImmediatePriority,de=r.unstable_UserBlockingPriority,fe=r.unstable_NormalPriority,pe=r.unstable_LowPriority,he=r.unstable_IdlePriority,me=r.log,ge=r.unstable_setDisableYieldValue,ve=null,ye=null;function be(e){if("function"===typeof me&&ge(e),ye&&"function"===typeof ye.setStrictMode)try{ye.setStrictMode(ve,e)}catch(t){}}var _e=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(Te(e)/xe|0)|0},Te=Math.log,xe=Math.LN2;var Se=256,we=262144,Ce=4194304;function Pe(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return 261888&e;case 262144:case 524288:case 1048576:case 2097152:return 3932160&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Ae(e,t,n){var r=e.pendingLanes;if(0===r)return 0;var o=0,a=e.suspendedLanes,i=e.pingedLanes;e=e.warmLanes;var s=134217727&r;return 0!==s?0!==(r=s&~a)?o=Pe(r):0!==(i&=s)?o=Pe(i):n||0!==(n=s&~e)&&(o=Pe(n)):0!==(s=r&~a)?o=Pe(s):0!==i?o=Pe(i):n||0!==(n=r&~e)&&(o=Pe(n)),0===o?0:0!==t&&t!==o&&0===(t&a)&&((a=o&-o)>=(n=t&-t)||32===a&&0!==(4194048&n))?t:o}function Ee(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function Ie(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function Oe(){var e=Ce;return 0===(62914560&(Ce<<=1))&&(Ce=4194304),e}function Me(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Re(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Le(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-_e(t);e.entangledLanes|=t,e.entanglements[r]=1073741824|e.entanglements[r]|261930&n}function ke(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-_e(n),o=1<<r;o&t|e[r]&t&&(e[r]|=t),n&=~o}}function De(e,t){var n=t&-t;return 0!==((n=0!==(42&n)?1:Be(n))&(e.suspendedLanes|t))?0:n}function Be(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Ne(e){return 2<(e&=-e)?8<e?0!==(134217727&e)?32:268435456:8:2}function Ve(){var e=D.p;return 0!==e?e:void 0===(e=window.event)?32:Af(e.type)}function Fe(e,t){var n=D.p;try{return D.p=e,t()}finally{D.p=n}}var Ue=Math.random().toString(36).slice(2),ze="__reactFiber$"+Ue,Ge="__reactProps$"+Ue,We="__reactContainer$"+Ue,He="__reactEvents$"+Ue,je="__reactListeners$"+Ue,Ke="__reactHandles$"+Ue,Ze="__reactResources$"+Ue,qe="__reactMarker$"+Ue;function Xe(e){delete e[ze],delete e[Ge],delete e[He],delete e[je],delete e[Ke]}function Ye(e){var t=e[ze];if(t)return t;for(var n=e.parentNode;n;){if(t=n[We]||n[ze]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Bd(e);null!==e;){if(n=e[ze])return n;e=Bd(e)}return t}n=(e=n).parentNode}return null}function Qe(e){if(e=e[ze]||e[We]){var t=e.tag;if(5===t||6===t||13===t||31===t||26===t||27===t||3===t)return e}return null}function $e(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(i(33))}function Je(e){var t=e[Ze];return t||(t=e[Ze]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function et(e){e[qe]=!0}var tt=new Set,nt={};function rt(e,t){ot(e,t),ot(e+"Capture",t)}function ot(e,t){for(nt[e]=t,e=0;e<t.length;e++)tt.add(t[e])}var at=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),it={},st={};function lt(e,t,n){if(o=t,re.call(st,o)||!re.call(it,o)&&(at.test(o)?st[o]=!0:(it[o]=!0,0)))if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var r=t.toLowerCase().slice(0,5);if("data-"!==r&&"aria-"!==r)return void e.removeAttribute(t)}e.setAttribute(t,""+n)}var o}function ut(e,t,n){if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+n)}}function ct(e,t,n,r){if(null===r)e.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(n)}e.setAttributeNS(t,n,""+r)}}function dt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function ft(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function pt(e){if(!e._valueTracker){var t=ft(e)?"checked":"value";e._valueTracker=function(e,t,n){var r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&"undefined"!==typeof r&&"function"===typeof r.get&&"function"===typeof r.set){var o=r.get,a=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(e){n=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e,t,""+e[t])}}function ht(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=ft(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function mt(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var gt=/[\n"\\]/g;function vt(e){return e.replace(gt,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function yt(e,t,n,r,o,a,i,s){e.name="",null!=i&&"function"!==typeof i&&"symbol"!==typeof i&&"boolean"!==typeof i?e.type=i:e.removeAttribute("type"),null!=t?"number"===i?(0===t&&""===e.value||e.value!=t)&&(e.value=""+dt(t)):e.value!==""+dt(t)&&(e.value=""+dt(t)):"submit"!==i&&"reset"!==i||e.removeAttribute("value"),null!=t?_t(e,i,dt(t)):null!=n?_t(e,i,dt(n)):null!=r&&e.removeAttribute("value"),null==o&&null!=a&&(e.defaultChecked=!!a),null!=o&&(e.checked=o&&"function"!==typeof o&&"symbol"!==typeof o),null!=s&&"function"!==typeof s&&"symbol"!==typeof s&&"boolean"!==typeof s?e.name=""+dt(s):e.removeAttribute("name")}function bt(e,t,n,r,o,a,i,s){if(null!=a&&"function"!==typeof a&&"symbol"!==typeof a&&"boolean"!==typeof a&&(e.type=a),null!=t||null!=n){if(!("submit"!==a&&"reset"!==a||void 0!==t&&null!==t))return void pt(e);n=null!=n?""+dt(n):"",t=null!=t?""+dt(t):n,s||t===e.value||(e.value=t),e.defaultValue=t}r="function"!==typeof(r=null!=r?r:o)&&"symbol"!==typeof r&&!!r,e.checked=s?e.checked:!!r,e.defaultChecked=!!r,null!=i&&"function"!==typeof i&&"symbol"!==typeof i&&"boolean"!==typeof i&&(e.name=i),pt(e)}function _t(e,t,n){"number"===t&&mt(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function Tt(e,t,n,r){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&r&&(e[n].defaultSelected=!0)}else{for(n=""+dt(n),t=null,o=0;o<e.length;o++){if(e[o].value===n)return e[o].selected=!0,void(r&&(e[o].defaultSelected=!0));null!==t||e[o].disabled||(t=e[o])}null!==t&&(t.selected=!0)}}function xt(e,t,n){null==t||((t=""+dt(t))!==e.value&&(e.value=t),null!=n)?e.defaultValue=null!=n?""+dt(n):"":e.defaultValue!==t&&(e.defaultValue=t)}function St(e,t,n,r){if(null==t){if(null!=r){if(null!=n)throw Error(i(92));if(L(r)){if(1<r.length)throw Error(i(93));r=r[0]}n=r}null==n&&(n=""),t=n}n=dt(t),e.defaultValue=n,(r=e.textContent)===n&&""!==r&&null!==r&&(e.value=r),pt(e)}function wt(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var Ct=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Pt(e,t,n){var r=0===t.indexOf("--");null==n||"boolean"===typeof n||""===n?r?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":r?e.setProperty(t,n):"number"!==typeof n||0===n||Ct.has(t)?"float"===t?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function At(e,t,n){if(null!=t&&"object"!==typeof t)throw Error(i(62));if(e=e.style,null!=n){for(var r in n)!n.hasOwnProperty(r)||null!=t&&t.hasOwnProperty(r)||(0===r.indexOf("--")?e.setProperty(r,""):"float"===r?e.cssFloat="":e[r]="");for(var o in t)r=t[o],t.hasOwnProperty(o)&&n[o]!==r&&Pt(e,o,r)}else for(var a in t)t.hasOwnProperty(a)&&Pt(e,a,t[a])}function Et(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var It=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ot=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Mt(e){return Ot.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Rt(){}var Lt=null;function kt(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Dt=null,Bt=null;function Nt(e){var t=Qe(e);if(t&&(e=t.stateNode)){var n=e[Ge]||null;e:switch(e=t.stateNode,t.type){case"input":if(yt(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+vt(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var o=r[Ge]||null;if(!o)throw Error(i(90));yt(r,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name)}}for(t=0;t<n.length;t++)(r=n[t]).form===e.form&&ht(r)}break e;case"textarea":xt(e,n.value,n.defaultValue);break e;case"select":null!=(t=n.value)&&Tt(e,!!n.multiple,t,!1)}}}var Vt=!1;function Ft(e,t,n){if(Vt)return e(t,n);Vt=!0;try{return e(t)}finally{if(Vt=!1,(null!==Dt||null!==Bt)&&(Ju(),Dt&&(t=Dt,e=Bt,Bt=Dt=null,Nt(t),e)))for(t=0;t<e.length;t++)Nt(e[t])}}function Ut(e,t){var n=e.stateNode;if(null===n)return null;var r=n[Ge]||null;if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(i(231,t,typeof n));return n}var zt=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),Gt=!1;if(zt)try{var Wt={};Object.defineProperty(Wt,"passive",{get:function(){Gt=!0}}),window.addEventListener("test",Wt,Wt),window.removeEventListener("test",Wt,Wt)}catch($f){Gt=!1}var Ht=null,jt=null,Kt=null;function Zt(){if(Kt)return Kt;var e,t,n=jt,r=n.length,o="value"in Ht?Ht.value:Ht.textContent,a=o.length;for(e=0;e<r&&n[e]===o[e];e++);var i=r-e;for(t=1;t<=i&&n[r-t]===o[a-t];t++);return Kt=o.slice(e,1<t?1-t:void 0)}function qt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Xt(){return!0}function Yt(){return!1}function Qt(e){function t(t,n,r,o,a){for(var i in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=o,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(i)&&(t=e[i],this[i]=t?t(o):o[i]);return this.isDefaultPrevented=(null!=o.defaultPrevented?o.defaultPrevented:!1===o.returnValue)?Xt:Yt,this.isPropagationStopped=Yt,this}return p(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Xt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Xt)},persist:function(){},isPersistent:Xt}),t}var $t,Jt,en,tn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},nn=Qt(tn),rn=p({},tn,{view:0,detail:0}),on=Qt(rn),an=p({},rn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==en&&(en&&"mousemove"===e.type?($t=e.screenX-en.screenX,Jt=e.screenY-en.screenY):Jt=$t=0,en=e),$t)},movementY:function(e){return"movementY"in e?e.movementY:Jt}}),sn=Qt(an),ln=Qt(p({},an,{dataTransfer:0})),un=Qt(p({},rn,{relatedTarget:0})),cn=Qt(p({},tn,{animationName:0,elapsedTime:0,pseudoElement:0})),dn=Qt(p({},tn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),fn=Qt(p({},tn,{data:0})),pn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},hn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},mn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function gn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=mn[e])&&!!t[e]}function vn(){return gn}var yn=Qt(p({},rn,{key:function(e){if(e.key){var t=pn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=qt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?hn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vn,charCode:function(e){return"keypress"===e.type?qt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?qt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),bn=Qt(p({},an,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),_n=Qt(p({},rn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vn})),Tn=Qt(p({},tn,{propertyName:0,elapsedTime:0,pseudoElement:0})),xn=Qt(p({},an,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),Sn=Qt(p({},tn,{newState:0,oldState:0})),wn=[9,13,27,32],Cn=zt&&"CompositionEvent"in window,Pn=null;zt&&"documentMode"in document&&(Pn=document.documentMode);var An=zt&&"TextEvent"in window&&!Pn,En=zt&&(!Cn||Pn&&8<Pn&&11>=Pn),In=String.fromCharCode(32),On=!1;function Mn(e,t){switch(e){case"keyup":return-1!==wn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Rn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Ln=!1;var kn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Dn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!kn[e.type]:"textarea"===t}function Bn(e,t,n,r){Dt?Bt?Bt.push(r):Bt=[r]:Dt=r,0<(t=rd(t,"onChange")).length&&(n=new nn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Nn=null,Vn=null;function Fn(e){Xc(e,0)}function Un(e){if(ht($e(e)))return e}function zn(e,t){if("change"===e)return t}var Gn=!1;if(zt){var Wn;if(zt){var Hn="oninput"in document;if(!Hn){var jn=document.createElement("div");jn.setAttribute("oninput","return;"),Hn="function"===typeof jn.oninput}Wn=Hn}else Wn=!1;Gn=Wn&&(!document.documentMode||9<document.documentMode)}function Kn(){Nn&&(Nn.detachEvent("onpropertychange",Zn),Vn=Nn=null)}function Zn(e){if("value"===e.propertyName&&Un(Vn)){var t=[];Bn(t,Vn,e,kt(e)),Ft(Fn,t)}}function qn(e,t,n){"focusin"===e?(Kn(),Vn=n,(Nn=t).attachEvent("onpropertychange",Zn)):"focusout"===e&&Kn()}function Xn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Un(Vn)}function Yn(e,t){if("click"===e)return Un(t)}function Qn(e,t){if("input"===e||"change"===e)return Un(t)}var $n="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function Jn(e,t){if($n(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!re.call(t,o)||!$n(e[o],t[o]))return!1}return!0}function er(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function tr(e,t){var n,r=er(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=er(r)}}function nr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?nr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function rr(e){for(var t=mt((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=mt((e=t.contentWindow).document)}return t}function or(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var ar=zt&&"documentMode"in document&&11>=document.documentMode,ir=null,sr=null,lr=null,ur=!1;function cr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;ur||null==ir||ir!==mt(r)||("selectionStart"in(r=ir)&&or(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},lr&&Jn(lr,r)||(lr=r,0<(r=rd(sr,"onSelect")).length&&(t=new nn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=ir)))}function dr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var fr={animationend:dr("Animation","AnimationEnd"),animationiteration:dr("Animation","AnimationIteration"),animationstart:dr("Animation","AnimationStart"),transitionrun:dr("Transition","TransitionRun"),transitionstart:dr("Transition","TransitionStart"),transitioncancel:dr("Transition","TransitionCancel"),transitionend:dr("Transition","TransitionEnd")},pr={},hr={};function mr(e){if(pr[e])return pr[e];if(!fr[e])return e;var t,n=fr[e];for(t in n)if(n.hasOwnProperty(t)&&t in hr)return pr[e]=n[t];return e}zt&&(hr=document.createElement("div").style,"AnimationEvent"in window||(delete fr.animationend.animation,delete fr.animationiteration.animation,delete fr.animationstart.animation),"TransitionEvent"in window||delete fr.transitionend.transition);var gr=mr("animationend"),vr=mr("animationiteration"),yr=mr("animationstart"),br=mr("transitionrun"),_r=mr("transitionstart"),Tr=mr("transitioncancel"),xr=mr("transitionend"),Sr=new Map,wr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Cr(e,t){Sr.set(e,t),rt(t,[e])}wr.push("scrollEnd");var Pr="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)},Ar=[],Er=0,Ir=0;function Or(){for(var e=Er,t=Ir=Er=0;t<e;){var n=Ar[t];Ar[t++]=null;var r=Ar[t];Ar[t++]=null;var o=Ar[t];Ar[t++]=null;var a=Ar[t];if(Ar[t++]=null,null!==r&&null!==o){var i=r.pending;null===i?o.next=o:(o.next=i.next,i.next=o),r.pending=o}0!==a&&kr(n,o,a)}}function Mr(e,t,n,r){Ar[Er++]=e,Ar[Er++]=t,Ar[Er++]=n,Ar[Er++]=r,Ir|=r,e.lanes|=r,null!==(e=e.alternate)&&(e.lanes|=r)}function Rr(e,t,n,r){return Mr(e,t,n,r),Dr(e)}function Lr(e,t){return Mr(e,null,null,t),Dr(e)}function kr(e,t,n){e.lanes|=n;var r=e.alternate;null!==r&&(r.lanes|=n);for(var o=!1,a=e.return;null!==a;)a.childLanes|=n,null!==(r=a.alternate)&&(r.childLanes|=n),22===a.tag&&(null===(e=a.stateNode)||1&e._visibility||(o=!0)),e=a,a=a.return;return 3===e.tag?(a=e.stateNode,o&&null!==t&&(o=31-_e(n),null===(r=(e=a.hiddenUpdates)[o])?e[o]=[t]:r.push(t),t.lane=536870912|n),a):null}function Dr(e){if(50<Hu)throw Hu=0,ju=null,Error(i(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var Br={};function Nr(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vr(e,t,n,r){return new Nr(e,t,n,r)}function Fr(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ur(e,t){var n=e.alternate;return null===n?((n=Vr(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=65011712&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function zr(e,t){e.flags&=65011714;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Gr(e,t,n,r,o,a){var s=0;if(r=e,"function"===typeof e)Fr(e)&&(s=1);else if("string"===typeof e)s=function(e,t,n){if(1===n||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!==typeof t.precedence||"string"!==typeof t.href||""===t.href)break;return!0;case"link":if("string"!==typeof t.rel||"string"!==typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"===typeof t.precedence&&null==e);case"script":if(t.async&&"function"!==typeof t.async&&"symbol"!==typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"===typeof t.src)return!0}return!1}(e,n,H.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case A:return(e=Vr(31,n,t,o)).elementType=A,e.lanes=a,e;case v:return Wr(n.children,o,a,t);case y:s=8,o|=24;break;case b:return(e=Vr(12,n,t,2|o)).elementType=b,e.lanes=a,e;case S:return(e=Vr(13,n,t,o)).elementType=S,e.lanes=a,e;case w:return(e=Vr(19,n,t,o)).elementType=w,e.lanes=a,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case T:s=10;break e;case _:s=9;break e;case x:s=11;break e;case C:s=14;break e;case P:s=16,r=null;break e}s=29,n=Error(i(130,null===e?"null":typeof e,"")),r=null}return(t=Vr(s,n,t,o)).elementType=e,t.type=r,t.lanes=a,t}function Wr(e,t,n,r){return(e=Vr(7,e,r,t)).lanes=n,e}function Hr(e,t,n){return(e=Vr(6,e,null,t)).lanes=n,e}function jr(e){var t=Vr(18,null,null,0);return t.stateNode=e,t}function Kr(e,t,n){return(t=Vr(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Zr=new WeakMap;function qr(e,t){if("object"===typeof e&&null!==e){var n=Zr.get(e);return void 0!==n?n:(t={value:e,source:t,stack:ne(t)},Zr.set(e,t),t)}return{value:e,source:t,stack:ne(t)}}var Xr=[],Yr=0,Qr=null,$r=0,Jr=[],eo=0,to=null,no=1,ro="";function oo(e,t){Xr[Yr++]=$r,Xr[Yr++]=Qr,Qr=e,$r=t}function ao(e,t,n){Jr[eo++]=no,Jr[eo++]=ro,Jr[eo++]=to,to=e;var r=no;e=ro;var o=32-_e(r)-1;r&=~(1<<o),n+=1;var a=32-_e(t)+o;if(30<a){var i=o-o%5;a=(r&(1<<i)-1).toString(32),r>>=i,o-=i,no=1<<32-_e(t)+o|n<<o|r,ro=a+e}else no=1<<a|n<<o|r,ro=e}function io(e){null!==e.return&&(oo(e,1),ao(e,1,0))}function so(e){for(;e===Qr;)Qr=Xr[--Yr],Xr[Yr]=null,$r=Xr[--Yr],Xr[Yr]=null;for(;e===to;)to=Jr[--eo],Jr[eo]=null,ro=Jr[--eo],Jr[eo]=null,no=Jr[--eo],Jr[eo]=null}function lo(e,t){Jr[eo++]=no,Jr[eo++]=ro,Jr[eo++]=to,no=t.id,ro=t.overflow,to=e}var uo=null,co=null,fo=!1,po=null,ho=!1,mo=Error(i(519));function go(e){throw xo(qr(Error(i(418,1<arguments.length&&void 0!==arguments[1]&&arguments[1]?"text":"HTML","")),e)),mo}function vo(e){var t=e.stateNode,n=e.type,r=e.memoizedProps;switch(t[ze]=e,t[Ge]=r,n){case"dialog":Yc("cancel",t),Yc("close",t);break;case"iframe":case"object":case"embed":Yc("load",t);break;case"video":case"audio":for(n=0;n<Zc.length;n++)Yc(Zc[n],t);break;case"source":Yc("error",t);break;case"img":case"image":case"link":Yc("error",t),Yc("load",t);break;case"details":Yc("toggle",t);break;case"input":Yc("invalid",t),bt(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0);break;case"select":Yc("invalid",t);break;case"textarea":Yc("invalid",t),St(t,r.value,r.defaultValue,r.children)}"string"!==typeof(n=r.children)&&"number"!==typeof n&&"bigint"!==typeof n||t.textContent===""+n||!0===r.suppressHydrationWarning||ud(t.textContent,n)?(null!=r.popover&&(Yc("beforetoggle",t),Yc("toggle",t)),null!=r.onScroll&&Yc("scroll",t),null!=r.onScrollEnd&&Yc("scrollend",t),null!=r.onClick&&(t.onclick=Rt),t=!0):t=!1,t||go(e,!0)}function yo(e){for(uo=e.return;uo;)switch(uo.tag){case 5:case 31:case 13:return void(ho=!1);case 27:case 3:return void(ho=!0);default:uo=uo.return}}function bo(e){if(e!==uo)return!1;if(!fo)return yo(e),fo=!0,!1;var t,n=e.tag;if((t=3!==n&&27!==n)&&((t=5===n)&&(t=!("form"!==(t=e.type)&&"button"!==t)||bd(e.type,e.memoizedProps)),t=!t),t&&co&&go(e),yo(e),13===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(i(317));co=Dd(e)}else if(31===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(i(317));co=Dd(e)}else 27===n?(n=co,Pd(e.type)?(e=kd,kd=null,co=e):co=n):co=uo?Ld(e.stateNode.nextSibling):null;return!0}function _o(){co=uo=null,fo=!1}function To(){var e=po;return null!==e&&(null===Ou?Ou=e:Ou.push.apply(Ou,e),po=null),e}function xo(e){null===po?po=[e]:po.push(e)}var So=F(null),wo=null,Co=null;function Po(e,t,n){z(So,t._currentValue),t._currentValue=n}function Ao(e){e._currentValue=So.current,U(So)}function Eo(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Io(e,t,n,r){var o=e.child;for(null!==o&&(o.return=e);null!==o;){var a=o.dependencies;if(null!==a){var s=o.child;a=a.firstContext;e:for(;null!==a;){var l=a;a=o;for(var u=0;u<t.length;u++)if(l.context===t[u]){a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),Eo(a.return,n,e),r||(s=null);break e}a=l.next}}else if(18===o.tag){if(null===(s=o.return))throw Error(i(341));s.lanes|=n,null!==(a=s.alternate)&&(a.lanes|=n),Eo(s,n,e),s=null}else s=o.child;if(null!==s)s.return=o;else for(s=o;null!==s;){if(s===e){s=null;break}if(null!==(o=s.sibling)){o.return=s.return,s=o;break}s=s.return}o=s}}function Oo(e,t,n,r){e=null;for(var o=t,a=!1;null!==o;){if(!a)if(0!==(524288&o.flags))a=!0;else if(0!==(262144&o.flags))break;if(10===o.tag){var s=o.alternate;if(null===s)throw Error(i(387));if(null!==(s=s.memoizedProps)){var l=o.type;$n(o.pendingProps.value,s.value)||(null!==e?e.push(l):e=[l])}}else if(o===Z.current){if(null===(s=o.alternate))throw Error(i(387));s.memoizedState.memoizedState!==o.memoizedState.memoizedState&&(null!==e?e.push(df):e=[df])}o=o.return}null!==e&&Io(t,e,n,r),t.flags|=262144}function Mo(e){for(e=e.firstContext;null!==e;){if(!$n(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ro(e){wo=e,Co=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function Lo(e){return Do(wo,e)}function ko(e,t){return null===wo&&Ro(e),Do(e,t)}function Do(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},null===Co){if(null===e)throw Error(i(308));Co=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Co=Co.next=t;return n}var Bo="undefined"!==typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},No=r.unstable_scheduleCallback,Vo=r.unstable_NormalPriority,Fo={$$typeof:T,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Uo(){return{controller:new Bo,data:new Map,refCount:0}}function zo(e){e.refCount--,0===e.refCount&&No(Vo,function(){e.controller.abort()})}var Go=null,Wo=0,Ho=0,jo=null;function Ko(){if(0===--Wo&&null!==Go){null!==jo&&(jo.status="fulfilled");var e=Go;Go=null,Ho=0,jo=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var Zo=k.S;k.S=function(e,t){Lu=le(),"object"===typeof t&&null!==t&&"function"===typeof t.then&&function(e,t){if(null===Go){var n=Go=[];Wo=0,Ho=Gc(),jo={status:"pending",value:void 0,then:function(e){n.push(e)}}}Wo++,t.then(Ko,Ko)}(0,t),null!==Zo&&Zo(e,t)};var qo=F(null);function Xo(){var e=qo.current;return null!==e?e:hu.pooledCache}function Yo(e,t){z(qo,null===t?qo.current:t.pool)}function Qo(){var e=Xo();return null===e?null:{parent:Fo._currentValue,pool:e}}var $o=Error(i(460)),Jo=Error(i(474)),ea=Error(i(542)),ta={then:function(){}};function na(e){return"fulfilled"===(e=e.status)||"rejected"===e}function ra(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then(Rt,Rt),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw sa(e=t.reason),e;default:if("string"===typeof t.status)t.then(Rt,Rt);else{if(null!==(e=hu)&&100<e.shellSuspendCounter)throw Error(i(482));(e=t).status="pending",e.then(function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}},function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw sa(e=t.reason),e}throw aa=t,$o}}function oa(e){try{return(0,e._init)(e._payload)}catch(t){if(null!==t&&"object"===typeof t&&"function"===typeof t.then)throw aa=t,$o;throw t}}var aa=null;function ia(){if(null===aa)throw Error(i(459));var e=aa;return aa=null,e}function sa(e){if(e===$o||e===ea)throw Error(i(483))}var la=null,ua=0;function ca(e){var t=ua;return ua+=1,null===la&&(la=[]),ra(la,e,t)}function da(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function fa(e,t){if(t.$$typeof===h)throw Error(i(525));throw e=Object.prototype.toString.call(t),Error(i(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function pa(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function o(e,t){return(e=Ur(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=67108866,n):r:(t.flags|=67108866,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Hr(n,e.mode,r)).return=e,t):((t=o(t,n)).return=e,t)}function u(e,t,n,r){var a=n.type;return a===v?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===P&&oa(a)===t.type)?(da(t=o(t,n.props),n),t.return=e,t):(da(t=Gr(n.type,n.key,n.props,null,e.mode,r),n),t.return=e,t)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Kr(n,e.mode,r)).return=e,t):((t=o(t,n.children||[])).return=e,t)}function d(e,t,n,r,a){return null===t||7!==t.tag?((t=Wr(n,e.mode,r,a)).return=e,t):((t=o(t,n)).return=e,t)}function f(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t||"bigint"===typeof t)return(t=Hr(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case m:return da(n=Gr(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case g:return(t=Kr(t,e.mode,n)).return=e,t;case P:return f(e,t=oa(t),n)}if(L(t)||O(t))return(t=Wr(t,e.mode,n,null)).return=e,t;if("function"===typeof t.then)return f(e,ca(t),n);if(t.$$typeof===T)return f(e,ko(e,t),n);fa(e,t)}return null}function p(e,t,n,r){var o=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n||"bigint"===typeof n)return null!==o?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case m:return n.key===o?u(e,t,n,r):null;case g:return n.key===o?c(e,t,n,r):null;case P:return p(e,t,n=oa(n),r)}if(L(n)||O(n))return null!==o?null:d(e,t,n,r,null);if("function"===typeof n.then)return p(e,t,ca(n),r);if(n.$$typeof===T)return p(e,t,ko(e,n),r);fa(e,n)}return null}function h(e,t,n,r,o){if("string"===typeof r&&""!==r||"number"===typeof r||"bigint"===typeof r)return l(t,e=e.get(n)||null,""+r,o);if("object"===typeof r&&null!==r){switch(r.$$typeof){case m:return u(t,e=e.get(null===r.key?n:r.key)||null,r,o);case g:return c(t,e=e.get(null===r.key?n:r.key)||null,r,o);case P:return h(e,t,n,r=oa(r),o)}if(L(r)||O(r))return d(t,e=e.get(n)||null,r,o,null);if("function"===typeof r.then)return h(e,t,n,ca(r),o);if(r.$$typeof===T)return h(e,t,n,ko(t,r),o);fa(t,r)}return null}function y(l,u,c,d){if("object"===typeof c&&null!==c&&c.type===v&&null===c.key&&(c=c.props.children),"object"===typeof c&&null!==c){switch(c.$$typeof){case m:e:{for(var b=c.key;null!==u;){if(u.key===b){if((b=c.type)===v){if(7===u.tag){n(l,u.sibling),(d=o(u,c.props.children)).return=l,l=d;break e}}else if(u.elementType===b||"object"===typeof b&&null!==b&&b.$$typeof===P&&oa(b)===u.type){n(l,u.sibling),da(d=o(u,c.props),c),d.return=l,l=d;break e}n(l,u);break}t(l,u),u=u.sibling}c.type===v?((d=Wr(c.props.children,l.mode,d,c.key)).return=l,l=d):(da(d=Gr(c.type,c.key,c.props,null,l.mode,d),c),d.return=l,l=d)}return s(l);case g:e:{for(b=c.key;null!==u;){if(u.key===b){if(4===u.tag&&u.stateNode.containerInfo===c.containerInfo&&u.stateNode.implementation===c.implementation){n(l,u.sibling),(d=o(u,c.children||[])).return=l,l=d;break e}n(l,u);break}t(l,u),u=u.sibling}(d=Kr(c,l.mode,d)).return=l,l=d}return s(l);case P:return y(l,u,c=oa(c),d)}if(L(c))return function(o,i,s,l){for(var u=null,c=null,d=i,m=i=0,g=null;null!==d&&m<s.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var v=p(o,d,s[m],l);if(null===v){null===d&&(d=g);break}e&&d&&null===v.alternate&&t(o,d),i=a(v,i,m),null===c?u=v:c.sibling=v,c=v,d=g}if(m===s.length)return n(o,d),fo&&oo(o,m),u;if(null===d){for(;m<s.length;m++)null!==(d=f(o,s[m],l))&&(i=a(d,i,m),null===c?u=d:c.sibling=d,c=d);return fo&&oo(o,m),u}for(d=r(d);m<s.length;m++)null!==(g=h(d,o,m,s[m],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),i=a(g,i,m),null===c?u=g:c.sibling=g,c=g);return e&&d.forEach(function(e){return t(o,e)}),fo&&oo(o,m),u}(l,u,c,d);if(O(c)){if("function"!==typeof(b=O(c)))throw Error(i(150));return function(o,s,l,u){if(null==l)throw Error(i(151));for(var c=null,d=null,m=s,g=s=0,v=null,y=l.next();null!==m&&!y.done;g++,y=l.next()){m.index>g?(v=m,m=null):v=m.sibling;var b=p(o,m,y.value,u);if(null===b){null===m&&(m=v);break}e&&m&&null===b.alternate&&t(o,m),s=a(b,s,g),null===d?c=b:d.sibling=b,d=b,m=v}if(y.done)return n(o,m),fo&&oo(o,g),c;if(null===m){for(;!y.done;g++,y=l.next())null!==(y=f(o,y.value,u))&&(s=a(y,s,g),null===d?c=y:d.sibling=y,d=y);return fo&&oo(o,g),c}for(m=r(m);!y.done;g++,y=l.next())null!==(y=h(m,o,g,y.value,u))&&(e&&null!==y.alternate&&m.delete(null===y.key?g:y.key),s=a(y,s,g),null===d?c=y:d.sibling=y,d=y);return e&&m.forEach(function(e){return t(o,e)}),fo&&oo(o,g),c}(l,u,c=b.call(c),d)}if("function"===typeof c.then)return y(l,u,ca(c),d);if(c.$$typeof===T)return y(l,u,ko(l,c),d);fa(l,c)}return"string"===typeof c&&""!==c||"number"===typeof c||"bigint"===typeof c?(c=""+c,null!==u&&6===u.tag?(n(l,u.sibling),(d=o(u,c)).return=l,l=d):(n(l,u),(d=Hr(c,l.mode,d)).return=l,l=d),s(l)):n(l,u)}return function(e,t,n,r){try{ua=0;var o=y(e,t,n,r);return la=null,o}catch(i){if(i===$o||i===ea)throw i;var a=Vr(29,i,null,e.mode);return a.lanes=r,a.return=e,a}}}var ha=pa(!0),ma=pa(!1),ga=!1;function va(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ya(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function ba(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function _a(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&pu)){var o=r.pending;return null===o?t.next=t:(t.next=o.next,o.next=t),r.pending=t,t=Dr(e),kr(e,null,n),t}return Mr(e,r,t,n),Dr(e)}function Ta(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194048&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,ke(e,n)}}function xa(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var o=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var i={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===a?o=a=i:a=a.next=i,n=n.next}while(null!==n);null===a?o=a=t:a=a.next=t}else o=a=t;return n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:a,shared:r.shared,callbacks:r.callbacks},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var Sa=!1;function wa(){if(Sa){if(null!==jo)throw jo}}function Ca(e,t,n,r){Sa=!1;var o=e.updateQueue;ga=!1;var a=o.firstBaseUpdate,i=o.lastBaseUpdate,s=o.shared.pending;if(null!==s){o.shared.pending=null;var l=s,u=l.next;l.next=null,null===i?a=u:i.next=u,i=l;var c=e.alternate;null!==c&&((s=(c=c.updateQueue).lastBaseUpdate)!==i&&(null===s?c.firstBaseUpdate=u:s.next=u,c.lastBaseUpdate=l))}if(null!==a){var d=o.baseState;for(i=0,c=u=l=null,s=a;;){var f=-536870913&s.lane,h=f!==s.lane;if(h?(gu&f)===f:(r&f)===f){0!==f&&f===Ho&&(Sa=!0),null!==c&&(c=c.next={lane:0,tag:s.tag,payload:s.payload,callback:null,next:null});e:{var m=e,g=s;f=t;var v=n;switch(g.tag){case 1:if("function"===typeof(m=g.payload)){d=m.call(v,d,f);break e}d=m;break e;case 3:m.flags=-65537&m.flags|128;case 0:if(null===(f="function"===typeof(m=g.payload)?m.call(v,d,f):m)||void 0===f)break e;d=p({},d,f);break e;case 2:ga=!0}}null!==(f=s.callback)&&(e.flags|=64,h&&(e.flags|=8192),null===(h=o.callbacks)?o.callbacks=[f]:h.push(f))}else h={lane:f,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===c?(u=c=h,l=d):c=c.next=h,i|=f;if(null===(s=s.next)){if(null===(s=o.shared.pending))break;s=(h=s).next,h.next=null,o.lastBaseUpdate=h,o.shared.pending=null}}null===c&&(l=d),o.baseState=l,o.firstBaseUpdate=u,o.lastBaseUpdate=c,null===a&&(o.shared.lanes=0),wu|=i,e.lanes=i,e.memoizedState=d}}function Pa(e,t){if("function"!==typeof e)throw Error(i(191,e));e.call(t)}function Aa(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)Pa(n[e],t)}var Ea=F(null),Ia=F(0);function Oa(e,t){z(Ia,e=xu),z(Ea,t),xu=e|t.baseLanes}function Ma(){z(Ia,xu),z(Ea,Ea.current)}function Ra(){xu=Ia.current,U(Ea),U(Ia)}var La=F(null),ka=null;function Da(e){var t=e.alternate;z(Ua,1&Ua.current),z(La,e),null===ka&&(null===t||null!==Ea.current||null!==t.memoizedState)&&(ka=e)}function Ba(e){z(Ua,Ua.current),z(La,e),null===ka&&(ka=e)}function Na(e){22===e.tag?(z(Ua,Ua.current),z(La,e),null===ka&&(ka=e)):Va()}function Va(){z(Ua,Ua.current),z(La,La.current)}function Fa(e){U(La),ka===e&&(ka=null),U(Ua)}var Ua=F(0);function za(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||Md(n)||Rd(n)))return t}else if(19!==t.tag||"forwards"!==t.memoizedProps.revealOrder&&"backwards"!==t.memoizedProps.revealOrder&&"unstable_legacy-backwards"!==t.memoizedProps.revealOrder&&"together"!==t.memoizedProps.revealOrder){if(null!==t.child){t.child.return=t,t=t.child;continue}}else if(0!==(128&t.flags))return t;if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ga=0,Wa=null,Ha=null,ja=null,Ka=!1,Za=!1,qa=!1,Xa=0,Ya=0,Qa=null,$a=0;function Ja(){throw Error(i(321))}function ei(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!$n(e[n],t[n]))return!1;return!0}function ti(e,t,n,r,o,a){return Ga=a,Wa=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,k.H=null===e||null===e.memoizedState?gs:vs,qa=!1,a=n(r,o),qa=!1,Za&&(a=ri(t,n,r,o)),ni(e),a}function ni(e){k.H=ms;var t=null!==Ha&&null!==Ha.next;if(Ga=0,ja=Ha=Wa=null,Ka=!1,Ya=0,Qa=null,t)throw Error(i(300));null===e||Ls||null!==(e=e.dependencies)&&Mo(e)&&(Ls=!0)}function ri(e,t,n,r){Wa=e;var o=0;do{if(Za&&(Qa=null),Ya=0,Za=!1,25<=o)throw Error(i(301));if(o+=1,ja=Ha=null,null!=e.updateQueue){var a=e.updateQueue;a.lastEffect=null,a.events=null,a.stores=null,null!=a.memoCache&&(a.memoCache.index=0)}k.H=ys,a=t(n,r)}while(Za);return a}function oi(){var e=k.H,t=e.useState()[0];return t="function"===typeof t.then?ci(t):t,e=e.useState()[0],(null!==Ha?Ha.memoizedState:null)!==e&&(Wa.flags|=1024),t}function ai(){var e=0!==Xa;return Xa=0,e}function ii(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function si(e){if(Ka){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}Ka=!1}Ga=0,ja=Ha=Wa=null,Za=!1,Ya=Xa=0,Qa=null}function li(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ja?Wa.memoizedState=ja=e:ja=ja.next=e,ja}function ui(){if(null===Ha){var e=Wa.alternate;e=null!==e?e.memoizedState:null}else e=Ha.next;var t=null===ja?Wa.memoizedState:ja.next;if(null!==t)ja=t,Ha=e;else{if(null===e){if(null===Wa.alternate)throw Error(i(467));throw Error(i(310))}e={memoizedState:(Ha=e).memoizedState,baseState:Ha.baseState,baseQueue:Ha.baseQueue,queue:Ha.queue,next:null},null===ja?Wa.memoizedState=ja=e:ja=ja.next=e}return ja}function ci(e){var t=Ya;return Ya+=1,null===Qa&&(Qa=[]),e=ra(Qa,e,t),t=Wa,null===(null===ja?t.memoizedState:ja.next)&&(t=t.alternate,k.H=null===t||null===t.memoizedState?gs:vs),e}function di(e){if(null!==e&&"object"===typeof e){if("function"===typeof e.then)return ci(e);if(e.$$typeof===T)return Lo(e)}throw Error(i(438,String(e)))}function fi(e){var t=null,n=Wa.updateQueue;if(null!==n&&(t=n.memoCache),null==t){var r=Wa.alternate;null!==r&&(null!==(r=r.updateQueue)&&(null!=(r=r.memoCache)&&(t={data:r.data.map(function(e){return e.slice()}),index:0})))}if(null==t&&(t={data:[],index:0}),null===n&&(n={lastEffect:null,events:null,stores:null,memoCache:null},Wa.updateQueue=n),n.memoCache=t,void 0===(n=t.data[t.index]))for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=E;return t.index++,n}function pi(e,t){return"function"===typeof t?t(e):t}function hi(e){return mi(ui(),Ha,e)}function mi(e,t,n){var r=e.queue;if(null===r)throw Error(i(311));r.lastRenderedReducer=n;var o=e.baseQueue,a=r.pending;if(null!==a){if(null!==o){var s=o.next;o.next=a.next,a.next=s}t.baseQueue=o=a,r.pending=null}if(a=e.baseState,null===o)e.memoizedState=a;else{var l=s=null,u=null,c=t=o.next,d=!1;do{var f=-536870913&c.lane;if(f!==c.lane?(gu&f)===f:(Ga&f)===f){var p=c.revertLane;if(0===p)null!==u&&(u=u.next={lane:0,revertLane:0,gesture:null,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),f===Ho&&(d=!0);else{if((Ga&p)===p){c=c.next,p===Ho&&(d=!0);continue}f={lane:0,revertLane:c.revertLane,gesture:null,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},null===u?(l=u=f,s=a):u=u.next=f,Wa.lanes|=p,wu|=p}f=c.action,qa&&n(a,f),a=c.hasEagerState?c.eagerState:n(a,f)}else p={lane:f,revertLane:c.revertLane,gesture:c.gesture,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},null===u?(l=u=p,s=a):u=u.next=p,Wa.lanes|=f,wu|=f;c=c.next}while(null!==c&&c!==t);if(null===u?s=a:u.next=l,!$n(a,e.memoizedState)&&(Ls=!0,d&&null!==(n=jo)))throw n;e.memoizedState=a,e.baseState=s,e.baseQueue=u,r.lastRenderedState=a}return null===o&&(r.lanes=0),[e.memoizedState,r.dispatch]}function gi(e){var t=ui(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=n.dispatch,o=n.pending,a=t.memoizedState;if(null!==o){n.pending=null;var s=o=o.next;do{a=e(a,s.action),s=s.next}while(s!==o);$n(a,t.memoizedState)||(Ls=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function vi(e,t,n){var r=Wa,o=ui(),a=fo;if(a){if(void 0===n)throw Error(i(407));n=n()}else n=t();var s=!$n((Ha||o).memoizedState,n);if(s&&(o.memoizedState=n,Ls=!0),o=o.queue,Gi(_i.bind(null,r,o,e),[e]),o.getSnapshot!==t||s||null!==ja&&1&ja.memoizedState.tag){if(r.flags|=2048,Ni(9,{destroy:void 0},bi.bind(null,r,o,n,t),null),null===hu)throw Error(i(349));a||0!==(127&Ga)||yi(r,t,n)}return n}function yi(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=Wa.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},Wa.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function bi(e,t,n,r){t.value=n,t.getSnapshot=r,Ti(t)&&xi(e)}function _i(e,t,n){return n(function(){Ti(t)&&xi(e)})}function Ti(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!$n(e,n)}catch(r){return!0}}function xi(e){var t=Lr(e,2);null!==t&&qu(t,e,2)}function Si(e){var t=li();if("function"===typeof e){var n=e;if(e=n(),qa){be(!0);try{n()}finally{be(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:pi,lastRenderedState:e},t}function wi(e,t,n,r){return e.baseState=n,mi(e,Ha,"function"===typeof r?r:pi)}function Ci(e,t,n,r,o){if(fs(e))throw Error(i(485));if(null!==(e=t.action)){var a={payload:o,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){a.listeners.push(e)}};null!==k.T?n(!0):a.isTransition=!1,r(a),null===(n=t.pending)?(a.next=t.pending=a,Pi(t,a)):(a.next=n.next,t.pending=n.next=a)}}function Pi(e,t){var n=t.action,r=t.payload,o=e.state;if(t.isTransition){var a=k.T,i={};k.T=i;try{var s=n(o,r),l=k.S;null!==l&&l(i,s),Ai(e,t,s)}catch(u){Ii(e,t,u)}finally{null!==a&&null!==i.types&&(a.types=i.types),k.T=a}}else try{Ai(e,t,a=n(o,r))}catch(c){Ii(e,t,c)}}function Ai(e,t,n){null!==n&&"object"===typeof n&&"function"===typeof n.then?n.then(function(n){Ei(e,t,n)},function(n){return Ii(e,t,n)}):Ei(e,t,n)}function Ei(e,t,n){t.status="fulfilled",t.value=n,Oi(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,Pi(e,n)))}function Ii(e,t,n){var r=e.pending;if(e.pending=null,null!==r){r=r.next;do{t.status="rejected",t.reason=n,Oi(t),t=t.next}while(t!==r)}e.action=null}function Oi(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Mi(e,t){return t}function Ri(e,t){if(fo){var n=hu.formState;if(null!==n){e:{var r=Wa;if(fo){if(co){t:{for(var o=co,a=ho;8!==o.nodeType;){if(!a){o=null;break t}if(null===(o=Ld(o.nextSibling))){o=null;break t}}o="F!"===(a=o.data)||"F"===a?o:null}if(o){co=Ld(o.nextSibling),r="F!"===o.data;break e}}go(r)}r=!1}r&&(t=n[0])}}return(n=li()).memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mi,lastRenderedState:t},n.queue=r,n=us.bind(null,Wa,r),r.dispatch=n,r=Si(!1),a=ds.bind(null,Wa,!1,r.queue),o={state:t,dispatch:null,action:e,pending:null},(r=li()).queue=o,n=Ci.bind(null,Wa,o,a,n),o.dispatch=n,r.memoizedState=e,[t,n,!1]}function Li(e){return ki(ui(),Ha,e)}function ki(e,t,n){if(t=mi(e,t,Mi)[0],e=hi(pi)[0],"object"===typeof t&&null!==t&&"function"===typeof t.then)try{var r=ci(t)}catch(i){if(i===$o)throw ea;throw i}else r=t;var o=(t=ui()).queue,a=o.dispatch;return n!==t.memoizedState&&(Wa.flags|=2048,Ni(9,{destroy:void 0},Di.bind(null,o,n),null)),[r,a,e]}function Di(e,t){e.action=t}function Bi(e){var t=ui(),n=Ha;if(null!==n)return ki(t,n,e);ui(),t=t.memoizedState;var r=(n=ui()).queue.dispatch;return n.memoizedState=e,[t,r,!1]}function Ni(e,t,n,r){return e={tag:e,create:n,deps:r,inst:t,next:null},null===(t=Wa.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},Wa.updateQueue=t),null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Vi(){return ui().memoizedState}function Fi(e,t,n,r){var o=li();Wa.flags|=e,o.memoizedState=Ni(1|t,{destroy:void 0},n,void 0===r?null:r)}function Ui(e,t,n,r){var o=ui();r=void 0===r?null:r;var a=o.memoizedState.inst;null!==Ha&&null!==r&&ei(r,Ha.memoizedState.deps)?o.memoizedState=Ni(t,a,n,r):(Wa.flags|=e,o.memoizedState=Ni(1|t,a,n,r))}function zi(e,t){Fi(8390656,8,e,t)}function Gi(e,t){Ui(2048,8,e,t)}function Wi(e){var t=ui().memoizedState;return function(e){Wa.flags|=4;var t=Wa.updateQueue;if(null===t)t={lastEffect:null,events:null,stores:null,memoCache:null},Wa.updateQueue=t,t.events=[e];else{var n=t.events;null===n?t.events=[e]:n.push(e)}}({ref:t,nextImpl:e}),function(){if(0!==(2&pu))throw Error(i(440));return t.impl.apply(void 0,arguments)}}function Hi(e,t){return Ui(4,2,e,t)}function ji(e,t){return Ui(4,4,e,t)}function Ki(e,t){if("function"===typeof t){e=e();var n=t(e);return function(){"function"===typeof n?n():t(null)}}if(null!==t&&void 0!==t)return e=e(),t.current=e,function(){t.current=null}}function Zi(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,Ui(4,4,Ki.bind(null,t,e),n)}function qi(){}function Xi(e,t){var n=ui();t=void 0===t?null:t;var r=n.memoizedState;return null!==t&&ei(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Yi(e,t){var n=ui();t=void 0===t?null:t;var r=n.memoizedState;if(null!==t&&ei(t,r[1]))return r[0];if(r=e(),qa){be(!0);try{e()}finally{be(!1)}}return n.memoizedState=[r,t],r}function Qi(e,t,n){return void 0===n||0!==(1073741824&Ga)&&0===(261930&gu)?e.memoizedState=t:(e.memoizedState=n,e=Zu(),Wa.lanes|=e,wu|=e,n)}function $i(e,t,n,r){return $n(n,t)?n:null!==Ea.current?(e=Qi(e,n,r),$n(e,t)||(Ls=!0),e):0===(42&Ga)||0!==(1073741824&Ga)&&0===(261930&gu)?(Ls=!0,e.memoizedState=n):(e=Zu(),Wa.lanes|=e,wu|=e,t)}function Ji(e,t,n,r,o){var a=D.p;D.p=0!==a&&8>a?a:8;var i=k.T,s={};k.T=s,ds(e,!1,t,n);try{var l=o(),u=k.S;if(null!==u&&u(s,l),null!==l&&"object"===typeof l&&"function"===typeof l.then)cs(e,t,function(e,t){var n=[],r={status:"pending",value:null,reason:null,then:function(e){n.push(e)}};return e.then(function(){r.status="fulfilled",r.value=t;for(var e=0;e<n.length;e++)(0,n[e])(t)},function(e){for(r.status="rejected",r.reason=e,e=0;e<n.length;e++)(0,n[e])(void 0)}),r}(l,r),Ku());else cs(e,t,r,Ku())}catch(c){cs(e,t,{then:function(){},status:"rejected",reason:c},Ku())}finally{D.p=a,null!==i&&null!==s.types&&(i.types=s.types),k.T=i}}function es(){}function ts(e,t,n,r){if(5!==e.tag)throw Error(i(476));var o=ns(e).queue;Ji(e,o,t,B,null===n?es:function(){return rs(e),n(r)})}function ns(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:B,baseState:B,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:pi,lastRenderedState:B},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:pi,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function rs(e){var t=ns(e);null===t.next&&(t=e.alternate.memoizedState),cs(e,t.next.queue,{},Ku())}function os(){return Lo(df)}function as(){return ui().memoizedState}function is(){return ui().memoizedState}function ss(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=Ku(),r=_a(t,e=ba(n),n);return null!==r&&(qu(r,t,n),Ta(r,t,n)),t={cache:Uo()},void(e.payload=t)}t=t.return}}function ls(e,t,n){var r=Ku();n={lane:r,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},fs(e)?ps(t,n):null!==(n=Rr(e,t,n,r))&&(qu(n,e,r),hs(n,t,r))}function us(e,t,n){cs(e,t,n,Ku())}function cs(e,t,n,r){var o={lane:r,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(fs(e))ps(t,o);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var i=t.lastRenderedState,s=a(i,n);if(o.hasEagerState=!0,o.eagerState=s,$n(s,i))return Mr(e,t,o,0),null===hu&&Or(),!1}catch(l){}if(null!==(n=Rr(e,t,o,r)))return qu(n,e,r),hs(n,t,r),!0}return!1}function ds(e,t,n,r){if(r={lane:2,revertLane:Gc(),gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},fs(e)){if(t)throw Error(i(479))}else null!==(t=Rr(e,n,r,2))&&qu(t,e,2)}function fs(e){var t=e.alternate;return e===Wa||null!==t&&t===Wa}function ps(e,t){Za=Ka=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function hs(e,t,n){if(0!==(4194048&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,ke(e,n)}}var ms={readContext:Lo,use:di,useCallback:Ja,useContext:Ja,useEffect:Ja,useImperativeHandle:Ja,useLayoutEffect:Ja,useInsertionEffect:Ja,useMemo:Ja,useReducer:Ja,useRef:Ja,useState:Ja,useDebugValue:Ja,useDeferredValue:Ja,useTransition:Ja,useSyncExternalStore:Ja,useId:Ja,useHostTransitionStatus:Ja,useFormState:Ja,useActionState:Ja,useOptimistic:Ja,useMemoCache:Ja,useCacheRefresh:Ja};ms.useEffectEvent=Ja;var gs={readContext:Lo,use:di,useCallback:function(e,t){return li().memoizedState=[e,void 0===t?null:t],e},useContext:Lo,useEffect:zi,useImperativeHandle:function(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,Fi(4194308,4,Ki.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Fi(4194308,4,e,t)},useInsertionEffect:function(e,t){Fi(4,2,e,t)},useMemo:function(e,t){var n=li();t=void 0===t?null:t;var r=e();if(qa){be(!0);try{e()}finally{be(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=li();if(void 0!==n){var o=n(t);if(qa){be(!0);try{n(t)}finally{be(!1)}}}else o=t;return r.memoizedState=r.baseState=o,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:o},r.queue=e,e=e.dispatch=ls.bind(null,Wa,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},li().memoizedState=e},useState:function(e){var t=(e=Si(e)).queue,n=us.bind(null,Wa,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:qi,useDeferredValue:function(e,t){return Qi(li(),e,t)},useTransition:function(){var e=Si(!1);return e=Ji.bind(null,Wa,e.queue,!0,!1),li().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var r=Wa,o=li();if(fo){if(void 0===n)throw Error(i(407));n=n()}else{if(n=t(),null===hu)throw Error(i(349));0!==(127&gu)||yi(r,t,n)}o.memoizedState=n;var a={value:n,getSnapshot:t};return o.queue=a,zi(_i.bind(null,r,a,e),[e]),r.flags|=2048,Ni(9,{destroy:void 0},bi.bind(null,r,a,n,t),null),n},useId:function(){var e=li(),t=hu.identifierPrefix;if(fo){var n=ro;t="_"+t+"R_"+(n=(no&~(1<<32-_e(no)-1)).toString(32)+n),0<(n=Xa++)&&(t+="H"+n.toString(32)),t+="_"}else t="_"+t+"r_"+(n=$a++).toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:os,useFormState:Ri,useActionState:Ri,useOptimistic:function(e){var t=li();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=ds.bind(null,Wa,!0,n),n.dispatch=t,[e,t]},useMemoCache:fi,useCacheRefresh:function(){return li().memoizedState=ss.bind(null,Wa)},useEffectEvent:function(e){var t=li(),n={impl:e};return t.memoizedState=n,function(){if(0!==(2&pu))throw Error(i(440));return n.impl.apply(void 0,arguments)}}},vs={readContext:Lo,use:di,useCallback:Xi,useContext:Lo,useEffect:Gi,useImperativeHandle:Zi,useInsertionEffect:Hi,useLayoutEffect:ji,useMemo:Yi,useReducer:hi,useRef:Vi,useState:function(){return hi(pi)},useDebugValue:qi,useDeferredValue:function(e,t){return $i(ui(),Ha.memoizedState,e,t)},useTransition:function(){var e=hi(pi)[0],t=ui().memoizedState;return["boolean"===typeof e?e:ci(e),t]},useSyncExternalStore:vi,useId:as,useHostTransitionStatus:os,useFormState:Li,useActionState:Li,useOptimistic:function(e,t){return wi(ui(),0,e,t)},useMemoCache:fi,useCacheRefresh:is};vs.useEffectEvent=Wi;var ys={readContext:Lo,use:di,useCallback:Xi,useContext:Lo,useEffect:Gi,useImperativeHandle:Zi,useInsertionEffect:Hi,useLayoutEffect:ji,useMemo:Yi,useReducer:gi,useRef:Vi,useState:function(){return gi(pi)},useDebugValue:qi,useDeferredValue:function(e,t){var n=ui();return null===Ha?Qi(n,e,t):$i(n,Ha.memoizedState,e,t)},useTransition:function(){var e=gi(pi)[0],t=ui().memoizedState;return["boolean"===typeof e?e:ci(e),t]},useSyncExternalStore:vi,useId:as,useHostTransitionStatus:os,useFormState:Bi,useActionState:Bi,useOptimistic:function(e,t){var n=ui();return null!==Ha?wi(n,0,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:fi,useCacheRefresh:is};function bs(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:p({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}ys.useEffectEvent=Wi;var _s={enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Ku(),o=ba(r);o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=_a(e,o,r))&&(qu(t,e,r),Ta(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Ku(),o=ba(r);o.tag=1,o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=_a(e,o,r))&&(qu(t,e,r),Ta(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Ku(),r=ba(n);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=_a(e,r,n))&&(qu(t,e,n),Ta(t,e,n))}};function Ts(e,t,n,r,o,a,i){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,i):!t.prototype||!t.prototype.isPureReactComponent||(!Jn(n,r)||!Jn(o,a))}function xs(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&_s.enqueueReplaceState(t,t.state,null)}function Ss(e,t){var n=t;if("ref"in t)for(var r in n={},t)"ref"!==r&&(n[r]=t[r]);if(e=e.defaultProps)for(var o in n===t&&(n=p({},n)),e)void 0===n[o]&&(n[o]=e[o]);return n}function ws(e){Pr(e)}function Cs(e){console.error(e)}function Ps(e){Pr(e)}function As(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(n){setTimeout(function(){throw n})}}function Es(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function Is(e,t,n){return(n=ba(n)).tag=3,n.payload={element:null},n.callback=function(){As(e,t)},n}function Os(e){return(e=ba(e)).tag=3,e}function Ms(e,t,n,r){var o=n.type.getDerivedStateFromError;if("function"===typeof o){var a=r.value;e.payload=function(){return o(a)},e.callback=function(){Es(t,n,r)}}var i=n.stateNode;null!==i&&"function"===typeof i.componentDidCatch&&(e.callback=function(){Es(t,n,r),"function"!==typeof o&&(null===Bu?Bu=new Set([this]):Bu.add(this));var e=r.stack;this.componentDidCatch(r.value,{componentStack:null!==e?e:""})})}var Rs=Error(i(461)),Ls=!1;function ks(e,t,n,r){t.child=null===e?ma(t,null,n,r):ha(t,e.child,n,r)}function Ds(e,t,n,r,o){n=n.render;var a=t.ref;if("ref"in r){var i={};for(var s in r)"ref"!==s&&(i[s]=r[s])}else i=r;return Ro(t),r=ti(e,t,n,i,a,o),s=ai(),null===e||Ls?(fo&&s&&io(t),t.flags|=1,ks(e,t,r,o),t.child):(ii(e,t,o),ol(e,t,o))}function Bs(e,t,n,r,o){if(null===e){var a=n.type;return"function"!==typeof a||Fr(a)||void 0!==a.defaultProps||null!==n.compare?((e=Gr(n.type,null,r,t,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Ns(e,t,a,r,o))}if(a=e.child,!al(e,o)){var i=a.memoizedProps;if((n=null!==(n=n.compare)?n:Jn)(i,r)&&e.ref===t.ref)return ol(e,t,o)}return t.flags|=1,(e=Ur(a,r)).ref=t.ref,e.return=t,t.child=e}function Ns(e,t,n,r,o){if(null!==e){var a=e.memoizedProps;if(Jn(a,r)&&e.ref===t.ref){if(Ls=!1,t.pendingProps=r=a,!al(e,o))return t.lanes=e.lanes,ol(e,t,o);0!==(131072&e.flags)&&(Ls=!0)}}return Hs(e,t,n,r,o)}function Vs(e,t,n,r){var o=r.children,a=null!==e?e.memoizedState:null;if(null===e&&null===t.stateNode&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),"hidden"===r.mode){if(0!==(128&t.flags)){if(a=null!==a?a.baseLanes|n:n,null!==e){for(r=t.child=e.child,o=0;null!==r;)o=o|r.lanes|r.childLanes,r=r.sibling;r=o&~a}else r=0,t.child=null;return Us(e,t,a,n,r)}if(0===(536870912&n))return r=t.lanes=536870912,Us(e,t,null!==a?a.baseLanes|n:n,n,r);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&Yo(0,null!==a?a.cachePool:null),null!==a?Oa(t,a):Ma(),Na(t)}else null!==a?(Yo(0,a.cachePool),Oa(t,a),Va(),t.memoizedState=null):(null!==e&&Yo(0,null),Ma(),Va());return ks(e,t,o,n),t.child}function Fs(e,t){return null!==e&&22===e.tag||null!==t.stateNode||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function Us(e,t,n,r,o){var a=Xo();return a=null===a?null:{parent:Fo._currentValue,pool:a},t.memoizedState={baseLanes:n,cachePool:a},null!==e&&Yo(0,null),Ma(),Na(t),null!==e&&Oo(e,t,r,!0),t.childLanes=o,null}function zs(e,t){return(t=Js({mode:t.mode,children:t.children},e.mode)).ref=e.ref,e.child=t,t.return=e,t}function Gs(e,t,n){return ha(t,e.child,null,n),(e=zs(t,t.pendingProps)).flags|=2,Fa(t),t.memoizedState=null,e}function Ws(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!==typeof n&&"object"!==typeof n)throw Error(i(284));null!==e&&e.ref===n||(t.flags|=4194816)}}function Hs(e,t,n,r,o){return Ro(t),n=ti(e,t,n,r,void 0,o),r=ai(),null===e||Ls?(fo&&r&&io(t),t.flags|=1,ks(e,t,n,o),t.child):(ii(e,t,o),ol(e,t,o))}function js(e,t,n,r,o,a){return Ro(t),t.updateQueue=null,n=ri(t,r,n,o),ni(e),r=ai(),null===e||Ls?(fo&&r&&io(t),t.flags|=1,ks(e,t,n,a),t.child):(ii(e,t,a),ol(e,t,a))}function Ks(e,t,n,r,o){if(Ro(t),null===t.stateNode){var a=Br,i=n.contextType;"object"===typeof i&&null!==i&&(a=Lo(i)),a=new n(r,a),t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,a.updater=_s,t.stateNode=a,a._reactInternals=t,(a=t.stateNode).props=r,a.state=t.memoizedState,a.refs={},va(t),i=n.contextType,a.context="object"===typeof i&&null!==i?Lo(i):Br,a.state=t.memoizedState,"function"===typeof(i=n.getDerivedStateFromProps)&&(bs(t,n,i,r),a.state=t.memoizedState),"function"===typeof n.getDerivedStateFromProps||"function"===typeof a.getSnapshotBeforeUpdate||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||(i=a.state,"function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),i!==a.state&&_s.enqueueReplaceState(a,a.state,null),Ca(t,r,a,o),wa(),a.state=t.memoizedState),"function"===typeof a.componentDidMount&&(t.flags|=4194308),r=!0}else if(null===e){a=t.stateNode;var s=t.memoizedProps,l=Ss(n,s);a.props=l;var u=a.context,c=n.contextType;i=Br,"object"===typeof c&&null!==c&&(i=Lo(c));var d=n.getDerivedStateFromProps;c="function"===typeof d||"function"===typeof a.getSnapshotBeforeUpdate,s=t.pendingProps!==s,c||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s||u!==i)&&xs(t,a,r,i),ga=!1;var f=t.memoizedState;a.state=f,Ca(t,r,a,o),wa(),u=t.memoizedState,s||f!==u||ga?("function"===typeof d&&(bs(t,n,d,r),u=t.memoizedState),(l=ga||Ts(t,n,l,r,f,u,i))?(c||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),a.props=r,a.state=u,a.context=i,r=l):("function"===typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,ya(e,t),c=Ss(n,i=t.memoizedProps),a.props=c,d=t.pendingProps,f=a.context,u=n.contextType,l=Br,"object"===typeof u&&null!==u&&(l=Lo(u)),(u="function"===typeof(s=n.getDerivedStateFromProps)||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(i!==d||f!==l)&&xs(t,a,r,l),ga=!1,f=t.memoizedState,a.state=f,Ca(t,r,a,o),wa();var p=t.memoizedState;i!==d||f!==p||ga||null!==e&&null!==e.dependencies&&Mo(e.dependencies)?("function"===typeof s&&(bs(t,n,s,r),p=t.memoizedState),(c=ga||Ts(t,n,c,r,f,p,l)||null!==e&&null!==e.dependencies&&Mo(e.dependencies))?(u||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,p,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||i===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||i===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=l,r=c):("function"!==typeof a.componentDidUpdate||i===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||i===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return a=r,Ws(e,t),r=0!==(128&t.flags),a||r?(a=t.stateNode,n=r&&"function"!==typeof n.getDerivedStateFromError?null:a.render(),t.flags|=1,null!==e&&r?(t.child=ha(t,e.child,null,o),t.child=ha(t,null,n,o)):ks(e,t,n,o),t.memoizedState=a.state,e=t.child):e=ol(e,t,o),e}function Zs(e,t,n,r){return _o(),t.flags|=256,ks(e,t,n,r),t.child}var qs={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Xs(e){return{baseLanes:e,cachePool:Qo()}}function Ys(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=Au),e}function Qs(e,t,n){var r,o=t.pendingProps,a=!1,s=0!==(128&t.flags);if((r=s)||(r=(null===e||null!==e.memoizedState)&&0!==(2&Ua.current)),r&&(a=!0,t.flags&=-129),r=0!==(32&t.flags),t.flags&=-33,null===e){if(fo){if(a?Da(t):Va(),(e=co)?null!==(e=null!==(e=Od(e,ho))&&"&"!==e.data?e:null)&&(t.memoizedState={dehydrated:e,treeContext:null!==to?{id:no,overflow:ro}:null,retryLane:536870912,hydrationErrors:null},(n=jr(e)).return=t,t.child=n,uo=t,co=null):e=null,null===e)throw go(t);return Rd(e)?t.lanes=32:t.lanes=536870912,null}var l=o.children;return o=o.fallback,a?(Va(),l=Js({mode:"hidden",children:l},a=t.mode),o=Wr(o,a,n,null),l.return=t,o.return=t,l.sibling=o,t.child=l,(o=t.child).memoizedState=Xs(n),o.childLanes=Ys(e,r,n),t.memoizedState=qs,Fs(null,o)):(Da(t),$s(t,l))}var u=e.memoizedState;if(null!==u&&null!==(l=u.dehydrated)){if(s)256&t.flags?(Da(t),t.flags&=-257,t=el(e,t,n)):null!==t.memoizedState?(Va(),t.child=e.child,t.flags|=128,t=null):(Va(),l=o.fallback,a=t.mode,o=Js({mode:"visible",children:o.children},a),(l=Wr(l,a,n,null)).flags|=2,o.return=t,l.return=t,o.sibling=l,t.child=o,ha(t,e.child,null,n),(o=t.child).memoizedState=Xs(n),o.childLanes=Ys(e,r,n),t.memoizedState=qs,t=Fs(null,o));else if(Da(t),Rd(l)){if(r=l.nextSibling&&l.nextSibling.dataset)var c=r.dgst;r=c,(o=Error(i(419))).stack="",o.digest=r,xo({value:o,source:null,stack:null}),t=el(e,t,n)}else if(Ls||Oo(e,t,n,!1),r=0!==(n&e.childLanes),Ls||r){if(null!==(r=hu)&&(0!==(o=De(r,n))&&o!==u.retryLane))throw u.retryLane=o,Lr(e,o),qu(r,e,o),Rs;Md(l)||ic(),t=el(e,t,n)}else Md(l)?(t.flags|=192,t.child=e.child,t=null):(e=u.treeContext,co=Ld(l.nextSibling),uo=t,fo=!0,po=null,ho=!1,null!==e&&lo(t,e),(t=$s(t,o.children)).flags|=4096);return t}return a?(Va(),l=o.fallback,a=t.mode,c=(u=e.child).sibling,(o=Ur(u,{mode:"hidden",children:o.children})).subtreeFlags=65011712&u.subtreeFlags,null!==c?l=Ur(c,l):(l=Wr(l,a,n,null)).flags|=2,l.return=t,o.return=t,o.sibling=l,t.child=o,Fs(null,o),o=t.child,null===(l=e.child.memoizedState)?l=Xs(n):(null!==(a=l.cachePool)?(u=Fo._currentValue,a=a.parent!==u?{parent:u,pool:u}:a):a=Qo(),l={baseLanes:l.baseLanes|n,cachePool:a}),o.memoizedState=l,o.childLanes=Ys(e,r,n),t.memoizedState=qs,Fs(e.child,o)):(Da(t),e=(n=e.child).sibling,(n=Ur(n,{mode:"visible",children:o.children})).return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n)}function $s(e,t){return(t=Js({mode:"visible",children:t},e.mode)).return=e,e.child=t}function Js(e,t){return(e=Vr(22,e,null,t)).lanes=0,e}function el(e,t,n){return ha(t,e.child,null,n),(e=$s(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function tl(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Eo(e.return,t,n)}function nl(e,t,n,r,o,a){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o,treeForkCount:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=o,i.treeForkCount=a)}function rl(e,t,n){var r=t.pendingProps,o=r.revealOrder,a=r.tail;r=r.children;var i=Ua.current,s=0!==(2&i);if(s?(i=1&i|2,t.flags|=128):i&=1,z(Ua,i),ks(e,t,r,n),r=fo?$r:0,!s&&null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&tl(e,n,t);else if(19===e.tag)tl(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(o){case"forwards":for(n=t.child,o=null;null!==n;)null!==(e=n.alternate)&&null===za(e)&&(o=n),n=n.sibling;null===(n=o)?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),nl(t,!1,o,n,a,r);break;case"backwards":case"unstable_legacy-backwards":for(n=null,o=t.child,t.child=null;null!==o;){if(null!==(e=o.alternate)&&null===za(e)){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}nl(t,!0,n,null,a,r);break;case"together":nl(t,!1,null,null,void 0,r);break;default:t.memoizedState=null}return t.child}function ol(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),wu|=t.lanes,0===(n&t.childLanes)){if(null===e)return null;if(Oo(e,t,n,!1),0===(n&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(i(153));if(null!==t.child){for(n=Ur(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Ur(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function al(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!Mo(e))}function il(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps)Ls=!0;else{if(!al(e,n)&&0===(128&t.flags))return Ls=!1,function(e,t,n){switch(t.tag){case 3:q(t,t.stateNode.containerInfo),Po(0,Fo,e.memoizedState.cache),_o();break;case 27:case 5:Y(t);break;case 4:q(t,t.stateNode.containerInfo);break;case 10:Po(0,t.type,t.memoizedProps.value);break;case 31:if(null!==t.memoizedState)return t.flags|=128,Ba(t),null;break;case 13:var r=t.memoizedState;if(null!==r)return null!==r.dehydrated?(Da(t),t.flags|=128,null):0!==(n&t.child.childLanes)?Qs(e,t,n):(Da(t),null!==(e=ol(e,t,n))?e.sibling:null);Da(t);break;case 19:var o=0!==(128&e.flags);if((r=0!==(n&t.childLanes))||(Oo(e,t,n,!1),r=0!==(n&t.childLanes)),o){if(r)return rl(e,t,n);t.flags|=128}if(null!==(o=t.memoizedState)&&(o.rendering=null,o.tail=null,o.lastEffect=null),z(Ua,Ua.current),r)break;return null;case 22:return t.lanes=0,Vs(e,t,n,t.pendingProps);case 24:Po(0,Fo,e.memoizedState.cache)}return ol(e,t,n)}(e,t,n);Ls=0!==(131072&e.flags)}else Ls=!1,fo&&0!==(1048576&t.flags)&&ao(t,$r,t.index);switch(t.lanes=0,t.tag){case 16:e:{var r=t.pendingProps;if(e=oa(t.elementType),t.type=e,"function"!==typeof e){if(void 0!==e&&null!==e){var o=e.$$typeof;if(o===x){t.tag=11,t=Ds(null,t,e,r,n);break e}if(o===C){t.tag=14,t=Bs(null,t,e,r,n);break e}}throw t=R(e)||e,Error(i(306,t,""))}Fr(e)?(r=Ss(e,r),t.tag=1,t=Ks(null,t,e,r,n)):(t.tag=0,t=Hs(null,t,e,r,n))}return t;case 0:return Hs(e,t,t.type,t.pendingProps,n);case 1:return Ks(e,t,r=t.type,o=Ss(r,t.pendingProps),n);case 3:e:{if(q(t,t.stateNode.containerInfo),null===e)throw Error(i(387));r=t.pendingProps;var a=t.memoizedState;o=a.element,ya(e,t),Ca(t,r,null,n);var s=t.memoizedState;if(r=s.cache,Po(0,Fo,r),r!==a.cache&&Io(t,[Fo],n,!0),wa(),r=s.element,a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:s.cache},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Zs(e,t,r,n);break e}if(r!==o){xo(o=qr(Error(i(424)),t)),t=Zs(e,t,r,n);break e}if(9===(e=t.stateNode.containerInfo).nodeType)e=e.body;else e="HTML"===e.nodeName?e.ownerDocument.body:e;for(co=Ld(e.firstChild),uo=t,fo=!0,po=null,ho=!0,n=ma(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(_o(),r===o){t=ol(e,t,n);break e}ks(e,t,r,n)}t=t.child}return t;case 26:return Ws(e,t),null===e?(n=jd(t.type,null,t.pendingProps,null))?t.memoizedState=n:fo||(n=t.type,e=t.pendingProps,(r=gd(K.current).createElement(n))[ze]=t,r[Ge]=e,fd(r,n,e),et(r),t.stateNode=r):t.memoizedState=jd(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Y(t),null===e&&fo&&(r=t.stateNode=Nd(t.type,t.pendingProps,K.current),uo=t,ho=!0,o=co,Pd(t.type)?(kd=o,co=Ld(r.firstChild)):co=o),ks(e,t,t.pendingProps.children,n),Ws(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&fo&&((o=r=co)&&(null!==(r=function(e,t,n,r){for(;1===e.nodeType;){var o=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(r){if(!e[qe])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(a=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(a!==o.rel||e.getAttribute("href")!==(null==o.href||""===o.href?null:o.href)||e.getAttribute("crossorigin")!==(null==o.crossOrigin?null:o.crossOrigin)||e.getAttribute("title")!==(null==o.title?null:o.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((a=e.getAttribute("src"))!==(null==o.src?null:o.src)||e.getAttribute("type")!==(null==o.type?null:o.type)||e.getAttribute("crossorigin")!==(null==o.crossOrigin?null:o.crossOrigin))&&a&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var a=null==o.name?null:""+o.name;if("hidden"===o.type&&e.getAttribute("name")===a)return e}if(null===(e=Ld(e.nextSibling)))break}return null}(r,t.type,t.pendingProps,ho))?(t.stateNode=r,uo=t,co=Ld(r.firstChild),ho=!1,o=!0):o=!1),o||go(t)),Y(t),o=t.type,a=t.pendingProps,s=null!==e?e.memoizedProps:null,r=a.children,bd(o,a)?r=null:null!==s&&bd(o,s)&&(t.flags|=32),null!==t.memoizedState&&(o=ti(e,t,oi,null,null,n),df._currentValue=o),Ws(e,t),ks(e,t,r,n),t.child;case 6:return null===e&&fo&&((e=n=co)&&(null!==(n=function(e,t,n){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!n)return null;if(null===(e=Ld(e.nextSibling)))return null}return e}(n,t.pendingProps,ho))?(t.stateNode=n,uo=t,co=null,e=!0):e=!1),e||go(t)),null;case 13:return Qs(e,t,n);case 4:return q(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=ha(t,null,r,n):ks(e,t,r,n),t.child;case 11:return Ds(e,t,t.type,t.pendingProps,n);case 7:return ks(e,t,t.pendingProps,n),t.child;case 8:case 12:return ks(e,t,t.pendingProps.children,n),t.child;case 10:return r=t.pendingProps,Po(0,t.type,r.value),ks(e,t,r.children,n),t.child;case 9:return o=t.type._context,r=t.pendingProps.children,Ro(t),r=r(o=Lo(o)),t.flags|=1,ks(e,t,r,n),t.child;case 14:return Bs(e,t,t.type,t.pendingProps,n);case 15:return Ns(e,t,t.type,t.pendingProps,n);case 19:return rl(e,t,n);case 31:return function(e,t,n){var r=t.pendingProps,o=0!==(128&t.flags);if(t.flags&=-129,null===e){if(fo){if("hidden"===r.mode)return e=zs(t,r),t.lanes=536870912,Fs(null,e);if(Ba(t),(e=co)?null!==(e=null!==(e=Od(e,ho))&&"&"===e.data?e:null)&&(t.memoizedState={dehydrated:e,treeContext:null!==to?{id:no,overflow:ro}:null,retryLane:536870912,hydrationErrors:null},(n=jr(e)).return=t,t.child=n,uo=t,co=null):e=null,null===e)throw go(t);return t.lanes=536870912,null}return zs(t,r)}var a=e.memoizedState;if(null!==a){var s=a.dehydrated;if(Ba(t),o)if(256&t.flags)t.flags&=-257,t=Gs(e,t,n);else{if(null===t.memoizedState)throw Error(i(558));t.child=e.child,t.flags|=128,t=null}else if(Ls||Oo(e,t,n,!1),o=0!==(n&e.childLanes),Ls||o){if(null!==(r=hu)&&0!==(s=De(r,n))&&s!==a.retryLane)throw a.retryLane=s,Lr(e,s),qu(r,e,s),Rs;ic(),t=Gs(e,t,n)}else e=a.treeContext,co=Ld(s.nextSibling),uo=t,fo=!0,po=null,ho=!1,null!==e&&lo(t,e),(t=zs(t,r)).flags|=4096;return t}return(e=Ur(e.child,{mode:r.mode,children:r.children})).ref=t.ref,t.child=e,e.return=t,e}(e,t,n);case 22:return Vs(e,t,n,t.pendingProps);case 24:return Ro(t),r=Lo(Fo),null===e?(null===(o=Xo())&&(o=hu,a=Uo(),o.pooledCache=a,a.refCount++,null!==a&&(o.pooledCacheLanes|=n),o=a),t.memoizedState={parent:r,cache:o},va(t),Po(0,Fo,o)):(0!==(e.lanes&n)&&(ya(e,t),Ca(t,null,null,n),wa()),o=e.memoizedState,a=t.memoizedState,o.parent!==r?(o={parent:r,cache:r},t.memoizedState=o,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=o),Po(0,Fo,r)):(r=a.cache,Po(0,Fo,r),r!==o.cache&&Io(t,[Fo],n,!0))),ks(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(i(156,t.tag))}function sl(e){e.flags|=4}function ll(e,t,n,r,o){if((t=0!==(32&e.mode))&&(t=!1),t){if(e.flags|=16777216,(335544128&o)===o)if(e.stateNode.complete)e.flags|=8192;else{if(!rc())throw aa=ta,Jo;e.flags|=8192}}else e.flags&=-16777217}function ul(e,t){if("stylesheet"!==t.type||0!==(4&t.state.loading))e.flags&=-16777217;else if(e.flags|=16777216,!of(t)){if(!rc())throw aa=ta,Jo;e.flags|=8192}}function cl(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?Oe():536870912,e.lanes|=t,Eu|=t)}function dl(e,t){if(!fo)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function fl(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var o=e.child;null!==o;)n|=o.lanes|o.childLanes,r|=65011712&o.subtreeFlags,r|=65011712&o.flags,o.return=e,o=o.sibling;else for(o=e.child;null!==o;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function pl(e,t,n){var r=t.pendingProps;switch(so(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return fl(t),null;case 3:return n=t.stateNode,r=null,null!==e&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),Ao(Fo),X(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(bo(t)?sl(t):null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,To())),fl(t),null;case 26:var o=t.type,a=t.memoizedState;return null===e?(sl(t),null!==a?(fl(t),ul(t,a)):(fl(t),ll(t,o,0,0,n))):a?a!==e.memoizedState?(sl(t),fl(t),ul(t,a)):(fl(t),t.flags&=-16777217):((e=e.memoizedProps)!==r&&sl(t),fl(t),ll(t,o,0,0,n)),null;case 27:if(Q(t),n=K.current,o=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==r&&sl(t);else{if(!r){if(null===t.stateNode)throw Error(i(166));return fl(t),null}e=H.current,bo(t)?vo(t):(e=Nd(o,r,n),t.stateNode=e,sl(t))}return fl(t),null;case 5:if(Q(t),o=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==r&&sl(t);else{if(!r){if(null===t.stateNode)throw Error(i(166));return fl(t),null}if(a=H.current,bo(t))vo(t);else{var s=gd(K.current);switch(a){case 1:a=s.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:a=s.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":a=s.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":a=s.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":(a=s.createElement("div")).innerHTML="<script><\/script>",a=a.removeChild(a.firstChild);break;case"select":a="string"===typeof r.is?s.createElement("select",{is:r.is}):s.createElement("select"),r.multiple?a.multiple=!0:r.size&&(a.size=r.size);break;default:a="string"===typeof r.is?s.createElement(o,{is:r.is}):s.createElement(o)}}a[ze]=t,a[Ge]=r;e:for(s=t.child;null!==s;){if(5===s.tag||6===s.tag)a.appendChild(s.stateNode);else if(4!==s.tag&&27!==s.tag&&null!==s.child){s.child.return=s,s=s.child;continue}if(s===t)break e;for(;null===s.sibling;){if(null===s.return||s.return===t)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}t.stateNode=a;e:switch(fd(a,o,r),o){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}r&&sl(t)}}return fl(t),ll(t,t.type,null===e||e.memoizedProps,t.pendingProps,n),null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==r&&sl(t);else{if("string"!==typeof r&&null===t.stateNode)throw Error(i(166));if(e=K.current,bo(t)){if(e=t.stateNode,n=t.memoizedProps,r=null,null!==(o=uo))switch(o.tag){case 27:case 5:r=o.memoizedProps}e[ze]=t,(e=!!(e.nodeValue===n||null!==r&&!0===r.suppressHydrationWarning||ud(e.nodeValue,n)))||go(t,!0)}else(e=gd(e).createTextNode(r))[ze]=t,t.stateNode=e}return fl(t),null;case 31:if(n=t.memoizedState,null===e||null!==e.memoizedState){if(r=bo(t),null!==n){if(null===e){if(!r)throw Error(i(318));if(!(e=null!==(e=t.memoizedState)?e.dehydrated:null))throw Error(i(557));e[ze]=t}else _o(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;fl(t),e=!1}else n=To(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=n),e=!0;if(!e)return 256&t.flags?(Fa(t),t):(Fa(t),null);if(0!==(128&t.flags))throw Error(i(558))}return fl(t),null;case 13:if(r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(o=bo(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(i(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(i(317));o[ze]=t}else _o(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;fl(t),o=!1}else o=To(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=o),o=!0;if(!o)return 256&t.flags?(Fa(t),t):(Fa(t),null)}return Fa(t),0!==(128&t.flags)?(t.lanes=n,t):(n=null!==r,e=null!==e&&null!==e.memoizedState,n&&(o=null,null!==(r=t.child).alternate&&null!==r.alternate.memoizedState&&null!==r.alternate.memoizedState.cachePool&&(o=r.alternate.memoizedState.cachePool.pool),a=null,null!==r.memoizedState&&null!==r.memoizedState.cachePool&&(a=r.memoizedState.cachePool.pool),a!==o&&(r.flags|=2048)),n!==e&&n&&(t.child.flags|=8192),cl(t,t.updateQueue),fl(t),null);case 4:return X(),null===e&&Jc(t.stateNode.containerInfo),fl(t),null;case 10:return Ao(t.type),fl(t),null;case 19:if(U(Ua),null===(r=t.memoizedState))return fl(t),null;if(o=0!==(128&t.flags),null===(a=r.rendering))if(o)dl(r,!1);else{if(0!==Su||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(a=za(e))){for(t.flags|=128,dl(r,!1),e=a.updateQueue,t.updateQueue=e,cl(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)zr(n,e),n=n.sibling;return z(Ua,1&Ua.current|2),fo&&oo(t,r.treeForkCount),t.child}e=e.sibling}null!==r.tail&&le()>ku&&(t.flags|=128,o=!0,dl(r,!1),t.lanes=4194304)}else{if(!o)if(null!==(e=za(a))){if(t.flags|=128,o=!0,e=e.updateQueue,t.updateQueue=e,cl(t,e),dl(r,!0),null===r.tail&&"hidden"===r.tailMode&&!a.alternate&&!fo)return fl(t),null}else 2*le()-r.renderingStartTime>ku&&536870912!==n&&(t.flags|=128,o=!0,dl(r,!1),t.lanes=4194304);r.isBackwards?(a.sibling=t.child,t.child=a):(null!==(e=r.last)?e.sibling=a:t.child=a,r.last=a)}return null!==r.tail?(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=le(),e.sibling=null,n=Ua.current,z(Ua,o?1&n|2:1&n),fo&&oo(t,r.treeForkCount),e):(fl(t),null);case 22:case 23:return Fa(t),Ra(),r=null!==t.memoizedState,null!==e?null!==e.memoizedState!==r&&(t.flags|=8192):r&&(t.flags|=8192),r?0!==(536870912&n)&&0===(128&t.flags)&&(fl(t),6&t.subtreeFlags&&(t.flags|=8192)):fl(t),null!==(n=t.updateQueue)&&cl(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),r=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(r=t.memoizedState.cachePool.pool),r!==n&&(t.flags|=2048),null!==e&&U(qo),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Ao(Fo),fl(t),null;case 25:case 30:return null}throw Error(i(156,t.tag))}function hl(e,t){switch(so(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Ao(Fo),X(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return Q(t),null;case 31:if(null!==t.memoizedState){if(Fa(t),null===t.alternate)throw Error(i(340));_o()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 13:if(Fa(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(i(340));_o()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return U(Ua),null;case 4:return X(),null;case 10:return Ao(t.type),null;case 22:case 23:return Fa(t),Ra(),null!==e&&U(qo),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return Ao(Fo),null;default:return null}}function ml(e,t){switch(so(t),t.tag){case 3:Ao(Fo),X();break;case 26:case 27:case 5:Q(t);break;case 4:X();break;case 31:null!==t.memoizedState&&Fa(t);break;case 13:Fa(t);break;case 19:U(Ua);break;case 10:Ao(t.type);break;case 22:case 23:Fa(t),Ra(),null!==e&&U(qo);break;case 24:Ao(Fo)}}function gl(e,t){try{var n=t.updateQueue,r=null!==n?n.lastEffect:null;if(null!==r){var o=r.next;n=o;do{if((n.tag&e)===e){r=void 0;var a=n.create,i=n.inst;r=a(),i.destroy=r}n=n.next}while(n!==o)}}catch(s){Sc(t,t.return,s)}}function vl(e,t,n){try{var r=t.updateQueue,o=null!==r?r.lastEffect:null;if(null!==o){var a=o.next;r=a;do{if((r.tag&e)===e){var i=r.inst,s=i.destroy;if(void 0!==s){i.destroy=void 0,o=t;var l=n,u=s;try{u()}catch(c){Sc(o,l,c)}}}r=r.next}while(r!==a)}}catch(c){Sc(t,t.return,c)}}function yl(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{Aa(t,n)}catch(r){Sc(e,e.return,r)}}}function bl(e,t,n){n.props=Ss(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(r){Sc(e,t,r)}}function _l(e,t){try{var n=e.ref;if(null!==n){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;default:r=e.stateNode}"function"===typeof n?e.refCleanup=n(r):n.current=r}}catch(o){Sc(e,t,o)}}function Tl(e,t){var n=e.ref,r=e.refCleanup;if(null!==n)if("function"===typeof r)try{r()}catch(o){Sc(e,t,o)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"===typeof n)try{n(null)}catch(a){Sc(e,t,a)}else n.current=null}function xl(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&r.focus();break e;case"img":n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(o){Sc(e,e.return,o)}}function Sl(e,t,n){try{var r=e.stateNode;!function(e,t,n,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var o=null,a=null,s=null,l=null,u=null,c=null,d=null;for(h in n){var f=n[h];if(n.hasOwnProperty(h)&&null!=f)switch(h){case"checked":case"value":break;case"defaultValue":u=f;default:r.hasOwnProperty(h)||cd(e,t,h,null,r,f)}}for(var p in r){var h=r[p];if(f=n[p],r.hasOwnProperty(p)&&(null!=h||null!=f))switch(p){case"type":a=h;break;case"name":o=h;break;case"checked":c=h;break;case"defaultChecked":d=h;break;case"value":s=h;break;case"defaultValue":l=h;break;case"children":case"dangerouslySetInnerHTML":if(null!=h)throw Error(i(137,t));break;default:h!==f&&cd(e,t,p,h,r,f)}}return void yt(e,s,l,u,c,d,a,o);case"select":for(a in h=s=l=p=null,n)if(u=n[a],n.hasOwnProperty(a)&&null!=u)switch(a){case"value":break;case"multiple":h=u;default:r.hasOwnProperty(a)||cd(e,t,a,null,r,u)}for(o in r)if(a=r[o],u=n[o],r.hasOwnProperty(o)&&(null!=a||null!=u))switch(o){case"value":p=a;break;case"defaultValue":l=a;break;case"multiple":s=a;default:a!==u&&cd(e,t,o,a,r,u)}return t=l,n=s,r=h,void(null!=p?Tt(e,!!n,p,!1):!!r!==!!n&&(null!=t?Tt(e,!!n,t,!0):Tt(e,!!n,n?[]:"",!1)));case"textarea":for(l in h=p=null,n)if(o=n[l],n.hasOwnProperty(l)&&null!=o&&!r.hasOwnProperty(l))switch(l){case"value":case"children":break;default:cd(e,t,l,null,r,o)}for(s in r)if(o=r[s],a=n[s],r.hasOwnProperty(s)&&(null!=o||null!=a))switch(s){case"value":p=o;break;case"defaultValue":h=o;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=o)throw Error(i(91));break;default:o!==a&&cd(e,t,s,o,r,a)}return void xt(e,p,h);case"option":for(var m in n)if(p=n[m],n.hasOwnProperty(m)&&null!=p&&!r.hasOwnProperty(m))if("selected"===m)e.selected=!1;else cd(e,t,m,null,r,p);for(u in r)if(p=r[u],h=n[u],r.hasOwnProperty(u)&&p!==h&&(null!=p||null!=h))if("selected"===u)e.selected=p&&"function"!==typeof p&&"symbol"!==typeof p;else cd(e,t,u,p,r,h);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var g in n)p=n[g],n.hasOwnProperty(g)&&null!=p&&!r.hasOwnProperty(g)&&cd(e,t,g,null,r,p);for(c in r)if(p=r[c],h=n[c],r.hasOwnProperty(c)&&p!==h&&(null!=p||null!=h))switch(c){case"children":case"dangerouslySetInnerHTML":if(null!=p)throw Error(i(137,t));break;default:cd(e,t,c,p,r,h)}return;default:if(Et(t)){for(var v in n)p=n[v],n.hasOwnProperty(v)&&void 0!==p&&!r.hasOwnProperty(v)&&dd(e,t,v,void 0,r,p);for(d in r)p=r[d],h=n[d],!r.hasOwnProperty(d)||p===h||void 0===p&&void 0===h||dd(e,t,d,p,r,h);return}}for(var y in n)p=n[y],n.hasOwnProperty(y)&&null!=p&&!r.hasOwnProperty(y)&&cd(e,t,y,null,r,p);for(f in r)p=r[f],h=n[f],!r.hasOwnProperty(f)||p===h||null==p&&null==h||cd(e,t,f,p,r,h)}(r,e.type,n,t),r[Ge]=t}catch(o){Sc(e,e.return,o)}}function wl(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&Pd(e.type)||4===e.tag}function Cl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||wl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&Pd(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function Pl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?(9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).insertBefore(e,t):((t=9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Rt));else if(4!==r&&(27===r&&Pd(e.type)&&(n=e.stateNode,t=null),null!==(e=e.child)))for(Pl(e,t,n),e=e.sibling;null!==e;)Pl(e,t,n),e=e.sibling}function Al(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&(27===r&&Pd(e.type)&&(n=e.stateNode),null!==(e=e.child)))for(Al(e,t,n),e=e.sibling;null!==e;)Al(e,t,n),e=e.sibling}function El(e){var t=e.stateNode,n=e.memoizedProps;try{for(var r=e.type,o=t.attributes;o.length;)t.removeAttributeNode(o[0]);fd(t,r,n),t[ze]=e,t[Ge]=n}catch(a){Sc(e,e.return,a)}}var Il=!1,Ol=!1,Ml=!1,Rl="function"===typeof WeakSet?WeakSet:Set,Ll=null;function kl(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:ql(e,n),4&r&&gl(5,n);break;case 1:if(ql(e,n),4&r)if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(i){Sc(n,n.return,i)}else{var o=Ss(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(o,t,e.__reactInternalSnapshotBeforeUpdate)}catch(s){Sc(n,n.return,s)}}64&r&&yl(n),512&r&&_l(n,n.return);break;case 3:if(ql(e,n),64&r&&null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 27:case 5:case 1:t=n.child.stateNode}try{Aa(e,t)}catch(i){Sc(n,n.return,i)}}break;case 27:null===t&&4&r&&El(n);case 26:case 5:ql(e,n),null===t&&4&r&&xl(n),512&r&&_l(n,n.return);break;case 12:ql(e,n);break;case 31:ql(e,n),4&r&&Ul(e,n);break;case 13:ql(e,n),4&r&&zl(e,n),64&r&&(null!==(e=n.memoizedState)&&(null!==(e=e.dehydrated)&&function(e,t){var n=e.ownerDocument;if("$~"===e.data)e._reactRetry=t;else if("$?"!==e.data||"loading"!==n.readyState)t();else{var r=function(){t(),n.removeEventListener("DOMContentLoaded",r)};n.addEventListener("DOMContentLoaded",r),e._reactRetry=r}}(e,n=Ac.bind(null,n))));break;case 22:if(!(r=null!==n.memoizedState||Il)){t=null!==t&&null!==t.memoizedState||Ol,o=Il;var a=Ol;Il=r,(Ol=t)&&!a?Yl(e,n,0!==(8772&n.subtreeFlags)):ql(e,n),Il=o,Ol=a}break;case 30:break;default:ql(e,n)}}function Dl(e){var t=e.alternate;null!==t&&(e.alternate=null,Dl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&Xe(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Bl=null,Nl=!1;function Vl(e,t,n){for(n=n.child;null!==n;)Fl(e,t,n),n=n.sibling}function Fl(e,t,n){if(ye&&"function"===typeof ye.onCommitFiberUnmount)try{ye.onCommitFiberUnmount(ve,n)}catch(a){}switch(n.tag){case 26:Ol||Tl(n,t),Vl(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode).parentNode.removeChild(n);break;case 27:Ol||Tl(n,t);var r=Bl,o=Nl;Pd(n.type)&&(Bl=n.stateNode,Nl=!1),Vl(e,t,n),Vd(n.stateNode),Bl=r,Nl=o;break;case 5:Ol||Tl(n,t);case 6:if(r=Bl,o=Nl,Bl=null,Vl(e,t,n),Nl=o,null!==(Bl=r))if(Nl)try{(9===Bl.nodeType?Bl.body:"HTML"===Bl.nodeName?Bl.ownerDocument.body:Bl).removeChild(n.stateNode)}catch(i){Sc(n,t,i)}else try{Bl.removeChild(n.stateNode)}catch(i){Sc(n,t,i)}break;case 18:null!==Bl&&(Nl?(Ad(9===(e=Bl).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,n.stateNode),jf(e)):Ad(Bl,n.stateNode));break;case 4:r=Bl,o=Nl,Bl=n.stateNode.containerInfo,Nl=!0,Vl(e,t,n),Bl=r,Nl=o;break;case 0:case 11:case 14:case 15:vl(2,n,t),Ol||vl(4,n,t),Vl(e,t,n);break;case 1:Ol||(Tl(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount&&bl(n,t,r)),Vl(e,t,n);break;case 21:Vl(e,t,n);break;case 22:Ol=(r=Ol)||null!==n.memoizedState,Vl(e,t,n),Ol=r;break;default:Vl(e,t,n)}}function Ul(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&null!==(e=e.memoizedState))){e=e.dehydrated;try{jf(e)}catch(n){Sc(t,t.return,n)}}}function zl(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{jf(e)}catch(n){Sc(t,t.return,n)}}function Gl(e,t){var n=function(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new Rl),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new Rl),t;default:throw Error(i(435,e.tag))}}(e);t.forEach(function(t){if(!n.has(t)){n.add(t);var r=Ec.bind(null,e,t);t.then(r,r)}})}function Wl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var o=n[r],a=e,s=t,l=s;e:for(;null!==l;){switch(l.tag){case 27:if(Pd(l.type)){Bl=l.stateNode,Nl=!1;break e}break;case 5:Bl=l.stateNode,Nl=!1;break e;case 3:case 4:Bl=l.stateNode.containerInfo,Nl=!0;break e}l=l.return}if(null===Bl)throw Error(i(160));Fl(a,s,o),Bl=null,Nl=!1,null!==(a=o.alternate)&&(a.return=null),o.return=null}if(13886&t.subtreeFlags)for(t=t.child;null!==t;)jl(t,e),t=t.sibling}var Hl=null;function jl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Wl(t,e),Kl(e),4&r&&(vl(3,e,e.return),gl(3,e),vl(5,e,e.return));break;case 1:Wl(t,e),Kl(e),512&r&&(Ol||null===n||Tl(n,n.return)),64&r&&Il&&(null!==(e=e.updateQueue)&&(null!==(r=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?r:n.concat(r))));break;case 26:var o=Hl;if(Wl(t,e),Kl(e),512&r&&(Ol||null===n||Tl(n,n.return)),4&r){var a=null!==n?n.memoizedState:null;if(r=e.memoizedState,null===n)if(null===r)if(null===e.stateNode){e:{r=e.type,n=e.memoizedProps,o=o.ownerDocument||o;t:switch(r){case"title":(!(a=o.getElementsByTagName("title")[0])||a[qe]||a[ze]||"http://www.w3.org/2000/svg"===a.namespaceURI||a.hasAttribute("itemprop"))&&(a=o.createElement(r),o.head.insertBefore(a,o.querySelector("head > title"))),fd(a,r,n),a[ze]=e,et(a),r=a;break e;case"link":var s=nf("link","href",o).get(r+(n.href||""));if(s)for(var l=0;l<s.length;l++)if((a=s[l]).getAttribute("href")===(null==n.href||""===n.href?null:n.href)&&a.getAttribute("rel")===(null==n.rel?null:n.rel)&&a.getAttribute("title")===(null==n.title?null:n.title)&&a.getAttribute("crossorigin")===(null==n.crossOrigin?null:n.crossOrigin)){s.splice(l,1);break t}fd(a=o.createElement(r),r,n),o.head.appendChild(a);break;case"meta":if(s=nf("meta","content",o).get(r+(n.content||"")))for(l=0;l<s.length;l++)if((a=s[l]).getAttribute("content")===(null==n.content?null:""+n.content)&&a.getAttribute("name")===(null==n.name?null:n.name)&&a.getAttribute("property")===(null==n.property?null:n.property)&&a.getAttribute("http-equiv")===(null==n.httpEquiv?null:n.httpEquiv)&&a.getAttribute("charset")===(null==n.charSet?null:n.charSet)){s.splice(l,1);break t}fd(a=o.createElement(r),r,n),o.head.appendChild(a);break;default:throw Error(i(468,r))}a[ze]=e,et(a),r=a}e.stateNode=r}else rf(o,e.type,e.stateNode);else e.stateNode=Qd(o,r,e.memoizedProps);else a!==r?(null===a?null!==n.stateNode&&(n=n.stateNode).parentNode.removeChild(n):a.count--,null===r?rf(o,e.type,e.stateNode):Qd(o,r,e.memoizedProps)):null===r&&null!==e.stateNode&&Sl(e,e.memoizedProps,n.memoizedProps)}break;case 27:Wl(t,e),Kl(e),512&r&&(Ol||null===n||Tl(n,n.return)),null!==n&&4&r&&Sl(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Wl(t,e),Kl(e),512&r&&(Ol||null===n||Tl(n,n.return)),32&e.flags){o=e.stateNode;try{wt(o,"")}catch(m){Sc(e,e.return,m)}}4&r&&null!=e.stateNode&&Sl(e,o=e.memoizedProps,null!==n?n.memoizedProps:o),1024&r&&(Ml=!0);break;case 6:if(Wl(t,e),Kl(e),4&r){if(null===e.stateNode)throw Error(i(162));r=e.memoizedProps,n=e.stateNode;try{n.nodeValue=r}catch(m){Sc(e,e.return,m)}}break;case 3:if(tf=null,o=Hl,Hl=zd(t.containerInfo),Wl(t,e),Hl=o,Kl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{jf(t.containerInfo)}catch(m){Sc(e,e.return,m)}Ml&&(Ml=!1,Zl(e));break;case 4:r=Hl,Hl=zd(e.stateNode.containerInfo),Wl(t,e),Kl(e),Hl=r;break;case 12:default:Wl(t,e),Kl(e);break;case 31:case 19:Wl(t,e),Kl(e),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,Gl(e,r)));break;case 13:Wl(t,e),Kl(e),8192&e.child.flags&&null!==e.memoizedState!==(null!==n&&null!==n.memoizedState)&&(Ru=le()),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,Gl(e,r)));break;case 22:o=null!==e.memoizedState;var u=null!==n&&null!==n.memoizedState,c=Il,d=Ol;if(Il=c||o,Ol=d||u,Wl(t,e),Ol=d,Il=c,Kl(e),8192&r)e:for(t=e.stateNode,t._visibility=o?-2&t._visibility:1|t._visibility,o&&(null===n||u||Il||Ol||Xl(e)),n=null,t=e;;){if(5===t.tag||26===t.tag){if(null===n){u=n=t;try{if(a=u.stateNode,o)"function"===typeof(s=a.style).setProperty?s.setProperty("display","none","important"):s.display="none";else{l=u.stateNode;var f=u.memoizedProps.style,p=void 0!==f&&null!==f&&f.hasOwnProperty("display")?f.display:null;l.style.display=null==p||"boolean"===typeof p?"":(""+p).trim()}}catch(m){Sc(u,u.return,m)}}}else if(6===t.tag){if(null===n){u=t;try{u.stateNode.nodeValue=o?"":u.memoizedProps}catch(m){Sc(u,u.return,m)}}}else if(18===t.tag){if(null===n){u=t;try{var h=u.stateNode;o?Ed(h,!0):Ed(u.stateNode,!1)}catch(m){Sc(u,u.return,m)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}4&r&&(null!==(r=e.updateQueue)&&(null!==(n=r.retryQueue)&&(r.retryQueue=null,Gl(e,n))));case 30:case 21:}}function Kl(e){var t=e.flags;if(2&t){try{for(var n,r=e.return;null!==r;){if(wl(r)){n=r;break}r=r.return}if(null==n)throw Error(i(160));switch(n.tag){case 27:var o=n.stateNode;Al(e,Cl(e),o);break;case 5:var a=n.stateNode;32&n.flags&&(wt(a,""),n.flags&=-33),Al(e,Cl(e),a);break;case 3:case 4:var s=n.stateNode.containerInfo;Pl(e,Cl(e),s);break;default:throw Error(i(161))}}catch(l){Sc(e,e.return,l)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Zl(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;Zl(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function ql(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)kl(e,t.alternate,t),t=t.sibling}function Xl(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:vl(4,t,t.return),Xl(t);break;case 1:Tl(t,t.return);var n=t.stateNode;"function"===typeof n.componentWillUnmount&&bl(t,t.return,n),Xl(t);break;case 27:Vd(t.stateNode);case 26:case 5:Tl(t,t.return),Xl(t);break;case 22:null===t.memoizedState&&Xl(t);break;default:Xl(t)}e=e.sibling}}function Yl(e,t,n){for(n=n&&0!==(8772&t.subtreeFlags),t=t.child;null!==t;){var r=t.alternate,o=e,a=t,i=a.flags;switch(a.tag){case 0:case 11:case 15:Yl(o,a,n),gl(4,a);break;case 1:if(Yl(o,a,n),"function"===typeof(o=(r=a).stateNode).componentDidMount)try{o.componentDidMount()}catch(u){Sc(r,r.return,u)}if(null!==(o=(r=a).updateQueue)){var s=r.stateNode;try{var l=o.shared.hiddenCallbacks;if(null!==l)for(o.shared.hiddenCallbacks=null,o=0;o<l.length;o++)Pa(l[o],s)}catch(u){Sc(r,r.return,u)}}n&&64&i&&yl(a),_l(a,a.return);break;case 27:El(a);case 26:case 5:Yl(o,a,n),n&&null===r&&4&i&&xl(a),_l(a,a.return);break;case 12:Yl(o,a,n);break;case 31:Yl(o,a,n),n&&4&i&&Ul(o,a);break;case 13:Yl(o,a,n),n&&4&i&&zl(o,a);break;case 22:null===a.memoizedState&&Yl(o,a,n),_l(a,a.return);break;case 30:break;default:Yl(o,a,n)}t=t.sibling}}function Ql(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&zo(n))}function $l(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&zo(e))}function Jl(e,t,n,r){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)eu(e,t,n,r),t=t.sibling}function eu(e,t,n,r){var o=t.flags;switch(t.tag){case 0:case 11:case 15:Jl(e,t,n,r),2048&o&&gl(9,t);break;case 1:case 31:case 13:default:Jl(e,t,n,r);break;case 3:Jl(e,t,n,r),2048&o&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&zo(e)));break;case 12:if(2048&o){Jl(e,t,n,r),e=t.stateNode;try{var a=t.memoizedProps,i=a.id,s=a.onPostCommit;"function"===typeof s&&s(i,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(l){Sc(t,t.return,l)}}else Jl(e,t,n,r);break;case 23:break;case 22:a=t.stateNode,i=t.alternate,null!==t.memoizedState?2&a._visibility?Jl(e,t,n,r):nu(e,t):2&a._visibility?Jl(e,t,n,r):(a._visibility|=2,tu(e,t,n,r,0!==(10256&t.subtreeFlags)||!1)),2048&o&&Ql(i,t);break;case 24:Jl(e,t,n,r),2048&o&&$l(t.alternate,t)}}function tu(e,t,n,r,o){for(o=o&&(0!==(10256&t.subtreeFlags)||!1),t=t.child;null!==t;){var a=e,i=t,s=n,l=r,u=i.flags;switch(i.tag){case 0:case 11:case 15:tu(a,i,s,l,o),gl(8,i);break;case 23:break;case 22:var c=i.stateNode;null!==i.memoizedState?2&c._visibility?tu(a,i,s,l,o):nu(a,i):(c._visibility|=2,tu(a,i,s,l,o)),o&&2048&u&&Ql(i.alternate,i);break;case 24:tu(a,i,s,l,o),o&&2048&u&&$l(i.alternate,i);break;default:tu(a,i,s,l,o)}t=t.sibling}}function nu(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=e,r=t,o=r.flags;switch(r.tag){case 22:nu(n,r),2048&o&&Ql(r.alternate,r);break;case 24:nu(n,r),2048&o&&$l(r.alternate,r);break;default:nu(n,r)}t=t.sibling}}var ru=8192;function ou(e,t,n){if(e.subtreeFlags&ru)for(e=e.child;null!==e;)au(e,t,n),e=e.sibling}function au(e,t,n){switch(e.tag){case 26:ou(e,t,n),e.flags&ru&&null!==e.memoizedState&&function(e,t,n,r){if("stylesheet"===n.type&&("string"!==typeof r.media||!1!==matchMedia(r.media).matches)&&0===(4&n.state.loading)){if(null===n.instance){var o=Kd(r.href),a=t.querySelector(Zd(o));if(a)return null!==(t=a._p)&&"object"===typeof t&&"function"===typeof t.then&&(e.count++,e=sf.bind(e),t.then(e,e)),n.state.loading|=4,n.instance=a,void et(a);a=t.ownerDocument||t,r=qd(r),(o=Fd.get(o))&&Jd(r,o),et(a=a.createElement("link"));var i=a;i._p=new Promise(function(e,t){i.onload=e,i.onerror=t}),fd(a,"link",r),n.instance=a}null===e.stylesheets&&(e.stylesheets=new Map),e.stylesheets.set(n,t),(t=n.state.preload)&&0===(3&n.state.loading)&&(e.count++,n=sf.bind(e),t.addEventListener("load",n),t.addEventListener("error",n))}}(n,Hl,e.memoizedState,e.memoizedProps);break;case 5:default:ou(e,t,n);break;case 3:case 4:var r=Hl;Hl=zd(e.stateNode.containerInfo),ou(e,t,n),Hl=r;break;case 22:null===e.memoizedState&&(null!==(r=e.alternate)&&null!==r.memoizedState?(r=ru,ru=16777216,ou(e,t,n),ru=r):ou(e,t,n))}}function iu(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function su(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];Ll=r,cu(r,e)}iu(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)lu(e),e=e.sibling}function lu(e){switch(e.tag){case 0:case 11:case 15:su(e),2048&e.flags&&vl(9,e,e.return);break;case 3:case 12:default:su(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,uu(e)):su(e)}}function uu(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];Ll=r,cu(r,e)}iu(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:vl(8,t,t.return),uu(t);break;case 22:2&(n=t.stateNode)._visibility&&(n._visibility&=-3,uu(t));break;default:uu(t)}e=e.sibling}}function cu(e,t){for(;null!==Ll;){var n=Ll;switch(n.tag){case 0:case 11:case 15:vl(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var r=n.memoizedState.cachePool.pool;null!=r&&r.refCount++}break;case 24:zo(n.memoizedState.cache)}if(null!==(r=n.child))r.return=n,Ll=r;else e:for(n=e;null!==Ll;){var o=(r=Ll).sibling,a=r.return;if(Dl(r),r===n){Ll=null;break e}if(null!==o){o.return=a,Ll=o;break e}Ll=a}}}var du={getCacheForType:function(e){var t=Lo(Fo),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n},cacheSignal:function(){return Lo(Fo).controller.signal}},fu="function"===typeof WeakMap?WeakMap:Map,pu=0,hu=null,mu=null,gu=0,vu=0,yu=null,bu=!1,_u=!1,Tu=!1,xu=0,Su=0,wu=0,Cu=0,Pu=0,Au=0,Eu=0,Iu=null,Ou=null,Mu=!1,Ru=0,Lu=0,ku=1/0,Du=null,Bu=null,Nu=0,Vu=null,Fu=null,Uu=0,zu=0,Gu=null,Wu=null,Hu=0,ju=null;function Ku(){return 0!==(2&pu)&&0!==gu?gu&-gu:null!==k.T?Gc():Ve()}function Zu(){if(0===Au)if(0===(536870912&gu)||fo){var e=we;0===(3932160&(we<<=1))&&(we=262144),Au=e}else Au=536870912;return null!==(e=La.current)&&(e.flags|=32),Au}function qu(e,t,n){(e!==hu||2!==vu&&9!==vu)&&null===e.cancelPendingCommit||(tc(e,0),$u(e,gu,Au,!1)),Re(e,n),0!==(2&pu)&&e===hu||(e===hu&&(0===(2&pu)&&(Cu|=n),4===Su&&$u(e,gu,Au,!1)),Dc(e))}function Xu(e,t,n){if(0!==(6&pu))throw Error(i(327));for(var r=!n&&0===(127&t)&&0===(t&e.expiredLanes)||Ee(e,t),o=r?function(e,t){var n=pu;pu|=2;var r=oc(),o=ac();hu!==e||gu!==t?(Du=null,ku=le()+500,tc(e,t)):_u=Ee(e,t);e:for(;;)try{if(0!==vu&&null!==mu){t=mu;var a=yu;t:switch(vu){case 1:vu=0,yu=null,fc(e,t,a,1);break;case 2:case 9:if(na(a)){vu=0,yu=null,dc(t);break}t=function(){2!==vu&&9!==vu||hu!==e||(vu=7),Dc(e)},a.then(t,t);break e;case 3:vu=7;break e;case 4:vu=5;break e;case 7:na(a)?(vu=0,yu=null,dc(t)):(vu=0,yu=null,fc(e,t,a,7));break;case 5:var s=null;switch(mu.tag){case 26:s=mu.memoizedState;case 5:case 27:var l=mu;if(s?of(s):l.stateNode.complete){vu=0,yu=null;var u=l.sibling;if(null!==u)mu=u;else{var c=l.return;null!==c?(mu=c,pc(c)):mu=null}break t}}vu=0,yu=null,fc(e,t,a,5);break;case 6:vu=0,yu=null,fc(e,t,a,6);break;case 8:ec(),Su=6;break e;default:throw Error(i(462))}}uc();break}catch(d){nc(e,d)}return Co=wo=null,k.H=r,k.A=o,pu=n,null!==mu?0:(hu=null,gu=0,Or(),Su)}(e,t):sc(e,t,!0),a=r;;){if(0===o){_u&&!r&&$u(e,t,0,!1);break}if(n=e.current.alternate,!a||Qu(n)){if(2===o){if(a=t,e.errorRecoveryDisabledLanes&a)var s=0;else s=0!==(s=-536870913&e.pendingLanes)?s:536870912&s?536870912:0;if(0!==s){t=s;e:{var l=e;o=Iu;var u=l.current.memoizedState.isDehydrated;if(u&&(tc(l,s).flags|=256),2!==(s=sc(l,s,!1))){if(Tu&&!u){l.errorRecoveryDisabledLanes|=a,Cu|=a,o=4;break e}a=Ou,Ou=o,null!==a&&(null===Ou?Ou=a:Ou.push.apply(Ou,a))}o=s}if(a=!1,2!==o)continue}}if(1===o){tc(e,0),$u(e,t,0,!0);break}e:{switch(r=e,a=o){case 0:case 1:throw Error(i(345));case 4:if((4194048&t)!==t)break;case 6:$u(r,t,Au,!bu);break e;case 2:Ou=null;break;case 3:case 5:break;default:throw Error(i(329))}if((62914560&t)===t&&10<(o=Ru+300-le())){if($u(r,t,Au,!bu),0!==Ae(r,0,!0))break e;Uu=t,r.timeoutHandle=Td(Yu.bind(null,r,n,Ou,Du,Mu,t,Au,Cu,Eu,bu,a,"Throttled",-0,0),o)}else Yu(r,n,Ou,Du,Mu,t,Au,Cu,Eu,bu,a,null,-0,0)}break}o=sc(e,t,!1),a=!1}Dc(e)}function Yu(e,t,n,r,o,a,i,s,l,u,c,d,f,p){if(e.timeoutHandle=-1,8192&(d=t.subtreeFlags)||16785408===(16785408&d)){au(t,a,d={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Rt});var h=(62914560&a)===a?Ru-le():(4194048&a)===a?Lu-le():0;if(null!==(h=function(e,t){return e.stylesheets&&0===e.count&&uf(e,e.stylesheets),0<e.count||0<e.imgCount?function(n){var r=setTimeout(function(){if(e.stylesheets&&uf(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4+t);0<e.imgBytes&&0===af&&(af=62500*function(){if("function"===typeof performance.getEntriesByType){for(var e=0,t=0,n=performance.getEntriesByType("resource"),r=0;r<n.length;r++){var o=n[r],a=o.transferSize,i=o.initiatorType,s=o.duration;if(a&&s&&pd(i)){for(i=0,s=o.responseEnd,r+=1;r<n.length;r++){var l=n[r],u=l.startTime;if(u>s)break;var c=l.transferSize,d=l.initiatorType;c&&pd(d)&&(i+=c*((l=l.responseEnd)<s?1:(s-u)/(l-u)))}if(--r,t+=8*(a+i)/(o.duration/1e3),10<++e)break}}if(0<e)return t/e/1e6}return navigator.connection&&"number"===typeof(e=navigator.connection.downlink)?e:5}());var o=setTimeout(function(){if(e.waitingForImages=!1,0===e.count&&(e.stylesheets&&uf(e,e.stylesheets),e.unsuspend)){var t=e.unsuspend;e.unsuspend=null,t()}},(e.imgBytes>af?50:800)+t);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(r),clearTimeout(o)}}:null}(d,h)))return Uu=a,e.cancelPendingCommit=h(mc.bind(null,e,t,a,n,r,o,i,s,l,c,d,null,f,p)),void $u(e,a,i,!u)}mc(e,t,a,n,r,o,i,s,l)}function Qu(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&(null!==(n=t.updateQueue)&&null!==(n=n.stores)))for(var r=0;r<n.length;r++){var o=n[r],a=o.getSnapshot;o=o.value;try{if(!$n(a(),o))return!1}catch(i){return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function $u(e,t,n,r){t&=~Pu,t&=~Cu,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var o=t;0<o;){var a=31-_e(o),i=1<<a;r[a]=-1,o&=~i}0!==n&&Le(e,n,t)}function Ju(){return 0!==(6&pu)||(Bc(0,!1),!1)}function ec(){if(null!==mu){if(0===vu)var e=mu.return;else Co=wo=null,si(e=mu),la=null,ua=0,e=mu;for(;null!==e;)ml(e.alternate,e),e=e.return;mu=null}}function tc(e,t){var n=e.timeoutHandle;-1!==n&&(e.timeoutHandle=-1,xd(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),Uu=0,ec(),hu=e,mu=n=Ur(e.current,null),gu=t,vu=0,yu=null,bu=!1,_u=Ee(e,t),Tu=!1,Eu=Au=Pu=Cu=wu=Su=0,Ou=Iu=null,Mu=!1,0!==(8&t)&&(t|=32&t);var r=e.entangledLanes;if(0!==r)for(e=e.entanglements,r&=t;0<r;){var o=31-_e(r),a=1<<o;t|=e[o],r&=~a}return xu=t,Or(),n}function nc(e,t){Wa=null,k.H=ms,t===$o||t===ea?(t=ia(),vu=3):t===Jo?(t=ia(),vu=4):vu=t===Rs?8:null!==t&&"object"===typeof t&&"function"===typeof t.then?6:1,yu=t,null===mu&&(Su=1,As(e,qr(t,e.current)))}function rc(){var e=La.current;return null===e||((4194048&gu)===gu?null===ka:((62914560&gu)===gu||0!==(536870912&gu))&&e===ka)}function oc(){var e=k.H;return k.H=ms,null===e?ms:e}function ac(){var e=k.A;return k.A=du,e}function ic(){Su=4,bu||(4194048&gu)!==gu&&null!==La.current||(_u=!0),0===(134217727&wu)&&0===(134217727&Cu)||null===hu||$u(hu,gu,Au,!1)}function sc(e,t,n){var r=pu;pu|=2;var o=oc(),a=ac();hu===e&&gu===t||(Du=null,tc(e,t)),t=!1;var i=Su;e:for(;;)try{if(0!==vu&&null!==mu){var s=mu,l=yu;switch(vu){case 8:ec(),i=6;break e;case 3:case 2:case 9:case 6:null===La.current&&(t=!0);var u=vu;if(vu=0,yu=null,fc(e,s,l,u),n&&_u){i=0;break e}break;default:u=vu,vu=0,yu=null,fc(e,s,l,u)}}lc(),i=Su;break}catch(c){nc(e,c)}return t&&e.shellSuspendCounter++,Co=wo=null,pu=r,k.H=o,k.A=a,null===mu&&(hu=null,gu=0,Or()),i}function lc(){for(;null!==mu;)cc(mu)}function uc(){for(;null!==mu&&!ie();)cc(mu)}function cc(e){var t=il(e.alternate,e,xu);e.memoizedProps=e.pendingProps,null===t?pc(e):mu=t}function dc(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=js(n,t,t.pendingProps,t.type,void 0,gu);break;case 11:t=js(n,t,t.pendingProps,t.type.render,t.ref,gu);break;case 5:si(t);default:ml(n,t),t=il(n,t=mu=zr(t,xu),xu)}e.memoizedProps=e.pendingProps,null===t?pc(e):mu=t}function fc(e,t,n,r){Co=wo=null,si(t),la=null,ua=0;var o=t.return;try{if(function(e,t,n,r,o){if(n.flags|=32768,null!==r&&"object"===typeof r&&"function"===typeof r.then){if(null!==(t=n.alternate)&&Oo(t,n,o,!0),null!==(n=La.current)){switch(n.tag){case 31:case 13:return null===ka?ic():null===n.alternate&&0===Su&&(Su=3),n.flags&=-257,n.flags|=65536,n.lanes=o,r===ta?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([r]):t.add(r),wc(e,r,o)),!1;case 22:return n.flags|=65536,r===ta?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([r]):n.add(r),wc(e,r,o)),!1}throw Error(i(435,n.tag))}return wc(e,r,o),ic(),!1}if(fo)return null!==(t=La.current)?(0===(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=o,r!==mo&&xo(qr(e=Error(i(422),{cause:r}),n))):(r!==mo&&xo(qr(t=Error(i(423),{cause:r}),n)),(e=e.current.alternate).flags|=65536,o&=-o,e.lanes|=o,r=qr(r,n),xa(e,o=Is(e.stateNode,r,o)),4!==Su&&(Su=2)),!1;var a=Error(i(520),{cause:r});if(a=qr(a,n),null===Iu?Iu=[a]:Iu.push(a),4!==Su&&(Su=2),null===t)return!0;r=qr(r,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=o&-o,n.lanes|=e,xa(n,e=Is(n.stateNode,r,e)),!1;case 1:if(t=n.type,a=n.stateNode,0===(128&n.flags)&&("function"===typeof t.getDerivedStateFromError||null!==a&&"function"===typeof a.componentDidCatch&&(null===Bu||!Bu.has(a))))return n.flags|=65536,o&=-o,n.lanes|=o,Ms(o=Os(o),e,n,r),xa(n,o),!1}n=n.return}while(null!==n);return!1}(e,o,t,n,gu))return Su=1,As(e,qr(n,e.current)),void(mu=null)}catch(a){if(null!==o)throw mu=o,a;return Su=1,As(e,qr(n,e.current)),void(mu=null)}32768&t.flags?(fo||1===r?e=!0:_u||0!==(536870912&gu)?e=!1:(bu=e=!0,(2===r||9===r||3===r||6===r)&&(null!==(r=La.current)&&13===r.tag&&(r.flags|=16384))),hc(t,e)):pc(t)}function pc(e){var t=e;do{if(0!==(32768&t.flags))return void hc(t,bu);e=t.return;var n=pl(t.alternate,t,xu);if(null!==n)return void(mu=n);if(null!==(t=t.sibling))return void(mu=t);mu=t=e}while(null!==t);0===Su&&(Su=5)}function hc(e,t){do{var n=hl(e.alternate,e);if(null!==n)return n.flags&=32767,void(mu=n);if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling))return void(mu=e);mu=e=n}while(null!==e);Su=6,mu=null}function mc(e,t,n,r,o,a,s,l,u){e.cancelPendingCommit=null;do{_c()}while(0!==Nu);if(0!==(6&pu))throw Error(i(327));if(null!==t){if(t===e.current)throw Error(i(177));if(a=t.lanes|t.childLanes,function(e,t,n,r,o,a){var i=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var s=e.entanglements,l=e.expirationTimes,u=e.hiddenUpdates;for(n=i&~n;0<n;){var c=31-_e(n),d=1<<c;s[c]=0,l[c]=-1;var f=u[c];if(null!==f)for(u[c]=null,c=0;c<f.length;c++){var p=f[c];null!==p&&(p.lane&=-536870913)}n&=~d}0!==r&&Le(e,r,0),0!==a&&0===o&&0!==e.tag&&(e.suspendedLanes|=a&~(i&~t))}(e,n,a|=Ir,s,l,u),e===hu&&(mu=hu=null,gu=0),Fu=t,Vu=e,Uu=n,zu=a,Gu=o,Wu=r,0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?(e.callbackNode=null,e.callbackPriority=0,oe(fe,function(){return Tc(),null})):(e.callbackNode=null,e.callbackPriority=0),r=0!==(13878&t.flags),0!==(13878&t.subtreeFlags)||r){r=k.T,k.T=null,o=D.p,D.p=2,s=pu,pu|=4;try{!function(e,t){if(e=e.containerInfo,hd=_f,or(e=rr(e))){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var o=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch(g){n=null;break e}var s=0,l=-1,u=-1,c=0,d=0,f=e,p=null;t:for(;;){for(var h;f!==n||0!==o&&3!==f.nodeType||(l=s+o),f!==a||0!==r&&3!==f.nodeType||(u=s+r),3===f.nodeType&&(s+=f.nodeValue.length),null!==(h=f.firstChild);)p=f,f=h;for(;;){if(f===e)break t;if(p===n&&++c===o&&(l=s),p===a&&++d===r&&(u=s),null!==(h=f.nextSibling))break;p=(f=p).parentNode}f=h}n=-1===l||-1===u?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(md={focusedElem:e,selectionRange:n},_f=!1,Ll=t;null!==Ll;)if(e=(t=Ll).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Ll=e;else for(;null!==Ll;){switch(a=(t=Ll).alternate,e=t.flags,t.tag){case 0:if(0!==(4&e)&&null!==(e=null!==(e=t.updateQueue)?e.events:null))for(n=0;n<e.length;n++)(o=e[n]).ref.impl=o.nextImpl;break;case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(0!==(1024&e)&&null!==a){e=void 0,n=t,o=a.memoizedProps,a=a.memoizedState,r=n.stateNode;try{var m=Ss(n.type,o);e=r.getSnapshotBeforeUpdate(m,a),r.__reactInternalSnapshotBeforeUpdate=e}catch(v){Sc(n,n.return,v)}}break;case 3:if(0!==(1024&e))if(9===(n=(e=t.stateNode.containerInfo).nodeType))Id(e);else if(1===n)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Id(e);break;default:e.textContent=""}break;default:if(0!==(1024&e))throw Error(i(163))}if(null!==(e=t.sibling)){e.return=t.return,Ll=e;break}Ll=t.return}}(e,t)}finally{pu=s,D.p=o,k.T=r}}Nu=1,gc(),vc(),yc()}}function gc(){if(1===Nu){Nu=0;var e=Vu,t=Fu,n=0!==(13878&t.flags);if(0!==(13878&t.subtreeFlags)||n){n=k.T,k.T=null;var r=D.p;D.p=2;var o=pu;pu|=4;try{jl(t,e);var a=md,i=rr(e.containerInfo),s=a.focusedElem,l=a.selectionRange;if(i!==s&&s&&s.ownerDocument&&nr(s.ownerDocument.documentElement,s)){if(null!==l&&or(s)){var u=l.start,c=l.end;if(void 0===c&&(c=u),"selectionStart"in s)s.selectionStart=u,s.selectionEnd=Math.min(c,s.value.length);else{var d=s.ownerDocument||document,f=d&&d.defaultView||window;if(f.getSelection){var p=f.getSelection(),h=s.textContent.length,m=Math.min(l.start,h),g=void 0===l.end?m:Math.min(l.end,h);!p.extend&&m>g&&(i=g,g=m,m=i);var v=tr(s,m),y=tr(s,g);if(v&&y&&(1!==p.rangeCount||p.anchorNode!==v.node||p.anchorOffset!==v.offset||p.focusNode!==y.node||p.focusOffset!==y.offset)){var b=d.createRange();b.setStart(v.node,v.offset),p.removeAllRanges(),m>g?(p.addRange(b),p.extend(y.node,y.offset)):(b.setEnd(y.node,y.offset),p.addRange(b))}}}}for(d=[],p=s;p=p.parentNode;)1===p.nodeType&&d.push({element:p,left:p.scrollLeft,top:p.scrollTop});for("function"===typeof s.focus&&s.focus(),s=0;s<d.length;s++){var _=d[s];_.element.scrollLeft=_.left,_.element.scrollTop=_.top}}_f=!!hd,md=hd=null}finally{pu=o,D.p=r,k.T=n}}e.current=t,Nu=2}}function vc(){if(2===Nu){Nu=0;var e=Vu,t=Fu,n=0!==(8772&t.flags);if(0!==(8772&t.subtreeFlags)||n){n=k.T,k.T=null;var r=D.p;D.p=2;var o=pu;pu|=4;try{kl(e,t.alternate,t)}finally{pu=o,D.p=r,k.T=n}}Nu=3}}function yc(){if(4===Nu||3===Nu){Nu=0,se();var e=Vu,t=Fu,n=Uu,r=Wu;0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?Nu=5:(Nu=0,Fu=Vu=null,bc(e,e.pendingLanes));var o=e.pendingLanes;if(0===o&&(Bu=null),Ne(n),t=t.stateNode,ye&&"function"===typeof ye.onCommitFiberRoot)try{ye.onCommitFiberRoot(ve,t,void 0,128===(128&t.current.flags))}catch(l){}if(null!==r){t=k.T,o=D.p,D.p=2,k.T=null;try{for(var a=e.onRecoverableError,i=0;i<r.length;i++){var s=r[i];a(s.value,{componentStack:s.stack})}}finally{k.T=t,D.p=o}}0!==(3&Uu)&&_c(),Dc(e),o=e.pendingLanes,0!==(261930&n)&&0!==(42&o)?e===ju?Hu++:(Hu=0,ju=e):Hu=0,Bc(0,!1)}}function bc(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,zo(t)))}function _c(){return gc(),vc(),yc(),Tc()}function Tc(){if(5!==Nu)return!1;var e=Vu,t=zu;zu=0;var n=Ne(Uu),r=k.T,o=D.p;try{D.p=32>n?32:n,k.T=null,n=Gu,Gu=null;var a=Vu,s=Uu;if(Nu=0,Fu=Vu=null,Uu=0,0!==(6&pu))throw Error(i(331));var l=pu;if(pu|=4,lu(a.current),eu(a,a.current,s,n),pu=l,Bc(0,!1),ye&&"function"===typeof ye.onPostCommitFiberRoot)try{ye.onPostCommitFiberRoot(ve,a)}catch(u){}return!0}finally{D.p=o,k.T=r,bc(e,t)}}function xc(e,t,n){t=qr(n,t),null!==(e=_a(e,t=Is(e.stateNode,t,2),2))&&(Re(e,2),Dc(e))}function Sc(e,t,n){if(3===e.tag)xc(e,e,n);else for(;null!==t;){if(3===t.tag){xc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Bu||!Bu.has(r))){e=qr(n,e),null!==(r=_a(t,n=Os(2),2))&&(Ms(n,r,t,e),Re(r,2),Dc(r));break}}t=t.return}}function wc(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new fu;var o=new Set;r.set(t,o)}else void 0===(o=r.get(t))&&(o=new Set,r.set(t,o));o.has(n)||(Tu=!0,o.add(n),e=Cc.bind(null,e,t,n),t.then(e,e))}function Cc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,hu===e&&(gu&n)===n&&(4===Su||3===Su&&(62914560&gu)===gu&&300>le()-Ru?0===(2&pu)&&tc(e,0):Pu|=n,Eu===gu&&(Eu=0)),Dc(e)}function Pc(e,t){0===t&&(t=Oe()),null!==(e=Lr(e,t))&&(Re(e,t),Dc(e))}function Ac(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Pc(e,n)}function Ec(e,t){var n=0;switch(e.tag){case 31:case 13:var r=e.stateNode,o=e.memoizedState;null!==o&&(n=o.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(i(314))}null!==r&&r.delete(t),Pc(e,n)}var Ic=null,Oc=null,Mc=!1,Rc=!1,Lc=!1,kc=0;function Dc(e){e!==Oc&&null===e.next&&(null===Oc?Ic=Oc=e:Oc=Oc.next=e),Rc=!0,Mc||(Mc=!0,wd(function(){0!==(6&pu)?oe(ce,Nc):Vc()}))}function Bc(e,t){if(!Lc&&Rc){Lc=!0;do{for(var n=!1,r=Ic;null!==r;){if(!t)if(0!==e){var o=r.pendingLanes;if(0===o)var a=0;else{var i=r.suspendedLanes,s=r.pingedLanes;a=(1<<31-_e(42|e)+1)-1,a=201326741&(a&=o&~(i&~s))?201326741&a|1:a?2|a:0}0!==a&&(n=!0,zc(r,a))}else a=gu,0===(3&(a=Ae(r,r===hu?a:0,null!==r.cancelPendingCommit||-1!==r.timeoutHandle)))||Ee(r,a)||(n=!0,zc(r,a));r=r.next}}while(n);Lc=!1}}function Nc(){Vc()}function Vc(){Rc=Mc=!1;var e=0;0!==kc&&function(){var e=window.event;if(e&&"popstate"===e.type)return e!==_d&&(_d=e,!0);return _d=null,!1}()&&(e=kc);for(var t=le(),n=null,r=Ic;null!==r;){var o=r.next,a=Fc(r,t);0===a?(r.next=null,null===n?Ic=o:n.next=o,null===o&&(Oc=n)):(n=r,(0!==e||0!==(3&a))&&(Rc=!0)),r=o}0!==Nu&&5!==Nu||Bc(e,!1),0!==kc&&(kc=0)}function Fc(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,o=e.expirationTimes,a=-62914561&e.pendingLanes;0<a;){var i=31-_e(a),s=1<<i,l=o[i];-1===l?0!==(s&n)&&0===(s&r)||(o[i]=Ie(s,t)):l<=t&&(e.expiredLanes|=s),a&=~s}if(n=gu,n=Ae(e,e===(t=hu)?n:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),r=e.callbackNode,0===n||e===t&&(2===vu||9===vu)||null!==e.cancelPendingCommit)return null!==r&&null!==r&&ae(r),e.callbackNode=null,e.callbackPriority=0;if(0===(3&n)||Ee(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==r&&ae(r),Ne(n)){case 2:case 8:n=de;break;case 32:default:n=fe;break;case 268435456:n=he}return r=Uc.bind(null,e),n=oe(n,r),e.callbackPriority=t,e.callbackNode=n,t}return null!==r&&null!==r&&ae(r),e.callbackPriority=2,e.callbackNode=null,2}function Uc(e,t){if(0!==Nu&&5!==Nu)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(_c()&&e.callbackNode!==n)return null;var r=gu;return 0===(r=Ae(e,e===hu?r:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:(Xu(e,r,t),Fc(e,le()),null!=e.callbackNode&&e.callbackNode===n?Uc.bind(null,e):null)}function zc(e,t){if(_c())return null;Xu(e,t,!0)}function Gc(){if(0===kc){var e=Ho;0===e&&(e=Se,0===(261888&(Se<<=1))&&(Se=256)),kc=e}return kc}function Wc(e){return null==e||"symbol"===typeof e||"boolean"===typeof e?null:"function"===typeof e?e:Mt(""+e)}function Hc(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}for(var jc=0;jc<wr.length;jc++){var Kc=wr[jc];Cr(Kc.toLowerCase(),"on"+(Kc[0].toUpperCase()+Kc.slice(1)))}Cr(gr,"onAnimationEnd"),Cr(vr,"onAnimationIteration"),Cr(yr,"onAnimationStart"),Cr("dblclick","onDoubleClick"),Cr("focusin","onFocus"),Cr("focusout","onBlur"),Cr(br,"onTransitionRun"),Cr(_r,"onTransitionStart"),Cr(Tr,"onTransitionCancel"),Cr(xr,"onTransitionEnd"),ot("onMouseEnter",["mouseout","mouseover"]),ot("onMouseLeave",["mouseout","mouseover"]),ot("onPointerEnter",["pointerout","pointerover"]),ot("onPointerLeave",["pointerout","pointerover"]),rt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),rt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),rt("onBeforeInput",["compositionend","keypress","textInput","paste"]),rt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),rt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),rt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Zc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),qc=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Zc));function Xc(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],o=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var i=r.length-1;0<=i;i--){var s=r[i],l=s.instance,u=s.currentTarget;if(s=s.listener,l!==a&&o.isPropagationStopped())break e;a=s,o.currentTarget=u;try{a(o)}catch(c){Pr(c)}o.currentTarget=null,a=l}else for(i=0;i<r.length;i++){if(l=(s=r[i]).instance,u=s.currentTarget,s=s.listener,l!==a&&o.isPropagationStopped())break e;a=s,o.currentTarget=u;try{a(o)}catch(c){Pr(c)}o.currentTarget=null,a=l}}}}function Yc(e,t){var n=t[He];void 0===n&&(n=t[He]=new Set);var r=e+"__bubble";n.has(r)||(ed(t,e,2,!1),n.add(r))}function Qc(e,t,n){var r=0;t&&(r|=4),ed(n,e,r,t)}var $c="_reactListening"+Math.random().toString(36).slice(2);function Jc(e){if(!e[$c]){e[$c]=!0,tt.forEach(function(t){"selectionchange"!==t&&(qc.has(t)||Qc(t,!1,e),Qc(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[$c]||(t[$c]=!0,Qc("selectionchange",!1,t))}}function ed(e,t,n,r){switch(Af(t)){case 2:var o=Tf;break;case 8:o=xf;break;default:o=Sf}n=o.bind(null,t,n,e),o=void 0,!Gt||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(o=!0),r?void 0!==o?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):void 0!==o?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function td(e,t,n,r,o){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var i=r.tag;if(3===i||4===i){var s=r.stateNode.containerInfo;if(s===o)break;if(4===i)for(i=r.return;null!==i;){var u=i.tag;if((3===u||4===u)&&i.stateNode.containerInfo===o)return;i=i.return}for(;null!==s;){if(null===(i=Ye(s)))return;if(5===(u=i.tag)||6===u||26===u||27===u){r=a=i;continue e}s=s.parentNode}}r=r.return}Ft(function(){var r=a,o=kt(n),i=[];e:{var s=Sr.get(e);if(void 0!==s){var u=nn,c=e;switch(e){case"keypress":if(0===qt(n))break e;case"keydown":case"keyup":u=yn;break;case"focusin":c="focus",u=un;break;case"focusout":c="blur",u=un;break;case"beforeblur":case"afterblur":u=un;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=sn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=ln;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=_n;break;case gr:case vr:case yr:u=cn;break;case xr:u=Tn;break;case"scroll":case"scrollend":u=on;break;case"wheel":u=xn;break;case"copy":case"cut":case"paste":u=dn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=bn;break;case"toggle":case"beforetoggle":u=Sn}var d=0!==(4&t),f=!d&&("scroll"===e||"scrollend"===e),p=d?null!==s?s+"Capture":null:s;d=[];for(var h,m=r;null!==m;){var g=m;if(h=g.stateNode,5!==(g=g.tag)&&26!==g&&27!==g||null===h||null===p||null!=(g=Ut(m,p))&&d.push(nd(m,g,h)),f)break;m=m.return}0<d.length&&(s=new u(s,c,null,n,o),i.push({event:s,listeners:d}))}}if(0===(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===Lt||!(c=n.relatedTarget||n.fromElement)||!Ye(c)&&!c[We])&&(u||s)&&(s=o.window===o?o:(s=o.ownerDocument)?s.defaultView||s.parentWindow:window,u?(u=r,null!==(c=(c=n.relatedTarget||n.toElement)?Ye(c):null)&&(f=l(c),d=c.tag,c!==f||5!==d&&27!==d&&6!==d)&&(c=null)):(u=null,c=r),u!==c)){if(d=sn,g="onMouseLeave",p="onMouseEnter",m="mouse","pointerout"!==e&&"pointerover"!==e||(d=bn,g="onPointerLeave",p="onPointerEnter",m="pointer"),f=null==u?s:$e(u),h=null==c?s:$e(c),(s=new d(g,m+"leave",u,n,o)).target=f,s.relatedTarget=h,g=null,Ye(o)===r&&((d=new d(p,m+"enter",c,n,o)).target=h,d.relatedTarget=f,g=d),f=g,u&&c)e:{for(d=od,m=c,h=0,g=p=u;g;g=d(g))h++;g=0;for(var v=m;v;v=d(v))g++;for(;0<h-g;)p=d(p),h--;for(;0<g-h;)m=d(m),g--;for(;h--;){if(p===m||null!==m&&p===m.alternate){d=p;break e}p=d(p),m=d(m)}d=null}else d=null;null!==u&&ad(i,s,u,d,!1),null!==c&&null!==f&&ad(i,f,c,d,!0)}if("select"===(u=(s=r?$e(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===u&&"file"===s.type)var y=zn;else if(Dn(s))if(Gn)y=Qn;else{y=Xn;var b=qn}else!(u=s.nodeName)||"input"!==u.toLowerCase()||"checkbox"!==s.type&&"radio"!==s.type?r&&Et(r.elementType)&&(y=zn):y=Yn;switch(y&&(y=y(e,r))?Bn(i,y,n,o):(b&&b(e,s,r),"focusout"===e&&r&&"number"===s.type&&null!=r.memoizedProps.value&&_t(s,"number",s.value)),b=r?$e(r):window,e){case"focusin":(Dn(b)||"true"===b.contentEditable)&&(ir=b,sr=r,lr=null);break;case"focusout":lr=sr=ir=null;break;case"mousedown":ur=!0;break;case"contextmenu":case"mouseup":case"dragend":ur=!1,cr(i,n,o);break;case"selectionchange":if(ar)break;case"keydown":case"keyup":cr(i,n,o)}var _;if(Cn)e:{switch(e){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else Ln?Mn(e,n)&&(T="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(T="onCompositionStart");T&&(En&&"ko"!==n.locale&&(Ln||"onCompositionStart"!==T?"onCompositionEnd"===T&&Ln&&(_=Zt()):(jt="value"in(Ht=o)?Ht.value:Ht.textContent,Ln=!0)),0<(b=rd(r,T)).length&&(T=new fn(T,e,null,n,o),i.push({event:T,listeners:b}),_?T.data=_:null!==(_=Rn(n))&&(T.data=_))),(_=An?function(e,t){switch(e){case"compositionend":return Rn(t);case"keypress":return 32!==t.which?null:(On=!0,In);case"textInput":return(e=t.data)===In&&On?null:e;default:return null}}(e,n):function(e,t){if(Ln)return"compositionend"===e||!Cn&&Mn(e,t)?(e=Zt(),Kt=jt=Ht=null,Ln=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return En&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(T=rd(r,"onBeforeInput")).length&&(b=new fn("onBeforeInput","beforeinput",null,n,o),i.push({event:b,listeners:T}),b.data=_)),function(e,t,n,r,o){if("submit"===t&&n&&n.stateNode===o){var a=Wc((o[Ge]||null).action),i=r.submitter;i&&null!==(t=(t=i[Ge]||null)?Wc(t.formAction):i.getAttribute("formAction"))&&(a=t,i=null);var s=new nn("action","action",null,r,o);e.push({event:s,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(0!==kc){var e=i?Hc(o,i):new FormData(o);ts(n,{pending:!0,data:e,method:o.method,action:a},null,e)}}else"function"===typeof a&&(s.preventDefault(),e=i?Hc(o,i):new FormData(o),ts(n,{pending:!0,data:e,method:o.method,action:a},a,e))},currentTarget:o}]})}}(i,e,r,n,o)}Xc(i,t)})}function nd(e,t,n){return{instance:e,listener:t,currentTarget:n}}function rd(e,t){for(var n=t+"Capture",r=[];null!==e;){var o=e,a=o.stateNode;if(5!==(o=o.tag)&&26!==o&&27!==o||null===a||(null!=(o=Ut(e,n))&&r.unshift(nd(e,o,a)),null!=(o=Ut(e,t))&&r.push(nd(e,o,a))),3===e.tag)return r;e=e.return}return[]}function od(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function ad(e,t,n,r,o){for(var a=t._reactName,i=[];null!==n&&n!==r;){var s=n,l=s.alternate,u=s.stateNode;if(s=s.tag,null!==l&&l===r)break;5!==s&&26!==s&&27!==s||null===u||(l=u,o?null!=(u=Ut(n,a))&&i.unshift(nd(n,u,l)):o||null!=(u=Ut(n,a))&&i.push(nd(n,u,l))),n=n.return}0!==i.length&&e.push({event:t,listeners:i})}var id=/\r\n?/g,sd=/\u0000|\uFFFD/g;function ld(e){return("string"===typeof e?e:""+e).replace(id,"\n").replace(sd,"")}function ud(e,t){return t=ld(t),ld(e)===t}function cd(e,t,n,r,o,a){switch(n){case"children":"string"===typeof r?"body"===t||"textarea"===t&&""===r||wt(e,r):("number"===typeof r||"bigint"===typeof r)&&"body"!==t&&wt(e,""+r);break;case"className":ut(e,"class",r);break;case"tabIndex":ut(e,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":ut(e,n,r);break;case"style":At(e,r,a);break;case"data":if("object"!==t){ut(e,"data",r);break}case"src":case"href":if(""===r&&("a"!==t||"href"!==n)){e.removeAttribute(n);break}if(null==r||"function"===typeof r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=Mt(""+r),e.setAttribute(n,r);break;case"action":case"formAction":if("function"===typeof r){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"===typeof a&&("formAction"===n?("input"!==t&&cd(e,t,"name",o.name,o,null),cd(e,t,"formEncType",o.formEncType,o,null),cd(e,t,"formMethod",o.formMethod,o,null),cd(e,t,"formTarget",o.formTarget,o,null)):(cd(e,t,"encType",o.encType,o,null),cd(e,t,"method",o.method,o,null),cd(e,t,"target",o.target,o,null))),null==r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=Mt(""+r),e.setAttribute(n,r);break;case"onClick":null!=r&&(e.onclick=Rt);break;case"onScroll":null!=r&&Yc("scroll",e);break;case"onScrollEnd":null!=r&&Yc("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(i(61));if(null!=(n=r.__html)){if(null!=o.children)throw Error(i(60));e.innerHTML=n}}break;case"multiple":e.multiple=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"muted":e.muted=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==r||"function"===typeof r||"boolean"===typeof r||"symbol"===typeof r){e.removeAttribute("xlink:href");break}n=Mt(""+r),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""+r):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":!0===r?e.setAttribute(n,""):!1!==r&&null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,r):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":null!=r&&"function"!==typeof r&&"symbol"!==typeof r&&!isNaN(r)&&1<=r?e.setAttribute(n,r):e.removeAttribute(n);break;case"rowSpan":case"start":null==r||"function"===typeof r||"symbol"===typeof r||isNaN(r)?e.removeAttribute(n):e.setAttribute(n,r);break;case"popover":Yc("beforetoggle",e),Yc("toggle",e),lt(e,"popover",r);break;case"xlinkActuate":ct(e,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":ct(e,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":ct(e,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":ct(e,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":ct(e,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":ct(e,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":ct(e,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":ct(e,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":ct(e,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":lt(e,"is",r);break;case"innerText":case"textContent":break;default:(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&lt(e,n=It.get(n)||n,r)}}function dd(e,t,n,r,o,a){switch(n){case"style":At(e,r,a);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(i(61));if(null!=(n=r.__html)){if(null!=o.children)throw Error(i(60));e.innerHTML=n}}break;case"children":"string"===typeof r?wt(e,r):("number"===typeof r||"bigint"===typeof r)&&wt(e,""+r);break;case"onScroll":null!=r&&Yc("scroll",e);break;case"onScrollEnd":null!=r&&Yc("scrollend",e);break;case"onClick":null!=r&&(e.onclick=Rt);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:nt.hasOwnProperty(n)||("o"!==n[0]||"n"!==n[1]||(o=n.endsWith("Capture"),t=n.slice(2,o?n.length-7:void 0),"function"===typeof(a=null!=(a=e[Ge]||null)?a[n]:null)&&e.removeEventListener(t,a,o),"function"!==typeof r)?n in e?e[n]=r:!0===r?e.setAttribute(n,""):lt(e,n,r):("function"!==typeof a&&null!==a&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,r,o)))}}function fd(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Yc("error",e),Yc("load",e);var r,o=!1,a=!1;for(r in n)if(n.hasOwnProperty(r)){var s=n[r];if(null!=s)switch(r){case"src":o=!0;break;case"srcSet":a=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,t));default:cd(e,t,r,s,n,null)}}return a&&cd(e,t,"srcSet",n.srcSet,n,null),void(o&&cd(e,t,"src",n.src,n,null));case"input":Yc("invalid",e);var l=r=s=a=null,u=null,c=null;for(o in n)if(n.hasOwnProperty(o)){var d=n[o];if(null!=d)switch(o){case"name":a=d;break;case"type":s=d;break;case"checked":u=d;break;case"defaultChecked":c=d;break;case"value":r=d;break;case"defaultValue":l=d;break;case"children":case"dangerouslySetInnerHTML":if(null!=d)throw Error(i(137,t));break;default:cd(e,t,o,d,n,null)}}return void bt(e,r,l,u,c,s,a,!1);case"select":for(a in Yc("invalid",e),o=s=r=null,n)if(n.hasOwnProperty(a)&&null!=(l=n[a]))switch(a){case"value":r=l;break;case"defaultValue":s=l;break;case"multiple":o=l;default:cd(e,t,a,l,n,null)}return t=r,n=s,e.multiple=!!o,void(null!=t?Tt(e,!!o,t,!1):null!=n&&Tt(e,!!o,n,!0));case"textarea":for(s in Yc("invalid",e),r=a=o=null,n)if(n.hasOwnProperty(s)&&null!=(l=n[s]))switch(s){case"value":o=l;break;case"defaultValue":a=l;break;case"children":r=l;break;case"dangerouslySetInnerHTML":if(null!=l)throw Error(i(91));break;default:cd(e,t,s,l,n,null)}return void St(e,o,a,r);case"option":for(u in n)if(n.hasOwnProperty(u)&&null!=(o=n[u]))if("selected"===u)e.selected=o&&"function"!==typeof o&&"symbol"!==typeof o;else cd(e,t,u,o,n,null);return;case"dialog":Yc("beforetoggle",e),Yc("toggle",e),Yc("cancel",e),Yc("close",e);break;case"iframe":case"object":Yc("load",e);break;case"video":case"audio":for(o=0;o<Zc.length;o++)Yc(Zc[o],e);break;case"image":Yc("error",e),Yc("load",e);break;case"details":Yc("toggle",e);break;case"embed":case"source":case"link":Yc("error",e),Yc("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(c in n)if(n.hasOwnProperty(c)&&null!=(o=n[c]))switch(c){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,t));default:cd(e,t,c,o,n,null)}return;default:if(Et(t)){for(d in n)n.hasOwnProperty(d)&&(void 0!==(o=n[d])&&dd(e,t,d,o,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(null!=(o=n[l])&&cd(e,t,l,o,n,null))}function pd(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}var hd=null,md=null;function gd(e){return 9===e.nodeType?e:e.ownerDocument}function vd(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function yd(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function bd(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"bigint"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var _d=null;var Td="function"===typeof setTimeout?setTimeout:void 0,xd="function"===typeof clearTimeout?clearTimeout:void 0,Sd="function"===typeof Promise?Promise:void 0,wd="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof Sd?function(e){return Sd.resolve(null).then(e).catch(Cd)}:Td;function Cd(e){setTimeout(function(){throw e})}function Pd(e){return"head"===e}function Ad(e,t){var n=t,r=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&8===o.nodeType)if("/$"===(n=o.data)||"/&"===n){if(0===r)return e.removeChild(o),void jf(t);r--}else if("$"===n||"$?"===n||"$~"===n||"$!"===n||"&"===n)r++;else if("html"===n)Vd(e.ownerDocument.documentElement);else if("head"===n){Vd(n=e.ownerDocument.head);for(var a=n.firstChild;a;){var i=a.nextSibling,s=a.nodeName;a[qe]||"SCRIPT"===s||"STYLE"===s||"LINK"===s&&"stylesheet"===a.rel.toLowerCase()||n.removeChild(a),a=i}}else"body"===n&&Vd(e.ownerDocument.body);n=o}while(n);jf(t)}function Ed(e,t){var n=e;e=0;do{var r=n.nextSibling;if(1===n.nodeType?t?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",""===n.getAttribute("style")&&n.removeAttribute("style")):3===n.nodeType&&(t?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),r&&8===r.nodeType)if("/$"===(n=r.data)){if(0===e)break;e--}else"$"!==n&&"$?"!==n&&"$~"!==n&&"$!"!==n||e++;n=r}while(n)}function Id(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":Id(n),Xe(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===n.rel.toLowerCase())continue}e.removeChild(n)}}function Od(e,t){for(;8!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!t)return null;if(null===(e=Ld(e.nextSibling)))return null}return e}function Md(e){return"$?"===e.data||"$~"===e.data}function Rd(e){return"$!"===e.data||"$?"===e.data&&"loading"!==e.ownerDocument.readyState}function Ld(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"$~"===t||"&"===t||"F!"===t||"F"===t)break;if("/$"===t||"/&"===t)return null}}return e}var kd=null;function Dd(e){e=e.nextSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n||"/&"===n){if(0===t)return Ld(e.nextSibling);t--}else"$"!==n&&"$!"!==n&&"$?"!==n&&"$~"!==n&&"&"!==n||t++}e=e.nextSibling}return null}function Bd(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n||"$~"===n||"&"===n){if(0===t)return e;t--}else"/$"!==n&&"/&"!==n||t++}e=e.previousSibling}return null}function Nd(e,t,n){switch(t=gd(n),e){case"html":if(!(e=t.documentElement))throw Error(i(452));return e;case"head":if(!(e=t.head))throw Error(i(453));return e;case"body":if(!(e=t.body))throw Error(i(454));return e;default:throw Error(i(451))}}function Vd(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Xe(e)}var Fd=new Map,Ud=new Set;function zd(e){return"function"===typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var Gd=D.d;D.d={f:function(){var e=Gd.f(),t=Ju();return e||t},r:function(e){var t=Qe(e);null!==t&&5===t.tag&&"form"===t.type?rs(t):Gd.r(e)},D:function(e){Gd.D(e),Hd("dns-prefetch",e,null)},C:function(e,t){Gd.C(e,t),Hd("preconnect",e,t)},L:function(e,t,n){Gd.L(e,t,n);var r=Wd;if(r&&e&&t){var o='link[rel="preload"][as="'+vt(t)+'"]';"image"===t&&n&&n.imageSrcSet?(o+='[imagesrcset="'+vt(n.imageSrcSet)+'"]',"string"===typeof n.imageSizes&&(o+='[imagesizes="'+vt(n.imageSizes)+'"]')):o+='[href="'+vt(e)+'"]';var a=o;switch(t){case"style":a=Kd(e);break;case"script":a=Xd(e)}Fd.has(a)||(e=p({rel:"preload",href:"image"===t&&n&&n.imageSrcSet?void 0:e,as:t},n),Fd.set(a,e),null!==r.querySelector(o)||"style"===t&&r.querySelector(Zd(a))||"script"===t&&r.querySelector(Yd(a))||(fd(t=r.createElement("link"),"link",e),et(t),r.head.appendChild(t)))}},m:function(e,t){Gd.m(e,t);var n=Wd;if(n&&e){var r=t&&"string"===typeof t.as?t.as:"script",o='link[rel="modulepreload"][as="'+vt(r)+'"][href="'+vt(e)+'"]',a=o;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":a=Xd(e)}if(!Fd.has(a)&&(e=p({rel:"modulepreload",href:e},t),Fd.set(a,e),null===n.querySelector(o))){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Yd(a)))return}fd(r=n.createElement("link"),"link",e),et(r),n.head.appendChild(r)}}},X:function(e,t){Gd.X(e,t);var n=Wd;if(n&&e){var r=Je(n).hoistableScripts,o=Xd(e),a=r.get(o);a||((a=n.querySelector(Yd(o)))||(e=p({src:e,async:!0},t),(t=Fd.get(o))&&ef(e,t),et(a=n.createElement("script")),fd(a,"link",e),n.head.appendChild(a)),a={type:"script",instance:a,count:1,state:null},r.set(o,a))}},S:function(e,t,n){Gd.S(e,t,n);var r=Wd;if(r&&e){var o=Je(r).hoistableStyles,a=Kd(e);t=t||"default";var i=o.get(a);if(!i){var s={loading:0,preload:null};if(i=r.querySelector(Zd(a)))s.loading=5;else{e=p({rel:"stylesheet",href:e,"data-precedence":t},n),(n=Fd.get(a))&&Jd(e,n);var l=i=r.createElement("link");et(l),fd(l,"link",e),l._p=new Promise(function(e,t){l.onload=e,l.onerror=t}),l.addEventListener("load",function(){s.loading|=1}),l.addEventListener("error",function(){s.loading|=2}),s.loading|=4,$d(i,t,r)}i={type:"stylesheet",instance:i,count:1,state:s},o.set(a,i)}}},M:function(e,t){Gd.M(e,t);var n=Wd;if(n&&e){var r=Je(n).hoistableScripts,o=Xd(e),a=r.get(o);a||((a=n.querySelector(Yd(o)))||(e=p({src:e,async:!0,type:"module"},t),(t=Fd.get(o))&&ef(e,t),et(a=n.createElement("script")),fd(a,"link",e),n.head.appendChild(a)),a={type:"script",instance:a,count:1,state:null},r.set(o,a))}}};var Wd="undefined"===typeof document?null:document;function Hd(e,t,n){var r=Wd;if(r&&"string"===typeof t&&t){var o=vt(t);o='link[rel="'+e+'"][href="'+o+'"]',"string"===typeof n&&(o+='[crossorigin="'+n+'"]'),Ud.has(o)||(Ud.add(o),e={rel:e,crossOrigin:n,href:t},null===r.querySelector(o)&&(fd(t=r.createElement("link"),"link",e),et(t),r.head.appendChild(t)))}}function jd(e,t,n,r){var o,a,s,l,u=(u=K.current)?zd(u):null;if(!u)throw Error(i(446));switch(e){case"meta":case"title":return null;case"style":return"string"===typeof n.precedence&&"string"===typeof n.href?(t=Kd(n.href),(r=(n=Je(u).hoistableStyles).get(t))||(r={type:"style",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===n.rel&&"string"===typeof n.href&&"string"===typeof n.precedence){e=Kd(n.href);var c=Je(u).hoistableStyles,d=c.get(e);if(d||(u=u.ownerDocument||u,d={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},c.set(e,d),(c=u.querySelector(Zd(e)))&&!c._p&&(d.instance=c,d.state.loading=5),Fd.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Fd.set(e,n),c||(o=u,a=e,s=n,l=d.state,o.querySelector('link[rel="preload"][as="style"]['+a+"]")?l.loading=1:(a=o.createElement("link"),l.preload=a,a.addEventListener("load",function(){return l.loading|=1}),a.addEventListener("error",function(){return l.loading|=2}),fd(a,"link",s),et(a),o.head.appendChild(a))))),t&&null===r)throw Error(i(528,""));return d}if(t&&null!==r)throw Error(i(529,""));return null;case"script":return t=n.async,"string"===typeof(n=n.src)&&t&&"function"!==typeof t&&"symbol"!==typeof t?(t=Xd(n),(r=(n=Je(u).hoistableScripts).get(t))||(r={type:"script",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,e))}}function Kd(e){return'href="'+vt(e)+'"'}function Zd(e){return'link[rel="stylesheet"]['+e+"]"}function qd(e){return p({},e,{"data-precedence":e.precedence,precedence:null})}function Xd(e){return'[src="'+vt(e)+'"]'}function Yd(e){return"script[async]"+e}function Qd(e,t,n){if(t.count++,null===t.instance)switch(t.type){case"style":var r=e.querySelector('style[data-href~="'+vt(n.href)+'"]');if(r)return t.instance=r,et(r),r;var o=p({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return et(r=(e.ownerDocument||e).createElement("style")),fd(r,"style",o),$d(r,n.precedence,e),t.instance=r;case"stylesheet":o=Kd(n.href);var a=e.querySelector(Zd(o));if(a)return t.state.loading|=4,t.instance=a,et(a),a;r=qd(n),(o=Fd.get(o))&&Jd(r,o),et(a=(e.ownerDocument||e).createElement("link"));var s=a;return s._p=new Promise(function(e,t){s.onload=e,s.onerror=t}),fd(a,"link",r),t.state.loading|=4,$d(a,n.precedence,e),t.instance=a;case"script":return a=Xd(n.src),(o=e.querySelector(Yd(a)))?(t.instance=o,et(o),o):(r=n,(o=Fd.get(a))&&ef(r=p({},n),o),et(o=(e=e.ownerDocument||e).createElement("script")),fd(o,"link",r),e.head.appendChild(o),t.instance=o);case"void":return null;default:throw Error(i(443,t.type))}else"stylesheet"===t.type&&0===(4&t.state.loading)&&(r=t.instance,t.state.loading|=4,$d(r,n.precedence,e));return t.instance}function $d(e,t,n){for(var r=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),o=r.length?r[r.length-1]:null,a=o,i=0;i<r.length;i++){var s=r[i];if(s.dataset.precedence===t)a=s;else if(a!==o)break}a?a.parentNode.insertBefore(e,a.nextSibling):(t=9===n.nodeType?n.head:n).insertBefore(e,t.firstChild)}function Jd(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function ef(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var tf=null;function nf(e,t,n){if(null===tf){var r=new Map,o=tf=new Map;o.set(n,r)}else(r=(o=tf).get(n))||(r=new Map,o.set(n,r));if(r.has(e))return r;for(r.set(e,null),n=n.getElementsByTagName(e),o=0;o<n.length;o++){var a=n[o];if(!(a[qe]||a[ze]||"link"===e&&"stylesheet"===a.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==a.namespaceURI){var i=a.getAttribute(t)||"";i=e+i;var s=r.get(i);s?s.push(a):r.set(i,[a])}}return r}function rf(e,t,n){(e=e.ownerDocument||e).head.insertBefore(n,"title"===t?e.querySelector("head > title"):null)}function of(e){return"stylesheet"!==e.type||0!==(3&e.state.loading)}var af=0;function sf(){if(this.count--,0===this.count&&(0===this.imgCount||!this.waitingForImages))if(this.stylesheets)uf(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var lf=null;function uf(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,lf=new Map,t.forEach(cf,e),lf=null,sf.call(e))}function cf(e,t){if(!(4&t.state.loading)){var n=lf.get(e);if(n)var r=n.get(null);else{n=new Map,lf.set(e,n);for(var o=e.querySelectorAll("link[data-precedence],style[data-precedence]"),a=0;a<o.length;a++){var i=o[a];"LINK"!==i.nodeName&&"not all"===i.getAttribute("media")||(n.set(i.dataset.precedence,i),r=i)}r&&n.set(null,r)}i=(o=t.instance).getAttribute("data-precedence"),(a=n.get(i)||r)===r&&n.set(null,o),n.set(i,o),this.count++,r=sf.bind(this),o.addEventListener("load",r),o.addEventListener("error",r),a?a.parentNode.insertBefore(o,a.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(o,e.firstChild),t.state.loading|=4}}var df={$$typeof:T,Provider:null,Consumer:null,_currentValue:B,_currentValue2:B,_threadCount:0};function ff(e,t,n,r,o,a,i,s,l){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Me(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Me(0),this.hiddenUpdates=Me(null),this.identifierPrefix=r,this.onUncaughtError=o,this.onCaughtError=a,this.onRecoverableError=i,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=l,this.incompleteTransitions=new Map}function pf(e,t,n,r,o,a,i,s,l,u,c,d){return e=new ff(e,t,n,i,l,u,c,d,s),t=1,!0===a&&(t|=24),a=Vr(3,null,null,t),e.current=a,a.stateNode=e,(t=Uo()).refCount++,e.pooledCache=t,t.refCount++,a.memoizedState={element:r,isDehydrated:n,cache:t},va(a),e}function hf(e){return e?e=Br:Br}function mf(e,t,n,r,o,a){o=hf(o),null===r.context?r.context=o:r.pendingContext=o,(r=ba(t)).payload={element:n},null!==(a=void 0===a?null:a)&&(r.callback=a),null!==(n=_a(e,r,t))&&(qu(n,0,t),Ta(n,e,t))}function gf(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function vf(e,t){gf(e,t),(e=e.alternate)&&gf(e,t)}function yf(e){if(13===e.tag||31===e.tag){var t=Lr(e,67108864);null!==t&&qu(t,0,67108864),vf(e,67108864)}}function bf(e){if(13===e.tag||31===e.tag){var t=Ku(),n=Lr(e,t=Be(t));null!==n&&qu(n,0,t),vf(e,t)}}var _f=!0;function Tf(e,t,n,r){var o=k.T;k.T=null;var a=D.p;try{D.p=2,Sf(e,t,n,r)}finally{D.p=a,k.T=o}}function xf(e,t,n,r){var o=k.T;k.T=null;var a=D.p;try{D.p=8,Sf(e,t,n,r)}finally{D.p=a,k.T=o}}function Sf(e,t,n,r){if(_f){var o=wf(r);if(null===o)td(e,t,r,Cf,n),Bf(e,r);else if(function(e,t,n,r,o){switch(t){case"focusin":return If=Nf(If,e,t,n,r,o),!0;case"dragenter":return Of=Nf(Of,e,t,n,r,o),!0;case"mouseover":return Mf=Nf(Mf,e,t,n,r,o),!0;case"pointerover":var a=o.pointerId;return Rf.set(a,Nf(Rf.get(a)||null,e,t,n,r,o)),!0;case"gotpointercapture":return a=o.pointerId,Lf.set(a,Nf(Lf.get(a)||null,e,t,n,r,o)),!0}return!1}(o,e,t,n,r))r.stopPropagation();else if(Bf(e,r),4&t&&-1<Df.indexOf(e)){for(;null!==o;){var a=Qe(o);if(null!==a)switch(a.tag){case 3:if((a=a.stateNode).current.memoizedState.isDehydrated){var i=Pe(a.pendingLanes);if(0!==i){var s=a;for(s.pendingLanes|=2,s.entangledLanes|=2;i;){var l=1<<31-_e(i);s.entanglements[1]|=l,i&=~l}Dc(a),0===(6&pu)&&(ku=le()+500,Bc(0,!1))}}break;case 31:case 13:null!==(s=Lr(a,2))&&qu(s,0,2),Ju(),vf(a,2)}if(null===(a=wf(r))&&td(e,t,r,Cf,n),a===o)break;o=a}null!==o&&r.stopPropagation()}else td(e,t,r,null,n)}}function wf(e){return Pf(e=kt(e))}var Cf=null;function Pf(e){if(Cf=null,null!==(e=Ye(e))){var t=l(e);if(null===t)e=null;else{var n=t.tag;if(13===n){if(null!==(e=u(t)))return e;e=null}else if(31===n){if(null!==(e=c(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Cf=e,null}function Af(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ue()){case ce:return 2;case de:return 8;case fe:case pe:return 32;case he:return 268435456;default:return 32}default:return 32}}var Ef=!1,If=null,Of=null,Mf=null,Rf=new Map,Lf=new Map,kf=[],Df="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Bf(e,t){switch(e){case"focusin":case"focusout":If=null;break;case"dragenter":case"dragleave":Of=null;break;case"mouseover":case"mouseout":Mf=null;break;case"pointerover":case"pointerout":Rf.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Lf.delete(t.pointerId)}}function Nf(e,t,n,r,o,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[o]},null!==t&&(null!==(t=Qe(t))&&yf(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==o&&-1===t.indexOf(o)&&t.push(o),e)}function Vf(e){var t=Ye(e.target);if(null!==t){var n=l(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=u(n)))return e.blockedOn=t,void Fe(e.priority,function(){bf(n)})}else if(31===t){if(null!==(t=c(n)))return e.blockedOn=t,void Fe(e.priority,function(){bf(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ff(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=wf(e.nativeEvent);if(null!==n)return null!==(t=Qe(n))&&yf(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);Lt=r,n.target.dispatchEvent(r),Lt=null,t.shift()}return!0}function Uf(e,t,n){Ff(e)&&n.delete(t)}function zf(){Ef=!1,null!==If&&Ff(If)&&(If=null),null!==Of&&Ff(Of)&&(Of=null),null!==Mf&&Ff(Mf)&&(Mf=null),Rf.forEach(Uf),Lf.forEach(Uf)}function Gf(e,t){e.blockedOn===t&&(e.blockedOn=null,Ef||(Ef=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,zf)))}var Wf=null;function Hf(e){Wf!==e&&(Wf=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Wf===e&&(Wf=null);for(var t=0;t<e.length;t+=3){var n=e[t],r=e[t+1],o=e[t+2];if("function"!==typeof r){if(null===Pf(r||n))continue;break}var a=Qe(n);null!==a&&(e.splice(t,3),t-=3,ts(a,{pending:!0,data:o,method:n.method,action:r},r,o))}}))}function jf(e){function t(t){return Gf(t,e)}null!==If&&Gf(If,e),null!==Of&&Gf(Of,e),null!==Mf&&Gf(Mf,e),Rf.forEach(t),Lf.forEach(t);for(var n=0;n<kf.length;n++){var r=kf[n];r.blockedOn===e&&(r.blockedOn=null)}for(;0<kf.length&&null===(n=kf[0]).blockedOn;)Vf(n),null===n.blockedOn&&kf.shift();if(null!=(n=(e.ownerDocument||e).$$reactFormReplay))for(r=0;r<n.length;r+=3){var o=n[r],a=n[r+1],i=o[Ge]||null;if("function"===typeof a)i||Hf(n);else if(i){var s=null;if(a&&a.hasAttribute("formAction")){if(o=a,i=a[Ge]||null)s=i.formAction;else if(null!==Pf(o))continue}else s=i.action;"function"===typeof s?n[r+1]=s:(n.splice(r,3),r-=3),Hf(n)}}}function Kf(){function e(e){e.canIntercept&&"react-transition"===e.info&&e.intercept({handler:function(){return new Promise(function(e){return o=e})},focusReset:"manual",scroll:"manual"})}function t(){null!==o&&(o(),o=null),r||setTimeout(n,20)}function n(){if(!r&&!navigation.transition){var e=navigation.currentEntry;e&&null!=e.url&&navigation.navigate(e.url,{state:e.getState(),info:"react-transition",history:"replace"})}}if("object"===typeof navigation){var r=!1,o=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(n,100),function(){r=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),null!==o&&(o(),o=null)}}}function Zf(e){this._internalRoot=e}function qf(e){this._internalRoot=e}qf.prototype.render=Zf.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(i(409));mf(t.current,Ku(),e,t,null,null)},qf.prototype.unmount=Zf.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;mf(e.current,2,null,e,null,null),Ju(),t[We]=null}},qf.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ve();e={blockedOn:null,target:e,priority:t};for(var n=0;n<kf.length&&0!==t&&t<kf[n].priority;n++);kf.splice(n,0,e),0===n&&Vf(e)}};var Xf=o.version;if("19.2.0"!==Xf)throw Error(i(527,Xf,"19.2.0"));D.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(i(188));throw e=Object.keys(e).join(","),Error(i(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=l(e)))throw Error(i(188));return t!==e?null:e}for(var n=e,r=t;;){var o=n.return;if(null===o)break;var a=o.alternate;if(null===a){if(null!==(r=o.return)){n=r;continue}break}if(o.child===a.child){for(a=o.child;a;){if(a===n)return d(o),e;if(a===r)return d(o),t;a=a.sibling}throw Error(i(188))}if(n.return!==r.return)n=o,r=a;else{for(var s=!1,u=o.child;u;){if(u===n){s=!0,n=o,r=a;break}if(u===r){s=!0,r=o,n=a;break}u=u.sibling}if(!s){for(u=a.child;u;){if(u===n){s=!0,n=a,r=o;break}if(u===r){s=!0,r=a,n=o;break}u=u.sibling}if(!s)throw Error(i(189))}}if(n.alternate!==r)throw Error(i(190))}if(3!==n.tag)throw Error(i(188));return n.stateNode.current===n?e:t}(t),e=null===(e=null!==e?f(e):null)?null:e.stateNode};var Yf={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:k,reconcilerVersion:"19.2.0"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Qf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Qf.isDisabled&&Qf.supportsFiber)try{ve=Qf.inject(Yf),ye=Qf}catch(Jf){}}t.createRoot=function(e,t){if(!s(e))throw Error(i(299));var n=!1,r="",o=ws,a=Cs,l=Ps;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onUncaughtError&&(o=t.onUncaughtError),void 0!==t.onCaughtError&&(a=t.onCaughtError),void 0!==t.onRecoverableError&&(l=t.onRecoverableError)),t=pf(e,1,!1,null,0,n,r,null,o,a,l,Kf),e[We]=t.current,Jc(e),new Zf(t)},t.hydrateRoot=function(e,t,n){if(!s(e))throw Error(i(299));var r=!1,o="",a=ws,l=Cs,u=Ps,c=null;return null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onUncaughtError&&(a=n.onUncaughtError),void 0!==n.onCaughtError&&(l=n.onCaughtError),void 0!==n.onRecoverableError&&(u=n.onRecoverableError),void 0!==n.formState&&(c=n.formState)),(t=pf(e,1,!0,t,0,r,o,c,a,l,u,Kf)).context=hf(null),n=t.current,(o=ba(r=Be(r=Ku()))).callback=null,_a(n,o,r),n=r,t.current.lanes=n,Re(t,n),Dc(t),e[We]=t.current,Jc(e),new qf(t)},t.version="19.2.0"},16:function(e,t,n){var r;!function(e,o){function a(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),r==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function i(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function s(e,t){var n=new a(e),r=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=n.next,o.quick=o,r&&("object"==typeof r&&i(r,n),o.state=function(){return i(n,{})}),o}o&&o.exports?o.exports=s:n.amdD&&n.amdO?void 0===(r=function(){return s}.call(t,n,t,o))||(o.exports=r):this.xorwow=s}(0,e=n.nmd(e),n.amdD)},38:(e,t,n)=>{"use strict";var r;if(!Object.keys){var o=Object.prototype.hasOwnProperty,a=Object.prototype.toString,i=n(234),s=Object.prototype.propertyIsEnumerable,l=!s.call({toString:null},"toString"),u=s.call(function(){},"prototype"),c=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],d=function(e){var t=e.constructor;return t&&t.prototype===e},f={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},p=function(){if("undefined"===typeof window)return!1;for(var e in window)try{if(!f["$"+e]&&o.call(window,e)&&null!==window[e]&&"object"===typeof window[e])try{d(window[e])}catch(t){return!0}}catch(t){return!0}return!1}();r=function(e){var t=null!==e&&"object"===typeof e,n="[object Function]"===a.call(e),r=i(e),s=t&&"[object String]"===a.call(e),f=[];if(!t&&!n&&!r)throw new TypeError("Object.keys called on a non-object");var h=u&&n;if(s&&e.length>0&&!o.call(e,0))for(var m=0;m<e.length;++m)f.push(String(m));if(r&&e.length>0)for(var g=0;g<e.length;++g)f.push(String(g));else for(var v in e)h&&"prototype"===v||!o.call(e,v)||f.push(String(v));if(l)for(var y=function(e){if("undefined"===typeof window||!p)return d(e);try{return d(e)}catch(t){return!1}}(e),b=0;b<c.length;++b)y&&"constructor"===c[b]||!o.call(e,c[b])||f.push(c[b]);return f}}e.exports=r},43:(e,t,n)=>{"use strict";e.exports=n(288)},66:function(e,t,n){var r;!function(e,o){function a(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),t.next()}function i(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function s(e,t){var n=new a(e),r=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=n.next,o.quick=o,r&&("object"==typeof r&&i(r,n),o.state=function(){return i(n,{})}),o}o&&o.exports?o.exports=s:n.amdD&&n.amdO?void 0===(r=function(){return s}.call(t,n,t,o))||(o.exports=r):this.xor128=s}(0,e=n.nmd(e),n.amdD)},90:e=>{"use strict";var t=Object.defineProperty||!1;if(t)try{t({},"a",{value:1})}catch(n){t=!1}e.exports=t},101:(e,t,n)=>{"use strict";var r=n(90),o=function(){return!!r};o.hasArrayLengthDefineBug=function(){if(!r)return null;try{return 1!==r([],"length",{value:1}).length}catch(e){return!0}},e.exports=o},122:e=>{"use strict";e.exports=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var r,o,a;if(Array.isArray(t)){if((r=t.length)!=n.length)return!1;for(o=r;0!==o--;)if(!e(t[o],n[o]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((r=(a=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(o=r;0!==o--;)if(!Object.prototype.hasOwnProperty.call(n,a[o]))return!1;for(o=r;0!==o--;){var i=a[o];if(!e(t[i],n[i]))return!1}return!0}return t!==t&&n!==n}},228:function(e,t){!function(e){"use strict";var t="1.9.4";function n(e){var t,n,r,o;for(n=1,r=arguments.length;n<r;n++)for(t in o=arguments[n])e[t]=o[t];return e}var r=Object.create||function(){function e(){}return function(t){return e.prototype=t,new e}}();function o(e,t){var n=Array.prototype.slice;if(e.bind)return e.bind.apply(e,n.call(arguments,1));var r=n.call(arguments,2);return function(){return e.apply(t,r.length?r.concat(n.call(arguments)):arguments)}}var a=0;function i(e){return"_leaflet_id"in e||(e._leaflet_id=++a),e._leaflet_id}function s(e,t,n){var r,o,a,i;return i=function(){r=!1,o&&(a.apply(n,o),o=!1)},a=function(){r?o=arguments:(e.apply(n,arguments),setTimeout(i,t),r=!0)},a}function l(e,t,n){var r=t[1],o=t[0],a=r-o;return e===r&&n?e:((e-o)%a+a)%a+o}function u(){return!1}function c(e,t){if(!1===t)return e;var n=Math.pow(10,void 0===t?6:t);return Math.round(e*n)/n}function d(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function f(e){return d(e).split(/\s+/)}function p(e,t){for(var n in Object.prototype.hasOwnProperty.call(e,"options")||(e.options=e.options?r(e.options):{}),t)e.options[n]=t[n];return e.options}function h(e,t,n){var r=[];for(var o in e)r.push(encodeURIComponent(n?o.toUpperCase():o)+"="+encodeURIComponent(e[o]));return(t&&-1!==t.indexOf("?")?"&":"?")+r.join("&")}var m=/\{ *([\w_ -]+) *\}/g;function g(e,t){return e.replace(m,function(e,n){var r=t[n];if(void 0===r)throw new Error("No value provided for variable "+e);return"function"===typeof r&&(r=r(t)),r})}var v=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function y(e,t){for(var n=0;n<e.length;n++)if(e[n]===t)return n;return-1}var b="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function _(e){return window["webkit"+e]||window["moz"+e]||window["ms"+e]}var T=0;function x(e){var t=+new Date,n=Math.max(0,16-(t-T));return T=t+n,window.setTimeout(e,n)}var S=window.requestAnimationFrame||_("RequestAnimationFrame")||x,w=window.cancelAnimationFrame||_("CancelAnimationFrame")||_("CancelRequestAnimationFrame")||function(e){window.clearTimeout(e)};function C(e,t,n){if(!n||S!==x)return S.call(window,o(e,t));e.call(t)}function P(e){e&&w.call(window,e)}var A={__proto__:null,extend:n,create:r,bind:o,get lastId(){return a},stamp:i,throttle:s,wrapNum:l,falseFn:u,formatNum:c,trim:d,splitWords:f,setOptions:p,getParamString:h,template:g,isArray:v,indexOf:y,emptyImageUrl:b,requestFn:S,cancelFn:w,requestAnimFrame:C,cancelAnimFrame:P};function E(){}function I(e){if("undefined"!==typeof L&&L&&L.Mixin){e=v(e)?e:[e];for(var t=0;t<e.length;t++)e[t]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",(new Error).stack)}}E.extend=function(e){var t=function(){p(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},o=t.__super__=this.prototype,a=r(o);for(var i in a.constructor=t,t.prototype=a,this)Object.prototype.hasOwnProperty.call(this,i)&&"prototype"!==i&&"__super__"!==i&&(t[i]=this[i]);return e.statics&&n(t,e.statics),e.includes&&(I(e.includes),n.apply(null,[a].concat(e.includes))),n(a,e),delete a.statics,delete a.includes,a.options&&(a.options=o.options?r(o.options):{},n(a.options,e.options)),a._initHooks=[],a.callInitHooks=function(){if(!this._initHooksCalled){o.callInitHooks&&o.callInitHooks.call(this),this._initHooksCalled=!0;for(var e=0,t=a._initHooks.length;e<t;e++)a._initHooks[e].call(this)}},t},E.include=function(e){var t=this.prototype.options;return n(this.prototype,e),e.options&&(this.prototype.options=t,this.mergeOptions(e.options)),this},E.mergeOptions=function(e){return n(this.prototype.options,e),this},E.addInitHook=function(e){var t=Array.prototype.slice.call(arguments,1),n="function"===typeof e?e:function(){this[e].apply(this,t)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(n),this};var O={on:function(e,t,n){if("object"===typeof e)for(var r in e)this._on(r,e[r],t);else for(var o=0,a=(e=f(e)).length;o<a;o++)this._on(e[o],t,n);return this},off:function(e,t,n){if(arguments.length)if("object"===typeof e)for(var r in e)this._off(r,e[r],t);else{e=f(e);for(var o=1===arguments.length,a=0,i=e.length;a<i;a++)o?this._off(e[a]):this._off(e[a],t,n)}else delete this._events;return this},_on:function(e,t,n,r){if("function"===typeof t){if(!1===this._listens(e,t,n)){n===this&&(n=void 0);var o={fn:t,ctx:n};r&&(o.once=!0),this._events=this._events||{},this._events[e]=this._events[e]||[],this._events[e].push(o)}}else console.warn("wrong listener type: "+typeof t)},_off:function(e,t,n){var r,o,a;if(this._events&&(r=this._events[e]))if(1!==arguments.length)if("function"===typeof t){var i=this._listens(e,t,n);if(!1!==i){var s=r[i];this._firingCount&&(s.fn=u,this._events[e]=r=r.slice()),r.splice(i,1)}}else console.warn("wrong listener type: "+typeof t);else{if(this._firingCount)for(o=0,a=r.length;o<a;o++)r[o].fn=u;delete this._events[e]}},fire:function(e,t,r){if(!this.listens(e,r))return this;var o=n({},t,{type:e,target:this,sourceTarget:t&&t.sourceTarget||this});if(this._events){var a=this._events[e];if(a){this._firingCount=this._firingCount+1||1;for(var i=0,s=a.length;i<s;i++){var l=a[i],u=l.fn;l.once&&this.off(e,u,l.ctx),u.call(l.ctx||this,o)}this._firingCount--}}return r&&this._propagateEvent(o),this},listens:function(e,t,n,r){"string"!==typeof e&&console.warn('"string" type argument expected');var o=t;"function"!==typeof t&&(r=!!t,o=void 0,n=void 0);var a=this._events&&this._events[e];if(a&&a.length&&!1!==this._listens(e,o,n))return!0;if(r)for(var i in this._eventParents)if(this._eventParents[i].listens(e,t,n,r))return!0;return!1},_listens:function(e,t,n){if(!this._events)return!1;var r=this._events[e]||[];if(!t)return!!r.length;n===this&&(n=void 0);for(var o=0,a=r.length;o<a;o++)if(r[o].fn===t&&r[o].ctx===n)return o;return!1},once:function(e,t,n){if("object"===typeof e)for(var r in e)this._on(r,e[r],t,!0);else for(var o=0,a=(e=f(e)).length;o<a;o++)this._on(e[o],t,n,!0);return this},addEventParent:function(e){return this._eventParents=this._eventParents||{},this._eventParents[i(e)]=e,this},removeEventParent:function(e){return this._eventParents&&delete this._eventParents[i(e)],this},_propagateEvent:function(e){for(var t in this._eventParents)this._eventParents[t].fire(e.type,n({layer:e.target,propagatedFrom:e.target},e),!0)}};O.addEventListener=O.on,O.removeEventListener=O.clearAllEventListeners=O.off,O.addOneTimeEventListener=O.once,O.fireEvent=O.fire,O.hasEventListeners=O.listens;var M=E.extend(O);function R(e,t,n){this.x=n?Math.round(e):e,this.y=n?Math.round(t):t}var k=Math.trunc||function(e){return e>0?Math.floor(e):Math.ceil(e)};function D(e,t,n){return e instanceof R?e:v(e)?new R(e[0],e[1]):void 0===e||null===e?e:"object"===typeof e&&"x"in e&&"y"in e?new R(e.x,e.y):new R(e,t,n)}function B(e,t){if(e)for(var n=t?[e,t]:e,r=0,o=n.length;r<o;r++)this.extend(n[r])}function N(e,t){return!e||e instanceof B?e:new B(e,t)}function V(e,t){if(e)for(var n=t?[e,t]:e,r=0,o=n.length;r<o;r++)this.extend(n[r])}function F(e,t){return e instanceof V?e:new V(e,t)}function U(e,t,n){if(isNaN(e)||isNaN(t))throw new Error("Invalid LatLng object: ("+e+", "+t+")");this.lat=+e,this.lng=+t,void 0!==n&&(this.alt=+n)}function z(e,t,n){return e instanceof U?e:v(e)&&"object"!==typeof e[0]?3===e.length?new U(e[0],e[1],e[2]):2===e.length?new U(e[0],e[1]):null:void 0===e||null===e?e:"object"===typeof e&&"lat"in e?new U(e.lat,"lng"in e?e.lng:e.lon,e.alt):void 0===t?null:new U(e,t,n)}R.prototype={clone:function(){return new R(this.x,this.y)},add:function(e){return this.clone()._add(D(e))},_add:function(e){return this.x+=e.x,this.y+=e.y,this},subtract:function(e){return this.clone()._subtract(D(e))},_subtract:function(e){return this.x-=e.x,this.y-=e.y,this},divideBy:function(e){return this.clone()._divideBy(e)},_divideBy:function(e){return this.x/=e,this.y/=e,this},multiplyBy:function(e){return this.clone()._multiplyBy(e)},_multiplyBy:function(e){return this.x*=e,this.y*=e,this},scaleBy:function(e){return new R(this.x*e.x,this.y*e.y)},unscaleBy:function(e){return new R(this.x/e.x,this.y/e.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=k(this.x),this.y=k(this.y),this},distanceTo:function(e){var t=(e=D(e)).x-this.x,n=e.y-this.y;return Math.sqrt(t*t+n*n)},equals:function(e){return(e=D(e)).x===this.x&&e.y===this.y},contains:function(e){return e=D(e),Math.abs(e.x)<=Math.abs(this.x)&&Math.abs(e.y)<=Math.abs(this.y)},toString:function(){return"Point("+c(this.x)+", "+c(this.y)+")"}},B.prototype={extend:function(e){var t,n;if(!e)return this;if(e instanceof R||"number"===typeof e[0]||"x"in e)t=n=D(e);else if(t=(e=N(e)).min,n=e.max,!t||!n)return this;return this.min||this.max?(this.min.x=Math.min(t.x,this.min.x),this.max.x=Math.max(n.x,this.max.x),this.min.y=Math.min(t.y,this.min.y),this.max.y=Math.max(n.y,this.max.y)):(this.min=t.clone(),this.max=n.clone()),this},getCenter:function(e){return D((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,e)},getBottomLeft:function(){return D(this.min.x,this.max.y)},getTopRight:function(){return D(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(e){var t,n;return(e="number"===typeof e[0]||e instanceof R?D(e):N(e))instanceof B?(t=e.min,n=e.max):t=n=e,t.x>=this.min.x&&n.x<=this.max.x&&t.y>=this.min.y&&n.y<=this.max.y},intersects:function(e){e=N(e);var t=this.min,n=this.max,r=e.min,o=e.max,a=o.x>=t.x&&r.x<=n.x,i=o.y>=t.y&&r.y<=n.y;return a&&i},overlaps:function(e){e=N(e);var t=this.min,n=this.max,r=e.min,o=e.max,a=o.x>t.x&&r.x<n.x,i=o.y>t.y&&r.y<n.y;return a&&i},isValid:function(){return!(!this.min||!this.max)},pad:function(e){var t=this.min,n=this.max,r=Math.abs(t.x-n.x)*e,o=Math.abs(t.y-n.y)*e;return N(D(t.x-r,t.y-o),D(n.x+r,n.y+o))},equals:function(e){return!!e&&(e=N(e),this.min.equals(e.getTopLeft())&&this.max.equals(e.getBottomRight()))}},V.prototype={extend:function(e){var t,n,r=this._southWest,o=this._northEast;if(e instanceof U)t=e,n=e;else{if(!(e instanceof V))return e?this.extend(z(e)||F(e)):this;if(t=e._southWest,n=e._northEast,!t||!n)return this}return r||o?(r.lat=Math.min(t.lat,r.lat),r.lng=Math.min(t.lng,r.lng),o.lat=Math.max(n.lat,o.lat),o.lng=Math.max(n.lng,o.lng)):(this._southWest=new U(t.lat,t.lng),this._northEast=new U(n.lat,n.lng)),this},pad:function(e){var t=this._southWest,n=this._northEast,r=Math.abs(t.lat-n.lat)*e,o=Math.abs(t.lng-n.lng)*e;return new V(new U(t.lat-r,t.lng-o),new U(n.lat+r,n.lng+o))},getCenter:function(){return new U((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new U(this.getNorth(),this.getWest())},getSouthEast:function(){return new U(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(e){e="number"===typeof e[0]||e instanceof U||"lat"in e?z(e):F(e);var t,n,r=this._southWest,o=this._northEast;return e instanceof V?(t=e.getSouthWest(),n=e.getNorthEast()):t=n=e,t.lat>=r.lat&&n.lat<=o.lat&&t.lng>=r.lng&&n.lng<=o.lng},intersects:function(e){e=F(e);var t=this._southWest,n=this._northEast,r=e.getSouthWest(),o=e.getNorthEast(),a=o.lat>=t.lat&&r.lat<=n.lat,i=o.lng>=t.lng&&r.lng<=n.lng;return a&&i},overlaps:function(e){e=F(e);var t=this._southWest,n=this._northEast,r=e.getSouthWest(),o=e.getNorthEast(),a=o.lat>t.lat&&r.lat<n.lat,i=o.lng>t.lng&&r.lng<n.lng;return a&&i},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(e,t){return!!e&&(e=F(e),this._southWest.equals(e.getSouthWest(),t)&&this._northEast.equals(e.getNorthEast(),t))},isValid:function(){return!(!this._southWest||!this._northEast)}},U.prototype={equals:function(e,t){return!!e&&(e=z(e),Math.max(Math.abs(this.lat-e.lat),Math.abs(this.lng-e.lng))<=(void 0===t?1e-9:t))},toString:function(e){return"LatLng("+c(this.lat,e)+", "+c(this.lng,e)+")"},distanceTo:function(e){return W.distance(this,z(e))},wrap:function(){return W.wrapLatLng(this)},toBounds:function(e){var t=180*e/40075017,n=t/Math.cos(Math.PI/180*this.lat);return F([this.lat-t,this.lng-n],[this.lat+t,this.lng+n])},clone:function(){return new U(this.lat,this.lng,this.alt)}};var G={latLngToPoint:function(e,t){var n=this.projection.project(e),r=this.scale(t);return this.transformation._transform(n,r)},pointToLatLng:function(e,t){var n=this.scale(t),r=this.transformation.untransform(e,n);return this.projection.unproject(r)},project:function(e){return this.projection.project(e)},unproject:function(e){return this.projection.unproject(e)},scale:function(e){return 256*Math.pow(2,e)},zoom:function(e){return Math.log(e/256)/Math.LN2},getProjectedBounds:function(e){if(this.infinite)return null;var t=this.projection.bounds,n=this.scale(e);return new B(this.transformation.transform(t.min,n),this.transformation.transform(t.max,n))},infinite:!1,wrapLatLng:function(e){var t=this.wrapLng?l(e.lng,this.wrapLng,!0):e.lng;return new U(this.wrapLat?l(e.lat,this.wrapLat,!0):e.lat,t,e.alt)},wrapLatLngBounds:function(e){var t=e.getCenter(),n=this.wrapLatLng(t),r=t.lat-n.lat,o=t.lng-n.lng;if(0===r&&0===o)return e;var a=e.getSouthWest(),i=e.getNorthEast();return new V(new U(a.lat-r,a.lng-o),new U(i.lat-r,i.lng-o))}},W=n({},G,{wrapLng:[-180,180],R:6371e3,distance:function(e,t){var n=Math.PI/180,r=e.lat*n,o=t.lat*n,a=Math.sin((t.lat-e.lat)*n/2),i=Math.sin((t.lng-e.lng)*n/2),s=a*a+Math.cos(r)*Math.cos(o)*i*i,l=2*Math.atan2(Math.sqrt(s),Math.sqrt(1-s));return this.R*l}}),H=6378137,j={R:H,MAX_LATITUDE:85.0511287798,project:function(e){var t=Math.PI/180,n=this.MAX_LATITUDE,r=Math.max(Math.min(n,e.lat),-n),o=Math.sin(r*t);return new R(this.R*e.lng*t,this.R*Math.log((1+o)/(1-o))/2)},unproject:function(e){var t=180/Math.PI;return new U((2*Math.atan(Math.exp(e.y/this.R))-Math.PI/2)*t,e.x*t/this.R)},bounds:function(){var e=H*Math.PI;return new B([-e,-e],[e,e])}()};function K(e,t,n,r){if(v(e))return this._a=e[0],this._b=e[1],this._c=e[2],void(this._d=e[3]);this._a=e,this._b=t,this._c=n,this._d=r}function Z(e,t,n,r){return new K(e,t,n,r)}K.prototype={transform:function(e,t){return this._transform(e.clone(),t)},_transform:function(e,t){return t=t||1,e.x=t*(this._a*e.x+this._b),e.y=t*(this._c*e.y+this._d),e},untransform:function(e,t){return t=t||1,new R((e.x/t-this._b)/this._a,(e.y/t-this._d)/this._c)}};var q=n({},W,{code:"EPSG:3857",projection:j,transformation:function(){var e=.5/(Math.PI*j.R);return Z(e,.5,-e,.5)}()}),X=n({},q,{code:"EPSG:900913"});function Y(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function Q(e,t){var n,r,o,a,i,s,l="";for(n=0,o=e.length;n<o;n++){for(r=0,a=(i=e[n]).length;r<a;r++)l+=(r?"L":"M")+(s=i[r]).x+" "+s.y;l+=t?Be.svg?"z":"x":""}return l||"M0 0"}var $=document.documentElement.style,J="ActiveXObject"in window,ee=J&&!document.addEventListener,te="msLaunchUri"in navigator&&!("documentMode"in document),ne=De("webkit"),re=De("android"),oe=De("android 2")||De("android 3"),ae=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),ie=re&&De("Google")&&ae<537&&!("AudioNode"in window),se=!!window.opera,le=!te&&De("chrome"),ue=De("gecko")&&!ne&&!se&&!J,ce=!le&&De("safari"),de=De("phantom"),fe="OTransition"in $,pe=0===navigator.platform.indexOf("Win"),he=J&&"transition"in $,me="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!oe,ge="MozPerspective"in $,ve=!window.L_DISABLE_3D&&(he||me||ge)&&!fe&&!de,ye="undefined"!==typeof orientation||De("mobile"),be=ye&&ne,_e=ye&&me,Te=!window.PointerEvent&&window.MSPointerEvent,xe=!(!window.PointerEvent&&!Te),Se="ontouchstart"in window||!!window.TouchEvent,we=!window.L_NO_TOUCH&&(Se||xe),Ce=ye&&se,Pe=ye&&ue,Ae=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Ee=function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("testPassiveEventSupport",u,t),window.removeEventListener("testPassiveEventSupport",u,t)}catch(n){}return e}(),Ie=!!document.createElement("canvas").getContext,Oe=!(!document.createElementNS||!Y("svg").createSVGRect),Me=!!Oe&&function(){var e=document.createElement("div");return e.innerHTML="<svg/>","http://www.w3.org/2000/svg"===(e.firstChild&&e.firstChild.namespaceURI)}(),Re=!Oe&&function(){try{var e=document.createElement("div");e.innerHTML='<v:shape adj="1"/>';var t=e.firstChild;return t.style.behavior="url(#default#VML)",t&&"object"===typeof t.adj}catch(n){return!1}}(),Le=0===navigator.platform.indexOf("Mac"),ke=0===navigator.platform.indexOf("Linux");function De(e){return navigator.userAgent.toLowerCase().indexOf(e)>=0}var Be={ie:J,ielt9:ee,edge:te,webkit:ne,android:re,android23:oe,androidStock:ie,opera:se,chrome:le,gecko:ue,safari:ce,phantom:de,opera12:fe,win:pe,ie3d:he,webkit3d:me,gecko3d:ge,any3d:ve,mobile:ye,mobileWebkit:be,mobileWebkit3d:_e,msPointer:Te,pointer:xe,touch:we,touchNative:Se,mobileOpera:Ce,mobileGecko:Pe,retina:Ae,passiveEvents:Ee,canvas:Ie,svg:Oe,vml:Re,inlineSvg:Me,mac:Le,linux:ke},Ne=Be.msPointer?"MSPointerDown":"pointerdown",Ve=Be.msPointer?"MSPointerMove":"pointermove",Fe=Be.msPointer?"MSPointerUp":"pointerup",Ue=Be.msPointer?"MSPointerCancel":"pointercancel",ze={touchstart:Ne,touchmove:Ve,touchend:Fe,touchcancel:Ue},Ge={touchstart:$e,touchmove:Qe,touchend:Qe,touchcancel:Qe},We={},He=!1;function je(e,t,n){return"touchstart"===t&&Ye(),Ge[t]?(n=Ge[t].bind(this,n),e.addEventListener(ze[t],n,!1),n):(console.warn("wrong event specified:",t),u)}function Ke(e,t,n){ze[t]?e.removeEventListener(ze[t],n,!1):console.warn("wrong event specified:",t)}function Ze(e){We[e.pointerId]=e}function qe(e){We[e.pointerId]&&(We[e.pointerId]=e)}function Xe(e){delete We[e.pointerId]}function Ye(){He||(document.addEventListener(Ne,Ze,!0),document.addEventListener(Ve,qe,!0),document.addEventListener(Fe,Xe,!0),document.addEventListener(Ue,Xe,!0),He=!0)}function Qe(e,t){if(t.pointerType!==(t.MSPOINTER_TYPE_MOUSE||"mouse")){for(var n in t.touches=[],We)t.touches.push(We[n]);t.changedTouches=[t],e(t)}}function $e(e,t){t.MSPOINTER_TYPE_TOUCH&&t.pointerType===t.MSPOINTER_TYPE_TOUCH&&Zt(t),Qe(e,t)}function Je(e){var t,n,r={};for(n in e)t=e[n],r[n]=t&&t.bind?t.bind(e):t;return e=r,r.type="dblclick",r.detail=2,r.isTrusted=!1,r._simulated=!0,r}var et=200;function tt(e,t){e.addEventListener("dblclick",t);var n,r=0;function o(e){if(1===e.detail){if("mouse"!==e.pointerType&&(!e.sourceCapabilities||e.sourceCapabilities.firesTouchEvents)){var o=Xt(e);if(!o.some(function(e){return e instanceof HTMLLabelElement&&e.attributes.for})||o.some(function(e){return e instanceof HTMLInputElement||e instanceof HTMLSelectElement})){var a=Date.now();a-r<=et?2===++n&&t(Je(e)):n=1,r=a}}}else n=e.detail}return e.addEventListener("click",o),{dblclick:t,simDblclick:o}}function nt(e,t){e.removeEventListener("dblclick",t.dblclick),e.removeEventListener("click",t.simDblclick)}var rt,ot,at,it,st,lt=Ct(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),ut=Ct(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),ct="webkitTransition"===ut||"OTransition"===ut?ut+"End":"transitionend";function dt(e){return"string"===typeof e?document.getElementById(e):e}function ft(e,t){var n=e.style[t]||e.currentStyle&&e.currentStyle[t];if((!n||"auto"===n)&&document.defaultView){var r=document.defaultView.getComputedStyle(e,null);n=r?r[t]:null}return"auto"===n?null:n}function pt(e,t,n){var r=document.createElement(e);return r.className=t||"",n&&n.appendChild(r),r}function ht(e){var t=e.parentNode;t&&t.removeChild(e)}function mt(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function gt(e){var t=e.parentNode;t&&t.lastChild!==e&&t.appendChild(e)}function vt(e){var t=e.parentNode;t&&t.firstChild!==e&&t.insertBefore(e,t.firstChild)}function yt(e,t){if(void 0!==e.classList)return e.classList.contains(t);var n=xt(e);return n.length>0&&new RegExp("(^|\\s)"+t+"(\\s|$)").test(n)}function bt(e,t){if(void 0!==e.classList)for(var n=f(t),r=0,o=n.length;r<o;r++)e.classList.add(n[r]);else if(!yt(e,t)){var a=xt(e);Tt(e,(a?a+" ":"")+t)}}function _t(e,t){void 0!==e.classList?e.classList.remove(t):Tt(e,d((" "+xt(e)+" ").replace(" "+t+" "," ")))}function Tt(e,t){void 0===e.className.baseVal?e.className=t:e.className.baseVal=t}function xt(e){return e.correspondingElement&&(e=e.correspondingElement),void 0===e.className.baseVal?e.className:e.className.baseVal}function St(e,t){"opacity"in e.style?e.style.opacity=t:"filter"in e.style&&wt(e,t)}function wt(e,t){var n=!1,r="DXImageTransform.Microsoft.Alpha";try{n=e.filters.item(r)}catch(o){if(1===t)return}t=Math.round(100*t),n?(n.Enabled=100!==t,n.Opacity=t):e.style.filter+=" progid:"+r+"(opacity="+t+")"}function Ct(e){for(var t=document.documentElement.style,n=0;n<e.length;n++)if(e[n]in t)return e[n];return!1}function Pt(e,t,n){var r=t||new R(0,0);e.style[lt]=(Be.ie3d?"translate("+r.x+"px,"+r.y+"px)":"translate3d("+r.x+"px,"+r.y+"px,0)")+(n?" scale("+n+")":"")}function At(e,t){e._leaflet_pos=t,Be.any3d?Pt(e,t):(e.style.left=t.x+"px",e.style.top=t.y+"px")}function Et(e){return e._leaflet_pos||new R(0,0)}if("onselectstart"in document)rt=function(){Nt(window,"selectstart",Zt)},ot=function(){Ft(window,"selectstart",Zt)};else{var It=Ct(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);rt=function(){if(It){var e=document.documentElement.style;at=e[It],e[It]="none"}},ot=function(){It&&(document.documentElement.style[It]=at,at=void 0)}}function Ot(){Nt(window,"dragstart",Zt)}function Mt(){Ft(window,"dragstart",Zt)}function Rt(e){for(;-1===e.tabIndex;)e=e.parentNode;e.style&&(Lt(),it=e,st=e.style.outlineStyle,e.style.outlineStyle="none",Nt(window,"keydown",Lt))}function Lt(){it&&(it.style.outlineStyle=st,it=void 0,st=void 0,Ft(window,"keydown",Lt))}function kt(e){do{e=e.parentNode}while((!e.offsetWidth||!e.offsetHeight)&&e!==document.body);return e}function Dt(e){var t=e.getBoundingClientRect();return{x:t.width/e.offsetWidth||1,y:t.height/e.offsetHeight||1,boundingClientRect:t}}var Bt={__proto__:null,TRANSFORM:lt,TRANSITION:ut,TRANSITION_END:ct,get:dt,getStyle:ft,create:pt,remove:ht,empty:mt,toFront:gt,toBack:vt,hasClass:yt,addClass:bt,removeClass:_t,setClass:Tt,getClass:xt,setOpacity:St,testProp:Ct,setTransform:Pt,setPosition:At,getPosition:Et,get disableTextSelection(){return rt},get enableTextSelection(){return ot},disableImageDrag:Ot,enableImageDrag:Mt,preventOutline:Rt,restoreOutline:Lt,getSizedParentNode:kt,getScale:Dt};function Nt(e,t,n,r){if(t&&"object"===typeof t)for(var o in t)Gt(e,o,t[o],n);else for(var a=0,i=(t=f(t)).length;a<i;a++)Gt(e,t[a],n,r);return this}var Vt="_leaflet_events";function Ft(e,t,n,r){if(1===arguments.length)Ut(e),delete e[Vt];else if(t&&"object"===typeof t)for(var o in t)Wt(e,o,t[o],n);else if(t=f(t),2===arguments.length)Ut(e,function(e){return-1!==y(t,e)});else for(var a=0,i=t.length;a<i;a++)Wt(e,t[a],n,r);return this}function Ut(e,t){for(var n in e[Vt]){var r=n.split(/\d/)[0];t&&!t(r)||Wt(e,r,null,null,n)}}var zt={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Gt(e,t,n,r){var o=t+i(n)+(r?"_"+i(r):"");if(e[Vt]&&e[Vt][o])return this;var a=function(t){return n.call(r||e,t||window.event)},s=a;!Be.touchNative&&Be.pointer&&0===t.indexOf("touch")?a=je(e,t,a):Be.touch&&"dblclick"===t?a=tt(e,a):"addEventListener"in e?"touchstart"===t||"touchmove"===t||"wheel"===t||"mousewheel"===t?e.addEventListener(zt[t]||t,a,!!Be.passiveEvents&&{passive:!1}):"mouseenter"===t||"mouseleave"===t?(a=function(t){t=t||window.event,Jt(e,t)&&s(t)},e.addEventListener(zt[t],a,!1)):e.addEventListener(t,s,!1):e.attachEvent("on"+t,a),e[Vt]=e[Vt]||{},e[Vt][o]=a}function Wt(e,t,n,r,o){o=o||t+i(n)+(r?"_"+i(r):"");var a=e[Vt]&&e[Vt][o];if(!a)return this;!Be.touchNative&&Be.pointer&&0===t.indexOf("touch")?Ke(e,t,a):Be.touch&&"dblclick"===t?nt(e,a):"removeEventListener"in e?e.removeEventListener(zt[t]||t,a,!1):e.detachEvent("on"+t,a),e[Vt][o]=null}function Ht(e){return e.stopPropagation?e.stopPropagation():e.originalEvent?e.originalEvent._stopped=!0:e.cancelBubble=!0,this}function jt(e){return Gt(e,"wheel",Ht),this}function Kt(e){return Nt(e,"mousedown touchstart dblclick contextmenu",Ht),e._leaflet_disable_click=!0,this}function Zt(e){return e.preventDefault?e.preventDefault():e.returnValue=!1,this}function qt(e){return Zt(e),Ht(e),this}function Xt(e){if(e.composedPath)return e.composedPath();for(var t=[],n=e.target;n;)t.push(n),n=n.parentNode;return t}function Yt(e,t){if(!t)return new R(e.clientX,e.clientY);var n=Dt(t),r=n.boundingClientRect;return new R((e.clientX-r.left)/n.x-t.clientLeft,(e.clientY-r.top)/n.y-t.clientTop)}var Qt=Be.linux&&Be.chrome?window.devicePixelRatio:Be.mac?3*window.devicePixelRatio:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function $t(e){return Be.edge?e.wheelDeltaY/2:e.deltaY&&0===e.deltaMode?-e.deltaY/Qt:e.deltaY&&1===e.deltaMode?20*-e.deltaY:e.deltaY&&2===e.deltaMode?60*-e.deltaY:e.deltaX||e.deltaZ?0:e.wheelDelta?(e.wheelDeltaY||e.wheelDelta)/2:e.detail&&Math.abs(e.detail)<32765?20*-e.detail:e.detail?e.detail/-32765*60:0}function Jt(e,t){var n=t.relatedTarget;if(!n)return!0;try{for(;n&&n!==e;)n=n.parentNode}catch(r){return!1}return n!==e}var en={__proto__:null,on:Nt,off:Ft,stopPropagation:Ht,disableScrollPropagation:jt,disableClickPropagation:Kt,preventDefault:Zt,stop:qt,getPropagationPath:Xt,getMousePosition:Yt,getWheelDelta:$t,isExternalTarget:Jt,addListener:Nt,removeListener:Ft},tn=M.extend({run:function(e,t,n,r){this.stop(),this._el=e,this._inProgress=!0,this._duration=n||.25,this._easeOutPower=1/Math.max(r||.5,.2),this._startPos=Et(e),this._offset=t.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=C(this._animate,this),this._step()},_step:function(e){var t=+new Date-this._startTime,n=1e3*this._duration;t<n?this._runFrame(this._easeOut(t/n),e):(this._runFrame(1),this._complete())},_runFrame:function(e,t){var n=this._startPos.add(this._offset.multiplyBy(e));t&&n._round(),At(this._el,n),this.fire("step")},_complete:function(){P(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(e){return 1-Math.pow(1-e,this._easeOutPower)}}),nn=M.extend({options:{crs:q,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(e,t){t=p(this,t),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(e),this._initLayout(),this._onResize=o(this._onResize,this),this._initEvents(),t.maxBounds&&this.setMaxBounds(t.maxBounds),void 0!==t.zoom&&(this._zoom=this._limitZoom(t.zoom)),t.center&&void 0!==t.zoom&&this.setView(z(t.center),t.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=ut&&Be.any3d&&!Be.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Nt(this._proxy,ct,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(e,t,r){return t=void 0===t?this._zoom:this._limitZoom(t),e=this._limitCenter(z(e),t,this.options.maxBounds),r=r||{},this._stop(),this._loaded&&!r.reset&&!0!==r&&(void 0!==r.animate&&(r.zoom=n({animate:r.animate},r.zoom),r.pan=n({animate:r.animate,duration:r.duration},r.pan)),this._zoom!==t?this._tryAnimatedZoom&&this._tryAnimatedZoom(e,t,r.zoom):this._tryAnimatedPan(e,r.pan))?(clearTimeout(this._sizeTimer),this):(this._resetView(e,t,r.pan&&r.pan.noMoveStart),this)},setZoom:function(e,t){return this._loaded?this.setView(this.getCenter(),e,{zoom:t}):(this._zoom=e,this)},zoomIn:function(e,t){return e=e||(Be.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+e,t)},zoomOut:function(e,t){return e=e||(Be.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-e,t)},setZoomAround:function(e,t,n){var r=this.getZoomScale(t),o=this.getSize().divideBy(2),a=(e instanceof R?e:this.latLngToContainerPoint(e)).subtract(o).multiplyBy(1-1/r),i=this.containerPointToLatLng(o.add(a));return this.setView(i,t,{zoom:n})},_getBoundsCenterZoom:function(e,t){t=t||{},e=e.getBounds?e.getBounds():F(e);var n=D(t.paddingTopLeft||t.padding||[0,0]),r=D(t.paddingBottomRight||t.padding||[0,0]),o=this.getBoundsZoom(e,!1,n.add(r));if((o="number"===typeof t.maxZoom?Math.min(t.maxZoom,o):o)===1/0)return{center:e.getCenter(),zoom:o};var a=r.subtract(n).divideBy(2),i=this.project(e.getSouthWest(),o),s=this.project(e.getNorthEast(),o);return{center:this.unproject(i.add(s).divideBy(2).add(a),o),zoom:o}},fitBounds:function(e,t){if(!(e=F(e)).isValid())throw new Error("Bounds are not valid.");var n=this._getBoundsCenterZoom(e,t);return this.setView(n.center,n.zoom,t)},fitWorld:function(e){return this.fitBounds([[-90,-180],[90,180]],e)},panTo:function(e,t){return this.setView(e,this._zoom,{pan:t})},panBy:function(e,t){if(t=t||{},!(e=D(e).round()).x&&!e.y)return this.fire("moveend");if(!0!==t.animate&&!this.getSize().contains(e))return this._resetView(this.unproject(this.project(this.getCenter()).add(e)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new tn,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),t.noMoveStart||this.fire("movestart"),!1!==t.animate){bt(this._mapPane,"leaflet-pan-anim");var n=this._getMapPanePos().subtract(e).round();this._panAnim.run(this._mapPane,n,t.duration||.25,t.easeLinearity)}else this._rawPanBy(e),this.fire("move").fire("moveend");return this},flyTo:function(e,t,n){if(!1===(n=n||{}).animate||!Be.any3d)return this.setView(e,t,n);this._stop();var r=this.project(this.getCenter()),o=this.project(e),a=this.getSize(),i=this._zoom;e=z(e),t=void 0===t?i:t;var s=Math.max(a.x,a.y),l=s*this.getZoomScale(i,t),u=o.distanceTo(r)||1,c=1.42,d=c*c;function f(e){var t=(l*l-s*s+(e?-1:1)*d*d*u*u)/(2*(e?l:s)*d*u),n=Math.sqrt(t*t+1)-t;return n<1e-9?-18:Math.log(n)}function p(e){return(Math.exp(e)-Math.exp(-e))/2}function h(e){return(Math.exp(e)+Math.exp(-e))/2}function m(e){return p(e)/h(e)}var g=f(0);function v(e){return s*(h(g)/h(g+c*e))}function y(e){return s*(h(g)*m(g+c*e)-p(g))/d}function b(e){return 1-Math.pow(1-e,1.5)}var _=Date.now(),T=(f(1)-g)/c,x=n.duration?1e3*n.duration:1e3*T*.8;function S(){var n=(Date.now()-_)/x,a=b(n)*T;n<=1?(this._flyToFrame=C(S,this),this._move(this.unproject(r.add(o.subtract(r).multiplyBy(y(a)/u)),i),this.getScaleZoom(s/v(a),i),{flyTo:!0})):this._move(e,t)._moveEnd(!0)}return this._moveStart(!0,n.noMoveStart),S.call(this),this},flyToBounds:function(e,t){var n=this._getBoundsCenterZoom(e,t);return this.flyTo(n.center,n.zoom,t)},setMaxBounds:function(e){return e=F(e),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),e.isValid()?(this.options.maxBounds=e,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(e){var t=this.options.minZoom;return this.options.minZoom=e,this._loaded&&t!==e&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(e):this},setMaxZoom:function(e){var t=this.options.maxZoom;return this.options.maxZoom=e,this._loaded&&t!==e&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(e):this},panInsideBounds:function(e,t){this._enforcingBounds=!0;var n=this.getCenter(),r=this._limitCenter(n,this._zoom,F(e));return n.equals(r)||this.panTo(r,t),this._enforcingBounds=!1,this},panInside:function(e,t){var n=D((t=t||{}).paddingTopLeft||t.padding||[0,0]),r=D(t.paddingBottomRight||t.padding||[0,0]),o=this.project(this.getCenter()),a=this.project(e),i=this.getPixelBounds(),s=N([i.min.add(n),i.max.subtract(r)]),l=s.getSize();if(!s.contains(a)){this._enforcingBounds=!0;var u=a.subtract(s.getCenter()),c=s.extend(a).getSize().subtract(l);o.x+=u.x<0?-c.x:c.x,o.y+=u.y<0?-c.y:c.y,this.panTo(this.unproject(o),t),this._enforcingBounds=!1}return this},invalidateSize:function(e){if(!this._loaded)return this;e=n({animate:!1,pan:!0},!0===e?{animate:!0}:e);var t=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var r=this.getSize(),a=t.divideBy(2).round(),i=r.divideBy(2).round(),s=a.subtract(i);return s.x||s.y?(e.animate&&e.pan?this.panBy(s):(e.pan&&this._rawPanBy(s),this.fire("move"),e.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(o(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:t,newSize:r})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(e){if(e=this._locateOptions=n({timeout:1e4,watch:!1},e),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var t=o(this._handleGeolocationResponse,this),r=o(this._handleGeolocationError,this);return e.watch?this._locationWatchId=navigator.geolocation.watchPosition(t,r,e):navigator.geolocation.getCurrentPosition(t,r,e),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(e){if(this._container._leaflet_id){var t=e.code,n=e.message||(1===t?"permission denied":2===t?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:t,message:"Geolocation error: "+n+"."})}},_handleGeolocationResponse:function(e){if(this._container._leaflet_id){var t=new U(e.coords.latitude,e.coords.longitude),n=t.toBounds(2*e.coords.accuracy),r=this._locateOptions;if(r.setView){var o=this.getBoundsZoom(n);this.setView(t,r.maxZoom?Math.min(o,r.maxZoom):o)}var a={latlng:t,bounds:n,timestamp:e.timestamp};for(var i in e.coords)"number"===typeof e.coords[i]&&(a[i]=e.coords[i]);this.fire("locationfound",a)}},addHandler:function(e,t){if(!t)return this;var n=this[e]=new t(this);return this._handlers.push(n),this.options[e]&&n.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch(t){this._container._leaflet_id=void 0,this._containerId=void 0}var e;for(e in void 0!==this._locationWatchId&&this.stopLocate(),this._stop(),ht(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(P(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload"),this._layers)this._layers[e].remove();for(e in this._panes)ht(this._panes[e]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(e,t){var n=pt("div","leaflet-pane"+(e?" leaflet-"+e.replace("Pane","")+"-pane":""),t||this._mapPane);return e&&(this._panes[e]=n),n},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var e=this.getPixelBounds();return new V(this.unproject(e.getBottomLeft()),this.unproject(e.getTopRight()))},getMinZoom:function(){return void 0===this.options.minZoom?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return void 0===this.options.maxZoom?void 0===this._layersMaxZoom?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(e,t,n){e=F(e),n=D(n||[0,0]);var r=this.getZoom()||0,o=this.getMinZoom(),a=this.getMaxZoom(),i=e.getNorthWest(),s=e.getSouthEast(),l=this.getSize().subtract(n),u=N(this.project(s,r),this.project(i,r)).getSize(),c=Be.any3d?this.options.zoomSnap:1,d=l.x/u.x,f=l.y/u.y,p=t?Math.max(d,f):Math.min(d,f);return r=this.getScaleZoom(p,r),c&&(r=Math.round(r/(c/100))*(c/100),r=t?Math.ceil(r/c)*c:Math.floor(r/c)*c),Math.max(o,Math.min(a,r))},getSize:function(){return this._size&&!this._sizeChanged||(this._size=new R(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(e,t){var n=this._getTopLeftPoint(e,t);return new B(n,n.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(e){return this.options.crs.getProjectedBounds(void 0===e?this.getZoom():e)},getPane:function(e){return"string"===typeof e?this._panes[e]:e},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(e,t){var n=this.options.crs;return t=void 0===t?this._zoom:t,n.scale(e)/n.scale(t)},getScaleZoom:function(e,t){var n=this.options.crs;t=void 0===t?this._zoom:t;var r=n.zoom(e*n.scale(t));return isNaN(r)?1/0:r},project:function(e,t){return t=void 0===t?this._zoom:t,this.options.crs.latLngToPoint(z(e),t)},unproject:function(e,t){return t=void 0===t?this._zoom:t,this.options.crs.pointToLatLng(D(e),t)},layerPointToLatLng:function(e){var t=D(e).add(this.getPixelOrigin());return this.unproject(t)},latLngToLayerPoint:function(e){return this.project(z(e))._round()._subtract(this.getPixelOrigin())},wrapLatLng:function(e){return this.options.crs.wrapLatLng(z(e))},wrapLatLngBounds:function(e){return this.options.crs.wrapLatLngBounds(F(e))},distance:function(e,t){return this.options.crs.distance(z(e),z(t))},containerPointToLayerPoint:function(e){return D(e).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(e){return D(e).add(this._getMapPanePos())},containerPointToLatLng:function(e){var t=this.containerPointToLayerPoint(D(e));return this.layerPointToLatLng(t)},latLngToContainerPoint:function(e){return this.layerPointToContainerPoint(this.latLngToLayerPoint(z(e)))},mouseEventToContainerPoint:function(e){return Yt(e,this._container)},mouseEventToLayerPoint:function(e){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(e))},mouseEventToLatLng:function(e){return this.layerPointToLatLng(this.mouseEventToLayerPoint(e))},_initContainer:function(e){var t=this._container=dt(e);if(!t)throw new Error("Map container not found.");if(t._leaflet_id)throw new Error("Map container is already initialized.");Nt(t,"scroll",this._onScroll,this),this._containerId=i(t)},_initLayout:function(){var e=this._container;this._fadeAnimated=this.options.fadeAnimation&&Be.any3d,bt(e,"leaflet-container"+(Be.touch?" leaflet-touch":"")+(Be.retina?" leaflet-retina":"")+(Be.ielt9?" leaflet-oldie":"")+(Be.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var t=ft(e,"position");"absolute"!==t&&"relative"!==t&&"fixed"!==t&&"sticky"!==t&&(e.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var e=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),At(this._mapPane,new R(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(bt(e.markerPane,"leaflet-zoom-hide"),bt(e.shadowPane,"leaflet-zoom-hide"))},_resetView:function(e,t,n){At(this._mapPane,new R(0,0));var r=!this._loaded;this._loaded=!0,t=this._limitZoom(t),this.fire("viewprereset");var o=this._zoom!==t;this._moveStart(o,n)._move(e,t)._moveEnd(o),this.fire("viewreset"),r&&this.fire("load")},_moveStart:function(e,t){return e&&this.fire("zoomstart"),t||this.fire("movestart"),this},_move:function(e,t,n,r){void 0===t&&(t=this._zoom);var o=this._zoom!==t;return this._zoom=t,this._lastCenter=e,this._pixelOrigin=this._getNewPixelOrigin(e),r?n&&n.pinch&&this.fire("zoom",n):((o||n&&n.pinch)&&this.fire("zoom",n),this.fire("move",n)),this},_moveEnd:function(e){return e&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return P(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(e){At(this._mapPane,this._getMapPanePos().subtract(e))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(e){this._targets={},this._targets[i(this._container)]=this;var t=e?Ft:Nt;t(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&t(window,"resize",this._onResize,this),Be.any3d&&this.options.transform3DLimit&&(e?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){P(this._resizeRequest),this._resizeRequest=C(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var e=this._getMapPanePos();Math.max(Math.abs(e.x),Math.abs(e.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(e,t){for(var n,r=[],o="mouseout"===t||"mouseover"===t,a=e.target||e.srcElement,s=!1;a;){if((n=this._targets[i(a)])&&("click"===t||"preclick"===t)&&this._draggableMoved(n)){s=!0;break}if(n&&n.listens(t,!0)){if(o&&!Jt(a,e))break;if(r.push(n),o)break}if(a===this._container)break;a=a.parentNode}return r.length||s||o||!this.listens(t,!0)||(r=[this]),r},_isClickDisabled:function(e){for(;e&&e!==this._container;){if(e._leaflet_disable_click)return!0;e=e.parentNode}},_handleDOMEvent:function(e){var t=e.target||e.srcElement;if(!(!this._loaded||t._leaflet_disable_events||"click"===e.type&&this._isClickDisabled(t))){var n=e.type;"mousedown"===n&&Rt(t),this._fireDOMEvent(e,n)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(e,t,r){if("click"===e.type){var o=n({},e);o.type="preclick",this._fireDOMEvent(o,o.type,r)}var a=this._findEventTargets(e,t);if(r){for(var i=[],s=0;s<r.length;s++)r[s].listens(t,!0)&&i.push(r[s]);a=i.concat(a)}if(a.length){"contextmenu"===t&&Zt(e);var l=a[0],u={originalEvent:e};if("keypress"!==e.type&&"keydown"!==e.type&&"keyup"!==e.type){var c=l.getLatLng&&(!l._radius||l._radius<=10);u.containerPoint=c?this.latLngToContainerPoint(l.getLatLng()):this.mouseEventToContainerPoint(e),u.layerPoint=this.containerPointToLayerPoint(u.containerPoint),u.latlng=c?l.getLatLng():this.layerPointToLatLng(u.layerPoint)}for(s=0;s<a.length;s++)if(a[s].fire(t,u,!0),u.originalEvent._stopped||!1===a[s].options.bubblingMouseEvents&&-1!==y(this._mouseEvents,t))return}},_draggableMoved:function(e){return(e=e.dragging&&e.dragging.enabled()?e:this).dragging&&e.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var e=0,t=this._handlers.length;e<t;e++)this._handlers[e].disable()},whenReady:function(e,t){return this._loaded?e.call(t||this,{target:this}):this.on("load",e,t),this},_getMapPanePos:function(){return Et(this._mapPane)||new R(0,0)},_moved:function(){var e=this._getMapPanePos();return e&&!e.equals([0,0])},_getTopLeftPoint:function(e,t){return(e&&void 0!==t?this._getNewPixelOrigin(e,t):this.getPixelOrigin()).subtract(this._getMapPanePos())},_getNewPixelOrigin:function(e,t){var n=this.getSize()._divideBy(2);return this.project(e,t)._subtract(n)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(e,t,n){var r=this._getNewPixelOrigin(n,t);return this.project(e,t)._subtract(r)},_latLngBoundsToNewLayerBounds:function(e,t,n){var r=this._getNewPixelOrigin(n,t);return N([this.project(e.getSouthWest(),t)._subtract(r),this.project(e.getNorthWest(),t)._subtract(r),this.project(e.getSouthEast(),t)._subtract(r),this.project(e.getNorthEast(),t)._subtract(r)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(e){return this.latLngToLayerPoint(e).subtract(this._getCenterLayerPoint())},_limitCenter:function(e,t,n){if(!n)return e;var r=this.project(e,t),o=this.getSize().divideBy(2),a=new B(r.subtract(o),r.add(o)),i=this._getBoundsOffset(a,n,t);return Math.abs(i.x)<=1&&Math.abs(i.y)<=1?e:this.unproject(r.add(i),t)},_limitOffset:function(e,t){if(!t)return e;var n=this.getPixelBounds(),r=new B(n.min.add(e),n.max.add(e));return e.add(this._getBoundsOffset(r,t))},_getBoundsOffset:function(e,t,n){var r=N(this.project(t.getNorthEast(),n),this.project(t.getSouthWest(),n)),o=r.min.subtract(e.min),a=r.max.subtract(e.max);return new R(this._rebound(o.x,-a.x),this._rebound(o.y,-a.y))},_rebound:function(e,t){return e+t>0?Math.round(e-t)/2:Math.max(0,Math.ceil(e))-Math.max(0,Math.floor(t))},_limitZoom:function(e){var t=this.getMinZoom(),n=this.getMaxZoom(),r=Be.any3d?this.options.zoomSnap:1;return r&&(e=Math.round(e/r)*r),Math.max(t,Math.min(n,e))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){_t(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(e,t){var n=this._getCenterOffset(e)._trunc();return!(!0!==(t&&t.animate)&&!this.getSize().contains(n))&&(this.panBy(n,t),!0)},_createAnimProxy:function(){var e=this._proxy=pt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(e),this.on("zoomanim",function(e){var t=lt,n=this._proxy.style[t];Pt(this._proxy,this.project(e.center,e.zoom),this.getZoomScale(e.zoom,1)),n===this._proxy.style[t]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){ht(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var e=this.getCenter(),t=this.getZoom();Pt(this._proxy,this.project(e,t),this.getZoomScale(t,1))},_catchTransitionEnd:function(e){this._animatingZoom&&e.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(e,t,n){if(this._animatingZoom)return!0;if(n=n||{},!this._zoomAnimated||!1===n.animate||this._nothingToAnimate()||Math.abs(t-this._zoom)>this.options.zoomAnimationThreshold)return!1;var r=this.getZoomScale(t),o=this._getCenterOffset(e)._divideBy(1-1/r);return!(!0!==n.animate&&!this.getSize().contains(o))&&(C(function(){this._moveStart(!0,n.noMoveStart||!1)._animateZoom(e,t,!0)},this),!0)},_animateZoom:function(e,t,n,r){this._mapPane&&(n&&(this._animatingZoom=!0,this._animateToCenter=e,this._animateToZoom=t,bt(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:e,zoom:t,noUpdate:r}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(o(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&_t(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function rn(e,t){return new nn(e,t)}var on=E.extend({options:{position:"topright"},initialize:function(e){p(this,e)},getPosition:function(){return this.options.position},setPosition:function(e){var t=this._map;return t&&t.removeControl(this),this.options.position=e,t&&t.addControl(this),this},getContainer:function(){return this._container},addTo:function(e){this.remove(),this._map=e;var t=this._container=this.onAdd(e),n=this.getPosition(),r=e._controlCorners[n];return bt(t,"leaflet-control"),-1!==n.indexOf("bottom")?r.insertBefore(t,r.firstChild):r.appendChild(t),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(ht(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(e){this._map&&e&&e.screenX>0&&e.screenY>0&&this._map.getContainer().focus()}}),an=function(e){return new on(e)};nn.include({addControl:function(e){return e.addTo(this),this},removeControl:function(e){return e.remove(),this},_initControlPos:function(){var e=this._controlCorners={},t="leaflet-",n=this._controlContainer=pt("div",t+"control-container",this._container);function r(r,o){var a=t+r+" "+t+o;e[r+o]=pt("div",a,n)}r("top","left"),r("top","right"),r("bottom","left"),r("bottom","right")},_clearControlPos:function(){for(var e in this._controlCorners)ht(this._controlCorners[e]);ht(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var sn=on.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(e,t,n,r){return n<r?-1:r<n?1:0}},initialize:function(e,t,n){for(var r in p(this,n),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1,e)this._addLayer(e[r],r);for(r in t)this._addLayer(t[r],r,!0)},onAdd:function(e){this._initLayout(),this._update(),this._map=e,e.on("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(e){return on.prototype.addTo.call(this,e),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(e,t){return this._addLayer(e,t),this._map?this._update():this},addOverlay:function(e,t){return this._addLayer(e,t,!0),this._map?this._update():this},removeLayer:function(e){e.off("add remove",this._onLayerChange,this);var t=this._getLayer(i(e));return t&&this._layers.splice(this._layers.indexOf(t),1),this._map?this._update():this},expand:function(){bt(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var e=this._map.getSize().y-(this._container.offsetTop+50);return e<this._section.clientHeight?(bt(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=e+"px"):_t(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return _t(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var e="leaflet-control-layers",t=this._container=pt("div",e),n=this.options.collapsed;t.setAttribute("aria-haspopup",!0),Kt(t),jt(t);var r=this._section=pt("section",e+"-list");n&&(this._map.on("click",this.collapse,this),Nt(t,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var o=this._layersLink=pt("a",e+"-toggle",t);o.href="#",o.title="Layers",o.setAttribute("role","button"),Nt(o,{keydown:function(e){13===e.keyCode&&this._expandSafely()},click:function(e){Zt(e),this._expandSafely()}},this),n||this.expand(),this._baseLayersList=pt("div",e+"-base",r),this._separator=pt("div",e+"-separator",r),this._overlaysList=pt("div",e+"-overlays",r),t.appendChild(r)},_getLayer:function(e){for(var t=0;t<this._layers.length;t++)if(this._layers[t]&&i(this._layers[t].layer)===e)return this._layers[t]},_addLayer:function(e,t,n){this._map&&e.on("add remove",this._onLayerChange,this),this._layers.push({layer:e,name:t,overlay:n}),this.options.sortLayers&&this._layers.sort(o(function(e,t){return this.options.sortFunction(e.layer,t.layer,e.name,t.name)},this)),this.options.autoZIndex&&e.setZIndex&&(this._lastZIndex++,e.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;mt(this._baseLayersList),mt(this._overlaysList),this._layerControlInputs=[];var e,t,n,r,o=0;for(n=0;n<this._layers.length;n++)r=this._layers[n],this._addItem(r),t=t||r.overlay,e=e||!r.overlay,o+=r.overlay?0:1;return this.options.hideSingleBase&&(e=e&&o>1,this._baseLayersList.style.display=e?"":"none"),this._separator.style.display=t&&e?"":"none",this},_onLayerChange:function(e){this._handlingClick||this._update();var t=this._getLayer(i(e.target)),n=t.overlay?"add"===e.type?"overlayadd":"overlayremove":"add"===e.type?"baselayerchange":null;n&&this._map.fire(n,t)},_createRadioElement:function(e,t){var n='<input type="radio" class="leaflet-control-layers-selector" name="'+e+'"'+(t?' checked="checked"':"")+"/>",r=document.createElement("div");return r.innerHTML=n,r.firstChild},_addItem:function(e){var t,n=document.createElement("label"),r=this._map.hasLayer(e.layer);e.overlay?((t=document.createElement("input")).type="checkbox",t.className="leaflet-control-layers-selector",t.defaultChecked=r):t=this._createRadioElement("leaflet-base-layers_"+i(this),r),this._layerControlInputs.push(t),t.layerId=i(e.layer),Nt(t,"click",this._onInputClick,this);var o=document.createElement("span");o.innerHTML=" "+e.name;var a=document.createElement("span");return n.appendChild(a),a.appendChild(t),a.appendChild(o),(e.overlay?this._overlaysList:this._baseLayersList).appendChild(n),this._checkDisabledLayers(),n},_onInputClick:function(){if(!this._preventClick){var e,t,n=this._layerControlInputs,r=[],o=[];this._handlingClick=!0;for(var a=n.length-1;a>=0;a--)e=n[a],t=this._getLayer(e.layerId).layer,e.checked?r.push(t):e.checked||o.push(t);for(a=0;a<o.length;a++)this._map.hasLayer(o[a])&&this._map.removeLayer(o[a]);for(a=0;a<r.length;a++)this._map.hasLayer(r[a])||this._map.addLayer(r[a]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var e,t,n=this._layerControlInputs,r=this._map.getZoom(),o=n.length-1;o>=0;o--)e=n[o],t=this._getLayer(e.layerId).layer,e.disabled=void 0!==t.options.minZoom&&r<t.options.minZoom||void 0!==t.options.maxZoom&&r>t.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var e=this._section;this._preventClick=!0,Nt(e,"click",Zt),this.expand();var t=this;setTimeout(function(){Ft(e,"click",Zt),t._preventClick=!1})}}),ln=function(e,t,n){return new sn(e,t,n)},un=on.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(e){var t="leaflet-control-zoom",n=pt("div",t+" leaflet-bar"),r=this.options;return this._zoomInButton=this._createButton(r.zoomInText,r.zoomInTitle,t+"-in",n,this._zoomIn),this._zoomOutButton=this._createButton(r.zoomOutText,r.zoomOutTitle,t+"-out",n,this._zoomOut),this._updateDisabled(),e.on("zoomend zoomlevelschange",this._updateDisabled,this),n},onRemove:function(e){e.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(e){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(e.shiftKey?3:1))},_zoomOut:function(e){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(e.shiftKey?3:1))},_createButton:function(e,t,n,r,o){var a=pt("a",n,r);return a.innerHTML=e,a.href="#",a.title=t,a.setAttribute("role","button"),a.setAttribute("aria-label",t),Kt(a),Nt(a,"click",qt),Nt(a,"click",o,this),Nt(a,"click",this._refocusOnMap,this),a},_updateDisabled:function(){var e=this._map,t="leaflet-disabled";_t(this._zoomInButton,t),_t(this._zoomOutButton,t),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||e._zoom===e.getMinZoom())&&(bt(this._zoomOutButton,t),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||e._zoom===e.getMaxZoom())&&(bt(this._zoomInButton,t),this._zoomInButton.setAttribute("aria-disabled","true"))}});nn.mergeOptions({zoomControl:!0}),nn.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new un,this.addControl(this.zoomControl))});var cn=function(e){return new un(e)},dn=on.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(e){var t="leaflet-control-scale",n=pt("div",t),r=this.options;return this._addScales(r,t+"-line",n),e.on(r.updateWhenIdle?"moveend":"move",this._update,this),e.whenReady(this._update,this),n},onRemove:function(e){e.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(e,t,n){e.metric&&(this._mScale=pt("div",t,n)),e.imperial&&(this._iScale=pt("div",t,n))},_update:function(){var e=this._map,t=e.getSize().y/2,n=e.distance(e.containerPointToLatLng([0,t]),e.containerPointToLatLng([this.options.maxWidth,t]));this._updateScales(n)},_updateScales:function(e){this.options.metric&&e&&this._updateMetric(e),this.options.imperial&&e&&this._updateImperial(e)},_updateMetric:function(e){var t=this._getRoundNum(e),n=t<1e3?t+" m":t/1e3+" km";this._updateScale(this._mScale,n,t/e)},_updateImperial:function(e){var t,n,r,o=3.2808399*e;o>5280?(t=o/5280,n=this._getRoundNum(t),this._updateScale(this._iScale,n+" mi",n/t)):(r=this._getRoundNum(o),this._updateScale(this._iScale,r+" ft",r/o))},_updateScale:function(e,t,n){e.style.width=Math.round(this.options.maxWidth*n)+"px",e.innerHTML=t},_getRoundNum:function(e){var t=Math.pow(10,(Math.floor(e)+"").length-1),n=e/t;return t*(n=n>=10?10:n>=5?5:n>=3?3:n>=2?2:1)}}),fn=function(e){return new dn(e)},pn='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',hn=on.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Be.inlineSvg?pn+" ":"")+"Leaflet</a>"},initialize:function(e){p(this,e),this._attributions={}},onAdd:function(e){for(var t in e.attributionControl=this,this._container=pt("div","leaflet-control-attribution"),Kt(this._container),e._layers)e._layers[t].getAttribution&&this.addAttribution(e._layers[t].getAttribution());return this._update(),e.on("layeradd",this._addAttribution,this),this._container},onRemove:function(e){e.off("layeradd",this._addAttribution,this)},_addAttribution:function(e){e.layer.getAttribution&&(this.addAttribution(e.layer.getAttribution()),e.layer.once("remove",function(){this.removeAttribution(e.layer.getAttribution())},this))},setPrefix:function(e){return this.options.prefix=e,this._update(),this},addAttribution:function(e){return e?(this._attributions[e]||(this._attributions[e]=0),this._attributions[e]++,this._update(),this):this},removeAttribution:function(e){return e?(this._attributions[e]&&(this._attributions[e]--,this._update()),this):this},_update:function(){if(this._map){var e=[];for(var t in this._attributions)this._attributions[t]&&e.push(t);var n=[];this.options.prefix&&n.push(this.options.prefix),e.length&&n.push(e.join(", ")),this._container.innerHTML=n.join(' <span aria-hidden="true">|</span> ')}}});nn.mergeOptions({attributionControl:!0}),nn.addInitHook(function(){this.options.attributionControl&&(new hn).addTo(this)});var mn=function(e){return new hn(e)};on.Layers=sn,on.Zoom=un,on.Scale=dn,on.Attribution=hn,an.layers=ln,an.zoom=cn,an.scale=fn,an.attribution=mn;var gn=E.extend({initialize:function(e){this._map=e},enable:function(){return this._enabled||(this._enabled=!0,this.addHooks()),this},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});gn.addTo=function(e,t){return e.addHandler(t,this),this};var vn={Events:O},yn=Be.touch?"touchstart mousedown":"mousedown",bn=M.extend({options:{clickTolerance:3},initialize:function(e,t,n,r){p(this,r),this._element=e,this._dragStartTarget=t||e,this._preventOutline=n},enable:function(){this._enabled||(Nt(this._dragStartTarget,yn,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(bn._dragging===this&&this.finishDrag(!0),Ft(this._dragStartTarget,yn,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(e){if(this._enabled&&(this._moved=!1,!yt(this._element,"leaflet-zoom-anim")))if(e.touches&&1!==e.touches.length)bn._dragging===this&&this.finishDrag();else if(!(bn._dragging||e.shiftKey||1!==e.which&&1!==e.button&&!e.touches)&&(bn._dragging=this,this._preventOutline&&Rt(this._element),Ot(),rt(),!this._moving)){this.fire("down");var t=e.touches?e.touches[0]:e,n=kt(this._element);this._startPoint=new R(t.clientX,t.clientY),this._startPos=Et(this._element),this._parentScale=Dt(n);var r="mousedown"===e.type;Nt(document,r?"mousemove":"touchmove",this._onMove,this),Nt(document,r?"mouseup":"touchend touchcancel",this._onUp,this)}},_onMove:function(e){if(this._enabled)if(e.touches&&e.touches.length>1)this._moved=!0;else{var t=e.touches&&1===e.touches.length?e.touches[0]:e,n=new R(t.clientX,t.clientY)._subtract(this._startPoint);(n.x||n.y)&&(Math.abs(n.x)+Math.abs(n.y)<this.options.clickTolerance||(n.x/=this._parentScale.x,n.y/=this._parentScale.y,Zt(e),this._moved||(this.fire("dragstart"),this._moved=!0,bt(document.body,"leaflet-dragging"),this._lastTarget=e.target||e.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),bt(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(n),this._moving=!0,this._lastEvent=e,this._updatePosition()))}},_updatePosition:function(){var e={originalEvent:this._lastEvent};this.fire("predrag",e),At(this._element,this._newPos),this.fire("drag",e)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(e){_t(document.body,"leaflet-dragging"),this._lastTarget&&(_t(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Ft(document,"mousemove touchmove",this._onMove,this),Ft(document,"mouseup touchend touchcancel",this._onUp,this),Mt(),ot();var t=this._moved&&this._moving;this._moving=!1,bn._dragging=!1,t&&this.fire("dragend",{noInertia:e,distance:this._newPos.distanceTo(this._startPos)})}});function _n(e,t,n){var r,o,a,i,s,l,u,c,d,f=[1,4,2,8];for(o=0,u=e.length;o<u;o++)e[o]._code=Ln(e[o],t);for(i=0;i<4;i++){for(c=f[i],r=[],o=0,a=(u=e.length)-1;o<u;a=o++)s=e[o],l=e[a],s._code&c?l._code&c||((d=Rn(l,s,c,t,n))._code=Ln(d,t),r.push(d)):(l._code&c&&((d=Rn(l,s,c,t,n))._code=Ln(d,t),r.push(d)),r.push(s));e=r}return e}function Tn(e,t){var n,r,o,a,i,s,l,u,c;if(!e||0===e.length)throw new Error("latlngs not passed");Bn(e)||(console.warn("latlngs are not flat! Only the first ring will be used"),e=e[0]);var d=z([0,0]),f=F(e);f.getNorthWest().distanceTo(f.getSouthWest())*f.getNorthEast().distanceTo(f.getNorthWest())<1700&&(d=xn(e));var p=e.length,h=[];for(n=0;n<p;n++){var m=z(e[n]);h.push(t.project(z([m.lat-d.lat,m.lng-d.lng])))}for(s=l=u=0,n=0,r=p-1;n<p;r=n++)o=h[n],a=h[r],i=o.y*a.x-a.y*o.x,l+=(o.x+a.x)*i,u+=(o.y+a.y)*i,s+=3*i;c=0===s?h[0]:[l/s,u/s];var g=t.unproject(D(c));return z([g.lat+d.lat,g.lng+d.lng])}function xn(e){for(var t=0,n=0,r=0,o=0;o<e.length;o++){var a=z(e[o]);t+=a.lat,n+=a.lng,r++}return z([t/r,n/r])}var Sn,wn={__proto__:null,clipPolygon:_n,polygonCenter:Tn,centroid:xn};function Cn(e,t){if(!t||!e.length)return e.slice();var n=t*t;return e=En(e=On(e,n),n)}function Pn(e,t,n){return Math.sqrt(Dn(e,t,n,!0))}function An(e,t,n){return Dn(e,t,n)}function En(e,t){var n=e.length,r=new(typeof Uint8Array!==void 0+""?Uint8Array:Array)(n);r[0]=r[n-1]=1,In(e,r,t,0,n-1);var o,a=[];for(o=0;o<n;o++)r[o]&&a.push(e[o]);return a}function In(e,t,n,r,o){var a,i,s,l=0;for(i=r+1;i<=o-1;i++)(s=Dn(e[i],e[r],e[o],!0))>l&&(a=i,l=s);l>n&&(t[a]=1,In(e,t,n,r,a),In(e,t,n,a,o))}function On(e,t){for(var n=[e[0]],r=1,o=0,a=e.length;r<a;r++)kn(e[r],e[o])>t&&(n.push(e[r]),o=r);return o<a-1&&n.push(e[a-1]),n}function Mn(e,t,n,r,o){var a,i,s,l=r?Sn:Ln(e,n),u=Ln(t,n);for(Sn=u;;){if(!(l|u))return[e,t];if(l&u)return!1;s=Ln(i=Rn(e,t,a=l||u,n,o),n),a===l?(e=i,l=s):(t=i,u=s)}}function Rn(e,t,n,r,o){var a,i,s=t.x-e.x,l=t.y-e.y,u=r.min,c=r.max;return 8&n?(a=e.x+s*(c.y-e.y)/l,i=c.y):4&n?(a=e.x+s*(u.y-e.y)/l,i=u.y):2&n?(a=c.x,i=e.y+l*(c.x-e.x)/s):1&n&&(a=u.x,i=e.y+l*(u.x-e.x)/s),new R(a,i,o)}function Ln(e,t){var n=0;return e.x<t.min.x?n|=1:e.x>t.max.x&&(n|=2),e.y<t.min.y?n|=4:e.y>t.max.y&&(n|=8),n}function kn(e,t){var n=t.x-e.x,r=t.y-e.y;return n*n+r*r}function Dn(e,t,n,r){var o,a=t.x,i=t.y,s=n.x-a,l=n.y-i,u=s*s+l*l;return u>0&&((o=((e.x-a)*s+(e.y-i)*l)/u)>1?(a=n.x,i=n.y):o>0&&(a+=s*o,i+=l*o)),s=e.x-a,l=e.y-i,r?s*s+l*l:new R(a,i)}function Bn(e){return!v(e[0])||"object"!==typeof e[0][0]&&"undefined"!==typeof e[0][0]}function Nn(e){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Bn(e)}function Vn(e,t){var n,r,o,a,i,s,l,u;if(!e||0===e.length)throw new Error("latlngs not passed");Bn(e)||(console.warn("latlngs are not flat! Only the first ring will be used"),e=e[0]);var c=z([0,0]),d=F(e);d.getNorthWest().distanceTo(d.getSouthWest())*d.getNorthEast().distanceTo(d.getNorthWest())<1700&&(c=xn(e));var f=e.length,p=[];for(n=0;n<f;n++){var h=z(e[n]);p.push(t.project(z([h.lat-c.lat,h.lng-c.lng])))}for(n=0,r=0;n<f-1;n++)r+=p[n].distanceTo(p[n+1])/2;if(0===r)u=p[0];else for(n=0,a=0;n<f-1;n++)if(i=p[n],s=p[n+1],(a+=o=i.distanceTo(s))>r){l=(a-r)/o,u=[s.x-l*(s.x-i.x),s.y-l*(s.y-i.y)];break}var m=t.unproject(D(u));return z([m.lat+c.lat,m.lng+c.lng])}var Fn={__proto__:null,simplify:Cn,pointToSegmentDistance:Pn,closestPointOnSegment:An,clipSegment:Mn,_getEdgeIntersection:Rn,_getBitCode:Ln,_sqClosestPointOnSegment:Dn,isFlat:Bn,_flat:Nn,polylineCenter:Vn},Un={project:function(e){return new R(e.lng,e.lat)},unproject:function(e){return new U(e.y,e.x)},bounds:new B([-180,-90],[180,90])},zn={R:6378137,R_MINOR:6356752.314245179,bounds:new B([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(e){var t=Math.PI/180,n=this.R,r=e.lat*t,o=this.R_MINOR/n,a=Math.sqrt(1-o*o),i=a*Math.sin(r),s=Math.tan(Math.PI/4-r/2)/Math.pow((1-i)/(1+i),a/2);return r=-n*Math.log(Math.max(s,1e-10)),new R(e.lng*t*n,r)},unproject:function(e){for(var t,n=180/Math.PI,r=this.R,o=this.R_MINOR/r,a=Math.sqrt(1-o*o),i=Math.exp(-e.y/r),s=Math.PI/2-2*Math.atan(i),l=0,u=.1;l<15&&Math.abs(u)>1e-7;l++)t=a*Math.sin(s),t=Math.pow((1-t)/(1+t),a/2),s+=u=Math.PI/2-2*Math.atan(i*t)-s;return new U(s*n,e.x*n/r)}},Gn={__proto__:null,LonLat:Un,Mercator:zn,SphericalMercator:j},Wn=n({},W,{code:"EPSG:3395",projection:zn,transformation:function(){var e=.5/(Math.PI*zn.R);return Z(e,.5,-e,.5)}()}),Hn=n({},W,{code:"EPSG:4326",projection:Un,transformation:Z(1/180,1,-1/180,.5)}),jn=n({},G,{projection:Un,transformation:Z(1,0,-1,0),scale:function(e){return Math.pow(2,e)},zoom:function(e){return Math.log(e)/Math.LN2},distance:function(e,t){var n=t.lng-e.lng,r=t.lat-e.lat;return Math.sqrt(n*n+r*r)},infinite:!0});G.Earth=W,G.EPSG3395=Wn,G.EPSG3857=q,G.EPSG900913=X,G.EPSG4326=Hn,G.Simple=jn;var Kn=M.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(e){return e.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(e){return e&&e.removeLayer(this),this},getPane:function(e){return this._map.getPane(e?this.options[e]||e:this.options.pane)},addInteractiveTarget:function(e){return this._map._targets[i(e)]=this,this},removeInteractiveTarget:function(e){return delete this._map._targets[i(e)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(e){var t=e.target;if(t.hasLayer(this)){if(this._map=t,this._zoomAnimated=t._zoomAnimated,this.getEvents){var n=this.getEvents();t.on(n,this),this.once("remove",function(){t.off(n,this)},this)}this.onAdd(t),this.fire("add"),t.fire("layeradd",{layer:this})}}});nn.include({addLayer:function(e){if(!e._layerAdd)throw new Error("The provided object is not a Layer.");var t=i(e);return this._layers[t]||(this._layers[t]=e,e._mapToAdd=this,e.beforeAdd&&e.beforeAdd(this),this.whenReady(e._layerAdd,e)),this},removeLayer:function(e){var t=i(e);return this._layers[t]?(this._loaded&&e.onRemove(this),delete this._layers[t],this._loaded&&(this.fire("layerremove",{layer:e}),e.fire("remove")),e._map=e._mapToAdd=null,this):this},hasLayer:function(e){return i(e)in this._layers},eachLayer:function(e,t){for(var n in this._layers)e.call(t,this._layers[n]);return this},_addLayers:function(e){for(var t=0,n=(e=e?v(e)?e:[e]:[]).length;t<n;t++)this.addLayer(e[t])},_addZoomLimit:function(e){isNaN(e.options.maxZoom)&&isNaN(e.options.minZoom)||(this._zoomBoundLayers[i(e)]=e,this._updateZoomLevels())},_removeZoomLimit:function(e){var t=i(e);this._zoomBoundLayers[t]&&(delete this._zoomBoundLayers[t],this._updateZoomLevels())},_updateZoomLevels:function(){var e=1/0,t=-1/0,n=this._getZoomSpan();for(var r in this._zoomBoundLayers){var o=this._zoomBoundLayers[r].options;e=void 0===o.minZoom?e:Math.min(e,o.minZoom),t=void 0===o.maxZoom?t:Math.max(t,o.maxZoom)}this._layersMaxZoom=t===-1/0?void 0:t,this._layersMinZoom=e===1/0?void 0:e,n!==this._getZoomSpan()&&this.fire("zoomlevelschange"),void 0===this.options.maxZoom&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),void 0===this.options.minZoom&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Zn=Kn.extend({initialize:function(e,t){var n,r;if(p(this,t),this._layers={},e)for(n=0,r=e.length;n<r;n++)this.addLayer(e[n])},addLayer:function(e){var t=this.getLayerId(e);return this._layers[t]=e,this._map&&this._map.addLayer(e),this},removeLayer:function(e){var t=e in this._layers?e:this.getLayerId(e);return this._map&&this._layers[t]&&this._map.removeLayer(this._layers[t]),delete this._layers[t],this},hasLayer:function(e){return("number"===typeof e?e:this.getLayerId(e))in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(e){var t,n,r=Array.prototype.slice.call(arguments,1);for(t in this._layers)(n=this._layers[t])[e]&&n[e].apply(n,r);return this},onAdd:function(e){this.eachLayer(e.addLayer,e)},onRemove:function(e){this.eachLayer(e.removeLayer,e)},eachLayer:function(e,t){for(var n in this._layers)e.call(t,this._layers[n]);return this},getLayer:function(e){return this._layers[e]},getLayers:function(){var e=[];return this.eachLayer(e.push,e),e},setZIndex:function(e){return this.invoke("setZIndex",e)},getLayerId:function(e){return i(e)}}),qn=function(e,t){return new Zn(e,t)},Xn=Zn.extend({addLayer:function(e){return this.hasLayer(e)?this:(e.addEventParent(this),Zn.prototype.addLayer.call(this,e),this.fire("layeradd",{layer:e}))},removeLayer:function(e){return this.hasLayer(e)?(e in this._layers&&(e=this._layers[e]),e.removeEventParent(this),Zn.prototype.removeLayer.call(this,e),this.fire("layerremove",{layer:e})):this},setStyle:function(e){return this.invoke("setStyle",e)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var e=new V;for(var t in this._layers){var n=this._layers[t];e.extend(n.getBounds?n.getBounds():n.getLatLng())}return e}}),Yn=function(e,t){return new Xn(e,t)},Qn=E.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(e){p(this,e)},createIcon:function(e){return this._createIcon("icon",e)},createShadow:function(e){return this._createIcon("shadow",e)},_createIcon:function(e,t){var n=this._getIconUrl(e);if(!n){if("icon"===e)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var r=this._createImg(n,t&&"IMG"===t.tagName?t:null);return this._setIconStyles(r,e),(this.options.crossOrigin||""===this.options.crossOrigin)&&(r.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),r},_setIconStyles:function(e,t){var n=this.options,r=n[t+"Size"];"number"===typeof r&&(r=[r,r]);var o=D(r),a=D("shadow"===t&&n.shadowAnchor||n.iconAnchor||o&&o.divideBy(2,!0));e.className="leaflet-marker-"+t+" "+(n.className||""),a&&(e.style.marginLeft=-a.x+"px",e.style.marginTop=-a.y+"px"),o&&(e.style.width=o.x+"px",e.style.height=o.y+"px")},_createImg:function(e,t){return(t=t||document.createElement("img")).src=e,t},_getIconUrl:function(e){return Be.retina&&this.options[e+"RetinaUrl"]||this.options[e+"Url"]}});function $n(e){return new Qn(e)}var Jn=Qn.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(e){return"string"!==typeof Jn.imagePath&&(Jn.imagePath=this._detectIconPath()),(this.options.imagePath||Jn.imagePath)+Qn.prototype._getIconUrl.call(this,e)},_stripUrl:function(e){var t=function(e,t,n){var r=t.exec(e);return r&&r[n]};return(e=t(e,/^url\((['"])?(.+)\1\)$/,2))&&t(e,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var e=pt("div","leaflet-default-icon-path",document.body),t=ft(e,"background-image")||ft(e,"backgroundImage");if(document.body.removeChild(e),t=this._stripUrl(t))return t;var n=document.querySelector('link[href$="leaflet.css"]');return n?n.href.substring(0,n.href.length-11-1):""}}),er=gn.extend({initialize:function(e){this._marker=e},addHooks:function(){var e=this._marker._icon;this._draggable||(this._draggable=new bn(e,e,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),bt(e,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&_t(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(e){var t=this._marker,n=t._map,r=this._marker.options.autoPanSpeed,o=this._marker.options.autoPanPadding,a=Et(t._icon),i=n.getPixelBounds(),s=n.getPixelOrigin(),l=N(i.min._subtract(s).add(o),i.max._subtract(s).subtract(o));if(!l.contains(a)){var u=D((Math.max(l.max.x,a.x)-l.max.x)/(i.max.x-l.max.x)-(Math.min(l.min.x,a.x)-l.min.x)/(i.min.x-l.min.x),(Math.max(l.max.y,a.y)-l.max.y)/(i.max.y-l.max.y)-(Math.min(l.min.y,a.y)-l.min.y)/(i.min.y-l.min.y)).multiplyBy(r);n.panBy(u,{animate:!1}),this._draggable._newPos._add(u),this._draggable._startPos._add(u),At(t._icon,this._draggable._newPos),this._onDrag(e),this._panRequest=C(this._adjustPan.bind(this,e))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(e){this._marker.options.autoPan&&(P(this._panRequest),this._panRequest=C(this._adjustPan.bind(this,e)))},_onDrag:function(e){var t=this._marker,n=t._shadow,r=Et(t._icon),o=t._map.layerPointToLatLng(r);n&&At(n,r),t._latlng=o,e.latlng=o,e.oldLatLng=this._oldLatLng,t.fire("move",e).fire("drag",e)},_onDragEnd:function(e){P(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",e)}}),tr=Kn.extend({options:{icon:new Jn,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(e,t){p(this,t),this._latlng=z(e)},onAdd:function(e){this._zoomAnimated=this._zoomAnimated&&e.options.markerZoomAnimation,this._zoomAnimated&&e.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(e){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&e.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(e){var t=this._latlng;return this._latlng=z(e),this.update(),this.fire("move",{oldLatLng:t,latlng:this._latlng})},setZIndexOffset:function(e){return this.options.zIndexOffset=e,this.update()},getIcon:function(){return this.options.icon},setIcon:function(e){return this.options.icon=e,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var e=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(e)}return this},_initIcon:function(){var e=this.options,t="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),n=e.icon.createIcon(this._icon),r=!1;n!==this._icon&&(this._icon&&this._removeIcon(),r=!0,e.title&&(n.title=e.title),"IMG"===n.tagName&&(n.alt=e.alt||"")),bt(n,t),e.keyboard&&(n.tabIndex="0",n.setAttribute("role","button")),this._icon=n,e.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Nt(n,"focus",this._panOnFocus,this);var o=e.icon.createShadow(this._shadow),a=!1;o!==this._shadow&&(this._removeShadow(),a=!0),o&&(bt(o,t),o.alt=""),this._shadow=o,e.opacity<1&&this._updateOpacity(),r&&this.getPane().appendChild(this._icon),this._initInteraction(),o&&a&&this.getPane(e.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Ft(this._icon,"focus",this._panOnFocus,this),ht(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&ht(this._shadow),this._shadow=null},_setPos:function(e){this._icon&&At(this._icon,e),this._shadow&&At(this._shadow,e),this._zIndex=e.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(e){this._icon&&(this._icon.style.zIndex=this._zIndex+e)},_animateZoom:function(e){var t=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center).round();this._setPos(t)},_initInteraction:function(){if(this.options.interactive&&(bt(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),er)){var e=this.options.draggable;this.dragging&&(e=this.dragging.enabled(),this.dragging.disable()),this.dragging=new er(this),e&&this.dragging.enable()}},setOpacity:function(e){return this.options.opacity=e,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var e=this.options.opacity;this._icon&&St(this._icon,e),this._shadow&&St(this._shadow,e)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var e=this._map;if(e){var t=this.options.icon.options,n=t.iconSize?D(t.iconSize):D(0,0),r=t.iconAnchor?D(t.iconAnchor):D(0,0);e.panInside(this._latlng,{paddingTopLeft:r,paddingBottomRight:n.subtract(r)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function nr(e,t){return new tr(e,t)}var rr=Kn.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(e){this._renderer=e.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(e){return p(this,e),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&e&&Object.prototype.hasOwnProperty.call(e,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),or=rr.extend({options:{fill:!0,radius:10},initialize:function(e,t){p(this,t),this._latlng=z(e),this._radius=this.options.radius},setLatLng:function(e){var t=this._latlng;return this._latlng=z(e),this.redraw(),this.fire("move",{oldLatLng:t,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(e){return this.options.radius=this._radius=e,this.redraw()},getRadius:function(){return this._radius},setStyle:function(e){var t=e&&e.radius||this._radius;return rr.prototype.setStyle.call(this,e),this.setRadius(t),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var e=this._radius,t=this._radiusY||e,n=this._clickTolerance(),r=[e+n,t+n];this._pxBounds=new B(this._point.subtract(r),this._point.add(r))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(e){return e.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function ar(e,t){return new or(e,t)}var ir=or.extend({initialize:function(e,t,r){if("number"===typeof t&&(t=n({},r,{radius:t})),p(this,t),this._latlng=z(e),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(e){return this._mRadius=e,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var e=[this._radius,this._radiusY||this._radius];return new V(this._map.layerPointToLatLng(this._point.subtract(e)),this._map.layerPointToLatLng(this._point.add(e)))},setStyle:rr.prototype.setStyle,_project:function(){var e=this._latlng.lng,t=this._latlng.lat,n=this._map,r=n.options.crs;if(r.distance===W.distance){var o=Math.PI/180,a=this._mRadius/W.R/o,i=n.project([t+a,e]),s=n.project([t-a,e]),l=i.add(s).divideBy(2),u=n.unproject(l).lat,c=Math.acos((Math.cos(a*o)-Math.sin(t*o)*Math.sin(u*o))/(Math.cos(t*o)*Math.cos(u*o)))/o;(isNaN(c)||0===c)&&(c=a/Math.cos(Math.PI/180*t)),this._point=l.subtract(n.getPixelOrigin()),this._radius=isNaN(c)?0:l.x-n.project([u,e-c]).x,this._radiusY=l.y-i.y}else{var d=r.unproject(r.project(this._latlng).subtract([this._mRadius,0]));this._point=n.latLngToLayerPoint(this._latlng),this._radius=this._point.x-n.latLngToLayerPoint(d).x}this._updateBounds()}});function sr(e,t,n){return new ir(e,t,n)}var lr=rr.extend({options:{smoothFactor:1,noClip:!1},initialize:function(e,t){p(this,t),this._setLatLngs(e)},getLatLngs:function(){return this._latlngs},setLatLngs:function(e){return this._setLatLngs(e),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(e){for(var t,n,r=1/0,o=null,a=Dn,i=0,s=this._parts.length;i<s;i++)for(var l=this._parts[i],u=1,c=l.length;u<c;u++){var d=a(e,t=l[u-1],n=l[u],!0);d<r&&(r=d,o=a(e,t,n))}return o&&(o.distance=Math.sqrt(r)),o},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Vn(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(e,t){return t=t||this._defaultShape(),e=z(e),t.push(e),this._bounds.extend(e),this.redraw()},_setLatLngs:function(e){this._bounds=new V,this._latlngs=this._convertLatLngs(e)},_defaultShape:function(){return Bn(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(e){for(var t=[],n=Bn(e),r=0,o=e.length;r<o;r++)n?(t[r]=z(e[r]),this._bounds.extend(t[r])):t[r]=this._convertLatLngs(e[r]);return t},_project:function(){var e=new B;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,e),this._bounds.isValid()&&e.isValid()&&(this._rawPxBounds=e,this._updateBounds())},_updateBounds:function(){var e=this._clickTolerance(),t=new R(e,e);this._rawPxBounds&&(this._pxBounds=new B([this._rawPxBounds.min.subtract(t),this._rawPxBounds.max.add(t)]))},_projectLatlngs:function(e,t,n){var r,o,a=e[0]instanceof U,i=e.length;if(a){for(o=[],r=0;r<i;r++)o[r]=this._map.latLngToLayerPoint(e[r]),n.extend(o[r]);t.push(o)}else for(r=0;r<i;r++)this._projectLatlngs(e[r],t,n)},_clipPoints:function(){var e=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(e))if(this.options.noClip)this._parts=this._rings;else{var t,n,r,o,a,i,s,l=this._parts;for(t=0,r=0,o=this._rings.length;t<o;t++)for(n=0,a=(s=this._rings[t]).length;n<a-1;n++)(i=Mn(s[n],s[n+1],e,n,!0))&&(l[r]=l[r]||[],l[r].push(i[0]),i[1]===s[n+1]&&n!==a-2||(l[r].push(i[1]),r++))}},_simplifyPoints:function(){for(var e=this._parts,t=this.options.smoothFactor,n=0,r=e.length;n<r;n++)e[n]=Cn(e[n],t)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(e,t){var n,r,o,a,i,s,l=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(e))return!1;for(n=0,a=this._parts.length;n<a;n++)for(r=0,o=(i=(s=this._parts[n]).length)-1;r<i;o=r++)if((t||0!==r)&&Pn(e,s[o],s[r])<=l)return!0;return!1}});function ur(e,t){return new lr(e,t)}lr._flat=Nn;var cr=lr.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Tn(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(e){var t=lr.prototype._convertLatLngs.call(this,e),n=t.length;return n>=2&&t[0]instanceof U&&t[0].equals(t[n-1])&&t.pop(),t},_setLatLngs:function(e){lr.prototype._setLatLngs.call(this,e),Bn(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Bn(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var e=this._renderer._bounds,t=this.options.weight,n=new R(t,t);if(e=new B(e.min.subtract(n),e.max.add(n)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(e))if(this.options.noClip)this._parts=this._rings;else for(var r,o=0,a=this._rings.length;o<a;o++)(r=_n(this._rings[o],e,!0)).length&&this._parts.push(r)},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(e){var t,n,r,o,a,i,s,l,u=!1;if(!this._pxBounds||!this._pxBounds.contains(e))return!1;for(o=0,s=this._parts.length;o<s;o++)for(a=0,i=(l=(t=this._parts[o]).length)-1;a<l;i=a++)n=t[a],r=t[i],n.y>e.y!==r.y>e.y&&e.x<(r.x-n.x)*(e.y-n.y)/(r.y-n.y)+n.x&&(u=!u);return u||lr.prototype._containsPoint.call(this,e,!0)}});function dr(e,t){return new cr(e,t)}var fr=Xn.extend({initialize:function(e,t){p(this,t),this._layers={},e&&this.addData(e)},addData:function(e){var t,n,r,o=v(e)?e:e.features;if(o){for(t=0,n=o.length;t<n;t++)((r=o[t]).geometries||r.geometry||r.features||r.coordinates)&&this.addData(r);return this}var a=this.options;if(a.filter&&!a.filter(e))return this;var i=pr(e,a);return i?(i.feature=_r(e),i.defaultOptions=i.options,this.resetStyle(i),a.onEachFeature&&a.onEachFeature(e,i),this.addLayer(i)):this},resetStyle:function(e){return void 0===e?this.eachLayer(this.resetStyle,this):(e.options=n({},e.defaultOptions),this._setLayerStyle(e,this.options.style),this)},setStyle:function(e){return this.eachLayer(function(t){this._setLayerStyle(t,e)},this)},_setLayerStyle:function(e,t){e.setStyle&&("function"===typeof t&&(t=t(e.feature)),e.setStyle(t))}});function pr(e,t){var n,r,o,a,i="Feature"===e.type?e.geometry:e,s=i?i.coordinates:null,l=[],u=t&&t.pointToLayer,c=t&&t.coordsToLatLng||mr;if(!s&&!i)return null;switch(i.type){case"Point":return hr(u,e,n=c(s),t);case"MultiPoint":for(o=0,a=s.length;o<a;o++)n=c(s[o]),l.push(hr(u,e,n,t));return new Xn(l);case"LineString":case"MultiLineString":return r=gr(s,"LineString"===i.type?0:1,c),new lr(r,t);case"Polygon":case"MultiPolygon":return r=gr(s,"Polygon"===i.type?1:2,c),new cr(r,t);case"GeometryCollection":for(o=0,a=i.geometries.length;o<a;o++){var d=pr({geometry:i.geometries[o],type:"Feature",properties:e.properties},t);d&&l.push(d)}return new Xn(l);case"FeatureCollection":for(o=0,a=i.features.length;o<a;o++){var f=pr(i.features[o],t);f&&l.push(f)}return new Xn(l);default:throw new Error("Invalid GeoJSON object.")}}function hr(e,t,n,r){return e?e(t,n):new tr(n,r&&r.markersInheritOptions&&r)}function mr(e){return new U(e[1],e[0],e[2])}function gr(e,t,n){for(var r,o=[],a=0,i=e.length;a<i;a++)r=t?gr(e[a],t-1,n):(n||mr)(e[a]),o.push(r);return o}function vr(e,t){return void 0!==(e=z(e)).alt?[c(e.lng,t),c(e.lat,t),c(e.alt,t)]:[c(e.lng,t),c(e.lat,t)]}function yr(e,t,n,r){for(var o=[],a=0,i=e.length;a<i;a++)o.push(t?yr(e[a],Bn(e[a])?0:t-1,n,r):vr(e[a],r));return!t&&n&&o.length>0&&o.push(o[0].slice()),o}function br(e,t){return e.feature?n({},e.feature,{geometry:t}):_r(t)}function _r(e){return"Feature"===e.type||"FeatureCollection"===e.type?e:{type:"Feature",properties:{},geometry:e}}var Tr={toGeoJSON:function(e){return br(this,{type:"Point",coordinates:vr(this.getLatLng(),e)})}};function xr(e,t){return new fr(e,t)}tr.include(Tr),ir.include(Tr),or.include(Tr),lr.include({toGeoJSON:function(e){var t=!Bn(this._latlngs);return br(this,{type:(t?"Multi":"")+"LineString",coordinates:yr(this._latlngs,t?1:0,!1,e)})}}),cr.include({toGeoJSON:function(e){var t=!Bn(this._latlngs),n=t&&!Bn(this._latlngs[0]),r=yr(this._latlngs,n?2:t?1:0,!0,e);return t||(r=[r]),br(this,{type:(n?"Multi":"")+"Polygon",coordinates:r})}}),Zn.include({toMultiPoint:function(e){var t=[];return this.eachLayer(function(n){t.push(n.toGeoJSON(e).geometry.coordinates)}),br(this,{type:"MultiPoint",coordinates:t})},toGeoJSON:function(e){var t=this.feature&&this.feature.geometry&&this.feature.geometry.type;if("MultiPoint"===t)return this.toMultiPoint(e);var n="GeometryCollection"===t,r=[];return this.eachLayer(function(t){if(t.toGeoJSON){var o=t.toGeoJSON(e);if(n)r.push(o.geometry);else{var a=_r(o);"FeatureCollection"===a.type?r.push.apply(r,a.features):r.push(a)}}}),n?br(this,{geometries:r,type:"GeometryCollection"}):{type:"FeatureCollection",features:r}}});var Sr=xr,wr=Kn.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(e,t,n){this._url=e,this._bounds=F(t),p(this,n)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(bt(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){ht(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(e){return this.options.opacity=e,this._image&&this._updateOpacity(),this},setStyle:function(e){return e.opacity&&this.setOpacity(e.opacity),this},bringToFront:function(){return this._map&&gt(this._image),this},bringToBack:function(){return this._map&&vt(this._image),this},setUrl:function(e){return this._url=e,this._image&&(this._image.src=e),this},setBounds:function(e){return this._bounds=F(e),this._map&&this._reset(),this},getEvents:function(){var e={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},setZIndex:function(e){return this.options.zIndex=e,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var e="IMG"===this._url.tagName,t=this._image=e?this._url:pt("img");bt(t,"leaflet-image-layer"),this._zoomAnimated&&bt(t,"leaflet-zoom-animated"),this.options.className&&bt(t,this.options.className),t.onselectstart=u,t.onmousemove=u,t.onload=o(this.fire,this,"load"),t.onerror=o(this._overlayOnError,this,"error"),(this.options.crossOrigin||""===this.options.crossOrigin)&&(t.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),e?this._url=t.src:(t.src=this._url,t.alt=this.options.alt)},_animateZoom:function(e){var t=this._map.getZoomScale(e.zoom),n=this._map._latLngBoundsToNewLayerBounds(this._bounds,e.zoom,e.center).min;Pt(this._image,n,t)},_reset:function(){var e=this._image,t=new B(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),n=t.getSize();At(e,t.min),e.style.width=n.x+"px",e.style.height=n.y+"px"},_updateOpacity:function(){St(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var e=this.options.errorOverlayUrl;e&&this._url!==e&&(this._url=e,this._image.src=e)},getCenter:function(){return this._bounds.getCenter()}}),Cr=function(e,t,n){return new wr(e,t,n)},Pr=wr.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var e="VIDEO"===this._url.tagName,t=this._image=e?this._url:pt("video");if(bt(t,"leaflet-image-layer"),this._zoomAnimated&&bt(t,"leaflet-zoom-animated"),this.options.className&&bt(t,this.options.className),t.onselectstart=u,t.onmousemove=u,t.onloadeddata=o(this.fire,this,"load"),e){for(var n=t.getElementsByTagName("source"),r=[],a=0;a<n.length;a++)r.push(n[a].src);this._url=n.length>0?r:[t.src]}else{v(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(t.style,"objectFit")&&(t.style.objectFit="fill"),t.autoplay=!!this.options.autoplay,t.loop=!!this.options.loop,t.muted=!!this.options.muted,t.playsInline=!!this.options.playsInline;for(var i=0;i<this._url.length;i++){var s=pt("source");s.src=this._url[i],t.appendChild(s)}}}});function Ar(e,t,n){return new Pr(e,t,n)}var Er=wr.extend({_initImage:function(){var e=this._image=this._url;bt(e,"leaflet-image-layer"),this._zoomAnimated&&bt(e,"leaflet-zoom-animated"),this.options.className&&bt(e,this.options.className),e.onselectstart=u,e.onmousemove=u}});function Ir(e,t,n){return new Er(e,t,n)}var Or=Kn.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(e,t){e&&(e instanceof U||v(e))?(this._latlng=z(e),p(this,t)):(p(this,e),this._source=t),this.options.content&&(this._content=this.options.content)},openOn:function(e){return(e=arguments.length?e:this._source._map).hasLayer(this)||e.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(e){return this._map?this.close():(arguments.length?this._source=e:e=this._source,this._prepareOpen(),this.openOn(e._map)),this},onAdd:function(e){this._zoomAnimated=e._zoomAnimated,this._container||this._initLayout(),e._fadeAnimated&&St(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),e._fadeAnimated&&St(this._container,1),this.bringToFront(),this.options.interactive&&(bt(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(e){e._fadeAnimated?(St(this._container,0),this._removeTimeout=setTimeout(o(ht,void 0,this._container),200)):ht(this._container),this.options.interactive&&(_t(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(e){return this._latlng=z(e),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(e){return this._content=e,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var e={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&gt(this._container),this},bringToBack:function(){return this._map&&vt(this._container),this},_prepareOpen:function(e){var t=this._source;if(!t._map)return!1;if(t instanceof Xn){t=null;var n=this._source._layers;for(var r in n)if(n[r]._map){t=n[r];break}if(!t)return!1;this._source=t}if(!e)if(t.getCenter)e=t.getCenter();else if(t.getLatLng)e=t.getLatLng();else{if(!t.getBounds)throw new Error("Unable to get source layer LatLng.");e=t.getBounds().getCenter()}return this.setLatLng(e),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var e=this._contentNode,t="function"===typeof this._content?this._content(this._source||this):this._content;if("string"===typeof t)e.innerHTML=t;else{for(;e.hasChildNodes();)e.removeChild(e.firstChild);e.appendChild(t)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var e=this._map.latLngToLayerPoint(this._latlng),t=D(this.options.offset),n=this._getAnchor();this._zoomAnimated?At(this._container,e.add(n)):t=t.add(e).add(n);var r=this._containerBottom=-t.y,o=this._containerLeft=-Math.round(this._containerWidth/2)+t.x;this._container.style.bottom=r+"px",this._container.style.left=o+"px"}},_getAnchor:function(){return[0,0]}});nn.include({_initOverlay:function(e,t,n,r){var o=t;return o instanceof e||(o=new e(r).setContent(t)),n&&o.setLatLng(n),o}}),Kn.include({_initOverlay:function(e,t,n,r){var o=n;return o instanceof e?(p(o,r),o._source=this):(o=t&&!r?t:new e(r,this)).setContent(n),o}});var Mr=Or.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(e){return!(e=arguments.length?e:this._source._map).hasLayer(this)&&e._popup&&e._popup.options.autoClose&&e.removeLayer(e._popup),e._popup=this,Or.prototype.openOn.call(this,e)},onAdd:function(e){Or.prototype.onAdd.call(this,e),e.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof rr||this._source.on("preclick",Ht))},onRemove:function(e){Or.prototype.onRemove.call(this,e),e.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof rr||this._source.off("preclick",Ht))},getEvents:function(){var e=Or.prototype.getEvents.call(this);return(void 0!==this.options.closeOnClick?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(e.preclick=this.close),this.options.keepInView&&(e.moveend=this._adjustPan),e},_initLayout:function(){var e="leaflet-popup",t=this._container=pt("div",e+" "+(this.options.className||"")+" leaflet-zoom-animated"),n=this._wrapper=pt("div",e+"-content-wrapper",t);if(this._contentNode=pt("div",e+"-content",n),Kt(t),jt(this._contentNode),Nt(t,"contextmenu",Ht),this._tipContainer=pt("div",e+"-tip-container",t),this._tip=pt("div",e+"-tip",this._tipContainer),this.options.closeButton){var r=this._closeButton=pt("a",e+"-close-button",t);r.setAttribute("role","button"),r.setAttribute("aria-label","Close popup"),r.href="#close",r.innerHTML='<span aria-hidden="true">&#215;</span>',Nt(r,"click",function(e){Zt(e),this.close()},this)}},_updateLayout:function(){var e=this._contentNode,t=e.style;t.width="",t.whiteSpace="nowrap";var n=e.offsetWidth;n=Math.min(n,this.options.maxWidth),n=Math.max(n,this.options.minWidth),t.width=n+1+"px",t.whiteSpace="",t.height="";var r=e.offsetHeight,o=this.options.maxHeight,a="leaflet-popup-scrolled";o&&r>o?(t.height=o+"px",bt(e,a)):_t(e,a),this._containerWidth=this._container.offsetWidth},_animateZoom:function(e){var t=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center),n=this._getAnchor();At(this._container,t.add(n))},_adjustPan:function(){if(this.options.autoPan)if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning)this._autopanning=!1;else{var e=this._map,t=parseInt(ft(this._container,"marginBottom"),10)||0,n=this._container.offsetHeight+t,r=this._containerWidth,o=new R(this._containerLeft,-n-this._containerBottom);o._add(Et(this._container));var a=e.layerPointToContainerPoint(o),i=D(this.options.autoPanPadding),s=D(this.options.autoPanPaddingTopLeft||i),l=D(this.options.autoPanPaddingBottomRight||i),u=e.getSize(),c=0,d=0;a.x+r+l.x>u.x&&(c=a.x+r-u.x+l.x),a.x-c-s.x<0&&(c=a.x-s.x),a.y+n+l.y>u.y&&(d=a.y+n-u.y+l.y),a.y-d-s.y<0&&(d=a.y-s.y),(c||d)&&(this.options.keepInView&&(this._autopanning=!0),e.fire("autopanstart").panBy([c,d]))}},_getAnchor:function(){return D(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Rr=function(e,t){return new Mr(e,t)};nn.mergeOptions({closePopupOnClick:!0}),nn.include({openPopup:function(e,t,n){return this._initOverlay(Mr,e,t,n).openOn(this),this},closePopup:function(e){return(e=arguments.length?e:this._popup)&&e.close(),this}}),Kn.include({bindPopup:function(e,t){return this._popup=this._initOverlay(Mr,this._popup,e,t),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(e){return this._popup&&(this instanceof Xn||(this._popup._source=this),this._popup._prepareOpen(e||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return!!this._popup&&this._popup.isOpen()},setPopupContent:function(e){return this._popup&&this._popup.setContent(e),this},getPopup:function(){return this._popup},_openPopup:function(e){if(this._popup&&this._map){qt(e);var t=e.layer||e.target;this._popup._source!==t||t instanceof rr?(this._popup._source=t,this.openPopup(e.latlng)):this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(e.latlng)}},_movePopup:function(e){this._popup.setLatLng(e.latlng)},_onKeyPress:function(e){13===e.originalEvent.keyCode&&this._openPopup(e)}});var Lr=Or.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(e){Or.prototype.onAdd.call(this,e),this.setOpacity(this.options.opacity),e.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(e){Or.prototype.onRemove.call(this,e),e.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var e=Or.prototype.getEvents.call(this);return this.options.permanent||(e.preclick=this.close),e},_initLayout:function(){var e="leaflet-tooltip "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=pt("div",e),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+i(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(e){var t,n,r=this._map,o=this._container,a=r.latLngToContainerPoint(r.getCenter()),i=r.layerPointToContainerPoint(e),s=this.options.direction,l=o.offsetWidth,u=o.offsetHeight,c=D(this.options.offset),d=this._getAnchor();"top"===s?(t=l/2,n=u):"bottom"===s?(t=l/2,n=0):"center"===s?(t=l/2,n=u/2):"right"===s?(t=0,n=u/2):"left"===s?(t=l,n=u/2):i.x<a.x?(s="right",t=0,n=u/2):(s="left",t=l+2*(c.x+d.x),n=u/2),e=e.subtract(D(t,n,!0)).add(c).add(d),_t(o,"leaflet-tooltip-right"),_t(o,"leaflet-tooltip-left"),_t(o,"leaflet-tooltip-top"),_t(o,"leaflet-tooltip-bottom"),bt(o,"leaflet-tooltip-"+s),At(o,e)},_updatePosition:function(){var e=this._map.latLngToLayerPoint(this._latlng);this._setPosition(e)},setOpacity:function(e){this.options.opacity=e,this._container&&St(this._container,e)},_animateZoom:function(e){var t=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center);this._setPosition(t)},_getAnchor:function(){return D(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),kr=function(e,t){return new Lr(e,t)};nn.include({openTooltip:function(e,t,n){return this._initOverlay(Lr,e,t,n).openOn(this),this},closeTooltip:function(e){return e.close(),this}}),Kn.include({bindTooltip:function(e,t){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Lr,this._tooltip,e,t),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(e){if(e||!this._tooltipHandlersAdded){var t=e?"off":"on",n={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?n.add=this._openTooltip:(n.mouseover=this._openTooltip,n.mouseout=this.closeTooltip,n.click=this._openTooltip,this._map?this._addFocusListeners():n.add=this._addFocusListeners),this._tooltip.options.sticky&&(n.mousemove=this._moveTooltip),this[t](n),this._tooltipHandlersAdded=!e}},openTooltip:function(e){return this._tooltip&&(this instanceof Xn||(this._tooltip._source=this),this._tooltip._prepareOpen(e)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(e){return this._tooltip&&this._tooltip.setContent(e),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(e){var t="function"===typeof e.getElement&&e.getElement();t&&(Nt(t,"focus",function(){this._tooltip._source=e,this.openTooltip()},this),Nt(t,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(e){var t="function"===typeof e.getElement&&e.getElement();t&&t.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(e){if(this._tooltip&&this._map)if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var t=this;this._map.once("moveend",function(){t._openOnceFlag=!1,t._openTooltip(e)})}else this._tooltip._source=e.layer||e.target,this.openTooltip(this._tooltip.options.sticky?e.latlng:void 0)},_moveTooltip:function(e){var t,n,r=e.latlng;this._tooltip.options.sticky&&e.originalEvent&&(t=this._map.mouseEventToContainerPoint(e.originalEvent),n=this._map.containerPointToLayerPoint(t),r=this._map.layerPointToLatLng(n)),this._tooltip.setLatLng(r)}});var Dr=Qn.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(e){var t=e&&"DIV"===e.tagName?e:document.createElement("div"),n=this.options;if(n.html instanceof Element?(mt(t),t.appendChild(n.html)):t.innerHTML=!1!==n.html?n.html:"",n.bgPos){var r=D(n.bgPos);t.style.backgroundPosition=-r.x+"px "+-r.y+"px"}return this._setIconStyles(t,"icon"),t},createShadow:function(){return null}});function Br(e){return new Dr(e)}Qn.Default=Jn;var Nr=Kn.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Be.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(e){p(this,e)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(e){e._addZoomLimit(this)},onRemove:function(e){this._removeAllTiles(),ht(this._container),e._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(gt(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(vt(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(e){return this.options.opacity=e,this._updateOpacity(),this},setZIndex:function(e){return this.options.zIndex=e,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var e=this._clampZoom(this._map.getZoom());e!==this._tileZoom&&(this._tileZoom=e,this._updateLevels()),this._update()}return this},getEvents:function(){var e={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=s(this._onMoveEnd,this.options.updateInterval,this)),e.move=this._onMove),this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},createTile:function(){return document.createElement("div")},getTileSize:function(){var e=this.options.tileSize;return e instanceof R?e:new R(e,e)},_updateZIndex:function(){this._container&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(e){for(var t,n=this.getPane().children,r=-e(-1/0,1/0),o=0,a=n.length;o<a;o++)t=n[o].style.zIndex,n[o]!==this._container&&t&&(r=e(r,+t));isFinite(r)&&(this.options.zIndex=r+e(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Be.ielt9){St(this._container,this.options.opacity);var e=+new Date,t=!1,n=!1;for(var r in this._tiles){var o=this._tiles[r];if(o.current&&o.loaded){var a=Math.min(1,(e-o.loaded)/200);St(o.el,a),a<1?t=!0:(o.active?n=!0:this._onOpaqueTile(o),o.active=!0)}}n&&!this._noPrune&&this._pruneTiles(),t&&(P(this._fadeFrame),this._fadeFrame=C(this._updateOpacity,this))}},_onOpaqueTile:u,_initContainer:function(){this._container||(this._container=pt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var e=this._tileZoom,t=this.options.maxZoom;if(void 0!==e){for(var n in this._levels)n=Number(n),this._levels[n].el.children.length||n===e?(this._levels[n].el.style.zIndex=t-Math.abs(e-n),this._onUpdateLevel(n)):(ht(this._levels[n].el),this._removeTilesAtZoom(n),this._onRemoveLevel(n),delete this._levels[n]);var r=this._levels[e],o=this._map;return r||((r=this._levels[e]={}).el=pt("div","leaflet-tile-container leaflet-zoom-animated",this._container),r.el.style.zIndex=t,r.origin=o.project(o.unproject(o.getPixelOrigin()),e).round(),r.zoom=e,this._setZoomTransform(r,o.getCenter(),o.getZoom()),u(r.el.offsetWidth),this._onCreateLevel(r)),this._level=r,r}},_onUpdateLevel:u,_onRemoveLevel:u,_onCreateLevel:u,_pruneTiles:function(){if(this._map){var e,t,n=this._map.getZoom();if(n>this.options.maxZoom||n<this.options.minZoom)this._removeAllTiles();else{for(e in this._tiles)(t=this._tiles[e]).retain=t.current;for(e in this._tiles)if((t=this._tiles[e]).current&&!t.active){var r=t.coords;this._retainParent(r.x,r.y,r.z,r.z-5)||this._retainChildren(r.x,r.y,r.z,r.z+2)}for(e in this._tiles)this._tiles[e].retain||this._removeTile(e)}}},_removeTilesAtZoom:function(e){for(var t in this._tiles)this._tiles[t].coords.z===e&&this._removeTile(t)},_removeAllTiles:function(){for(var e in this._tiles)this._removeTile(e)},_invalidateAll:function(){for(var e in this._levels)ht(this._levels[e].el),this._onRemoveLevel(Number(e)),delete this._levels[e];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(e,t,n,r){var o=Math.floor(e/2),a=Math.floor(t/2),i=n-1,s=new R(+o,+a);s.z=+i;var l=this._tileCoordsToKey(s),u=this._tiles[l];return u&&u.active?(u.retain=!0,!0):(u&&u.loaded&&(u.retain=!0),i>r&&this._retainParent(o,a,i,r))},_retainChildren:function(e,t,n,r){for(var o=2*e;o<2*e+2;o++)for(var a=2*t;a<2*t+2;a++){var i=new R(o,a);i.z=n+1;var s=this._tileCoordsToKey(i),l=this._tiles[s];l&&l.active?l.retain=!0:(l&&l.loaded&&(l.retain=!0),n+1<r&&this._retainChildren(o,a,n+1,r))}},_resetView:function(e){var t=e&&(e.pinch||e.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),t,t)},_animateZoom:function(e){this._setView(e.center,e.zoom,!0,e.noUpdate)},_clampZoom:function(e){var t=this.options;return void 0!==t.minNativeZoom&&e<t.minNativeZoom?t.minNativeZoom:void 0!==t.maxNativeZoom&&t.maxNativeZoom<e?t.maxNativeZoom:e},_setView:function(e,t,n,r){var o=Math.round(t);o=void 0!==this.options.maxZoom&&o>this.options.maxZoom||void 0!==this.options.minZoom&&o<this.options.minZoom?void 0:this._clampZoom(o);var a=this.options.updateWhenZooming&&o!==this._tileZoom;r&&!a||(this._tileZoom=o,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),void 0!==o&&this._update(e),n||this._pruneTiles(),this._noPrune=!!n),this._setZoomTransforms(e,t)},_setZoomTransforms:function(e,t){for(var n in this._levels)this._setZoomTransform(this._levels[n],e,t)},_setZoomTransform:function(e,t,n){var r=this._map.getZoomScale(n,e.zoom),o=e.origin.multiplyBy(r).subtract(this._map._getNewPixelOrigin(t,n)).round();Be.any3d?Pt(e.el,o,r):At(e.el,o)},_resetGrid:function(){var e=this._map,t=e.options.crs,n=this._tileSize=this.getTileSize(),r=this._tileZoom,o=this._map.getPixelWorldBounds(this._tileZoom);o&&(this._globalTileRange=this._pxBoundsToTileRange(o)),this._wrapX=t.wrapLng&&!this.options.noWrap&&[Math.floor(e.project([0,t.wrapLng[0]],r).x/n.x),Math.ceil(e.project([0,t.wrapLng[1]],r).x/n.y)],this._wrapY=t.wrapLat&&!this.options.noWrap&&[Math.floor(e.project([t.wrapLat[0],0],r).y/n.x),Math.ceil(e.project([t.wrapLat[1],0],r).y/n.y)]},_onMoveEnd:function(){this._map&&!this._map._animatingZoom&&this._update()},_getTiledPixelBounds:function(e){var t=this._map,n=t._animatingZoom?Math.max(t._animateToZoom,t.getZoom()):t.getZoom(),r=t.getZoomScale(n,this._tileZoom),o=t.project(e,this._tileZoom).floor(),a=t.getSize().divideBy(2*r);return new B(o.subtract(a),o.add(a))},_update:function(e){var t=this._map;if(t){var n=this._clampZoom(t.getZoom());if(void 0===e&&(e=t.getCenter()),void 0!==this._tileZoom){var r=this._getTiledPixelBounds(e),o=this._pxBoundsToTileRange(r),a=o.getCenter(),i=[],s=this.options.keepBuffer,l=new B(o.getBottomLeft().subtract([s,-s]),o.getTopRight().add([s,-s]));if(!(isFinite(o.min.x)&&isFinite(o.min.y)&&isFinite(o.max.x)&&isFinite(o.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var u in this._tiles){var c=this._tiles[u].coords;c.z===this._tileZoom&&l.contains(new R(c.x,c.y))||(this._tiles[u].current=!1)}if(Math.abs(n-this._tileZoom)>1)this._setView(e,n);else{for(var d=o.min.y;d<=o.max.y;d++)for(var f=o.min.x;f<=o.max.x;f++){var p=new R(f,d);if(p.z=this._tileZoom,this._isValidTile(p)){var h=this._tiles[this._tileCoordsToKey(p)];h?h.current=!0:i.push(p)}}if(i.sort(function(e,t){return e.distanceTo(a)-t.distanceTo(a)}),0!==i.length){this._loading||(this._loading=!0,this.fire("loading"));var m=document.createDocumentFragment();for(f=0;f<i.length;f++)this._addTile(i[f],m);this._level.el.appendChild(m)}}}}},_isValidTile:function(e){var t=this._map.options.crs;if(!t.infinite){var n=this._globalTileRange;if(!t.wrapLng&&(e.x<n.min.x||e.x>n.max.x)||!t.wrapLat&&(e.y<n.min.y||e.y>n.max.y))return!1}if(!this.options.bounds)return!0;var r=this._tileCoordsToBounds(e);return F(this.options.bounds).overlaps(r)},_keyToBounds:function(e){return this._tileCoordsToBounds(this._keyToTileCoords(e))},_tileCoordsToNwSe:function(e){var t=this._map,n=this.getTileSize(),r=e.scaleBy(n),o=r.add(n);return[t.unproject(r,e.z),t.unproject(o,e.z)]},_tileCoordsToBounds:function(e){var t=this._tileCoordsToNwSe(e),n=new V(t[0],t[1]);return this.options.noWrap||(n=this._map.wrapLatLngBounds(n)),n},_tileCoordsToKey:function(e){return e.x+":"+e.y+":"+e.z},_keyToTileCoords:function(e){var t=e.split(":"),n=new R(+t[0],+t[1]);return n.z=+t[2],n},_removeTile:function(e){var t=this._tiles[e];t&&(ht(t.el),delete this._tiles[e],this.fire("tileunload",{tile:t.el,coords:this._keyToTileCoords(e)}))},_initTile:function(e){bt(e,"leaflet-tile");var t=this.getTileSize();e.style.width=t.x+"px",e.style.height=t.y+"px",e.onselectstart=u,e.onmousemove=u,Be.ielt9&&this.options.opacity<1&&St(e,this.options.opacity)},_addTile:function(e,t){var n=this._getTilePos(e),r=this._tileCoordsToKey(e),a=this.createTile(this._wrapCoords(e),o(this._tileReady,this,e));this._initTile(a),this.createTile.length<2&&C(o(this._tileReady,this,e,null,a)),At(a,n),this._tiles[r]={el:a,coords:e,current:!0},t.appendChild(a),this.fire("tileloadstart",{tile:a,coords:e})},_tileReady:function(e,t,n){t&&this.fire("tileerror",{error:t,tile:n,coords:e});var r=this._tileCoordsToKey(e);(n=this._tiles[r])&&(n.loaded=+new Date,this._map._fadeAnimated?(St(n.el,0),P(this._fadeFrame),this._fadeFrame=C(this._updateOpacity,this)):(n.active=!0,this._pruneTiles()),t||(bt(n.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:n.el,coords:e})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Be.ielt9||!this._map._fadeAnimated?C(this._pruneTiles,this):setTimeout(o(this._pruneTiles,this),250)))},_getTilePos:function(e){return e.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(e){var t=new R(this._wrapX?l(e.x,this._wrapX):e.x,this._wrapY?l(e.y,this._wrapY):e.y);return t.z=e.z,t},_pxBoundsToTileRange:function(e){var t=this.getTileSize();return new B(e.min.unscaleBy(t).floor(),e.max.unscaleBy(t).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var e in this._tiles)if(!this._tiles[e].loaded)return!1;return!0}});function Vr(e){return new Nr(e)}var Fr=Nr.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(e,t){this._url=e,(t=p(this,t)).detectRetina&&Be.retina&&t.maxZoom>0?(t.tileSize=Math.floor(t.tileSize/2),t.zoomReverse?(t.zoomOffset--,t.minZoom=Math.min(t.maxZoom,t.minZoom+1)):(t.zoomOffset++,t.maxZoom=Math.max(t.minZoom,t.maxZoom-1)),t.minZoom=Math.max(0,t.minZoom)):t.zoomReverse?t.minZoom=Math.min(t.maxZoom,t.minZoom):t.maxZoom=Math.max(t.minZoom,t.maxZoom),"string"===typeof t.subdomains&&(t.subdomains=t.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(e,t){return this._url===e&&void 0===t&&(t=!0),this._url=e,t||this.redraw(),this},createTile:function(e,t){var n=document.createElement("img");return Nt(n,"load",o(this._tileOnLoad,this,t,n)),Nt(n,"error",o(this._tileOnError,this,t,n)),(this.options.crossOrigin||""===this.options.crossOrigin)&&(n.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),"string"===typeof this.options.referrerPolicy&&(n.referrerPolicy=this.options.referrerPolicy),n.alt="",n.src=this.getTileUrl(e),n},getTileUrl:function(e){var t={r:Be.retina?"@2x":"",s:this._getSubdomain(e),x:e.x,y:e.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var r=this._globalTileRange.max.y-e.y;this.options.tms&&(t.y=r),t["-y"]=r}return g(this._url,n(t,this.options))},_tileOnLoad:function(e,t){Be.ielt9?setTimeout(o(e,this,null,t),0):e(null,t)},_tileOnError:function(e,t,n){var r=this.options.errorTileUrl;r&&t.getAttribute("src")!==r&&(t.src=r),e(n,t)},_onTileRemove:function(e){e.tile.onload=null},_getZoomForUrl:function(){var e=this._tileZoom,t=this.options.maxZoom;return this.options.zoomReverse&&(e=t-e),e+this.options.zoomOffset},_getSubdomain:function(e){var t=Math.abs(e.x+e.y)%this.options.subdomains.length;return this.options.subdomains[t]},_abortLoading:function(){var e,t;for(e in this._tiles)if(this._tiles[e].coords.z!==this._tileZoom&&((t=this._tiles[e].el).onload=u,t.onerror=u,!t.complete)){t.src=b;var n=this._tiles[e].coords;ht(t),delete this._tiles[e],this.fire("tileabort",{tile:t,coords:n})}},_removeTile:function(e){var t=this._tiles[e];if(t)return t.el.setAttribute("src",b),Nr.prototype._removeTile.call(this,e)},_tileReady:function(e,t,n){if(this._map&&(!n||n.getAttribute("src")!==b))return Nr.prototype._tileReady.call(this,e,t,n)}});function Ur(e,t){return new Fr(e,t)}var zr=Fr.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(e,t){this._url=e;var r=n({},this.defaultWmsParams);for(var o in t)o in this.options||(r[o]=t[o]);var a=(t=p(this,t)).detectRetina&&Be.retina?2:1,i=this.getTileSize();r.width=i.x*a,r.height=i.y*a,this.wmsParams=r},onAdd:function(e){this._crs=this.options.crs||e.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var t=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[t]=this._crs.code,Fr.prototype.onAdd.call(this,e)},getTileUrl:function(e){var t=this._tileCoordsToNwSe(e),n=this._crs,r=N(n.project(t[0]),n.project(t[1])),o=r.min,a=r.max,i=(this._wmsVersion>=1.3&&this._crs===Hn?[o.y,o.x,a.y,a.x]:[o.x,o.y,a.x,a.y]).join(","),s=Fr.prototype.getTileUrl.call(this,e);return s+h(this.wmsParams,s,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+i},setParams:function(e,t){return n(this.wmsParams,e),t||this.redraw(),this}});function Gr(e,t){return new zr(e,t)}Fr.WMS=zr,Ur.wms=Gr;var Wr=Kn.extend({options:{padding:.1},initialize:function(e){p(this,e),i(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),bt(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var e={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(e.zoomanim=this._onAnimZoom),e},_onAnimZoom:function(e){this._updateTransform(e.center,e.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(e,t){var n=this._map.getZoomScale(t,this._zoom),r=this._map.getSize().multiplyBy(.5+this.options.padding),o=this._map.project(this._center,t),a=r.multiplyBy(-n).add(o).subtract(this._map._getNewPixelOrigin(e,t));Be.any3d?Pt(this._container,a,n):At(this._container,a)},_reset:function(){for(var e in this._update(),this._updateTransform(this._center,this._zoom),this._layers)this._layers[e]._reset()},_onZoomEnd:function(){for(var e in this._layers)this._layers[e]._project()},_updatePaths:function(){for(var e in this._layers)this._layers[e]._update()},_update:function(){var e=this.options.padding,t=this._map.getSize(),n=this._map.containerPointToLayerPoint(t.multiplyBy(-e)).round();this._bounds=new B(n,n.add(t.multiplyBy(1+2*e)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Hr=Wr.extend({options:{tolerance:0},getEvents:function(){var e=Wr.prototype.getEvents.call(this);return e.viewprereset=this._onViewPreReset,e},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Wr.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var e=this._container=document.createElement("canvas");Nt(e,"mousemove",this._onMouseMove,this),Nt(e,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Nt(e,"mouseout",this._handleMouseOut,this),e._leaflet_disable_events=!0,this._ctx=e.getContext("2d")},_destroyContainer:function(){P(this._redrawRequest),delete this._ctx,ht(this._container),Ft(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){for(var e in this._redrawBounds=null,this._layers)this._layers[e]._update();this._redraw()}},_update:function(){if(!this._map._animatingZoom||!this._bounds){Wr.prototype._update.call(this);var e=this._bounds,t=this._container,n=e.getSize(),r=Be.retina?2:1;At(t,e.min),t.width=r*n.x,t.height=r*n.y,t.style.width=n.x+"px",t.style.height=n.y+"px",Be.retina&&this._ctx.scale(2,2),this._ctx.translate(-e.min.x,-e.min.y),this.fire("update")}},_reset:function(){Wr.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(e){this._updateDashArray(e),this._layers[i(e)]=e;var t=e._order={layer:e,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=t),this._drawLast=t,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(e){this._requestRedraw(e)},_removePath:function(e){var t=e._order,n=t.next,r=t.prev;n?n.prev=r:this._drawLast=r,r?r.next=n:this._drawFirst=n,delete e._order,delete this._layers[i(e)],this._requestRedraw(e)},_updatePath:function(e){this._extendRedrawBounds(e),e._project(),e._update(),this._requestRedraw(e)},_updateStyle:function(e){this._updateDashArray(e),this._requestRedraw(e)},_updateDashArray:function(e){if("string"===typeof e.options.dashArray){var t,n,r=e.options.dashArray.split(/[, ]+/),o=[];for(n=0;n<r.length;n++){if(t=Number(r[n]),isNaN(t))return;o.push(t)}e.options._dashArray=o}else e.options._dashArray=e.options.dashArray},_requestRedraw:function(e){this._map&&(this._extendRedrawBounds(e),this._redrawRequest=this._redrawRequest||C(this._redraw,this))},_extendRedrawBounds:function(e){if(e._pxBounds){var t=(e.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new B,this._redrawBounds.extend(e._pxBounds.min.subtract([t,t])),this._redrawBounds.extend(e._pxBounds.max.add([t,t]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var e=this._redrawBounds;if(e){var t=e.getSize();this._ctx.clearRect(e.min.x,e.min.y,t.x,t.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var e,t=this._redrawBounds;if(this._ctx.save(),t){var n=t.getSize();this._ctx.beginPath(),this._ctx.rect(t.min.x,t.min.y,n.x,n.y),this._ctx.clip()}this._drawing=!0;for(var r=this._drawFirst;r;r=r.next)e=r.layer,(!t||e._pxBounds&&e._pxBounds.intersects(t))&&e._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(e,t){if(this._drawing){var n,r,o,a,i=e._parts,s=i.length,l=this._ctx;if(s){for(l.beginPath(),n=0;n<s;n++){for(r=0,o=i[n].length;r<o;r++)a=i[n][r],l[r?"lineTo":"moveTo"](a.x,a.y);t&&l.closePath()}this._fillStroke(l,e)}}},_updateCircle:function(e){if(this._drawing&&!e._empty()){var t=e._point,n=this._ctx,r=Math.max(Math.round(e._radius),1),o=(Math.max(Math.round(e._radiusY),1)||r)/r;1!==o&&(n.save(),n.scale(1,o)),n.beginPath(),n.arc(t.x,t.y/o,r,0,2*Math.PI,!1),1!==o&&n.restore(),this._fillStroke(n,e)}},_fillStroke:function(e,t){var n=t.options;n.fill&&(e.globalAlpha=n.fillOpacity,e.fillStyle=n.fillColor||n.color,e.fill(n.fillRule||"evenodd")),n.stroke&&0!==n.weight&&(e.setLineDash&&e.setLineDash(t.options&&t.options._dashArray||[]),e.globalAlpha=n.opacity,e.lineWidth=n.weight,e.strokeStyle=n.color,e.lineCap=n.lineCap,e.lineJoin=n.lineJoin,e.stroke())},_onClick:function(e){for(var t,n,r=this._map.mouseEventToLayerPoint(e),o=this._drawFirst;o;o=o.next)(t=o.layer).options.interactive&&t._containsPoint(r)&&("click"!==e.type&&"preclick"!==e.type||!this._map._draggableMoved(t))&&(n=t);this._fireEvent(!!n&&[n],e)},_onMouseMove:function(e){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var t=this._map.mouseEventToLayerPoint(e);this._handleMouseHover(e,t)}},_handleMouseOut:function(e){var t=this._hoveredLayer;t&&(_t(this._container,"leaflet-interactive"),this._fireEvent([t],e,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(e,t){if(!this._mouseHoverThrottled){for(var n,r,a=this._drawFirst;a;a=a.next)(n=a.layer).options.interactive&&n._containsPoint(t)&&(r=n);r!==this._hoveredLayer&&(this._handleMouseOut(e),r&&(bt(this._container,"leaflet-interactive"),this._fireEvent([r],e,"mouseover"),this._hoveredLayer=r)),this._fireEvent(!!this._hoveredLayer&&[this._hoveredLayer],e),this._mouseHoverThrottled=!0,setTimeout(o(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(e,t,n){this._map._fireDOMEvent(t,n||t.type,e)},_bringToFront:function(e){var t=e._order;if(t){var n=t.next,r=t.prev;n&&(n.prev=r,r?r.next=n:n&&(this._drawFirst=n),t.prev=this._drawLast,this._drawLast.next=t,t.next=null,this._drawLast=t,this._requestRedraw(e))}},_bringToBack:function(e){var t=e._order;if(t){var n=t.next,r=t.prev;r&&(r.next=n,n?n.prev=r:r&&(this._drawLast=r),t.prev=null,t.next=this._drawFirst,this._drawFirst.prev=t,this._drawFirst=t,this._requestRedraw(e))}}});function jr(e){return Be.canvas?new Hr(e):null}var Kr=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(e){return document.createElement("<lvml:"+e+' class="lvml">')}}catch(e){}return function(e){return document.createElement("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),Zr={_initContainer:function(){this._container=pt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Wr.prototype._update.call(this),this.fire("update"))},_initPath:function(e){var t=e._container=Kr("shape");bt(t,"leaflet-vml-shape "+(this.options.className||"")),t.coordsize="1 1",e._path=Kr("path"),t.appendChild(e._path),this._updateStyle(e),this._layers[i(e)]=e},_addPath:function(e){var t=e._container;this._container.appendChild(t),e.options.interactive&&e.addInteractiveTarget(t)},_removePath:function(e){var t=e._container;ht(t),e.removeInteractiveTarget(t),delete this._layers[i(e)]},_updateStyle:function(e){var t=e._stroke,n=e._fill,r=e.options,o=e._container;o.stroked=!!r.stroke,o.filled=!!r.fill,r.stroke?(t||(t=e._stroke=Kr("stroke")),o.appendChild(t),t.weight=r.weight+"px",t.color=r.color,t.opacity=r.opacity,r.dashArray?t.dashStyle=v(r.dashArray)?r.dashArray.join(" "):r.dashArray.replace(/( *, *)/g," "):t.dashStyle="",t.endcap=r.lineCap.replace("butt","flat"),t.joinstyle=r.lineJoin):t&&(o.removeChild(t),e._stroke=null),r.fill?(n||(n=e._fill=Kr("fill")),o.appendChild(n),n.color=r.fillColor||r.color,n.opacity=r.fillOpacity):n&&(o.removeChild(n),e._fill=null)},_updateCircle:function(e){var t=e._point.round(),n=Math.round(e._radius),r=Math.round(e._radiusY||n);this._setPath(e,e._empty()?"M0 0":"AL "+t.x+","+t.y+" "+n+","+r+" 0,23592600")},_setPath:function(e,t){e._path.v=t},_bringToFront:function(e){gt(e._container)},_bringToBack:function(e){vt(e._container)}},qr=Be.vml?Kr:Y,Xr=Wr.extend({_initContainer:function(){this._container=qr("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=qr("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){ht(this._container),Ft(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!this._map._animatingZoom||!this._bounds){Wr.prototype._update.call(this);var e=this._bounds,t=e.getSize(),n=this._container;this._svgSize&&this._svgSize.equals(t)||(this._svgSize=t,n.setAttribute("width",t.x),n.setAttribute("height",t.y)),At(n,e.min),n.setAttribute("viewBox",[e.min.x,e.min.y,t.x,t.y].join(" ")),this.fire("update")}},_initPath:function(e){var t=e._path=qr("path");e.options.className&&bt(t,e.options.className),e.options.interactive&&bt(t,"leaflet-interactive"),this._updateStyle(e),this._layers[i(e)]=e},_addPath:function(e){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(e._path),e.addInteractiveTarget(e._path)},_removePath:function(e){ht(e._path),e.removeInteractiveTarget(e._path),delete this._layers[i(e)]},_updatePath:function(e){e._project(),e._update()},_updateStyle:function(e){var t=e._path,n=e.options;t&&(n.stroke?(t.setAttribute("stroke",n.color),t.setAttribute("stroke-opacity",n.opacity),t.setAttribute("stroke-width",n.weight),t.setAttribute("stroke-linecap",n.lineCap),t.setAttribute("stroke-linejoin",n.lineJoin),n.dashArray?t.setAttribute("stroke-dasharray",n.dashArray):t.removeAttribute("stroke-dasharray"),n.dashOffset?t.setAttribute("stroke-dashoffset",n.dashOffset):t.removeAttribute("stroke-dashoffset")):t.setAttribute("stroke","none"),n.fill?(t.setAttribute("fill",n.fillColor||n.color),t.setAttribute("fill-opacity",n.fillOpacity),t.setAttribute("fill-rule",n.fillRule||"evenodd")):t.setAttribute("fill","none"))},_updatePoly:function(e,t){this._setPath(e,Q(e._parts,t))},_updateCircle:function(e){var t=e._point,n=Math.max(Math.round(e._radius),1),r="a"+n+","+(Math.max(Math.round(e._radiusY),1)||n)+" 0 1,0 ",o=e._empty()?"M0 0":"M"+(t.x-n)+","+t.y+r+2*n+",0 "+r+2*-n+",0 ";this._setPath(e,o)},_setPath:function(e,t){e._path.setAttribute("d",t)},_bringToFront:function(e){gt(e._path)},_bringToBack:function(e){vt(e._path)}});function Yr(e){return Be.svg||Be.vml?new Xr(e):null}Be.vml&&Xr.include(Zr),nn.include({getRenderer:function(e){var t=e.options.renderer||this._getPaneRenderer(e.options.pane)||this.options.renderer||this._renderer;return t||(t=this._renderer=this._createRenderer()),this.hasLayer(t)||this.addLayer(t),t},_getPaneRenderer:function(e){if("overlayPane"===e||void 0===e)return!1;var t=this._paneRenderers[e];return void 0===t&&(t=this._createRenderer({pane:e}),this._paneRenderers[e]=t),t},_createRenderer:function(e){return this.options.preferCanvas&&jr(e)||Yr(e)}});var Qr=cr.extend({initialize:function(e,t){cr.prototype.initialize.call(this,this._boundsToLatLngs(e),t)},setBounds:function(e){return this.setLatLngs(this._boundsToLatLngs(e))},_boundsToLatLngs:function(e){return[(e=F(e)).getSouthWest(),e.getNorthWest(),e.getNorthEast(),e.getSouthEast()]}});function $r(e,t){return new Qr(e,t)}Xr.create=qr,Xr.pointsToPath=Q,fr.geometryToLayer=pr,fr.coordsToLatLng=mr,fr.coordsToLatLngs=gr,fr.latLngToCoords=vr,fr.latLngsToCoords=yr,fr.getFeature=br,fr.asFeature=_r,nn.mergeOptions({boxZoom:!0});var Jr=gn.extend({initialize:function(e){this._map=e,this._container=e._container,this._pane=e._panes.overlayPane,this._resetStateTimeout=0,e.on("unload",this._destroy,this)},addHooks:function(){Nt(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Ft(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){ht(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){0!==this._resetStateTimeout&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(e){if(!e.shiftKey||1!==e.which&&1!==e.button)return!1;this._clearDeferredResetState(),this._resetState(),rt(),Ot(),this._startPoint=this._map.mouseEventToContainerPoint(e),Nt(document,{contextmenu:qt,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(e){this._moved||(this._moved=!0,this._box=pt("div","leaflet-zoom-box",this._container),bt(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(e);var t=new B(this._point,this._startPoint),n=t.getSize();At(this._box,t.min),this._box.style.width=n.x+"px",this._box.style.height=n.y+"px"},_finish:function(){this._moved&&(ht(this._box),_t(this._container,"leaflet-crosshair")),ot(),Mt(),Ft(document,{contextmenu:qt,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(e){if((1===e.which||1===e.button)&&(this._finish(),this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(o(this._resetState,this),0);var t=new V(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(t).fire("boxzoomend",{boxZoomBounds:t})}},_onKeyDown:function(e){27===e.keyCode&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});nn.addInitHook("addHandler","boxZoom",Jr),nn.mergeOptions({doubleClickZoom:!0});var eo=gn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(e){var t=this._map,n=t.getZoom(),r=t.options.zoomDelta,o=e.originalEvent.shiftKey?n-r:n+r;"center"===t.options.doubleClickZoom?t.setZoom(o):t.setZoomAround(e.containerPoint,o)}});nn.addInitHook("addHandler","doubleClickZoom",eo),nn.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var to=gn.extend({addHooks:function(){if(!this._draggable){var e=this._map;this._draggable=new bn(e._mapPane,e._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),e.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),e.on("zoomend",this._onZoomEnd,this),e.whenReady(this._onZoomEnd,this))}bt(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){_t(this._map._container,"leaflet-grab"),_t(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var e=this._map;if(e._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var t=F(this._map.options.maxBounds);this._offsetLimit=N(this._map.latLngToContainerPoint(t.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(t.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;e.fire("movestart").fire("dragstart"),e.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(e){if(this._map.options.inertia){var t=this._lastTime=+new Date,n=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(n),this._times.push(t),this._prunePositions(t)}this._map.fire("move",e).fire("drag",e)},_prunePositions:function(e){for(;this._positions.length>1&&e-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var e=this._map.getSize().divideBy(2),t=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=t.subtract(e).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(e,t){return e-(e-t)*this._viscosity},_onPreDragLimit:function(){if(this._viscosity&&this._offsetLimit){var e=this._draggable._newPos.subtract(this._draggable._startPos),t=this._offsetLimit;e.x<t.min.x&&(e.x=this._viscousLimit(e.x,t.min.x)),e.y<t.min.y&&(e.y=this._viscousLimit(e.y,t.min.y)),e.x>t.max.x&&(e.x=this._viscousLimit(e.x,t.max.x)),e.y>t.max.y&&(e.y=this._viscousLimit(e.y,t.max.y)),this._draggable._newPos=this._draggable._startPos.add(e)}},_onPreDragWrap:function(){var e=this._worldWidth,t=Math.round(e/2),n=this._initialWorldOffset,r=this._draggable._newPos.x,o=(r-t+n)%e+t-n,a=(r+t+n)%e-t-n,i=Math.abs(o+n)<Math.abs(a+n)?o:a;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=i},_onDragEnd:function(e){var t=this._map,n=t.options,r=!n.inertia||e.noInertia||this._times.length<2;if(t.fire("dragend",e),r)t.fire("moveend");else{this._prunePositions(+new Date);var o=this._lastPos.subtract(this._positions[0]),a=(this._lastTime-this._times[0])/1e3,i=n.easeLinearity,s=o.multiplyBy(i/a),l=s.distanceTo([0,0]),u=Math.min(n.inertiaMaxSpeed,l),c=s.multiplyBy(u/l),d=u/(n.inertiaDeceleration*i),f=c.multiplyBy(-d/2).round();f.x||f.y?(f=t._limitOffset(f,t.options.maxBounds),C(function(){t.panBy(f,{duration:d,easeLinearity:i,noMoveStart:!0,animate:!0})})):t.fire("moveend")}}});nn.addInitHook("addHandler","dragging",to),nn.mergeOptions({keyboard:!0,keyboardPanDelta:80});var no=gn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(e){this._map=e,this._setPanDelta(e.options.keyboardPanDelta),this._setZoomDelta(e.options.zoomDelta)},addHooks:function(){var e=this._map._container;e.tabIndex<=0&&(e.tabIndex="0"),Nt(e,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Ft(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var e=document.body,t=document.documentElement,n=e.scrollTop||t.scrollTop,r=e.scrollLeft||t.scrollLeft;this._map._container.focus(),window.scrollTo(r,n)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(e){var t,n,r=this._panKeys={},o=this.keyCodes;for(t=0,n=o.left.length;t<n;t++)r[o.left[t]]=[-1*e,0];for(t=0,n=o.right.length;t<n;t++)r[o.right[t]]=[e,0];for(t=0,n=o.down.length;t<n;t++)r[o.down[t]]=[0,e];for(t=0,n=o.up.length;t<n;t++)r[o.up[t]]=[0,-1*e]},_setZoomDelta:function(e){var t,n,r=this._zoomKeys={},o=this.keyCodes;for(t=0,n=o.zoomIn.length;t<n;t++)r[o.zoomIn[t]]=e;for(t=0,n=o.zoomOut.length;t<n;t++)r[o.zoomOut[t]]=-e},_addHooks:function(){Nt(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Ft(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(e){if(!(e.altKey||e.ctrlKey||e.metaKey)){var t,n=e.keyCode,r=this._map;if(n in this._panKeys){if(!r._panAnim||!r._panAnim._inProgress)if(t=this._panKeys[n],e.shiftKey&&(t=D(t).multiplyBy(3)),r.options.maxBounds&&(t=r._limitOffset(D(t),r.options.maxBounds)),r.options.worldCopyJump){var o=r.wrapLatLng(r.unproject(r.project(r.getCenter()).add(t)));r.panTo(o)}else r.panBy(t)}else if(n in this._zoomKeys)r.setZoom(r.getZoom()+(e.shiftKey?3:1)*this._zoomKeys[n]);else{if(27!==n||!r._popup||!r._popup.options.closeOnEscapeKey)return;r.closePopup()}qt(e)}}});nn.addInitHook("addHandler","keyboard",no),nn.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var ro=gn.extend({addHooks:function(){Nt(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Ft(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(e){var t=$t(e),n=this._map.options.wheelDebounceTime;this._delta+=t,this._lastMousePos=this._map.mouseEventToContainerPoint(e),this._startTime||(this._startTime=+new Date);var r=Math.max(n-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(o(this._performZoom,this),r),qt(e)},_performZoom:function(){var e=this._map,t=e.getZoom(),n=this._map.options.zoomSnap||0;e._stop();var r=this._delta/(4*this._map.options.wheelPxPerZoomLevel),o=4*Math.log(2/(1+Math.exp(-Math.abs(r))))/Math.LN2,a=n?Math.ceil(o/n)*n:o,i=e._limitZoom(t+(this._delta>0?a:-a))-t;this._delta=0,this._startTime=null,i&&("center"===e.options.scrollWheelZoom?e.setZoom(t+i):e.setZoomAround(this._lastMousePos,t+i))}});nn.addInitHook("addHandler","scrollWheelZoom",ro);var oo=600;nn.mergeOptions({tapHold:Be.touchNative&&Be.safari&&Be.mobile,tapTolerance:15});var ao=gn.extend({addHooks:function(){Nt(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Ft(this._map._container,"touchstart",this._onDown,this)},_onDown:function(e){if(clearTimeout(this._holdTimeout),1===e.touches.length){var t=e.touches[0];this._startPos=this._newPos=new R(t.clientX,t.clientY),this._holdTimeout=setTimeout(o(function(){this._cancel(),this._isTapValid()&&(Nt(document,"touchend",Zt),Nt(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",t))},this),oo),Nt(document,"touchend touchcancel contextmenu",this._cancel,this),Nt(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function e(){Ft(document,"touchend",Zt),Ft(document,"touchend touchcancel",e)},_cancel:function(){clearTimeout(this._holdTimeout),Ft(document,"touchend touchcancel contextmenu",this._cancel,this),Ft(document,"touchmove",this._onMove,this)},_onMove:function(e){var t=e.touches[0];this._newPos=new R(t.clientX,t.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(e,t){var n=new MouseEvent(e,{bubbles:!0,cancelable:!0,view:window,screenX:t.screenX,screenY:t.screenY,clientX:t.clientX,clientY:t.clientY});n._simulated=!0,t.target.dispatchEvent(n)}});nn.addInitHook("addHandler","tapHold",ao),nn.mergeOptions({touchZoom:Be.touch,bounceAtZoomLimits:!0});var io=gn.extend({addHooks:function(){bt(this._map._container,"leaflet-touch-zoom"),Nt(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){_t(this._map._container,"leaflet-touch-zoom"),Ft(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(e){var t=this._map;if(e.touches&&2===e.touches.length&&!t._animatingZoom&&!this._zooming){var n=t.mouseEventToContainerPoint(e.touches[0]),r=t.mouseEventToContainerPoint(e.touches[1]);this._centerPoint=t.getSize()._divideBy(2),this._startLatLng=t.containerPointToLatLng(this._centerPoint),"center"!==t.options.touchZoom&&(this._pinchStartLatLng=t.containerPointToLatLng(n.add(r)._divideBy(2))),this._startDist=n.distanceTo(r),this._startZoom=t.getZoom(),this._moved=!1,this._zooming=!0,t._stop(),Nt(document,"touchmove",this._onTouchMove,this),Nt(document,"touchend touchcancel",this._onTouchEnd,this),Zt(e)}},_onTouchMove:function(e){if(e.touches&&2===e.touches.length&&this._zooming){var t=this._map,n=t.mouseEventToContainerPoint(e.touches[0]),r=t.mouseEventToContainerPoint(e.touches[1]),a=n.distanceTo(r)/this._startDist;if(this._zoom=t.getScaleZoom(a,this._startZoom),!t.options.bounceAtZoomLimits&&(this._zoom<t.getMinZoom()&&a<1||this._zoom>t.getMaxZoom()&&a>1)&&(this._zoom=t._limitZoom(this._zoom)),"center"===t.options.touchZoom){if(this._center=this._startLatLng,1===a)return}else{var i=n._add(r)._divideBy(2)._subtract(this._centerPoint);if(1===a&&0===i.x&&0===i.y)return;this._center=t.unproject(t.project(this._pinchStartLatLng,this._zoom).subtract(i),this._zoom)}this._moved||(t._moveStart(!0,!1),this._moved=!0),P(this._animRequest);var s=o(t._move,t,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=C(s,this,!0),Zt(e)}},_onTouchEnd:function(){this._moved&&this._zooming?(this._zooming=!1,P(this._animRequest),Ft(document,"touchmove",this._onTouchMove,this),Ft(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))):this._zooming=!1}});nn.addInitHook("addHandler","touchZoom",io),nn.BoxZoom=Jr,nn.DoubleClickZoom=eo,nn.Drag=to,nn.Keyboard=no,nn.ScrollWheelZoom=ro,nn.TapHold=ao,nn.TouchZoom=io,e.Bounds=B,e.Browser=Be,e.CRS=G,e.Canvas=Hr,e.Circle=ir,e.CircleMarker=or,e.Class=E,e.Control=on,e.DivIcon=Dr,e.DivOverlay=Or,e.DomEvent=en,e.DomUtil=Bt,e.Draggable=bn,e.Evented=M,e.FeatureGroup=Xn,e.GeoJSON=fr,e.GridLayer=Nr,e.Handler=gn,e.Icon=Qn,e.ImageOverlay=wr,e.LatLng=U,e.LatLngBounds=V,e.Layer=Kn,e.LayerGroup=Zn,e.LineUtil=Fn,e.Map=nn,e.Marker=tr,e.Mixin=vn,e.Path=rr,e.Point=R,e.PolyUtil=wn,e.Polygon=cr,e.Polyline=lr,e.Popup=Mr,e.PosAnimation=tn,e.Projection=Gn,e.Rectangle=Qr,e.Renderer=Wr,e.SVG=Xr,e.SVGOverlay=Er,e.TileLayer=Fr,e.Tooltip=Lr,e.Transformation=K,e.Util=A,e.VideoOverlay=Pr,e.bind=o,e.bounds=N,e.canvas=jr,e.circle=sr,e.circleMarker=ar,e.control=an,e.divIcon=Br,e.extend=n,e.featureGroup=Yn,e.geoJSON=xr,e.geoJson=Sr,e.gridLayer=Vr,e.icon=$n,e.imageOverlay=Cr,e.latLng=z,e.latLngBounds=F,e.layerGroup=qn,e.map=rn,e.marker=nr,e.point=D,e.polygon=dr,e.polyline=ur,e.popup=Rr,e.rectangle=$r,e.setOptions=p,e.stamp=i,e.svg=Yr,e.svgOverlay=Ir,e.tileLayer=Ur,e.tooltip=kr,e.transformation=Z,e.version=t,e.videoOverlay=Ar;var so=window.L;e.noConflict=function(){return window.L=so,this},window.L=e}(t)},234:e=>{"use strict";var t=Object.prototype.toString;e.exports=function(e){var n=t.call(e),r="[object Arguments]"===n;return r||(r="[object Array]"!==n&&null!==e&&"object"===typeof e&&"number"===typeof e.length&&e.length>=0&&"[object Function]"===t.call(e.callee)),r}},258:e=>{"use strict";e.exports=Object.getOwnPropertyDescriptor},262:function(e,t,n){var r;!function(e,o){function a(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,r=t.d,o=t.a;return e=e<<25^e>>>7^n,n=n-r|0,r=r<<24^r>>>8^o,o=o-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-r|0,t.d=r<<16^n>>>16^o,t.a=o-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var r=0;r<n.length+20;r++)t.b^=0|n.charCodeAt(r),t.next()}function i(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function s(e,t){var n=new a(e),r=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=n.next,o.quick=o,r&&("object"==typeof r&&i(r,n),o.state=function(){return i(n,{})}),o}o&&o.exports?o.exports=s:n.amdD&&n.amdO?void 0===(r=function(){return s}.call(t,n,t,o))||(o.exports=r):this.tychei=s}(0,e=n.nmd(e),n.amdD)},275:(e,t,n)=>{"use strict";var r=n(779),o=n(795),a=n(784),i=n(914),s=a(),l=function(){return s};r(l,{getPolyfill:a,implementation:o,shim:i}),e.exports=l},288:(e,t)=>{"use strict";var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),p=Symbol.for("react.activity"),h=Symbol.iterator;var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,v={};function y(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||m}function b(){}function _(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||m}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},b.prototype=y.prototype;var T=_.prototype=new b;T.constructor=_,g(T,y.prototype),T.isPureReactComponent=!0;var x=Array.isArray;function S(){}var w={H:null,A:null,T:null,S:null},C=Object.prototype.hasOwnProperty;function P(e,t,r){var o=r.ref;return{$$typeof:n,type:e,key:t,ref:void 0!==o?o:null,props:r}}function A(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var E=/\/+/g;function I(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function O(e,t,o,a,i){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var l,u,c=!1;if(null===e)c=!0;else switch(s){case"bigint":case"string":case"number":c=!0;break;case"object":switch(e.$$typeof){case n:case r:c=!0;break;case f:return O((c=e._init)(e._payload),t,o,a,i)}}if(c)return i=i(e),c=""===a?"."+I(e,0):a,x(i)?(o="",null!=c&&(o=c.replace(E,"$&/")+"/"),O(i,t,o,"",function(e){return e})):null!=i&&(A(i)&&(l=i,u=o+(null==i.key||e&&e.key===i.key?"":(""+i.key).replace(E,"$&/")+"/")+c,i=P(l.type,u,l.props)),t.push(i)),1;c=0;var d,p=""===a?".":a+":";if(x(e))for(var m=0;m<e.length;m++)c+=O(a=e[m],t,o,s=p+I(a,m),i);else if("function"===typeof(m=null===(d=e)||"object"!==typeof d?null:"function"===typeof(d=h&&d[h]||d["@@iterator"])?d:null))for(e=m.call(e),m=0;!(a=e.next()).done;)c+=O(a=a.value,t,o,s=p+I(a,m++),i);else if("object"===s){if("function"===typeof e.then)return O(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"===typeof e.status?e.then(S,S):(e.status="pending",e.then(function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)},function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(e),t,o,a,i);throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return c}function M(e,t,n){if(null==e)return e;var r=[],o=0;return O(e,r,"","",function(e){return t.call(n,e,o++)}),r}function R(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var L="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)},k={map:M,forEach:function(e,t,n){M(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return M(e,function(){t++}),t},toArray:function(e){return M(e,function(e){return e})||[]},only:function(e){if(!A(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};t.Activity=p,t.Children=k,t.Component=y,t.Fragment=o,t.Profiler=i,t.PureComponent=_,t.StrictMode=a,t.Suspense=c,t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=w,t.__COMPILER_RUNTIME={__proto__:null,c:function(e){return w.H.useMemoCache(e)}},t.cache=function(e){return function(){return e.apply(null,arguments)}},t.cacheSignal=function(){return null},t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("The argument must be a React element, but you passed "+e+".");var r=g({},e.props),o=e.key;if(null!=t)for(a in void 0!==t.key&&(o=""+t.key),t)!C.call(t,a)||"key"===a||"__self"===a||"__source"===a||"ref"===a&&void 0===t.ref||(r[a]=t[a]);var a=arguments.length-2;if(1===a)r.children=n;else if(1<a){for(var i=Array(a),s=0;s<a;s++)i[s]=arguments[s+2];r.children=i}return P(e.type,o,r)},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:s,_context:e},e},t.createElement=function(e,t,n){var r,o={},a=null;if(null!=t)for(r in void 0!==t.key&&(a=""+t.key),t)C.call(t,r)&&"key"!==r&&"__self"!==r&&"__source"!==r&&(o[r]=t[r]);var i=arguments.length-2;if(1===i)o.children=n;else if(1<i){for(var s=Array(i),l=0;l<i;l++)s[l]=arguments[l+2];o.children=s}if(e&&e.defaultProps)for(r in i=e.defaultProps)void 0===o[r]&&(o[r]=i[r]);return P(e,a,o)},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=A,t.lazy=function(e){return{$$typeof:f,_payload:{_status:-1,_result:e},_init:R}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=w.T,n={};w.T=n;try{var r=e(),o=w.S;null!==o&&o(n,r),"object"===typeof r&&null!==r&&"function"===typeof r.then&&r.then(S,L)}catch(a){L(a)}finally{null!==t&&null!==n.types&&(t.types=n.types),w.T=t}},t.unstable_useCacheRefresh=function(){return w.H.useCacheRefresh()},t.use=function(e){return w.H.use(e)},t.useActionState=function(e,t,n){return w.H.useActionState(e,t,n)},t.useCallback=function(e,t){return w.H.useCallback(e,t)},t.useContext=function(e){return w.H.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e,t){return w.H.useDeferredValue(e,t)},t.useEffect=function(e,t){return w.H.useEffect(e,t)},t.useEffectEvent=function(e){return w.H.useEffectEvent(e)},t.useId=function(){return w.H.useId()},t.useImperativeHandle=function(e,t,n){return w.H.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return w.H.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return w.H.useLayoutEffect(e,t)},t.useMemo=function(e,t){return w.H.useMemo(e,t)},t.useOptimistic=function(e,t){return w.H.useOptimistic(e,t)},t.useReducer=function(e,t,n){return w.H.useReducer(e,t,n)},t.useRef=function(e){return w.H.useRef(e)},t.useState=function(e){return w.H.useState(e)},t.useSyncExternalStore=function(e,t,n){return w.H.useSyncExternalStore(e,t,n)},t.useTransition=function(){return w.H.useTransition()},t.version="19.2.0"},334:(e,t,n)=>{var r=n(359),o=n(66),a=n(16),i=n(538),s=n(907),l=n(262),u=n(430);u.alea=r,u.xor128=o,u.xorwow=a,u.xorshift7=i,u.xor4096=s,u.tychei=l,e.exports=u},359:function(e,t,n){var r;!function(e,o){function a(e){var t=this,n=function(){var e=4022871197,t=function(t){t=String(t);for(var n=0;n<t.length;n++){var r=.02519603282416938*(e+=t.charCodeAt(n));r-=e=r>>>0,e=(r*=e)>>>0,e+=4294967296*(r-=e)}return 2.3283064365386963e-10*(e>>>0)};return t}();t.next=function(){var e=2091639*t.s0+2.3283064365386963e-10*t.c;return t.s0=t.s1,t.s1=t.s2,t.s2=e-(t.c=0|e)},t.c=1,t.s0=n(" "),t.s1=n(" "),t.s2=n(" "),t.s0-=n(e),t.s0<0&&(t.s0+=1),t.s1-=n(e),t.s1<0&&(t.s1+=1),t.s2-=n(e),t.s2<0&&(t.s2+=1),n=null}function i(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function s(e,t){var n=new a(e),r=t&&t.state,o=n.next;return o.int32=function(){return 4294967296*n.next()|0},o.double=function(){return o()+11102230246251565e-32*(2097152*o()|0)},o.quick=o,r&&("object"==typeof r&&i(r,n),o.state=function(){return i(n,{})}),o}o&&o.exports?o.exports=s:n.amdD&&n.amdO?void 0===(r=function(){return s}.call(t,n,t,o))||(o.exports=r):this.alea=s}(0,e=n.nmd(e),n.amdD)},391:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4)},430:function(e,t,n){var r;!function(o,a,i){var s,l=256,u=i.pow(l,6),c=i.pow(2,52),d=2*c,f=255;function p(e,t,n){var r=[],f=v(g((t=1==t?{entropy:!0}:t||{}).entropy?[e,y(a)]:null==e?function(){try{var e;return s&&(e=s.randomBytes)?e=e(l):(e=new Uint8Array(l),(o.crypto||o.msCrypto).getRandomValues(e)),y(e)}catch(r){var t=o.navigator,n=t&&t.plugins;return[+new Date,o,n,o.screen,y(a)]}}():e,3),r),p=new h(r),b=function(){for(var e=p.g(6),t=u,n=0;e<c;)e=(e+n)*l,t*=l,n=p.g(1);for(;e>=d;)e/=2,t/=2,n>>>=1;return(e+n)/t};return b.int32=function(){return 0|p.g(4)},b.quick=function(){return p.g(4)/4294967296},b.double=b,v(y(p.S),a),(t.pass||n||function(e,t,n,r){return r&&(r.S&&m(r,p),e.state=function(){return m(p,{})}),n?(i.random=e,t):e})(b,f,"global"in t?t.global:this==i,t.state)}function h(e){var t,n=e.length,r=this,o=0,a=r.i=r.j=0,i=r.S=[];for(n||(e=[n++]);o<l;)i[o]=o++;for(o=0;o<l;o++)i[o]=i[a=f&a+e[o%n]+(t=i[o])],i[a]=t;(r.g=function(e){for(var t,n=0,o=r.i,a=r.j,i=r.S;e--;)t=i[o=f&o+1],n=n*l+i[f&(i[o]=i[a=f&a+t])+(i[a]=t)];return r.i=o,r.j=a,n})(l)}function m(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function g(e,t){var n,r=[],o=typeof e;if(t&&"object"==o)for(n in e)try{r.push(g(e[n],t-1))}catch(a){}return r.length?r:"string"==o?e:e+"\0"}function v(e,t){for(var n,r=e+"",o=0;o<r.length;)t[f&o]=f&(n^=19*t[f&o])+r.charCodeAt(o++);return y(t)}function y(e){return String.fromCharCode.apply(0,e)}if(v(i.random(),a),e.exports){e.exports=p;try{s=n(996)}catch(b){}}else void 0===(r=function(){return p}.call(t,n,t,e))||(e.exports=r)}("undefined"!==typeof self?self:this,[],Math)},538:function(e,t,n){var r;!function(e,o){function a(e){var t=this;t.next=function(){var e,n,r=t.x,o=t.i;return e=r[o],n=(e^=e>>>7)^e<<24,n^=(e=r[o+1&7])^e>>>10,n^=(e=r[o+3&7])^e>>>3,n^=(e=r[o+4&7])^e<<7,e=r[o+7&7],n^=(e^=e<<13)^e<<9,r[o]=n,t.i=o+1&7,n},function(e,t){var n,r=[];if(t===(0|t))r[0]=t;else for(t=""+t,n=0;n<t.length;++n)r[7&n]=r[7&n]<<15^t.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],e.x=r,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function i(e,t){return t.x=e.x.slice(),t.i=e.i,t}function s(e,t){null==e&&(e=+new Date);var n=new a(e),r=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=n.next,o.quick=o,r&&(r.x&&i(r,n),o.state=function(){return i(n,{})}),o}o&&o.exports?o.exports=s:n.amdD&&n.amdO?void 0===(r=function(){return s}.call(t,n,t,o))||(o.exports=r):this.xorshift7=s}(0,e=n.nmd(e),n.amdD)},557:e=>{"use strict";e.exports=SyntaxError},558:(e,t,n)=>{"use strict";var r=n(258);if(r)try{r([],"length")}catch(o){r=null}e.exports=r},579:(e,t,n)=>{"use strict";e.exports=n(799)},672:(e,t,n)=>{"use strict";var r=n(43);function o(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(){}var i={d:{f:a,r:function(){throw Error(o(522))},D:a,C:a,L:a,m:a,X:a,S:a,M:a},p:0,findDOMNode:null},s=Symbol.for("react.portal");var l=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(e,t){return"font"===e?"":"string"===typeof t?"use-credentials"===t?t:"":void 0}t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)throw Error(o(299));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:s,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.flushSync=function(e){var t=l.T,n=i.p;try{if(l.T=null,i.p=2,e)return e()}finally{l.T=t,i.p=n,i.d.f()}},t.preconnect=function(e,t){"string"===typeof e&&(t?t="string"===typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:t=null,i.d.C(e,t))},t.prefetchDNS=function(e){"string"===typeof e&&i.d.D(e)},t.preinit=function(e,t){if("string"===typeof e&&t&&"string"===typeof t.as){var n=t.as,r=u(n,t.crossOrigin),o="string"===typeof t.integrity?t.integrity:void 0,a="string"===typeof t.fetchPriority?t.fetchPriority:void 0;"style"===n?i.d.S(e,"string"===typeof t.precedence?t.precedence:void 0,{crossOrigin:r,integrity:o,fetchPriority:a}):"script"===n&&i.d.X(e,{crossOrigin:r,integrity:o,fetchPriority:a,nonce:"string"===typeof t.nonce?t.nonce:void 0})}},t.preinitModule=function(e,t){if("string"===typeof e)if("object"===typeof t&&null!==t){if(null==t.as||"script"===t.as){var n=u(t.as,t.crossOrigin);i.d.M(e,{crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0})}}else null==t&&i.d.M(e)},t.preload=function(e,t){if("string"===typeof e&&"object"===typeof t&&null!==t&&"string"===typeof t.as){var n=t.as,r=u(n,t.crossOrigin);i.d.L(e,n,{crossOrigin:r,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0,type:"string"===typeof t.type?t.type:void 0,fetchPriority:"string"===typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"===typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"===typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"===typeof t.imageSizes?t.imageSizes:void 0,media:"string"===typeof t.media?t.media:void 0})}},t.preloadModule=function(e,t){if("string"===typeof e)if(t){var n=u(t.as,t.crossOrigin);i.d.m(e,{as:"string"===typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0})}else i.d.m(e)},t.requestFormReset=function(e){i.d.r(e)},t.unstable_batchedUpdates=function(e,t){return e(t)},t.useFormState=function(e,t,n){return l.H.useFormState(e,t,n)},t.useFormStatus=function(){return l.H.useHostTransitionStatus()},t.version="19.2.0"},678:(e,t,n)=>{"use strict";var r=Array.prototype.slice,o=n(234),a=Object.keys,i=a?function(e){return a(e)}:n(38),s=Object.keys;i.shim=function(){if(Object.keys){var e=function(){var e=Object.keys(arguments);return e&&e.length===arguments.length}(1,2);e||(Object.keys=function(e){return o(e)?s(r.call(e)):s(e)})}else Object.keys=i;return Object.keys||i},e.exports=i},779:(e,t,n)=>{"use strict";var r=n(678),o="function"===typeof Symbol&&"symbol"===typeof Symbol("foo"),a=Object.prototype.toString,i=Array.prototype.concat,s=n(992),l=n(101)(),u=function(e,t,n,r){if(t in e)if(!0===r){if(e[t]===n)return}else if("function"!==typeof(o=r)||"[object Function]"!==a.call(o)||!r())return;var o;l?s(e,t,n,!0):s(e,t,n)},c=function(e,t){var n=arguments.length>2?arguments[2]:{},a=r(t);o&&(a=i.call(a,Object.getOwnPropertySymbols(t)));for(var s=0;s<a.length;s+=1)u(e,a[s],t[a[s]],n[a[s]])};c.supportsDescriptors=!!l,e.exports=c},784:(e,t,n)=>{"use strict";var r=n(795);e.exports=function(){return"object"===typeof n.g&&n.g&&n.g.Math===Math&&n.g.Array===Array?n.g:r}},795:e=>{"use strict";"undefined"!==typeof self?e.exports=self:"undefined"!==typeof window?e.exports=window:e.exports=Function("return this")()},799:(e,t)=>{"use strict";var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function o(e,t,r){var o=null;if(void 0!==r&&(o=""+r),void 0!==t.key&&(o=""+t.key),"key"in t)for(var a in r={},t)"key"!==a&&(r[a]=t[a]);else r=t;return t=r.ref,{$$typeof:n,type:e,key:o,ref:void 0!==t?t:null,props:r}}t.Fragment=r,t.jsx=o,t.jsxs=o},853:(e,t,n)=>{"use strict";e.exports=n(896)},896:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,o=e[r];if(!(0<a(o,t)))break e;e[r]=t,e[n]=o,n=r}}function r(e){return 0===e.length?null:e[0]}function o(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,o=e.length,i=o>>>1;r<i;){var s=2*(r+1)-1,l=e[s],u=s+1,c=e[u];if(0>a(l,n))u<o&&0>a(c,l)?(e[r]=c,e[u]=n,r=u):(e[r]=l,e[s]=n,r=s);else{if(!(u<o&&0>a(c,n)))break e;e[r]=c,e[u]=n,r=u}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(t.unstable_now=void 0,"object"===typeof performance&&"function"===typeof performance.now){var i=performance;t.unstable_now=function(){return i.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var u=[],c=[],d=1,f=null,p=3,h=!1,m=!1,g=!1,v=!1,y="function"===typeof setTimeout?setTimeout:null,b="function"===typeof clearTimeout?clearTimeout:null,_="undefined"!==typeof setImmediate?setImmediate:null;function T(e){for(var t=r(c);null!==t;){if(null===t.callback)o(c);else{if(!(t.startTime<=e))break;o(c),t.sortIndex=t.expirationTime,n(u,t)}t=r(c)}}function x(e){if(g=!1,T(e),!m)if(null!==r(u))m=!0,w||(w=!0,S());else{var t=r(c);null!==t&&R(x,t.startTime-e)}}var S,w=!1,C=-1,P=5,A=-1;function E(){return!!v||!(t.unstable_now()-A<P)}function I(){if(v=!1,w){var e=t.unstable_now();A=e;var n=!0;try{e:{m=!1,g&&(g=!1,b(C),C=-1),h=!0;var a=p;try{t:{for(T(e),f=r(u);null!==f&&!(f.expirationTime>e&&E());){var i=f.callback;if("function"===typeof i){f.callback=null,p=f.priorityLevel;var s=i(f.expirationTime<=e);if(e=t.unstable_now(),"function"===typeof s){f.callback=s,T(e),n=!0;break t}f===r(u)&&o(u),T(e)}else o(u);f=r(u)}if(null!==f)n=!0;else{var l=r(c);null!==l&&R(x,l.startTime-e),n=!1}}break e}finally{f=null,p=a,h=!1}n=void 0}}finally{n?S():w=!1}}}if("function"===typeof _)S=function(){_(I)};else if("undefined"!==typeof MessageChannel){var O=new MessageChannel,M=O.port2;O.port1.onmessage=I,S=function(){M.postMessage(null)}}else S=function(){y(I,0)};function R(e,n){C=y(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_requestPaint=function(){v=!0},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,o,a){var i=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?i+a:i:a=i,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:d++,callback:o,priorityLevel:e,startTime:a,expirationTime:s=a+s,sortIndex:-1},a>i?(e.sortIndex=a,n(c,e),null===r(u)&&e===r(c)&&(g?(b(C),C=-1):g=!0,R(x,a-i))):(e.sortIndex=s,n(u,e),m||h||(m=!0,w||(w=!0,S()))),e},t.unstable_shouldYield=E,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},902:e=>{"use strict";e.exports=TypeError},907:function(e,t,n){var r;!function(e,o){function a(e){var t=this;t.next=function(){var e,n,r=t.w,o=t.X,a=t.i;return t.w=r=r+1640531527|0,n=o[a+34&127],e=o[a=a+1&127],n^=n<<13,e^=e<<17,n^=n>>>15,e^=e>>>12,n=o[a]=n^e,t.i=a,n+(r^r>>>16)|0},function(e,t){var n,r,o,a,i,s=[],l=128;for(t===(0|t)?(r=t,t=null):(t+="\0",r=0,l=Math.max(l,t.length)),o=0,a=-32;a<l;++a)t&&(r^=t.charCodeAt((a+32)%t.length)),0===a&&(i=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,a>=0&&(i=i+1640531527|0,o=0==(n=s[127&a]^=r+i)?o+1:0);for(o>=128&&(s[127&(t&&t.length||0)]=-1),o=127,a=512;a>0;--a)r=s[o+34&127],n=s[o=o+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,s[o]=r^n;e.w=i,e.X=s,e.i=o}(t,e)}function i(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function s(e,t){null==e&&(e=+new Date);var n=new a(e),r=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=n.next,o.quick=o,r&&(r.X&&i(r,n),o.state=function(){return i(n,{})}),o}o&&o.exports?o.exports=s:n.amdD&&n.amdO?void 0===(r=function(){return s}.call(t,n,t,o))||(o.exports=r):this.xor4096=s}(0,e=n.nmd(e),n.amdD)},908:e=>{e.exports=function(e){"use strict";var t=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function n(e,t){var n=e[0],r=e[1],o=e[2],a=e[3];r=((r+=((o=((o+=((a=((a+=((n=((n+=(r&o|~r&a)+t[0]-680876936|0)<<7|n>>>25)+r|0)&r|~n&o)+t[1]-389564586|0)<<12|a>>>20)+n|0)&n|~a&r)+t[2]+606105819|0)<<17|o>>>15)+a|0)&a|~o&n)+t[3]-1044525330|0)<<22|r>>>10)+o|0,r=((r+=((o=((o+=((a=((a+=((n=((n+=(r&o|~r&a)+t[4]-176418897|0)<<7|n>>>25)+r|0)&r|~n&o)+t[5]+1200080426|0)<<12|a>>>20)+n|0)&n|~a&r)+t[6]-1473231341|0)<<17|o>>>15)+a|0)&a|~o&n)+t[7]-45705983|0)<<22|r>>>10)+o|0,r=((r+=((o=((o+=((a=((a+=((n=((n+=(r&o|~r&a)+t[8]+1770035416|0)<<7|n>>>25)+r|0)&r|~n&o)+t[9]-1958414417|0)<<12|a>>>20)+n|0)&n|~a&r)+t[10]-42063|0)<<17|o>>>15)+a|0)&a|~o&n)+t[11]-1990404162|0)<<22|r>>>10)+o|0,r=((r+=((o=((o+=((a=((a+=((n=((n+=(r&o|~r&a)+t[12]+1804603682|0)<<7|n>>>25)+r|0)&r|~n&o)+t[13]-40341101|0)<<12|a>>>20)+n|0)&n|~a&r)+t[14]-1502002290|0)<<17|o>>>15)+a|0)&a|~o&n)+t[15]+1236535329|0)<<22|r>>>10)+o|0,r=((r+=((o=((o+=((a=((a+=((n=((n+=(r&a|o&~a)+t[1]-165796510|0)<<5|n>>>27)+r|0)&o|r&~o)+t[6]-1069501632|0)<<9|a>>>23)+n|0)&r|n&~r)+t[11]+643717713|0)<<14|o>>>18)+a|0)&n|a&~n)+t[0]-373897302|0)<<20|r>>>12)+o|0,r=((r+=((o=((o+=((a=((a+=((n=((n+=(r&a|o&~a)+t[5]-701558691|0)<<5|n>>>27)+r|0)&o|r&~o)+t[10]+38016083|0)<<9|a>>>23)+n|0)&r|n&~r)+t[15]-660478335|0)<<14|o>>>18)+a|0)&n|a&~n)+t[4]-405537848|0)<<20|r>>>12)+o|0,r=((r+=((o=((o+=((a=((a+=((n=((n+=(r&a|o&~a)+t[9]+568446438|0)<<5|n>>>27)+r|0)&o|r&~o)+t[14]-1019803690|0)<<9|a>>>23)+n|0)&r|n&~r)+t[3]-187363961|0)<<14|o>>>18)+a|0)&n|a&~n)+t[8]+1163531501|0)<<20|r>>>12)+o|0,r=((r+=((o=((o+=((a=((a+=((n=((n+=(r&a|o&~a)+t[13]-1444681467|0)<<5|n>>>27)+r|0)&o|r&~o)+t[2]-51403784|0)<<9|a>>>23)+n|0)&r|n&~r)+t[7]+1735328473|0)<<14|o>>>18)+a|0)&n|a&~n)+t[12]-1926607734|0)<<20|r>>>12)+o|0,r=((r+=((o=((o+=((a=((a+=((n=((n+=(r^o^a)+t[5]-378558|0)<<4|n>>>28)+r|0)^r^o)+t[8]-2022574463|0)<<11|a>>>21)+n|0)^n^r)+t[11]+1839030562|0)<<16|o>>>16)+a|0)^a^n)+t[14]-35309556|0)<<23|r>>>9)+o|0,r=((r+=((o=((o+=((a=((a+=((n=((n+=(r^o^a)+t[1]-1530992060|0)<<4|n>>>28)+r|0)^r^o)+t[4]+1272893353|0)<<11|a>>>21)+n|0)^n^r)+t[7]-155497632|0)<<16|o>>>16)+a|0)^a^n)+t[10]-1094730640|0)<<23|r>>>9)+o|0,r=((r+=((o=((o+=((a=((a+=((n=((n+=(r^o^a)+t[13]+681279174|0)<<4|n>>>28)+r|0)^r^o)+t[0]-358537222|0)<<11|a>>>21)+n|0)^n^r)+t[3]-722521979|0)<<16|o>>>16)+a|0)^a^n)+t[6]+76029189|0)<<23|r>>>9)+o|0,r=((r+=((o=((o+=((a=((a+=((n=((n+=(r^o^a)+t[9]-640364487|0)<<4|n>>>28)+r|0)^r^o)+t[12]-421815835|0)<<11|a>>>21)+n|0)^n^r)+t[15]+530742520|0)<<16|o>>>16)+a|0)^a^n)+t[2]-995338651|0)<<23|r>>>9)+o|0,r=((r+=((a=((a+=(r^((n=((n+=(o^(r|~a))+t[0]-198630844|0)<<6|n>>>26)+r|0)|~o))+t[7]+1126891415|0)<<10|a>>>22)+n|0)^((o=((o+=(n^(a|~r))+t[14]-1416354905|0)<<15|o>>>17)+a|0)|~n))+t[5]-57434055|0)<<21|r>>>11)+o|0,r=((r+=((a=((a+=(r^((n=((n+=(o^(r|~a))+t[12]+1700485571|0)<<6|n>>>26)+r|0)|~o))+t[3]-1894986606|0)<<10|a>>>22)+n|0)^((o=((o+=(n^(a|~r))+t[10]-1051523|0)<<15|o>>>17)+a|0)|~n))+t[1]-2054922799|0)<<21|r>>>11)+o|0,r=((r+=((a=((a+=(r^((n=((n+=(o^(r|~a))+t[8]+1873313359|0)<<6|n>>>26)+r|0)|~o))+t[15]-30611744|0)<<10|a>>>22)+n|0)^((o=((o+=(n^(a|~r))+t[6]-1560198380|0)<<15|o>>>17)+a|0)|~n))+t[13]+1309151649|0)<<21|r>>>11)+o|0,r=((r+=((a=((a+=(r^((n=((n+=(o^(r|~a))+t[4]-145523070|0)<<6|n>>>26)+r|0)|~o))+t[11]-1120210379|0)<<10|a>>>22)+n|0)^((o=((o+=(n^(a|~r))+t[2]+718787259|0)<<15|o>>>17)+a|0)|~n))+t[9]-343485551|0)<<21|r>>>11)+o|0,e[0]=n+e[0]|0,e[1]=r+e[1]|0,e[2]=o+e[2]|0,e[3]=a+e[3]|0}function r(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return n}function o(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e[t]+(e[t+1]<<8)+(e[t+2]<<16)+(e[t+3]<<24);return n}function a(e){var t,o,a,i,s,l,u=e.length,c=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=u;t+=64)n(c,r(e.substring(t-64,t)));for(o=(e=e.substring(t-64)).length,a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;t<o;t+=1)a[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(a[t>>2]|=128<<(t%4<<3),t>55)for(n(c,a),t=0;t<16;t+=1)a[t]=0;return i=(i=8*u).toString(16).match(/(.*?)(.{0,8})$/),s=parseInt(i[2],16),l=parseInt(i[1],16)||0,a[14]=s,a[15]=l,n(c,a),c}function i(e){var t,r,a,i,s,l,u=e.length,c=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=u;t+=64)n(c,o(e.subarray(t-64,t)));for(r=(e=t-64<u?e.subarray(t-64):new Uint8Array(0)).length,a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;t<r;t+=1)a[t>>2]|=e[t]<<(t%4<<3);if(a[t>>2]|=128<<(t%4<<3),t>55)for(n(c,a),t=0;t<16;t+=1)a[t]=0;return i=(i=8*u).toString(16).match(/(.*?)(.{0,8})$/),s=parseInt(i[2],16),l=parseInt(i[1],16)||0,a[14]=s,a[15]=l,n(c,a),c}function s(e){var n,r="";for(n=0;n<4;n+=1)r+=t[e>>8*n+4&15]+t[e>>8*n&15];return r}function l(e){var t;for(t=0;t<e.length;t+=1)e[t]=s(e[t]);return e.join("")}function u(e){return/[\u0080-\uFFFF]/.test(e)&&(e=unescape(encodeURIComponent(e))),e}function c(e,t){var n,r=e.length,o=new ArrayBuffer(r),a=new Uint8Array(o);for(n=0;n<r;n+=1)a[n]=e.charCodeAt(n);return t?a:o}function d(e){return String.fromCharCode.apply(null,new Uint8Array(e))}function f(e,t,n){var r=new Uint8Array(e.byteLength+t.byteLength);return r.set(new Uint8Array(e)),r.set(new Uint8Array(t),e.byteLength),n?r:r.buffer}function p(e){var t,n=[],r=e.length;for(t=0;t<r-1;t+=2)n.push(parseInt(e.substr(t,2),16));return String.fromCharCode.apply(String,n)}function h(){this.reset()}return l(a("hello")),"undefined"===typeof ArrayBuffer||ArrayBuffer.prototype.slice||function(){function t(e,t){return(e=0|e||0)<0?Math.max(e+t,0):Math.min(e,t)}ArrayBuffer.prototype.slice=function(n,r){var o,a,i,s,l=this.byteLength,u=t(n,l),c=l;return r!==e&&(c=t(r,l)),u>c?new ArrayBuffer(0):(o=c-u,a=new ArrayBuffer(o),i=new Uint8Array(a),s=new Uint8Array(this,u,o),i.set(s),a)}}(),h.prototype.append=function(e){return this.appendBinary(u(e)),this},h.prototype.appendBinary=function(e){this._buff+=e,this._length+=e.length;var t,o=this._buff.length;for(t=64;t<=o;t+=64)n(this._hash,r(this._buff.substring(t-64,t)));return this._buff=this._buff.substring(t-64),this},h.prototype.end=function(e){var t,n,r=this._buff,o=r.length,a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<o;t+=1)a[t>>2]|=r.charCodeAt(t)<<(t%4<<3);return this._finish(a,o),n=l(this._hash),e&&(n=p(n)),this.reset(),n},h.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},h.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},h.prototype.setState=function(e){return this._buff=e.buff,this._length=e.length,this._hash=e.hash,this},h.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},h.prototype._finish=function(e,t){var r,o,a,i=t;if(e[i>>2]|=128<<(i%4<<3),i>55)for(n(this._hash,e),i=0;i<16;i+=1)e[i]=0;r=(r=8*this._length).toString(16).match(/(.*?)(.{0,8})$/),o=parseInt(r[2],16),a=parseInt(r[1],16)||0,e[14]=o,e[15]=a,n(this._hash,e)},h.hash=function(e,t){return h.hashBinary(u(e),t)},h.hashBinary=function(e,t){var n=l(a(e));return t?p(n):n},h.ArrayBuffer=function(){this.reset()},h.ArrayBuffer.prototype.append=function(e){var t,r=f(this._buff.buffer,e,!0),a=r.length;for(this._length+=e.byteLength,t=64;t<=a;t+=64)n(this._hash,o(r.subarray(t-64,t)));return this._buff=t-64<a?new Uint8Array(r.buffer.slice(t-64)):new Uint8Array(0),this},h.ArrayBuffer.prototype.end=function(e){var t,n,r=this._buff,o=r.length,a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<o;t+=1)a[t>>2]|=r[t]<<(t%4<<3);return this._finish(a,o),n=l(this._hash),e&&(n=p(n)),this.reset(),n},h.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},h.ArrayBuffer.prototype.getState=function(){var e=h.prototype.getState.call(this);return e.buff=d(e.buff),e},h.ArrayBuffer.prototype.setState=function(e){return e.buff=c(e.buff,!0),h.prototype.setState.call(this,e)},h.ArrayBuffer.prototype.destroy=h.prototype.destroy,h.ArrayBuffer.prototype._finish=h.prototype._finish,h.ArrayBuffer.hash=function(e,t){var n=l(i(new Uint8Array(e)));return t?p(n):n},h}()},914:(e,t,n)=>{"use strict";var r=n(779),o=n(784);e.exports=function(){var e=o();if(r.supportsDescriptors){var t=Object.getOwnPropertyDescriptor(e,"globalThis");t&&(!t.configurable||!t.enumerable&&t.writable&&globalThis===e)||Object.defineProperty(e,"globalThis",{configurable:!0,enumerable:!1,value:e,writable:!0})}else"object"===typeof globalThis&&globalThis===e||(e.globalThis=e);return e}},950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(672)},992:(e,t,n)=>{"use strict";var r=n(90),o=n(557),a=n(902),i=n(558);e.exports=function(e,t,n){if(!e||"object"!==typeof e&&"function"!==typeof e)throw new a("`obj` must be an object or a function`");if("string"!==typeof t&&"symbol"!==typeof t)throw new a("`property` must be a string or a symbol`");if(arguments.length>3&&"boolean"!==typeof arguments[3]&&null!==arguments[3])throw new a("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&"boolean"!==typeof arguments[4]&&null!==arguments[4])throw new a("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&"boolean"!==typeof arguments[5]&&null!==arguments[5])throw new a("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&"boolean"!==typeof arguments[6])throw new a("`loose`, if provided, must be a boolean");var s=arguments.length>3?arguments[3]:null,l=arguments.length>4?arguments[4]:null,u=arguments.length>5?arguments[5]:null,c=arguments.length>6&&arguments[6],d=!!i&&i(e,t);if(r)r(e,t,{configurable:null===u&&d?d.configurable:!u,enumerable:null===s&&d?d.enumerable:!s,value:n,writable:null===l&&d?d.writable:!l});else{if(!c&&(s||l||u))throw new o("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.");e[t]=n}}},996:()=>{}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var a=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.loaded=!0,a.exports}n.amdD=function(){throw new Error("define cannot be used indirect")},n.amdO={},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{"use strict";var e={};n.r(e),n.d(e,{add:()=>_e,adjoint:()=>F,clone:()=>R,copy:()=>L,create:()=>M,determinant:()=>U,equals:()=>Ce,exactEquals:()=>we,frob:()=>be,fromQuat:()=>se,fromQuat2:()=>te,fromRotation:()=>Y,fromRotationTranslation:()=>ee,fromRotationTranslationScale:()=>ae,fromRotationTranslationScaleOrigin:()=>ie,fromScaling:()=>X,fromTranslation:()=>q,fromValues:()=>k,fromXRotation:()=>Q,fromYRotation:()=>$,fromZRotation:()=>J,frustum:()=>le,getRotation:()=>oe,getScaling:()=>re,getTranslation:()=>ne,identity:()=>B,invert:()=>V,lookAt:()=>ge,mul:()=>Pe,multiply:()=>z,multiplyScalar:()=>xe,multiplyScalarAndAdd:()=>Se,ortho:()=>he,orthoNO:()=>pe,orthoZO:()=>me,perspective:()=>ce,perspectiveFromFieldOfView:()=>fe,perspectiveNO:()=>ue,perspectiveZO:()=>de,rotate:()=>H,rotateX:()=>j,rotateY:()=>K,rotateZ:()=>Z,scale:()=>W,set:()=>D,str:()=>ye,sub:()=>Ae,subtract:()=>Te,targetTo:()=>ve,translate:()=>G,transpose:()=>N});var t={};n.r(t),n.d(t,{add:()=>$e,adjoint:()=>Ne,clone:()=>Oe,copy:()=>Me,create:()=>Ee,determinant:()=>Ve,equals:()=>rt,exactEquals:()=>nt,frob:()=>Qe,fromMat2d:()=>Ke,fromMat4:()=>Ie,fromQuat:()=>Ze,fromRotation:()=>He,fromScaling:()=>je,fromTranslation:()=>We,fromValues:()=>Re,identity:()=>ke,invert:()=>Be,mul:()=>ot,multiply:()=>Fe,multiplyScalar:()=>et,multiplyScalarAndAdd:()=>tt,normalFromMat4:()=>qe,projection:()=>Xe,rotate:()=>ze,scale:()=>Ge,set:()=>Le,str:()=>Ye,sub:()=>at,subtract:()=>Je,translate:()=>Ue,transpose:()=>De});var r=n(43),o=n(391);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function i(e){var t=function(e,t){if("object"!=a(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==a(t)?t:t+""}function s(e,t,n){return(t=i(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach(function(t){s(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}const c=(0,r.createContext)(null);function d(){const e=(0,r.use)(c);if(null==e)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return e}function f(){return d().map}function p(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var h=n(228);const m=["bounds","boundsOptions","center","children","className","id","placeholder","style","whenReady","zoom"];function g(e,t){let{bounds:n,boundsOptions:o,center:a,children:i,className:s,id:l,placeholder:d,style:f,whenReady:g,zoom:v}=e,y=p(e,m);const[b]=(0,r.useState)({className:s,id:l,style:f}),[_,T]=(0,r.useState)(null),x=(0,r.useRef)(void 0);(0,r.useImperativeHandle)(t,()=>{var e;return null!==(e=null===_||void 0===_?void 0:_.map)&&void 0!==e?e:null},[_]);const S=(0,r.useCallback)(e=>{if(null!==e&&!x.current){const t=new h.Map(e,y);x.current=t,null!=a&&null!=v?t.setView(a,v):null!=n&&t.fitBounds(n,o),null!=g&&t.whenReady(g),T(function(e){return Object.freeze({__version:1,map:e})}(t))}},[]);(0,r.useEffect)(()=>()=>{null===_||void 0===_||_.map.remove()},[_]);const w=_?r.createElement(c,{value:_},i):null!==d&&void 0!==d?d:null;return r.createElement("div",u(u({},b),{},{ref:S}),w)}const v=(0,r.forwardRef)(g);n(950);function y(e,t,n){return Object.freeze({instance:e,context:t,container:n})}function b(e,t){return null==t?function(t,n){const o=(0,r.useRef)(void 0);return o.current||(o.current=e(t,n)),o}:function(n,o){const a=(0,r.useRef)(void 0);a.current||(a.current=e(n,o));const i=(0,r.useRef)(n),{instance:s}=a.current;return(0,r.useEffect)(function(){i.current!==n&&(t(s,n,i.current),i.current=n)},[s,n,t]),a}}function _(e,t){var n;const r=null!==(n=e.pane)&&void 0!==n?n:t.pane;return r?u(u({},e),{},{pane:r}):e}function T(e){return function(t){const n=d(),o=e(_(t,n),n);return function(e,t){const n=(0,r.useRef)(t);(0,r.useEffect)(function(){t!==n.current&&null!=e.attributionControl&&(null!=n.current&&e.attributionControl.removeAttribution(n.current),null!=t&&e.attributionControl.addAttribution(t)),n.current=t},[e,t])}(n.map,t.attribution),function(e,t){const n=(0,r.useRef)(void 0);(0,r.useEffect)(function(){return null!=t&&e.instance.on(t),n.current=t,function(){null!=n.current&&e.instance.off(n.current),n.current=null}},[e,t])}(o.current,t.eventHandlers),function(e,t){(0,r.useEffect)(function(){var n;return(null!==(n=t.layerContainer)&&void 0!==n?n:t.map).addLayer(e.instance),function(){var n;null===(n=t.layerContainer)||void 0===n||n.removeLayer(e.instance),t.map.removeLayer(e.instance)}},[t,e])}(o.current,n),o}}const x=["url"],S=function(e){function t(t,n){const{instance:o}=e(t).current;return(0,r.useImperativeHandle)(n,()=>o),null}return(0,r.forwardRef)(t)}(T(b(function(e,t){let{url:n}=e,r=p(e,x);return y(new h.TileLayer(n,_(r,t)),t)},function(e,t,n){!function(e,t,n){const{opacity:r,zIndex:o}=t;null!=r&&r!==n.opacity&&e.setOpacity(r),null!=o&&o!==n.zIndex&&e.setZIndex(o)}(e,t,n);const{url:r}=t;null!=r&&r!==n.url&&e.setUrl(r)})));const w=["bounds","url"],C=function(e,t){return function(e){function t(t,n){const{instance:o,context:a}=e(t).current;(0,r.useImperativeHandle)(n,()=>o);const{children:i}=t;return null==i?null:r.createElement(c,{value:a},i)}return(0,r.forwardRef)(t)}(T(b(e,t)))}(function(e,t){let{bounds:n,url:r}=e,o=p(e,w);const a=new h.ImageOverlay(r,n,o);return y(a,(i=t,s={overlayContainer:a},Object.freeze(u(u({},i),s))));var i,s},function(e,t,n){if(function(e,t,n){t.bounds instanceof h.LatLngBounds&&t.bounds!==n.bounds&&e.setBounds(t.bounds),null!=t.opacity&&t.opacity!==n.opacity&&e.setOpacity(t.opacity),null!=t.zIndex&&t.zIndex!==n.zIndex&&e.setZIndex(t.zIndex)}(e,t,n),t.bounds!==n.bounds){const n=t.bounds instanceof h.LatLngBounds?t.bounds:new h.LatLngBounds(t.bounds);e.setBounds(n)}t.url!==n.url&&e.setUrl(t.url)});var P=n(579);function A(e){let{bounds:t}=e;const n=f();return(0,r.useEffect)(()=>{t&&n.fitBounds(t)},[t,n]),null}const E=e=>{let{demData:t,colorizedImageUrl:n,bounds:o,opacity:a=.7}=e;const[i,s]=(0,r.useState)(null);(0,r.useRef)(null);return(0,r.useEffect)(()=>{if(o&&4===o.length){const e=[[o[1],o[0]],[o[3],o[2]]];s(e)}},[o]),(0,P.jsx)("div",{style:{width:"70%",height:"70%",display:"flex",flexDirection:"column"},children:(0,P.jsxs)("div",{style:{width:"100%",height:"100%",position:"relative"},children:[(0,P.jsxs)(v,{center:[45.2,5.8],zoom:13,style:{width:"100%",height:"100%"},children:[(0,P.jsx)(S,{attribution:'\xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),n&&i&&(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(C,{url:n,bounds:i,opacity:a,zIndex:10}),(0,P.jsx)(A,{bounds:i})]})]}),n&&(0,P.jsxs)("div",{style:{position:"absolute",bottom:"30px",left:"10px",backgroundColor:"white",padding:"10px",borderRadius:"5px",boxShadow:"0 2px 8px rgba(0,0,0,0.15)",zIndex:1e3},children:[(0,P.jsx)("div",{style:{fontSize:"12px",fontWeight:"bold",marginBottom:"5px"},children:"H\u2082 Concentration (PPM)"}),(0,P.jsx)("div",{style:{width:"200px",height:"20px",background:"linear-gradient(to right, rgb(0,0,255), rgb(0,255,255), rgb(0,255,0), rgb(255,255,0), rgb(255,0,0))",border:"1px solid #ccc"}}),(0,P.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"10px",marginTop:"2px"},children:[(0,P.jsx)("span",{children:"Low"}),(0,P.jsx)("span",{children:"High"})]})]})]})})};var I=1e-6,O="undefined"!==typeof Float32Array?Float32Array:Array;Math.random;Math.PI;function M(){var e=new O(16);return O!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function R(e){var t=new O(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function L(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function k(e,t,n,r,o,a,i,s,l,u,c,d,f,p,h,m){var g=new O(16);return g[0]=e,g[1]=t,g[2]=n,g[3]=r,g[4]=o,g[5]=a,g[6]=i,g[7]=s,g[8]=l,g[9]=u,g[10]=c,g[11]=d,g[12]=f,g[13]=p,g[14]=h,g[15]=m,g}function D(e,t,n,r,o,a,i,s,l,u,c,d,f,p,h,m,g){return e[0]=t,e[1]=n,e[2]=r,e[3]=o,e[4]=a,e[5]=i,e[6]=s,e[7]=l,e[8]=u,e[9]=c,e[10]=d,e[11]=f,e[12]=p,e[13]=h,e[14]=m,e[15]=g,e}function B(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function N(e,t){if(e===t){var n=t[1],r=t[2],o=t[3],a=t[6],i=t[7],s=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=n,e[6]=t[9],e[7]=t[13],e[8]=r,e[9]=a,e[11]=t[14],e[12]=o,e[13]=i,e[14]=s}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function V(e,t){var n=t[0],r=t[1],o=t[2],a=t[3],i=t[4],s=t[5],l=t[6],u=t[7],c=t[8],d=t[9],f=t[10],p=t[11],h=t[12],m=t[13],g=t[14],v=t[15],y=n*s-r*i,b=n*l-o*i,_=n*u-a*i,T=r*l-o*s,x=r*u-a*s,S=o*u-a*l,w=c*m-d*h,C=c*g-f*h,P=c*v-p*h,A=d*g-f*m,E=d*v-p*m,I=f*v-p*g,O=y*I-b*E+_*A+T*P-x*C+S*w;return O?(O=1/O,e[0]=(s*I-l*E+u*A)*O,e[1]=(o*E-r*I-a*A)*O,e[2]=(m*S-g*x+v*T)*O,e[3]=(f*x-d*S-p*T)*O,e[4]=(l*P-i*I-u*C)*O,e[5]=(n*I-o*P+a*C)*O,e[6]=(g*_-h*S-v*b)*O,e[7]=(c*S-f*_+p*b)*O,e[8]=(i*E-s*P+u*w)*O,e[9]=(r*P-n*E-a*w)*O,e[10]=(h*x-m*_+v*y)*O,e[11]=(d*_-c*x-p*y)*O,e[12]=(s*C-i*A-l*w)*O,e[13]=(n*A-r*C+o*w)*O,e[14]=(m*b-h*T-g*y)*O,e[15]=(c*T-d*b+f*y)*O,e):null}function F(e,t){var n=t[0],r=t[1],o=t[2],a=t[3],i=t[4],s=t[5],l=t[6],u=t[7],c=t[8],d=t[9],f=t[10],p=t[11],h=t[12],m=t[13],g=t[14],v=t[15];return e[0]=s*(f*v-p*g)-d*(l*v-u*g)+m*(l*p-u*f),e[1]=-(r*(f*v-p*g)-d*(o*v-a*g)+m*(o*p-a*f)),e[2]=r*(l*v-u*g)-s*(o*v-a*g)+m*(o*u-a*l),e[3]=-(r*(l*p-u*f)-s*(o*p-a*f)+d*(o*u-a*l)),e[4]=-(i*(f*v-p*g)-c*(l*v-u*g)+h*(l*p-u*f)),e[5]=n*(f*v-p*g)-c*(o*v-a*g)+h*(o*p-a*f),e[6]=-(n*(l*v-u*g)-i*(o*v-a*g)+h*(o*u-a*l)),e[7]=n*(l*p-u*f)-i*(o*p-a*f)+c*(o*u-a*l),e[8]=i*(d*v-p*m)-c*(s*v-u*m)+h*(s*p-u*d),e[9]=-(n*(d*v-p*m)-c*(r*v-a*m)+h*(r*p-a*d)),e[10]=n*(s*v-u*m)-i*(r*v-a*m)+h*(r*u-a*s),e[11]=-(n*(s*p-u*d)-i*(r*p-a*d)+c*(r*u-a*s)),e[12]=-(i*(d*g-f*m)-c*(s*g-l*m)+h*(s*f-l*d)),e[13]=n*(d*g-f*m)-c*(r*g-o*m)+h*(r*f-o*d),e[14]=-(n*(s*g-l*m)-i*(r*g-o*m)+h*(r*l-o*s)),e[15]=n*(s*f-l*d)-i*(r*f-o*d)+c*(r*l-o*s),e}function U(e){var t=e[0],n=e[1],r=e[2],o=e[3],a=e[4],i=e[5],s=e[6],l=e[7],u=e[8],c=e[9],d=e[10],f=e[11],p=e[12],h=e[13],m=e[14],g=e[15];return(t*i-n*a)*(d*g-f*m)-(t*s-r*a)*(c*g-f*h)+(t*l-o*a)*(c*m-d*h)+(n*s-r*i)*(u*g-f*p)-(n*l-o*i)*(u*m-d*p)+(r*l-o*s)*(u*h-c*p)}function z(e,t,n){var r=t[0],o=t[1],a=t[2],i=t[3],s=t[4],l=t[5],u=t[6],c=t[7],d=t[8],f=t[9],p=t[10],h=t[11],m=t[12],g=t[13],v=t[14],y=t[15],b=n[0],_=n[1],T=n[2],x=n[3];return e[0]=b*r+_*s+T*d+x*m,e[1]=b*o+_*l+T*f+x*g,e[2]=b*a+_*u+T*p+x*v,e[3]=b*i+_*c+T*h+x*y,b=n[4],_=n[5],T=n[6],x=n[7],e[4]=b*r+_*s+T*d+x*m,e[5]=b*o+_*l+T*f+x*g,e[6]=b*a+_*u+T*p+x*v,e[7]=b*i+_*c+T*h+x*y,b=n[8],_=n[9],T=n[10],x=n[11],e[8]=b*r+_*s+T*d+x*m,e[9]=b*o+_*l+T*f+x*g,e[10]=b*a+_*u+T*p+x*v,e[11]=b*i+_*c+T*h+x*y,b=n[12],_=n[13],T=n[14],x=n[15],e[12]=b*r+_*s+T*d+x*m,e[13]=b*o+_*l+T*f+x*g,e[14]=b*a+_*u+T*p+x*v,e[15]=b*i+_*c+T*h+x*y,e}function G(e,t,n){var r,o,a,i,s,l,u,c,d,f,p,h,m=n[0],g=n[1],v=n[2];return t===e?(e[12]=t[0]*m+t[4]*g+t[8]*v+t[12],e[13]=t[1]*m+t[5]*g+t[9]*v+t[13],e[14]=t[2]*m+t[6]*g+t[10]*v+t[14],e[15]=t[3]*m+t[7]*g+t[11]*v+t[15]):(r=t[0],o=t[1],a=t[2],i=t[3],s=t[4],l=t[5],u=t[6],c=t[7],d=t[8],f=t[9],p=t[10],h=t[11],e[0]=r,e[1]=o,e[2]=a,e[3]=i,e[4]=s,e[5]=l,e[6]=u,e[7]=c,e[8]=d,e[9]=f,e[10]=p,e[11]=h,e[12]=r*m+s*g+d*v+t[12],e[13]=o*m+l*g+f*v+t[13],e[14]=a*m+u*g+p*v+t[14],e[15]=i*m+c*g+h*v+t[15]),e}function W(e,t,n){var r=n[0],o=n[1],a=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*o,e[5]=t[5]*o,e[6]=t[6]*o,e[7]=t[7]*o,e[8]=t[8]*a,e[9]=t[9]*a,e[10]=t[10]*a,e[11]=t[11]*a,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function H(e,t,n,r){var o,a,i,s,l,u,c,d,f,p,h,m,g,v,y,b,_,T,x,S,w,C,P,A,E=r[0],O=r[1],M=r[2],R=Math.hypot(E,O,M);return R<I?null:(E*=R=1/R,O*=R,M*=R,o=Math.sin(n),i=1-(a=Math.cos(n)),s=t[0],l=t[1],u=t[2],c=t[3],d=t[4],f=t[5],p=t[6],h=t[7],m=t[8],g=t[9],v=t[10],y=t[11],b=E*E*i+a,_=O*E*i+M*o,T=M*E*i-O*o,x=E*O*i-M*o,S=O*O*i+a,w=M*O*i+E*o,C=E*M*i+O*o,P=O*M*i-E*o,A=M*M*i+a,e[0]=s*b+d*_+m*T,e[1]=l*b+f*_+g*T,e[2]=u*b+p*_+v*T,e[3]=c*b+h*_+y*T,e[4]=s*x+d*S+m*w,e[5]=l*x+f*S+g*w,e[6]=u*x+p*S+v*w,e[7]=c*x+h*S+y*w,e[8]=s*C+d*P+m*A,e[9]=l*C+f*P+g*A,e[10]=u*C+p*P+v*A,e[11]=c*C+h*P+y*A,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}function j(e,t,n){var r=Math.sin(n),o=Math.cos(n),a=t[4],i=t[5],s=t[6],l=t[7],u=t[8],c=t[9],d=t[10],f=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=a*o+u*r,e[5]=i*o+c*r,e[6]=s*o+d*r,e[7]=l*o+f*r,e[8]=u*o-a*r,e[9]=c*o-i*r,e[10]=d*o-s*r,e[11]=f*o-l*r,e}function K(e,t,n){var r=Math.sin(n),o=Math.cos(n),a=t[0],i=t[1],s=t[2],l=t[3],u=t[8],c=t[9],d=t[10],f=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*o-u*r,e[1]=i*o-c*r,e[2]=s*o-d*r,e[3]=l*o-f*r,e[8]=a*r+u*o,e[9]=i*r+c*o,e[10]=s*r+d*o,e[11]=l*r+f*o,e}function Z(e,t,n){var r=Math.sin(n),o=Math.cos(n),a=t[0],i=t[1],s=t[2],l=t[3],u=t[4],c=t[5],d=t[6],f=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*o+u*r,e[1]=i*o+c*r,e[2]=s*o+d*r,e[3]=l*o+f*r,e[4]=u*o-a*r,e[5]=c*o-i*r,e[6]=d*o-s*r,e[7]=f*o-l*r,e}function q(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function X(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Y(e,t,n){var r,o,a,i=n[0],s=n[1],l=n[2],u=Math.hypot(i,s,l);return u<I?null:(i*=u=1/u,s*=u,l*=u,r=Math.sin(t),a=1-(o=Math.cos(t)),e[0]=i*i*a+o,e[1]=s*i*a+l*r,e[2]=l*i*a-s*r,e[3]=0,e[4]=i*s*a-l*r,e[5]=s*s*a+o,e[6]=l*s*a+i*r,e[7]=0,e[8]=i*l*a+s*r,e[9]=s*l*a-i*r,e[10]=l*l*a+o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}function Q(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=r,e[6]=n,e[7]=0,e[8]=0,e[9]=-n,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function $(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=0,e[2]=-n,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=n,e[9]=0,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function J(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=0,e[3]=0,e[4]=-n,e[5]=r,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function ee(e,t,n){var r=t[0],o=t[1],a=t[2],i=t[3],s=r+r,l=o+o,u=a+a,c=r*s,d=r*l,f=r*u,p=o*l,h=o*u,m=a*u,g=i*s,v=i*l,y=i*u;return e[0]=1-(p+m),e[1]=d+y,e[2]=f-v,e[3]=0,e[4]=d-y,e[5]=1-(c+m),e[6]=h+g,e[7]=0,e[8]=f+v,e[9]=h-g,e[10]=1-(c+p),e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e}function te(e,t){var n=new O(3),r=-t[0],o=-t[1],a=-t[2],i=t[3],s=t[4],l=t[5],u=t[6],c=t[7],d=r*r+o*o+a*a+i*i;return d>0?(n[0]=2*(s*i+c*r+l*a-u*o)/d,n[1]=2*(l*i+c*o+u*r-s*a)/d,n[2]=2*(u*i+c*a+s*o-l*r)/d):(n[0]=2*(s*i+c*r+l*a-u*o),n[1]=2*(l*i+c*o+u*r-s*a),n[2]=2*(u*i+c*a+s*o-l*r)),ee(e,t,n),e}function ne(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e}function re(e,t){var n=t[0],r=t[1],o=t[2],a=t[4],i=t[5],s=t[6],l=t[8],u=t[9],c=t[10];return e[0]=Math.hypot(n,r,o),e[1]=Math.hypot(a,i,s),e[2]=Math.hypot(l,u,c),e}function oe(e,t){var n=new O(3);re(n,t);var r=1/n[0],o=1/n[1],a=1/n[2],i=t[0]*r,s=t[1]*o,l=t[2]*a,u=t[4]*r,c=t[5]*o,d=t[6]*a,f=t[8]*r,p=t[9]*o,h=t[10]*a,m=i+c+h,g=0;return m>0?(g=2*Math.sqrt(m+1),e[3]=.25*g,e[0]=(d-p)/g,e[1]=(f-l)/g,e[2]=(s-u)/g):i>c&&i>h?(g=2*Math.sqrt(1+i-c-h),e[3]=(d-p)/g,e[0]=.25*g,e[1]=(s+u)/g,e[2]=(f+l)/g):c>h?(g=2*Math.sqrt(1+c-i-h),e[3]=(f-l)/g,e[0]=(s+u)/g,e[1]=.25*g,e[2]=(d+p)/g):(g=2*Math.sqrt(1+h-i-c),e[3]=(s-u)/g,e[0]=(f+l)/g,e[1]=(d+p)/g,e[2]=.25*g),e}function ae(e,t,n,r){var o=t[0],a=t[1],i=t[2],s=t[3],l=o+o,u=a+a,c=i+i,d=o*l,f=o*u,p=o*c,h=a*u,m=a*c,g=i*c,v=s*l,y=s*u,b=s*c,_=r[0],T=r[1],x=r[2];return e[0]=(1-(h+g))*_,e[1]=(f+b)*_,e[2]=(p-y)*_,e[3]=0,e[4]=(f-b)*T,e[5]=(1-(d+g))*T,e[6]=(m+v)*T,e[7]=0,e[8]=(p+y)*x,e[9]=(m-v)*x,e[10]=(1-(d+h))*x,e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e}function ie(e,t,n,r,o){var a=t[0],i=t[1],s=t[2],l=t[3],u=a+a,c=i+i,d=s+s,f=a*u,p=a*c,h=a*d,m=i*c,g=i*d,v=s*d,y=l*u,b=l*c,_=l*d,T=r[0],x=r[1],S=r[2],w=o[0],C=o[1],P=o[2],A=(1-(m+v))*T,E=(p+_)*T,I=(h-b)*T,O=(p-_)*x,M=(1-(f+v))*x,R=(g+y)*x,L=(h+b)*S,k=(g-y)*S,D=(1-(f+m))*S;return e[0]=A,e[1]=E,e[2]=I,e[3]=0,e[4]=O,e[5]=M,e[6]=R,e[7]=0,e[8]=L,e[9]=k,e[10]=D,e[11]=0,e[12]=n[0]+w-(A*w+O*C+L*P),e[13]=n[1]+C-(E*w+M*C+k*P),e[14]=n[2]+P-(I*w+R*C+D*P),e[15]=1,e}function se(e,t){var n=t[0],r=t[1],o=t[2],a=t[3],i=n+n,s=r+r,l=o+o,u=n*i,c=r*i,d=r*s,f=o*i,p=o*s,h=o*l,m=a*i,g=a*s,v=a*l;return e[0]=1-d-h,e[1]=c+v,e[2]=f-g,e[3]=0,e[4]=c-v,e[5]=1-u-h,e[6]=p+m,e[7]=0,e[8]=f+g,e[9]=p-m,e[10]=1-u-d,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function le(e,t,n,r,o,a,i){var s=1/(n-t),l=1/(o-r),u=1/(a-i);return e[0]=2*a*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*a*l,e[6]=0,e[7]=0,e[8]=(n+t)*s,e[9]=(o+r)*l,e[10]=(i+a)*u,e[11]=-1,e[12]=0,e[13]=0,e[14]=i*a*2*u,e[15]=0,e}function ue(e,t,n,r,o){var a,i=1/Math.tan(t/2);return e[0]=i/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=i,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=o&&o!==1/0?(a=1/(r-o),e[10]=(o+r)*a,e[14]=2*o*r*a):(e[10]=-1,e[14]=-2*r),e}Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});var ce=ue;function de(e,t,n,r,o){var a,i=1/Math.tan(t/2);return e[0]=i/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=i,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=o&&o!==1/0?(a=1/(r-o),e[10]=o*a,e[14]=o*r*a):(e[10]=-1,e[14]=-r),e}function fe(e,t,n,r){var o=Math.tan(t.upDegrees*Math.PI/180),a=Math.tan(t.downDegrees*Math.PI/180),i=Math.tan(t.leftDegrees*Math.PI/180),s=Math.tan(t.rightDegrees*Math.PI/180),l=2/(i+s),u=2/(o+a);return e[0]=l,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=u,e[6]=0,e[7]=0,e[8]=-(i-s)*l*.5,e[9]=(o-a)*u*.5,e[10]=r/(n-r),e[11]=-1,e[12]=0,e[13]=0,e[14]=r*n/(n-r),e[15]=0,e}function pe(e,t,n,r,o,a,i){var s=1/(t-n),l=1/(r-o),u=1/(a-i);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*u,e[11]=0,e[12]=(t+n)*s,e[13]=(o+r)*l,e[14]=(i+a)*u,e[15]=1,e}var he=pe;function me(e,t,n,r,o,a,i){var s=1/(t-n),l=1/(r-o),u=1/(a-i);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=u,e[11]=0,e[12]=(t+n)*s,e[13]=(o+r)*l,e[14]=a*u,e[15]=1,e}function ge(e,t,n,r){var o,a,i,s,l,u,c,d,f,p,h=t[0],m=t[1],g=t[2],v=r[0],y=r[1],b=r[2],_=n[0],T=n[1],x=n[2];return Math.abs(h-_)<I&&Math.abs(m-T)<I&&Math.abs(g-x)<I?B(e):(c=h-_,d=m-T,f=g-x,o=y*(f*=p=1/Math.hypot(c,d,f))-b*(d*=p),a=b*(c*=p)-v*f,i=v*d-y*c,(p=Math.hypot(o,a,i))?(o*=p=1/p,a*=p,i*=p):(o=0,a=0,i=0),s=d*i-f*a,l=f*o-c*i,u=c*a-d*o,(p=Math.hypot(s,l,u))?(s*=p=1/p,l*=p,u*=p):(s=0,l=0,u=0),e[0]=o,e[1]=s,e[2]=c,e[3]=0,e[4]=a,e[5]=l,e[6]=d,e[7]=0,e[8]=i,e[9]=u,e[10]=f,e[11]=0,e[12]=-(o*h+a*m+i*g),e[13]=-(s*h+l*m+u*g),e[14]=-(c*h+d*m+f*g),e[15]=1,e)}function ve(e,t,n,r){var o=t[0],a=t[1],i=t[2],s=r[0],l=r[1],u=r[2],c=o-n[0],d=a-n[1],f=i-n[2],p=c*c+d*d+f*f;p>0&&(c*=p=1/Math.sqrt(p),d*=p,f*=p);var h=l*f-u*d,m=u*c-s*f,g=s*d-l*c;return(p=h*h+m*m+g*g)>0&&(h*=p=1/Math.sqrt(p),m*=p,g*=p),e[0]=h,e[1]=m,e[2]=g,e[3]=0,e[4]=d*g-f*m,e[5]=f*h-c*g,e[6]=c*m-d*h,e[7]=0,e[8]=c,e[9]=d,e[10]=f,e[11]=0,e[12]=o,e[13]=a,e[14]=i,e[15]=1,e}function ye(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}function be(e){return Math.hypot(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])}function _e(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e[8]=t[8]+n[8],e[9]=t[9]+n[9],e[10]=t[10]+n[10],e[11]=t[11]+n[11],e[12]=t[12]+n[12],e[13]=t[13]+n[13],e[14]=t[14]+n[14],e[15]=t[15]+n[15],e}function Te(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e[6]=t[6]-n[6],e[7]=t[7]-n[7],e[8]=t[8]-n[8],e[9]=t[9]-n[9],e[10]=t[10]-n[10],e[11]=t[11]-n[11],e[12]=t[12]-n[12],e[13]=t[13]-n[13],e[14]=t[14]-n[14],e[15]=t[15]-n[15],e}function xe(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*n,e[9]=t[9]*n,e[10]=t[10]*n,e[11]=t[11]*n,e[12]=t[12]*n,e[13]=t[13]*n,e[14]=t[14]*n,e[15]=t[15]*n,e}function Se(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e[4]=t[4]+n[4]*r,e[5]=t[5]+n[5]*r,e[6]=t[6]+n[6]*r,e[7]=t[7]+n[7]*r,e[8]=t[8]+n[8]*r,e[9]=t[9]+n[9]*r,e[10]=t[10]+n[10]*r,e[11]=t[11]+n[11]*r,e[12]=t[12]+n[12]*r,e[13]=t[13]+n[13]*r,e[14]=t[14]+n[14]*r,e[15]=t[15]+n[15]*r,e}function we(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]}function Ce(e,t){var n=e[0],r=e[1],o=e[2],a=e[3],i=e[4],s=e[5],l=e[6],u=e[7],c=e[8],d=e[9],f=e[10],p=e[11],h=e[12],m=e[13],g=e[14],v=e[15],y=t[0],b=t[1],_=t[2],T=t[3],x=t[4],S=t[5],w=t[6],C=t[7],P=t[8],A=t[9],E=t[10],O=t[11],M=t[12],R=t[13],L=t[14],k=t[15];return Math.abs(n-y)<=I*Math.max(1,Math.abs(n),Math.abs(y))&&Math.abs(r-b)<=I*Math.max(1,Math.abs(r),Math.abs(b))&&Math.abs(o-_)<=I*Math.max(1,Math.abs(o),Math.abs(_))&&Math.abs(a-T)<=I*Math.max(1,Math.abs(a),Math.abs(T))&&Math.abs(i-x)<=I*Math.max(1,Math.abs(i),Math.abs(x))&&Math.abs(s-S)<=I*Math.max(1,Math.abs(s),Math.abs(S))&&Math.abs(l-w)<=I*Math.max(1,Math.abs(l),Math.abs(w))&&Math.abs(u-C)<=I*Math.max(1,Math.abs(u),Math.abs(C))&&Math.abs(c-P)<=I*Math.max(1,Math.abs(c),Math.abs(P))&&Math.abs(d-A)<=I*Math.max(1,Math.abs(d),Math.abs(A))&&Math.abs(f-E)<=I*Math.max(1,Math.abs(f),Math.abs(E))&&Math.abs(p-O)<=I*Math.max(1,Math.abs(p),Math.abs(O))&&Math.abs(h-M)<=I*Math.max(1,Math.abs(h),Math.abs(M))&&Math.abs(m-R)<=I*Math.max(1,Math.abs(m),Math.abs(R))&&Math.abs(g-L)<=I*Math.max(1,Math.abs(g),Math.abs(L))&&Math.abs(v-k)<=I*Math.max(1,Math.abs(v),Math.abs(k))}var Pe=z,Ae=Te;function Ee(){var e=new O(9);return O!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function Ie(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e}function Oe(e){var t=new O(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function Me(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function Re(e,t,n,r,o,a,i,s,l){var u=new O(9);return u[0]=e,u[1]=t,u[2]=n,u[3]=r,u[4]=o,u[5]=a,u[6]=i,u[7]=s,u[8]=l,u}function Le(e,t,n,r,o,a,i,s,l,u){return e[0]=t,e[1]=n,e[2]=r,e[3]=o,e[4]=a,e[5]=i,e[6]=s,e[7]=l,e[8]=u,e}function ke(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function De(e,t){if(e===t){var n=t[1],r=t[2],o=t[5];e[1]=t[3],e[2]=t[6],e[3]=n,e[5]=t[7],e[6]=r,e[7]=o}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e}function Be(e,t){var n=t[0],r=t[1],o=t[2],a=t[3],i=t[4],s=t[5],l=t[6],u=t[7],c=t[8],d=c*i-s*u,f=-c*a+s*l,p=u*a-i*l,h=n*d+r*f+o*p;return h?(h=1/h,e[0]=d*h,e[1]=(-c*r+o*u)*h,e[2]=(s*r-o*i)*h,e[3]=f*h,e[4]=(c*n-o*l)*h,e[5]=(-s*n+o*a)*h,e[6]=p*h,e[7]=(-u*n+r*l)*h,e[8]=(i*n-r*a)*h,e):null}function Ne(e,t){var n=t[0],r=t[1],o=t[2],a=t[3],i=t[4],s=t[5],l=t[6],u=t[7],c=t[8];return e[0]=i*c-s*u,e[1]=o*u-r*c,e[2]=r*s-o*i,e[3]=s*l-a*c,e[4]=n*c-o*l,e[5]=o*a-n*s,e[6]=a*u-i*l,e[7]=r*l-n*u,e[8]=n*i-r*a,e}function Ve(e){var t=e[0],n=e[1],r=e[2],o=e[3],a=e[4],i=e[5],s=e[6],l=e[7],u=e[8];return t*(u*a-i*l)+n*(-u*o+i*s)+r*(l*o-a*s)}function Fe(e,t,n){var r=t[0],o=t[1],a=t[2],i=t[3],s=t[4],l=t[5],u=t[6],c=t[7],d=t[8],f=n[0],p=n[1],h=n[2],m=n[3],g=n[4],v=n[5],y=n[6],b=n[7],_=n[8];return e[0]=f*r+p*i+h*u,e[1]=f*o+p*s+h*c,e[2]=f*a+p*l+h*d,e[3]=m*r+g*i+v*u,e[4]=m*o+g*s+v*c,e[5]=m*a+g*l+v*d,e[6]=y*r+b*i+_*u,e[7]=y*o+b*s+_*c,e[8]=y*a+b*l+_*d,e}function Ue(e,t,n){var r=t[0],o=t[1],a=t[2],i=t[3],s=t[4],l=t[5],u=t[6],c=t[7],d=t[8],f=n[0],p=n[1];return e[0]=r,e[1]=o,e[2]=a,e[3]=i,e[4]=s,e[5]=l,e[6]=f*r+p*i+u,e[7]=f*o+p*s+c,e[8]=f*a+p*l+d,e}function ze(e,t,n){var r=t[0],o=t[1],a=t[2],i=t[3],s=t[4],l=t[5],u=t[6],c=t[7],d=t[8],f=Math.sin(n),p=Math.cos(n);return e[0]=p*r+f*i,e[1]=p*o+f*s,e[2]=p*a+f*l,e[3]=p*i-f*r,e[4]=p*s-f*o,e[5]=p*l-f*a,e[6]=u,e[7]=c,e[8]=d,e}function Ge(e,t,n){var r=n[0],o=n[1];return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=o*t[3],e[4]=o*t[4],e[5]=o*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function We(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1,e}function He(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=0,e[3]=-n,e[4]=r,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function je(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function Ke(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e}function Ze(e,t){var n=t[0],r=t[1],o=t[2],a=t[3],i=n+n,s=r+r,l=o+o,u=n*i,c=r*i,d=r*s,f=o*i,p=o*s,h=o*l,m=a*i,g=a*s,v=a*l;return e[0]=1-d-h,e[3]=c-v,e[6]=f+g,e[1]=c+v,e[4]=1-u-h,e[7]=p-m,e[2]=f-g,e[5]=p+m,e[8]=1-u-d,e}function qe(e,t){var n=t[0],r=t[1],o=t[2],a=t[3],i=t[4],s=t[5],l=t[6],u=t[7],c=t[8],d=t[9],f=t[10],p=t[11],h=t[12],m=t[13],g=t[14],v=t[15],y=n*s-r*i,b=n*l-o*i,_=n*u-a*i,T=r*l-o*s,x=r*u-a*s,S=o*u-a*l,w=c*m-d*h,C=c*g-f*h,P=c*v-p*h,A=d*g-f*m,E=d*v-p*m,I=f*v-p*g,O=y*I-b*E+_*A+T*P-x*C+S*w;return O?(O=1/O,e[0]=(s*I-l*E+u*A)*O,e[1]=(l*P-i*I-u*C)*O,e[2]=(i*E-s*P+u*w)*O,e[3]=(o*E-r*I-a*A)*O,e[4]=(n*I-o*P+a*C)*O,e[5]=(r*P-n*E-a*w)*O,e[6]=(m*S-g*x+v*T)*O,e[7]=(g*_-h*S-v*b)*O,e[8]=(h*x-m*_+v*y)*O,e):null}function Xe(e,t,n){return e[0]=2/t,e[1]=0,e[2]=0,e[3]=0,e[4]=-2/n,e[5]=0,e[6]=-1,e[7]=1,e[8]=1,e}function Ye(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"}function Qe(e){return Math.hypot(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8])}function $e(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e[8]=t[8]+n[8],e}function Je(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e[6]=t[6]-n[6],e[7]=t[7]-n[7],e[8]=t[8]-n[8],e}function et(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*n,e}function tt(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e[4]=t[4]+n[4]*r,e[5]=t[5]+n[5]*r,e[6]=t[6]+n[6]*r,e[7]=t[7]+n[7]*r,e[8]=t[8]+n[8]*r,e}function nt(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]}function rt(e,t){var n=e[0],r=e[1],o=e[2],a=e[3],i=e[4],s=e[5],l=e[6],u=e[7],c=e[8],d=t[0],f=t[1],p=t[2],h=t[3],m=t[4],g=t[5],v=t[6],y=t[7],b=t[8];return Math.abs(n-d)<=I*Math.max(1,Math.abs(n),Math.abs(d))&&Math.abs(r-f)<=I*Math.max(1,Math.abs(r),Math.abs(f))&&Math.abs(o-p)<=I*Math.max(1,Math.abs(o),Math.abs(p))&&Math.abs(a-h)<=I*Math.max(1,Math.abs(a),Math.abs(h))&&Math.abs(i-m)<=I*Math.max(1,Math.abs(i),Math.abs(m))&&Math.abs(s-g)<=I*Math.max(1,Math.abs(s),Math.abs(g))&&Math.abs(l-v)<=I*Math.max(1,Math.abs(l),Math.abs(v))&&Math.abs(u-y)<=I*Math.max(1,Math.abs(u),Math.abs(y))&&Math.abs(c-b)<=I*Math.max(1,Math.abs(c),Math.abs(b))}var ot=Fe,at=Je,it=n(122);const st=n(275)(),lt={vtkObject:()=>null};function ut(e){if(null===e||void 0===e)return e;if(e.isA)return e;if(!e.vtkClass)return st.console&&st.console.error&&st.console.error("Invalid VTK object"),null;const t=lt[e.vtkClass];if(!t)return st.console&&st.console.error&&st.console.error("No vtk class found for Object of type ".concat(e.vtkClass)),null;const n=u({},e);Object.keys(n).forEach(e=>{n[e]&&"object"===typeof n[e]&&n[e].vtkClass&&(n[e]=ut(n[e]))});const r=t(n);return r&&r.modified&&r.modified(),r}ut.register=function(e,t){lt[e]=t};class ct extends Array{push(){for(let e=0;e<arguments.length;e++)this.includes(arguments[e])||super.push(arguments[e]);return this.length}}let dt=0;const ft=e=>{throw new Error("Named parameter '".concat(e,"' is missing"))},pt=Symbol("void");const ht={};function mt(){}["log","debug","info","warn","error","time","timeEnd","group","groupEnd"].forEach(e=>{ht[e]=mt}),st.console=console.hasOwnProperty("log")?console:ht;const gt={debug:mt,error:st.console.error||mt,info:st.console.info||mt,log:st.console.log||mt,warn:st.console.warn||mt};function vt(e,t){gt[e]&&(gt[e]=t||mt)}function yt(){gt.log(...arguments)}function bt(){gt.info(...arguments)}function _t(){gt.debug(...arguments)}function Tt(){gt.error(...arguments)}function xt(){gt.warn(...arguments)}const St={};function wt(e){St[e]||(gt.error(e),St[e]=!0)}const Ct=Object.create(null);Ct.Float32Array=Float32Array,Ct.Float64Array=Float64Array,Ct.Uint8Array=Uint8Array,Ct.Int8Array=Int8Array,Ct.Uint16Array=Uint16Array,Ct.Int16Array=Int16Array,Ct.Uint32Array=Uint32Array,Ct.Int32Array=Int32Array,Ct.Uint8ClampedArray=Uint8ClampedArray;try{Ct.BigInt64Array=BigInt64Array,Ct.BigUint64Array=BigUint64Array}catch(d_){}function Pt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return new(Ct[e]||Float64Array)(...n)}function At(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return(Ct[e]||Float64Array).from(...n)}function Et(e){return e.charAt(0).toUpperCase()+e.slice(1)}function It(e){return Et("_"===e[0]?e.slice(1):e)}function Ot(e){return e.charAt(0).toLowerCase()+e.slice(1)}function Mt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;const r=["TB","GB","MB","KB"];let o=Number(e),a="B";for(;o>n;)o/=n,a=r.pop();return"".concat(o.toFixed(t)," ").concat(a)}function Rt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:" ";const n=[];let r=e;for(;r>1e3;)n.push("000".concat(r%1e3).slice(-3)),r=Math.floor(r/1e3);return r>0&&n.push(r),n.reverse(),n.join(t)}function Lt(e){Object.keys(e).forEach(t=>{Array.isArray(e[t])&&(e[t]=[].concat(e[t]))})}function kt(e){return e&&e.isA?e.getState():e}function Dt(e){setTimeout(e,0)}function Bt(e,t){const n=performance.now();e.finally(()=>{const e=performance.now()-n;t(e)})}function Nt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Lt(t);const n=[];if(Number.isInteger(t.mtime)||(t.mtime=++dt),"classHierarchy"in t){if(!(t.classHierarchy instanceof ct)){const e=new ct;for(let n=0;n<t.classHierarchy.length;n++)e.push(t.classHierarchy[n]);t.classHierarchy=e}}else t.classHierarchy=new ct("vtkObject");function r(e){n[e]=null}return e.isDeleted=()=>!!t.deleted,e.modified=r=>{t.deleted?Tt("instance deleted - cannot call any method"):r&&r<e.getMTime()||(t.mtime=++dt,n.forEach(t=>t&&t(e)))},e.onModified=e=>{if(t.deleted)return Tt("instance deleted - cannot call any method"),null;const o=n.length;return n.push(e),function(e){return Object.freeze({unsubscribe:function(){r(e)}})}(o)},e.getMTime=()=>t.mtime,e.isA=e=>{let n=t.classHierarchy.length;for(;n--;)if(t.classHierarchy[n]===e)return!0;return!1},e.getClassName=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return t.classHierarchy[t.classHierarchy.length-1-e]},e.set=function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=!1;return Object.keys(n).forEach(i=>{const s=o?null:e["set".concat(Et(i))];s&&Array.isArray(n[i])&&s.length>1?a=s(...n[i])||a:s?a=s(n[i])||a:(-1!==["mtime"].indexOf(i)||r||xt("Warning: Set value to model directly ".concat(i,", ").concat(n[i])),a=t[i]!==n[i]||a,t[i]=n[i])}),a},e.get=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(!n.length)return t;const o={};return n.forEach(e=>{o[e]=t[e]}),o},e.getReferenceByName=e=>t[e],e.delete=()=>{Object.keys(t).forEach(e=>delete t[e]),n.forEach((e,t)=>r(t)),t.deleted=!0},e.getState=()=>{if(t.deleted)return null;const n=u(u({},t),{},{vtkClass:e.getClassName()});Object.keys(n).forEach(e=>{null===n[e]||void 0===n[e]||"_"===e[0]?delete n[e]:n[e].isA?n[e]=n[e].getState():Array.isArray(n[e])?n[e]=n[e].map(kt):function(e){return Object.values(Ct).some(t=>e instanceof t)}(n[e])&&(n[e]=Array.from(n[e]))});const r={};return Object.keys(n).sort().forEach(e=>{r[e]=n[e]}),r.mtime&&delete r.mtime,r},e.shallowCopy=function(n){let r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(n.getClassName()!==e.getClassName())throw new Error("Cannot ShallowCopy ".concat(n.getClassName()," into ").concat(e.getClassName()));const o=n.get(),a=Object.keys(t).sort();Object.keys(o).sort().forEach(e=>{const n=a.indexOf(e);-1===n?r&&_t("add ".concat(e," in shallowCopy")):a.splice(n,1),t[e]=o[e]}),a.length&&r&&_t("Untouched keys: ".concat(a.join(", "))),e.modified()},e.toJSON=function(){return e.getState()},e}const Vt={object:(e,t,n)=>function(){return u({},t[n.name])}};function Ft(e,t,n){n.forEach(n=>{if("object"===typeof n){const r=Vt[n.type];e["get".concat(It(n.name))]=r?r(e,t,n):()=>t[n.name]}else e["get".concat(It(n))]=()=>t[n]})}const Ut={enum(e,t,n){const r="_on".concat(It(n.name),"Changed");return o=>{if("string"===typeof o){if(void 0!==n.enum[o])return t[n.name]!==n.enum[o]&&(t[n.name]=n.enum[o],e.modified(),!0);throw Tt("Set Enum with invalid argument ".concat(n,", ").concat(o)),new RangeError("Set Enum with invalid string argument")}if("number"===typeof o){if(t[n.name]!==o){if(-1!==Object.keys(n.enum).map(e=>n.enum[e]).indexOf(o)){var a;const i=t[n.name];return t[n.name]=o,null===(a=t[r])||void 0===a||a.call(t,e,t,o,i),e.modified(),!0}throw Tt("Set Enum outside numeric range ".concat(n,", ").concat(o)),new RangeError("Set Enum outside numeric range")}return!1}throw Tt("Set Enum with invalid argument (String/Number) ".concat(n,", ").concat(o)),new TypeError("Set Enum with invalid argument (String/Number)")}},object(e,t,n){var r;1===(null===(r=n.params)||void 0===r?void 0:r.length)&&xt('Setter of type "object" with a single "param" field is not supported');const o="_on".concat(It(n.name),"Changed");return function(){for(var r,a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];let l;if(l=i.length>1&&null!==(r=n.params)&&void 0!==r&&r.length?n.params.reduce((e,t,n)=>Object.assign(e,{[t]:i[n]}),{}):i[0],!it(t[n.name],l)){var u;const r=t[n.name];return t[n.name]=l,null===(u=t[o])||void 0===u||u.call(t,e,t,l,r),e.modified(),!0}return!1}}};function zt(e){if("object"===typeof e){const t=Ut[e.type];if(t)return(n,r)=>t(n,r,e);throw Tt("No setter for field ".concat(e)),new TypeError("No setter for field")}return function(t,n){const r="_on".concat(It(e),"Changed");return function(o){if(n.deleted)return Tt("instance deleted - cannot call any method"),!1;if(n[e]!==o){var a;const i=n[e.name];return n[e]=o,null===(a=n[r])||void 0===a||a.call(n,t,n,o,i),t.modified(),!0}return!1}}}function Gt(e,t,n){n.forEach(n=>{"object"===typeof n?e["set".concat(It(n.name))]=zt(n)(e,t):e["set".concat(It(n))]=zt(n)(e,t)})}function Wt(e,t,n){Ft(e,t,n),Gt(e,t,n)}function Ht(e,t,n){n.forEach(n=>{e["get".concat(It(n))]=()=>t[n]?Array.from(t[n]):t[n],e["get".concat(It(n),"ByReference")]=()=>t[n]})}function jt(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0;n.forEach(n=>{if(t[n]&&r&&t[n].length!==r)throw new RangeError("Invalid initial number of values for array (".concat(n,")"));const a="_on".concat(It(n),"Changed");e["set".concat(It(n))]=function(){if(t.deleted)return Tt("instance deleted - cannot call any method"),!1;for(var i=arguments.length,s=new Array(i),l=0;l<i;l++)s[l]=arguments[l];let u,c=s,d=!1;if(1===c.length&&(null==c[0]||c[0].length>=0)&&(c=c[0],d=!0),null==c)u=t[n]!==c;else{if(r&&c.length!==r){if(!(c.length<r&&void 0!==o))throw new RangeError("Invalid number of values for array setter (".concat(n,")"));for(c=Array.from(c),d=!1;c.length<r;)c.push(o)}u=null==t[n]||t[n].length!==c.length;for(let e=0;!u&&e<c.length;++e)u=t[n][e]!==c[e];u&&d&&(c=Array.from(c))}if(u){var f;const r=t[n.name];t[n]=c,null===(f=t[a])||void 0===f||f.call(t,e,t,c,r),e.modified()}return u},e["set".concat(It(n),"From")]=e=>{const r=t[n];e.forEach((e,t)=>{r[t]=e})}})}function Kt(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0;Ht(e,t,n),jt(e,t,n,r,o)}function Zt(e,t,n){for(let r=0;r<n.length;r++){const e=n[r];void 0!==t[e]&&(t["_".concat(e)]=t[e],delete t[e])}}function qt(e,t,n,r){function o(n){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;t.deleted?Tt("instance deleted - cannot call any method"):r>=t.numberOfInputs?Tt("algorithm ".concat(e.getClassName()," only has ").concat(t.numberOfInputs," input ports. To add more input ports, use addInputData()")):(t.inputData[r]!==n||t.inputConnection[r])&&(t.inputData[r]=n,t.inputConnection[r]=null,e.modified&&e.modified())}function a(n){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(t.deleted)Tt("instance deleted - cannot call any method");else{if(r>=t.numberOfInputs){let n="algorithm ".concat(e.getClassName()," only has ");return n+="".concat(t.numberOfInputs),n+=" input ports. To add more input ports, use addInputConnection()",void Tt(n)}t.inputData[r]=null,t.inputConnection[r]=n}}function i(){let e=t.numberOfInputs;for(;e&&!t.inputData[e-1]&&!t.inputConnection[e-1];)e--;return e===t.numberOfInputs&&t.numberOfInputs++,e}function s(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return t.deleted?(Tt("instance deleted - cannot call any method"),null):(e.shouldUpdate()&&e.update(),t.output[n])}if(t.inputData?t.inputData=t.inputData.map(ut):t.inputData=[],t.inputConnection?t.inputConnection=t.inputConnection.map(ut):t.inputConnection=[],t.output?t.output=t.output.map(ut):t.output=[],t.inputArrayToProcess?t.inputArrayToProcess=t.inputArrayToProcess.map(ut):t.inputArrayToProcess=[],t.numberOfInputs=n,e.shouldUpdate=()=>{const n=e.getMTime();let o=1/0,a=r;for(;a--;){if(!t.output[a]||t.output[a].isDeleted())return!0;const e=t.output[a].getMTime();if(e<n)return!0;e<o&&(o=e)}for(a=t.numberOfInputs;a--;){var i,s;if(null!==(i=t.inputConnection[a])&&void 0!==i&&i.filter.shouldUpdate()||(null===(s=e.getInputData(a))||void 0===s?void 0:s.getMTime())>o)return!0}return!1},t.numberOfInputs){let n=t.numberOfInputs;for(;n--;)t.inputData.push(null),t.inputConnection.push(null);e.setInputData=o,e.setInputConnection=a,e.addInputData=function(e){t.deleted?Tt("instance deleted - cannot call any method"):o(e,i())},e.addInputConnection=function(e){t.deleted?Tt("instance deleted - cannot call any method"):a(e,i())},e.getInputData=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return t.inputConnection[e]&&(t.inputData[e]=t.inputConnection[e]()),t.inputData[e]},e.getInputConnection=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return t.inputConnection[e]}}r&&(e.getOutputData=s,e.getOutputPort=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const n=()=>s(t);return n.filter=e,n}),e.update=()=>{const n=[];if(t.numberOfInputs){let r=0;for(;r<t.numberOfInputs;)n[r]=e.getInputData(r),r++}e.requestData&&!e.isDeleted()&&e.shouldUpdate()&&e.requestData(n,t.output)},e.getNumberOfInputPorts=()=>t.numberOfInputs,e.getNumberOfOutputPorts=()=>r||t.output.length,e.getInputArrayToProcess=e=>{const n=t.inputArrayToProcess[e],r=t.inputData[e];return n&&r?r["get".concat(n.fieldAssociation)]().getArray(n.arrayName):null},e.setInputArrayToProcess=function(e,n,r){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"Scalars";for(;t.inputArrayToProcess.length<e;)t.inputArrayToProcess.push(null);t.inputArrayToProcess[e]={arrayName:n,fieldAssociation:r,attributeType:o}}}const Xt=Symbol("Event abort");function Yt(e,t,n){const r=[],o=e.delete;let a=1;function i(e){for(let t=0;t<r.length;++t){const[n]=r[t];if(n===e)return void r.splice(t,1)}}e["invoke".concat(It(n))]=function(){if(t.deleted)return void Tt("instance deleted - cannot call any method");const n=r.slice();for(let t=0;t<n.length;++t){const[,r,o]=n[t];if(r)if(o<0)setTimeout(()=>r.apply(e,arguments),1-o);else{if(r.apply(e,arguments)===Xt)break}}},e["on".concat(It(n))]=function(e){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!e.apply)return console.error("Invalid callback for event ".concat(n)),null;if(t.deleted)return Tt("instance deleted - cannot call any method"),null;const s=a++;return r.push([s,e,o]),r.sort((e,t)=>t[2]-e[2]),function(e){return Object.freeze({unsubscribe:function(){i(e)}})}(s)},e.delete=()=>{o(),r.forEach(e=>{let[t]=e;return i(t)})}}function Qt(e,t){const n=function(){const t={};return e(t,{},arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),Object.freeze(t)};return t&&ut.register(t,n),n}function $t(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.filter(e=>!!e).map(e=>e(...n))}}function Jt(e){return e&&e.isA&&e.isA("vtkObject")}function en(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];if(Jt(e)){if(r.indexOf(e)>=0)return n;r.push(e);const o=t(e);void 0!==o&&n.push(o);const a=e.get();Object.keys(a).forEach(e=>{const o=a[e];Array.isArray(o)?o.forEach(e=>{en(e,t,n,r)}):en(o,t,n,r)})}return n}function tn(e,t,n){var r=this;let o;const a=function(){for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];const l=r,u=n&&!o;clearTimeout(o),o=setTimeout(()=>{o=null,n||e.apply(l,i)},t),u&&e.apply(l,i)};return a.cancel=()=>clearTimeout(o),a}function nn(e,t){let n=!1,r=null;function o(){n=!1,null!==r&&(a(...r),r=null)}function a(){for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];n?r=i:(n=!0,e(...i),setTimeout(o,t))}return a}function rn(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t.keystore=Object.assign(t.keystore||{},n),e.setKey=(e,n)=>{t.keystore[e]=n},e.getKey=e=>t.keystore[e],e.getAllKeys=()=>Object.keys(t.keystore),e.deleteKey=e=>delete t.keystore[e],e.clearKeystore=()=>e.getAllKeys().forEach(e=>delete t.keystore[e])}let on=1;const an="__root__";function sn(e,t){rn(e,t);const n=e.delete;t.proxyId="".concat(on++),t.ui=JSON.parse(JSON.stringify(t.ui||[])),Ft(e,t,["proxyId","proxyGroup","proxyName"]),Wt(e,t,["proxyManager"]);const r={},o={};function a(e,t){o[t]||(o[t]=[]);const n=o[t];for(let o=0;o<e.length;o++)n.push(e[o].name),r[e[o].name]=e[o],e[o].children&&e[o].children.length&&a(e[o].children,e[o].name)}function i(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:an;const r=[],a=t.proxyId,s=function(){return o[arguments.length>0&&void 0!==arguments[0]?arguments[0]:an]}(n)||[];for(let t=0;t<s.length;t++){const n=s[t],o=e["get".concat(It(n))],l={id:a,name:n,value:o?o():void 0},u=i(n);u.length&&(l.children=u),r.push(l)}return r}a(t.ui,an),e.updateUI=n=>{t.ui=JSON.parse(JSON.stringify(n||[])),Object.keys(r).forEach(e=>delete r[e]),Object.keys(o).forEach(e=>delete o[e]),a(t.ui,an),e.modified()},e.updateProxyProperty=(e,t)=>{const n=r[e];n?Object.assign(n,t):r[e]=u({},t)},e.activate=()=>{if(t.proxyManager){const n="setActive".concat(It(e.getProxyGroup().slice(0,-1)));t.proxyManager[n]&&t.proxyManager[n](e)}},t.propertyLinkSubscribers={},e.registerPropertyLinkForGC=(e,n)=>{n in t.propertyLinkSubscribers||(t.propertyLinkSubscribers[n]=[]),t.propertyLinkSubscribers[n].push(e)},e.gcPropertyLinks=n=>{const r=t.propertyLinkSubscribers[n]||[];for(;r.length;)r.pop().unbind(e)},t.propertyLinkMap={},e.getPropertyLink=function(e){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t.propertyLinkMap[e])return t.propertyLinkMap[e];let r=null;const o=[];let a=0,i=!1;function s(n){let s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(i)return null;const l=[];let u=null;for(a=o.length;a--;){const e=o[a];e.instance===n?u=e:l.push(e)}if(!u)return null;const c=u.instance["get".concat(It(u.propertyName))]();if(!function(e,t){if(e===t)return!0;if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}return!1}(c,r)||s){for(r=c,i=!0;l.length;){const e=l.pop();e.instance.set({[e.propertyName]:r})}i=!1}return t.propertyLinkMap[e].persistent&&(t.propertyLinkMap[e].value=c),c}function l(e,t){const n=[];for(a=o.length;a--;){const r=o[a];r.instance!==e||r.propertyName!==t&&void 0!==t||(r.subscription.unsubscribe(),n.push(a))}for(;n.length;)o.splice(n.pop(),1)}const u={bind:function(n,r){let a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=n.onModified(s),u=o[0];return o.push({instance:n,propertyName:r,subscription:i}),a&&(t.propertyLinkMap[e].persistent&&void 0!==t.propertyLinkMap[e].value?n.set({[r]:t.propertyLinkMap[e].value}):u&&s(u.instance,!0)),{unsubscribe:()=>l(n,r)}},unbind:l,unsubscribe:function(){for(;o.length;)o.pop().subscription.unsubscribe()},persistent:n};return t.propertyLinkMap[e]=u,u},e.listPropertyNames=()=>i().map(e=>e.name),e.getPropertyByName=e=>i().find(t=>t.name===e),e.getPropertyDomainByName=e=>(r[e]||{}).domain,e.getProxySection=()=>({id:t.proxyId,name:t.proxyGroup,ui:t.ui,properties:i()}),e.delete=()=>{const r=Object.keys(t.propertyLinkMap);let o=r.length;for(;o--;)t.propertyLinkMap[r[o]].unsubscribe();Object.keys(t.propertyLinkSubscribers).forEach(e.gcPropertyLinks),n()},e.getState=()=>null,Dt(function(){if(t.links)for(let n=0;n<t.links.length;n++){const{link:r,property:o,persistent:a,updateOnBind:i,type:s}=t.links[n];if("application"===s){const n=t.proxyManager.getPropertyLink(r,a);e.registerPropertyLinkForGC(n,"application"),n.bind(e,o,i)}}})}function ln(e,t,n){const r=e.delete,o=[],a=Object.keys(n);let i=a.length;for(;i--;){const r=a[i],{modelKey:s,property:l,modified:u=!0}=n[r],c=It(l),d=It(r);e["get".concat(d)]=t[s]["get".concat(c)],e["set".concat(d)]=t[s]["set".concat(c)],u&&o.push(t[s].onModified(e.modified))}e.delete=()=>{for(;o.length;)o.pop().unsubscribe();r()}}function un(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};function o(e){const n=Object.keys(e);let r=n.length;for(;r--;){const o=n[r];t[o].set(e[o])}}t.this=e;const a=Object.keys(r);let i=a.length;for(;i--;){const s=a[i];t[s]=r[s];const l=n[s];e["set".concat(It(s))]=n=>{if(n!==t[s]){t[s]=n;o(l[n]),e.modified()}}}a.length&&Ft(e,t,a)}function cn(e){let t=0,n=0,r=0,o=0;return"detail"in e&&(n=e.detail),"wheelDelta"in e&&(n=-e.wheelDelta/120),"wheelDeltaY"in e&&(n=-e.wheelDeltaY/120),"wheelDeltaX"in e&&(t=-e.wheelDeltaX/120),"axis"in e&&e.axis===e.HORIZONTAL_AXIS&&(t=n,n=0),r=10*t,o=10*n,"deltaY"in e&&(o=e.deltaY),"deltaX"in e&&(r=e.deltaX),(r||o)&&e.deltaMode&&(1===e.deltaMode?(r*=40,o*=40):(r*=800,o*=800)),r&&!t&&(t=r<1?-1:1),o&&!n&&(n=o<1?-1:1),{spinX:t,spinY:n||t,pixelX:r,pixelY:o||r}}var dn={algo:qt,capitalize:Et,chain:$t,debounce:tn,enumToString:function(e,t){return Object.keys(e).find(n=>e[n]===t)},event:Yt,EVENT_ABORT:Xt,formatBytesToProperUnit:Mt,formatNumbersWithThousandSeparator:Rt,get:Ft,getArray:Ht,getCurrentGlobalMTime:function(){return dt},getStateArrayMapFunc:kt,isVtkObject:Jt,keystore:rn,measurePromiseExecution:Bt,moveToProtected:Zt,newInstance:Qt,newTypedArray:Pt,newTypedArrayFrom:At,normalizeWheel:cn,obj:Nt,proxy:sn,proxyPropertyMapping:ln,proxyPropertyState:un,safeArrays:Lt,set:Gt,setArray:jt,setGet:Wt,setGetArray:Kt,setImmediate:Dt,setLoggerFunction:vt,throttle:nn,traverseInstanceTree:en,TYPED_ARRAYS:Ct,uncapitalize:Ot,VOID:pt,vtkDebugMacro:_t,vtkErrorMacro:Tt,vtkInfoMacro:bt,vtkLogMacro:yt,vtkOnceErrorMacro:wt,vtkWarningMacro:xt,objectSetterMap:Ut,requiredParam:ft},fn=Object.freeze({__proto__:null,requiredParam:ft,VOID:pt,setLoggerFunction:vt,vtkLogMacro:yt,vtkInfoMacro:bt,vtkDebugMacro:_t,vtkErrorMacro:Tt,vtkWarningMacro:xt,vtkOnceErrorMacro:wt,TYPED_ARRAYS:Ct,newTypedArray:Pt,newTypedArrayFrom:At,capitalize:Et,_capitalize:It,uncapitalize:Ot,formatBytesToProperUnit:Mt,formatNumbersWithThousandSeparator:Rt,setImmediateVTK:Dt,measurePromiseExecution:Bt,obj:Nt,get:Ft,set:Gt,setGet:Wt,getArray:Ht,setArray:jt,setGetArray:Kt,moveToProtected:Zt,algo:qt,EVENT_ABORT:Xt,event:Yt,newInstance:Qt,chain:$t,isVtkObject:Jt,traverseInstanceTree:en,debounce:tn,throttle:nn,keystore:rn,proxy:sn,proxyPropertyMapping:ln,proxyPropertyState:un,normalizeWheel:cn,default:dn});const{vtkErrorMacro:pn}=dn;const hn={renderable:null,myFactory:null,children:[],visited:!1};function mn(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,hn,n),dn.obj(e,t),dn.event(e,t,"event"),t._renderableChildMap=new Map,dn.get(e,t,["visited"]),dn.setGet(e,t,["_parent","renderable","myFactory"]),dn.getArray(e,t,["children"]),dn.moveToProtected(e,t,["parent"]),function(e,t){t.classHierarchy.push("vtkViewNode"),e.build=e=>{},e.render=e=>{},e.traverse=n=>{const r=n.getTraverseOperation(),o=e[r];if(o)o(n);else{e.apply(n,!0);for(let e=0;e<t.children.length;e++)t.children[e].traverse(n);e.apply(n,!1)}},e.apply=(t,n)=>{const r=e[t.getOperation()];r&&r(n,t)},e.getViewNodeFor=n=>{if(t.renderable===n)return e;for(let e=0;e<t.children.length;++e){const r=t.children[e].getViewNodeFor(n);if(r)return r}},e.getFirstAncestorOfType=e=>t._parent?t._parent.isA(e)?t._parent:t._parent.getFirstAncestorOfType(e):null,e.getLastAncestorOfType=e=>{if(!t._parent)return null;return t._parent.getLastAncestorOfType(e)||(t._parent.isA(e)?t._parent:null)},e.addMissingNode=n=>{if(!n)return;const r=t._renderableChildMap.get(n);if(void 0!==r)return r.setVisited(!0),r;const o=e.createViewNode(n);return o?(o.setParent(e),o.setVisited(!0),t._renderableChildMap.set(n,o),t.children.push(o),o):void 0},e.addMissingNodes=function(n){let r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(n&&n.length)for(let o=0;o<n.length;++o){const a=n[o],i=e.addMissingNode(a);if(r&&void 0!==i&&t.children[o]!==i)for(let e=o+1;e<t.children.length;++e)if(t.children[e]===i){t.children.splice(e,1),t.children.splice(o,0,i);break}}},e.addMissingChildren=n=>{if(n&&n.length)for(let r=0;r<n.length;++r){const o=n[r];if(-1===t.children.indexOf(o)){o.setParent(e),t.children.push(o);const n=o.getRenderable();n&&t._renderableChildMap.set(n,o)}o.setVisited(!0)}},e.removeNode=e=>{const n=t.children.findIndex(t=>t===e);if(n<0)return!1;const r=e.getRenderable();return r&&t._renderableChildMap.delete(r),e.delete(),t.children.splice(n,1),!0},e.prepareNodes=()=>{for(let e=0;e<t.children.length;++e)t.children[e].setVisited(!1)},e.setVisited=e=>{t.visited=e},e.removeUnusedNodes=()=>{let e=0;for(let n=0;n<t.children.length;++n){const r=t.children[n];if(r.getVisited())t.children[e++]=r,r.setVisited(!1);else{const e=r.getRenderable();e&&t._renderableChildMap.delete(e),r.delete()}}t.children.length=e},e.createViewNode=e=>{if(!t.myFactory)return pn("Cannot create view nodes without my own factory"),null;const n=t.myFactory.createNode(e);return n&&n.setRenderable(e),n};const n=e.delete;e.delete=()=>{for(let e=0;e<t.children.length;e++)t.children[e].delete();n()}}(e,t)}var gn={newInstance:dn.newInstance(mn,"vtkViewNode"),extend:mn,PASS_TYPES:["Build","Render"]};const vn={};function yn(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,vn,n),dn.obj(e,t),function(e,t){t.overrides||(t.overrides={}),t.classHierarchy.push("vtkViewNodeFactory"),e.createNode=n=>{if(n.isDeleted())return null;let r=0,o=n.getClassName(r++),a=!1;const i=Object.keys(t.overrides);for(;o&&!a;)-1!==i.indexOf(o)?a=!0:o=n.getClassName(r++);if(!a)return null;const s=t.overrides[o]();return s.setMyFactory(e),s}}(e,t)}var bn={newInstance:dn.newInstance(yn,"vtkViewNodeFactory"),extend:yn};const _n=Object.create(null);function Tn(e,t){_n[e]=t}const xn={};function Sn(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,xn,n),t.overrides=_n,bn.extend(e,t,n),function(e,t){t.classHierarchy.push("vtkOpenGLViewNodeFactory")}(0,t)}var wn={newInstance:dn.newInstance(Sn,"vtkOpenGLViewNodeFactory"),extend:Sn};const Cn={context:null,lastRenderer:null,keyMatrixTime:null,keyMatrices:null};function Pn(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Cn,n),gn.extend(e,t,n),t.keyMatrixTime={},Nt(t.keyMatrixTime),t.keyMatrices={normalMatrix:new Float64Array(9),vcpc:new Float64Array(16),wcvc:new Float64Array(16),wcpc:new Float64Array(16)},Wt(e,t,["context","keyMatrixTime"]),function(e,t){t.classHierarchy.push("vtkOpenGLCamera"),e.buildPass=n=>{n&&(t._openGLRenderer=e.getFirstAncestorOfType("vtkOpenGLRenderer"),t._openGLRenderWindow=t._openGLRenderer.getParent(),t.context=t._openGLRenderWindow.getContext())},e.opaquePass=e=>{if(e){const e=t._openGLRenderer.getTiledSizeAndOrigin();t.context.viewport(e.lowerLeftU,e.lowerLeftV,e.usize,e.vsize),t.context.scissor(e.lowerLeftU,e.lowerLeftV,e.usize,e.vsize)}},e.translucentPass=e.opaquePass,e.zBufferPass=e.opaquePass,e.opaqueZBufferPass=e.opaquePass,e.volumePass=e.opaquePass,e.getKeyMatrices=n=>{if(n!==t.lastRenderer||t._openGLRenderWindow.getMTime()>t.keyMatrixTime.getMTime()||e.getMTime()>t.keyMatrixTime.getMTime()||n.getMTime()>t.keyMatrixTime.getMTime()||t.renderable.getMTime()>t.keyMatrixTime.getMTime()){L(t.keyMatrices.wcvc,t.renderable.getViewMatrix()),Ie(t.keyMatrices.normalMatrix,t.keyMatrices.wcvc),Be(t.keyMatrices.normalMatrix,t.keyMatrices.normalMatrix),N(t.keyMatrices.wcvc,t.keyMatrices.wcvc);const e=t._openGLRenderer.getAspectRatio();L(t.keyMatrices.vcpc,t.renderable.getProjectionMatrix(e,-1,1)),N(t.keyMatrices.vcpc,t.keyMatrices.vcpc),z(t.keyMatrices.wcpc,t.keyMatrices.vcpc,t.keyMatrices.wcvc),t.keyMatrixTime.modified(),t.lastRenderer=n}return t.keyMatrices}}(e,t)}const An=Qt(Pn);Tn("vtkCamera",An);const{vtkDebugMacro:En}=fn;const In={context:null,_openGLRenderWindow:null,selector:null};function On(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,In,n),gn.extend(e,t,n),Ft(e,t,["shaderCache"]),Wt(e,t,["selector"]),Zt(0,t,["openGLRenderWindow"]),function(e,t){t.classHierarchy.push("vtkOpenGLRenderer"),e.buildPass=n=>{if(n){if(!t.renderable)return;e.updateLights(),e.prepareNodes(),e.addMissingNode(t.renderable.getActiveCamera()),e.addMissingNodes(t.renderable.getViewPropsWithNestedProps(),!0),e.removeUnusedNodes()}},e.updateLights=()=>{let e=0;const n=t.renderable.getLightsByReference();for(let t=0;t<n.length;++t)n[t].getSwitch()>0&&e++;return e||(En("No lights are on, creating one."),t.renderable.createLight()),e},e.zBufferPass=n=>{if(n){let n=0;const r=t.context;t.renderable.getTransparent()||(t.context.clearColor(1,0,0,1),n|=r.COLOR_BUFFER_BIT),t.renderable.getPreserveDepthBuffer()||(r.clearDepth(1),n|=r.DEPTH_BUFFER_BIT,t.context.depthMask(!0));const o=e.getTiledSizeAndOrigin();r.enable(r.SCISSOR_TEST),r.scissor(o.lowerLeftU,o.lowerLeftV,o.usize,o.vsize),r.viewport(o.lowerLeftU,o.lowerLeftV,o.usize,o.vsize),r.colorMask(!0,!0,!0,!0),n&&r.clear(n),r.enable(r.DEPTH_TEST)}},e.opaqueZBufferPass=t=>e.zBufferPass(t),e.cameraPass=t=>{t&&e.clear()},e.getAspectRatio=()=>{const e=t._parent.getSizeByReference(),n=t.renderable.getViewportByReference();return e[0]*(n[2]-n[0])/((n[3]-n[1])*e[1])},e.getTiledSizeAndOrigin=()=>{const e=t.renderable.getViewportByReference(),n=[0,0,1,1],r=e[0]-n[0],o=e[1]-n[1],a=t._parent.normalizedDisplayToDisplay(r,o),i=Math.round(a[0]),s=Math.round(a[1]),l=e[2]-n[0],u=e[3]-n[1],c=t._parent.normalizedDisplayToDisplay(l,u);let d=Math.round(c[0])-i,f=Math.round(c[1])-s;return d<0&&(d=0),f<0&&(f=0),{usize:d,vsize:f,lowerLeftU:i,lowerLeftV:s}},e.clear=()=>{let n=0;const r=t.context;if(!t.renderable.getTransparent()){const e=t.renderable.getBackgroundByReference();r.clearColor(e[0],e[1],e[2],e[3]),n|=r.COLOR_BUFFER_BIT}t.renderable.getPreserveDepthBuffer()||(r.clearDepth(1),n|=r.DEPTH_BUFFER_BIT,r.depthMask(!0)),r.colorMask(!0,!0,!0,!0);const o=e.getTiledSizeAndOrigin();r.enable(r.SCISSOR_TEST),r.scissor(o.lowerLeftU,o.lowerLeftV,o.usize,o.vsize),r.viewport(o.lowerLeftU,o.lowerLeftV,o.usize,o.vsize),n&&r.clear(n),r.enable(r.DEPTH_TEST)},e.releaseGraphicsResources=()=>{null!==t.selector&&t.selector.releaseGraphicsResources(),t.renderable&&t.renderable.getViewProps().forEach(e=>{e.modified()})},e.setOpenGLRenderWindow=n=>{t._openGLRenderWindow!==n&&(e.releaseGraphicsResources(),t._openGLRenderWindow=n,t.context=null,n&&(t.context=t._openGLRenderWindow.getContext()))}}(e,t)}const Mn=Qt(On,"vtkOpenGLRenderer");Tn("vtkRenderer",Mn);const Rn={context:null,keyMatrixTime:null,keyMatrices:null,activeTextures:null};function Ln(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Rn,n),gn.extend(e,t,n),t.keyMatrixTime={},Nt(t.keyMatrixTime,{mtime:0}),t.keyMatrices={normalMatrix:ke(new Float64Array(9)),mcwc:B(new Float64Array(16))},Wt(e,t,["context"]),Ft(e,t,["activeTextures"]),function(e,t){t.classHierarchy.push("vtkOpenGLActor"),e.buildPass=n=>{if(n){t._openGLRenderWindow=e.getLastAncestorOfType("vtkOpenGLRenderWindow"),t._openGLRenderer=e.getFirstAncestorOfType("vtkOpenGLRenderer"),t.context=t._openGLRenderWindow.getContext(),e.prepareNodes(),e.addMissingNodes(t.renderable.getTextures()),e.addMissingNode(t.renderable.getMapper()),e.removeUnusedNodes(),t.ogltextures=null,t.activeTextures=null;for(let e=0;e<t.children.length;e++){const n=t.children[e];n.isA("vtkOpenGLTexture")?(t.ogltextures||(t.ogltextures=[]),t.ogltextures.push(n)):t.oglmapper=n}}},e.traverseZBufferPass=n=>{t.renderable&&t.renderable.getNestedVisibility()&&(!t._openGLRenderer.getSelector()||t.renderable.getNestedPickable())&&(e.apply(n,!0),t.oglmapper.traverse(n),e.apply(n,!1))},e.traverseOpaqueZBufferPass=t=>e.traverseOpaquePass(t),e.traverseOpaquePass=n=>{t.renderable&&t.renderable.getNestedVisibility()&&t.renderable.getIsOpaque()&&(!t._openGLRenderer.getSelector()||t.renderable.getNestedPickable())&&(e.apply(n,!0),t.oglmapper.traverse(n),e.apply(n,!1))},e.traverseTranslucentPass=n=>{!t.renderable||!t.renderable.getNestedVisibility()||t.renderable.getIsOpaque()||t._openGLRenderer.getSelector()&&!t.renderable.getNestedPickable()||(e.apply(n,!0),t.oglmapper.traverse(n),e.apply(n,!1))},e.activateTextures=()=>{if(t.ogltextures){t.activeTextures=[];for(let e=0;e<t.ogltextures.length;e++){const n=t.ogltextures[e];n.render(),n.getHandle()&&t.activeTextures.push(n)}}},e.queryPass=(e,n)=>{if(e){if(!t.renderable||!t.renderable.getVisibility())return;t.renderable.getIsOpaque()?n.incrementOpaqueActorCount():n.incrementTranslucentActorCount()}},e.zBufferPass=(t,n)=>e.opaquePass(t,n),e.opaqueZBufferPass=(t,n)=>e.opaquePass(t,n),e.opaquePass=(n,r)=>{if(n)t.context.depthMask(!0),e.activateTextures();else if(t.activeTextures)for(let e=0;e<t.activeTextures.length;e++)t.activeTextures[e].deactivate()},e.translucentPass=(n,r)=>{if(n)t.context.depthMask(t._openGLRenderer.getSelector()&&t.renderable.getNestedPickable()),e.activateTextures();else if(t.activeTextures)for(let e=0;e<t.activeTextures.length;e++)t.activeTextures[e].deactivate()},e.getKeyMatrices=()=>(t.renderable.getMTime()>t.keyMatrixTime.getMTime()&&(t.renderable.computeMatrix(),L(t.keyMatrices.mcwc,t.renderable.getMatrix()),N(t.keyMatrices.mcwc,t.keyMatrices.mcwc),t.renderable.getIsIdentity()?ke(t.keyMatrices.normalMatrix):(Ie(t.keyMatrices.normalMatrix,t.keyMatrices.mcwc),Be(t.keyMatrices.normalMatrix,t.keyMatrices.normalMatrix),De(t.keyMatrices.normalMatrix,t.keyMatrices.normalMatrix)),t.keyMatrixTime.modified()),t.keyMatrices)}(e,t)}const kn=Qt(Ln);Tn("vtkActor",kn);const Dn={context:null,activeTextures:null};function Bn(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Dn,n),gn.extend(e,t,n),Wt(e,t,["context"]),Ft(e,t,["activeTextures"]),function(e,t){t.classHierarchy.push("vtkOpenGLActor2D"),e.buildPass=n=>{if(n){if(!t.renderable)return;t._openGLRenderWindow=e.getLastAncestorOfType("vtkOpenGLRenderWindow"),t._openGLRenderer=e.getFirstAncestorOfType("vtkOpenGLRenderer"),t.context=t._openGLRenderWindow.getContext(),e.prepareNodes(),e.addMissingNodes(t.renderable.getTextures()),e.addMissingNode(t.renderable.getMapper()),e.removeUnusedNodes(),t.ogltextures=null,t.activeTextures=null;for(let e=0;e<t.children.length;e++){const n=t.children[e];n.isA("vtkOpenGLTexture")?(t.ogltextures||(t.ogltextures=[]),t.ogltextures.push(n)):t.oglmapper=n}}},e.queryPass=(e,n)=>{if(e){if(!t.renderable||!t.renderable.getVisibility())return;n.incrementOverlayActorCount()}},e.traverseOpaquePass=n=>{t.oglmapper&&t.renderable&&t.renderable.getNestedVisibility()&&t.renderable.getIsOpaque()&&(!t._openGLRenderer.getSelector()||t.renderable.getNestedPickable())&&(e.apply(n,!0),t.oglmapper.traverse(n),e.apply(n,!1))},e.traverseTranslucentPass=n=>{t.oglmapper&&t.renderable&&t.renderable.getNestedVisibility()&&!t.renderable.getIsOpaque()&&(!t._openGLRenderer.getSelector()||t.renderable.getNestedPickable())&&(e.apply(n,!0),t.oglmapper.traverse(n),e.apply(n,!1))},e.traverseOverlayPass=n=>{t.oglmapper&&t.renderable&&t.renderable.getNestedVisibility()&&(!t._openGLRenderer.getSelector()||t.renderable.getNestedPickable)&&(e.apply(n,!0),t.oglmapper.traverse(n),e.apply(n,!1))},e.activateTextures=()=>{if(t.ogltextures){t.activeTextures=[];for(let e=0;e<t.ogltextures.length;e++){const n=t.ogltextures[e];n.render(),n.getHandle()&&t.activeTextures.push(n)}}},e.opaquePass=(n,r)=>{if(n)t.context.depthMask(!0),e.activateTextures();else if(t.activeTextures)for(let e=0;e<t.activeTextures.length;e++)t.activeTextures[e].deactivate()},e.translucentPass=(n,r)=>{if(n)t.context.depthMask(!1),e.activateTextures();else if(t.activeTextures)for(let e=0;e<t.activeTextures.length;e++)t.activeTextures[e].deactivate()},e.overlayPass=(n,r)=>{if(n)t.context.depthMask(!0),e.activateTextures();else if(t.activeTextures)for(let e=0;e<t.activeTextures.length;e++)t.activeTextures[e].deactivate()}}(e,t)}const Nn=Qt(Bn);function Vn(){var e=new O(3);return O!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function Fn(e,t,n){var r=new O(3);return r[0]=e,r[1]=t,r[2]=n,r}function Un(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function zn(e,t,n,r){return e[0]=t,e[1]=n,e[2]=r,e}function Gn(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e}function Wn(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e}function Hn(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e}function jn(e,t){var n=t[0],r=t[1],o=t[2],a=n*n+r*r+o*o;return a>0&&(a=1/Math.sqrt(a)),e[0]=t[0]*a,e[1]=t[1]*a,e[2]=t[2]*a,e}function Kn(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Zn(e,t,n){var r=t[0],o=t[1],a=t[2],i=n[0],s=n[1],l=n[2];return e[0]=o*l-a*s,e[1]=a*i-r*l,e[2]=r*s-o*i,e}function qn(e,t,n){var r=t[0],o=t[1],a=t[2],i=n[3]*r+n[7]*o+n[11]*a+n[15];return i=i||1,e[0]=(n[0]*r+n[4]*o+n[8]*a+n[12])/i,e[1]=(n[1]*r+n[5]*o+n[9]*a+n[13])/i,e[2]=(n[2]*r+n[6]*o+n[10]*a+n[14])/i,e}function Xn(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}function Yn(e,t){var n=e[0],r=e[1],o=e[2],a=t[0],i=t[1],s=t[2];return Math.abs(n-a)<=I*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-i)<=I*Math.max(1,Math.abs(r),Math.abs(i))&&Math.abs(o-s)<=I*Math.max(1,Math.abs(o),Math.abs(s))}Tn("vtkActor2D",Nn);var Qn=Wn,$n=function(e,t){var n=t[0]-e[0],r=t[1]-e[1],o=t[2]-e[2];return Math.hypot(n,r,o)},Jn=function(e){var t=e[0],n=e[1],r=e[2];return Math.hypot(t,n,r)};!function(){var e=Vn()}();const er=Math.sqrt(50),tr=Math.sqrt(10),nr=Math.sqrt(2);function rr(e,t,n){const r=(t-e)/Math.max(0,n),o=Math.floor(Math.log10(r)),a=r/Math.pow(10,o),i=a>=er?10:a>=tr?5:a>=nr?2:1;let s,l,u;return o<0?(u=Math.pow(10,-o)/i,s=Math.round(e*u),l=Math.round(t*u),s/u<e&&++s,l/u>t&&--l,u=-u):(u=Math.pow(10,o)*i,s=Math.round(e/u),l=Math.round(t/u),s*u<e&&++s,l*u>t&&--l),l<s&&.5<=n&&n<2?rr(e,t,2*n):[s,l,u]}function or(e,t,n){return rr(e=+e,t=+t,n=+n)[2]}function ar(e,t){return null==e||null==t?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function ir(e,t){return null==e||null==t?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function sr(e){let t,n,r;function o(e,r){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length;if(o<a){if(0!==t(r,r))return a;do{const t=o+a>>>1;n(e[t],r)<0?o=t+1:a=t}while(o<a)}return o}return 2!==e.length?(t=ar,n=(t,n)=>ar(e(t),n),r=(t,n)=>e(t)-n):(t=e===ar||e===ir?e:lr,n=e,r=e),{left:o,center:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const a=o(e,t,n,(arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length)-1);return a>n&&r(e[a-1],t)>-r(e[a],t)?a-1:a},right:function(e,r){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length;if(o<a){if(0!==t(r,r))return a;do{const t=o+a>>>1;n(e[t],r)<=0?o=t+1:a=t}while(o<a)}return o}}}function lr(){return 0}const ur=sr(ar),cr=ur.right,dr=(ur.left,sr(function(e){return null===e?NaN:+e}).center,cr);function fr(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function pr(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function hr(){}var mr=.7,gr=1/mr,vr="\\s*([+-]?\\d+)\\s*",yr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",br="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",_r=/^#([0-9a-f]{3,8})$/,Tr=new RegExp("^rgb\\(".concat(vr,",").concat(vr,",").concat(vr,"\\)$")),xr=new RegExp("^rgb\\(".concat(br,",").concat(br,",").concat(br,"\\)$")),Sr=new RegExp("^rgba\\(".concat(vr,",").concat(vr,",").concat(vr,",").concat(yr,"\\)$")),wr=new RegExp("^rgba\\(".concat(br,",").concat(br,",").concat(br,",").concat(yr,"\\)$")),Cr=new RegExp("^hsl\\(".concat(yr,",").concat(br,",").concat(br,"\\)$")),Pr=new RegExp("^hsla\\(".concat(yr,",").concat(br,",").concat(br,",").concat(yr,"\\)$")),Ar={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Er(){return this.rgb().formatHex()}function Ir(){return this.rgb().formatRgb()}function Or(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=_r.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?Mr(t):3===n?new kr(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?Rr(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?Rr(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=Tr.exec(e))?new kr(t[1],t[2],t[3],1):(t=xr.exec(e))?new kr(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=Sr.exec(e))?Rr(t[1],t[2],t[3],t[4]):(t=wr.exec(e))?Rr(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=Cr.exec(e))?Ur(t[1],t[2]/100,t[3]/100,1):(t=Pr.exec(e))?Ur(t[1],t[2]/100,t[3]/100,t[4]):Ar.hasOwnProperty(e)?Mr(Ar[e]):"transparent"===e?new kr(NaN,NaN,NaN,0):null}function Mr(e){return new kr(e>>16&255,e>>8&255,255&e,1)}function Rr(e,t,n,r){return r<=0&&(e=t=n=NaN),new kr(e,t,n,r)}function Lr(e,t,n,r){return 1===arguments.length?((o=e)instanceof hr||(o=Or(o)),o?new kr((o=o.rgb()).r,o.g,o.b,o.opacity):new kr):new kr(e,t,n,null==r?1:r);var o}function kr(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function Dr(){return"#".concat(Fr(this.r)).concat(Fr(this.g)).concat(Fr(this.b))}function Br(){const e=Nr(this.opacity);return"".concat(1===e?"rgb(":"rgba(").concat(Vr(this.r),", ").concat(Vr(this.g),", ").concat(Vr(this.b)).concat(1===e?")":", ".concat(e,")"))}function Nr(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Vr(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Fr(e){return((e=Vr(e))<16?"0":"")+e.toString(16)}function Ur(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Gr(e,t,n,r)}function zr(e){if(e instanceof Gr)return new Gr(e.h,e.s,e.l,e.opacity);if(e instanceof hr||(e=Or(e)),!e)return new Gr;if(e instanceof Gr)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,o=Math.min(t,n,r),a=Math.max(t,n,r),i=NaN,s=a-o,l=(a+o)/2;return s?(i=t===a?(n-r)/s+6*(n<r):n===a?(r-t)/s+2:(t-n)/s+4,s/=l<.5?a+o:2-a-o,i*=60):s=l>0&&l<1?0:i,new Gr(i,s,l,e.opacity)}function Gr(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function Wr(e){return(e=(e||0)%360)<0?e+360:e}function Hr(e){return Math.max(0,Math.min(1,e||0))}function jr(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}function Kr(e,t,n,r,o){var a=e*e,i=a*e;return((1-3*e+3*a-i)*t+(4-6*a+3*i)*n+(1+3*e+3*a-3*i)*r+i*o)/6}fr(hr,Or,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Er,formatHex:Er,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return zr(this).formatHsl()},formatRgb:Ir,toString:Ir}),fr(kr,Lr,pr(hr,{brighter(e){return e=null==e?gr:Math.pow(gr,e),new kr(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?mr:Math.pow(mr,e),new kr(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new kr(Vr(this.r),Vr(this.g),Vr(this.b),Nr(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Dr,formatHex:Dr,formatHex8:function(){return"#".concat(Fr(this.r)).concat(Fr(this.g)).concat(Fr(this.b)).concat(Fr(255*(isNaN(this.opacity)?1:this.opacity)))},formatRgb:Br,toString:Br})),fr(Gr,function(e,t,n,r){return 1===arguments.length?zr(e):new Gr(e,t,n,null==r?1:r)},pr(hr,{brighter(e){return e=null==e?gr:Math.pow(gr,e),new Gr(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?mr:Math.pow(mr,e),new Gr(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,o=2*n-r;return new kr(jr(e>=240?e-240:e+120,o,r),jr(e,o,r),jr(e<120?e+240:e-120,o,r),this.opacity)},clamp(){return new Gr(Wr(this.h),Hr(this.s),Hr(this.l),Nr(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Nr(this.opacity);return"".concat(1===e?"hsl(":"hsla(").concat(Wr(this.h),", ").concat(100*Hr(this.s),"%, ").concat(100*Hr(this.l),"%").concat(1===e?")":", ".concat(e,")"))}}));const Zr=e=>()=>e;function qr(e,t){return function(n){return e+n*t}}function Xr(e){return 1===(e=+e)?Yr:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}(t,n,e):Zr(isNaN(t)?n:t)}}function Yr(e,t){var n=t-e;return n?qr(e,n):Zr(isNaN(e)?t:e)}const Qr=function e(t){var n=Xr(t);function r(e,t){var r=n((e=Lr(e)).r,(t=Lr(t)).r),o=n(e.g,t.g),a=n(e.b,t.b),i=Yr(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=o(t),e.b=a(t),e.opacity=i(t),e+""}}return r.gamma=e,r}(1);function $r(e){return function(t){var n,r,o=t.length,a=new Array(o),i=new Array(o),s=new Array(o);for(n=0;n<o;++n)r=Lr(t[n]),a[n]=r.r||0,i[n]=r.g||0,s[n]=r.b||0;return a=e(a),i=e(i),s=e(s),r.opacity=1,function(e){return r.r=a(e),r.g=i(e),r.b=s(e),r+""}}}$r(function(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),o=e[r],a=e[r+1],i=r>0?e[r-1]:2*o-a,s=r<t-1?e[r+2]:2*a-o;return Kr((n-r/t)*t,i,o,a,s)}}),$r(function(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),o=e[(r+t-1)%t],a=e[r%t],i=e[(r+1)%t],s=e[(r+2)%t];return Kr((n-r/t)*t,o,a,i,s)}});function Jr(e,t){var n,r=t?t.length:0,o=e?Math.min(r,e.length):0,a=new Array(o),i=new Array(r);for(n=0;n<o;++n)a[n]=so(e[n],t[n]);for(;n<r;++n)i[n]=t[n];return function(e){for(n=0;n<o;++n)i[n]=a[n](e);return i}}function eo(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function to(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function no(e,t){var n,r={},o={};for(n in null!==e&&"object"===typeof e||(e={}),null!==t&&"object"===typeof t||(t={}),t)n in e?r[n]=so(e[n],t[n]):o[n]=t[n];return function(e){for(n in r)o[n]=r[n](e);return o}}var ro=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,oo=new RegExp(ro.source,"g");function ao(e,t){var n,r,o,a=ro.lastIndex=oo.lastIndex=0,i=-1,s=[],l=[];for(e+="",t+="";(n=ro.exec(e))&&(r=oo.exec(t));)(o=r.index)>a&&(o=t.slice(a,o),s[i]?s[i]+=o:s[++i]=o),(n=n[0])===(r=r[0])?s[i]?s[i]+=r:s[++i]=r:(s[++i]=null,l.push({i:i,x:to(n,r)})),a=oo.lastIndex;return a<t.length&&(o=t.slice(a),s[i]?s[i]+=o:s[++i]=o),s.length<2?l[0]?function(e){return function(t){return e(t)+""}}(l[0].x):function(e){return function(){return e}}(t):(t=l.length,function(e){for(var n,r=0;r<t;++r)s[(n=l[r]).i]=n.x(e);return s.join("")})}function io(e,t){t||(t=[]);var n,r=e?Math.min(t.length,e.length):0,o=t.slice();return function(a){for(n=0;n<r;++n)o[n]=e[n]*(1-a)+t[n]*a;return o}}function so(e,t){var n,r,o=typeof t;return null==t||"boolean"===o?Zr(t):("number"===o?to:"string"===o?(n=Or(t))?(t=n,Qr):ao:t instanceof Or?Qr:t instanceof Date?eo:(r=t,!ArrayBuffer.isView(r)||r instanceof DataView?Array.isArray(t)?Jr:"function"!==typeof t.valueOf&&"function"!==typeof t.toString||isNaN(t)?no:to:io))(e,t)}function lo(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function uo(e){return+e}var co=[0,1];function fo(e){return e}function po(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:(n=isNaN(t)?NaN:.5,function(){return n});var n}function ho(e,t,n){var r=e[0],o=e[1],a=t[0],i=t[1];return o<r?(r=po(o,r),a=n(i,a)):(r=po(r,o),a=n(a,i)),function(e){return a(r(e))}}function mo(e,t,n){var r=Math.min(e.length,t.length)-1,o=new Array(r),a=new Array(r),i=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++i<r;)o[i]=po(e[i],e[i+1]),a[i]=n(t[i],t[i+1]);return function(t){var n=dr(e,t,1,r)-1;return a[n](o[n](t))}}function go(){var e,t,n,r,o,a,i=co,s=co,l=so,u=fo;function c(){var e=Math.min(i.length,s.length);return u!==fo&&(u=function(e,t){var n;return e>t&&(n=e,e=t,t=n),function(n){return Math.max(e,Math.min(t,n))}}(i[0],i[e-1])),r=e>2?mo:ho,o=a=null,d}function d(t){return null==t||isNaN(t=+t)?n:(o||(o=r(i.map(e),s,l)))(e(u(t)))}return d.invert=function(n){return u(t((a||(a=r(s,i.map(e),to)))(n)))},d.domain=function(e){return arguments.length?(i=Array.from(e,uo),c()):i.slice()},d.range=function(e){return arguments.length?(s=Array.from(e),c()):s.slice()},d.rangeRound=function(e){return s=Array.from(e),l=lo,c()},d.clamp=function(e){return arguments.length?(u=!!e||fo,c()):u!==fo},d.interpolate=function(e){return arguments.length?(l=e,c()):l},d.unknown=function(e){return arguments.length?(n=e,d):n},function(n,r){return e=n,t=r,c()}}function vo(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}var yo,bo=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function _o(e){if(!(t=bo.exec(e)))throw new Error("invalid format: "+e);var t;return new To({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function To(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function xo(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function So(e){return(e=xo(Math.abs(e)))?e[1]:NaN}function wo(e,t){var n=xo(e,t);if(!n)return e+"";var r=n[0],o=n[1];return o<0?"0."+new Array(-o).join("0")+r:r.length>o+1?r.slice(0,o+1)+"."+r.slice(o+1):r+new Array(o-r.length+2).join("0")}_o.prototype=To.prototype,To.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const Co={"%":(e,t)=>(100*e).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:function(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>wo(100*e,t),r:wo,s:function(e,t){var n=xo(e,t);if(!n)return e+"";var r=n[0],o=n[1],a=o-(yo=3*Math.max(-8,Math.min(8,Math.floor(o/3))))+1,i=r.length;return a===i?r:a>i?r+new Array(a-i+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+xo(e,Math.max(0,t+a-1))[0]},X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Po(e){return e}var Ao,Eo,Io,Oo=Array.prototype.map,Mo=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function Ro(e){var t,n,r=void 0===e.grouping||void 0===e.thousands?Po:(t=Oo.call(e.grouping,Number),n=e.thousands+"",function(e,r){for(var o=e.length,a=[],i=0,s=t[0],l=0;o>0&&s>0&&(l+s+1>r&&(s=Math.max(1,r-l)),a.push(e.substring(o-=s,o+s)),!((l+=s+1)>r));)s=t[i=(i+1)%t.length];return a.reverse().join(n)}),o=void 0===e.currency?"":e.currency[0]+"",a=void 0===e.currency?"":e.currency[1]+"",i=void 0===e.decimal?".":e.decimal+"",s=void 0===e.numerals?Po:function(e){return function(t){return t.replace(/[0-9]/g,function(t){return e[+t]})}}(Oo.call(e.numerals,String)),l=void 0===e.percent?"%":e.percent+"",u=void 0===e.minus?"\u2212":e.minus+"",c=void 0===e.nan?"NaN":e.nan+"";function d(e){var t=(e=_o(e)).fill,n=e.align,d=e.sign,f=e.symbol,p=e.zero,h=e.width,m=e.comma,g=e.precision,v=e.trim,y=e.type;"n"===y?(m=!0,y="g"):Co[y]||(void 0===g&&(g=12),v=!0,y="g"),(p||"0"===t&&"="===n)&&(p=!0,t="0",n="=");var b="$"===f?o:"#"===f&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",_="$"===f?a:/[%p]/.test(y)?l:"",T=Co[y],x=/[defgprs%]/.test(y);function S(e){var o,a,l,f=b,S=_;if("c"===y)S=T(e)+S,e="";else{var w=(e=+e)<0||1/e<0;if(e=isNaN(e)?c:T(Math.abs(e),g),v&&(e=function(e){e:for(var t,n=e.length,r=1,o=-1;r<n;++r)switch(e[r]){case".":o=t=r;break;case"0":0===o&&(o=r),t=r;break;default:if(!+e[r])break e;o>0&&(o=0)}return o>0?e.slice(0,o)+e.slice(t+1):e}(e)),w&&0===+e&&"+"!==d&&(w=!1),f=(w?"("===d?d:u:"-"===d||"("===d?"":d)+f,S=("s"===y?Mo[8+yo/3]:"")+S+(w&&"("===d?")":""),x)for(o=-1,a=e.length;++o<a;)if(48>(l=e.charCodeAt(o))||l>57){S=(46===l?i+e.slice(o+1):e.slice(o))+S,e=e.slice(0,o);break}}m&&!p&&(e=r(e,1/0));var C=f.length+e.length+S.length,P=C<h?new Array(h-C+1).join(t):"";switch(m&&p&&(e=r(P+e,P.length?h-S.length:1/0),P=""),n){case"<":e=f+e+S+P;break;case"=":e=f+P+e+S;break;case"^":e=P.slice(0,C=P.length>>1)+f+e+S+P.slice(C);break;default:e=P+f+e+S}return s(e)}return g=void 0===g?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),S.toString=function(){return e+""},S}return{format:d,formatPrefix:function(e,t){var n=d(((e=_o(e)).type="f",e)),r=3*Math.max(-8,Math.min(8,Math.floor(So(t)/3))),o=Math.pow(10,-r),a=Mo[8+r/3];return function(e){return n(o*e)+a}}}}function Lo(e,t,n,r){var o,a=function(e,t,n){n=+n;const r=(t=+t)<(e=+e),o=r?or(t,e,n):or(e,t,n);return(r?-1:1)*(o<0?1/-o:o)}(e,t,n);switch((r=_o(null==r?",f":r)).type){case"s":var i=Math.max(Math.abs(e),Math.abs(t));return null!=r.precision||isNaN(o=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(So(t)/3)))-So(Math.abs(e)))}(a,i))||(r.precision=o),Io(r,i);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(o=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,So(t)-So(e))+1}(a,Math.max(Math.abs(e),Math.abs(t))))||(r.precision=o-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(o=function(e){return Math.max(0,-So(Math.abs(e)))}(a))||(r.precision=o-2*("%"===r.type))}return Eo(r)}function ko(e){var t=e.domain;return e.ticks=function(e){var n=t();return function(e,t,n){if(!((n=+n)>0))return[];if((e=+e)===(t=+t))return[e];const r=t<e,[o,a,i]=r?rr(t,e,n):rr(e,t,n);if(!(a>=o))return[];const s=a-o+1,l=new Array(s);if(r)if(i<0)for(let u=0;u<s;++u)l[u]=(a-u)/-i;else for(let u=0;u<s;++u)l[u]=(a-u)*i;else if(i<0)for(let u=0;u<s;++u)l[u]=(o+u)/-i;else for(let u=0;u<s;++u)l[u]=(o+u)*i;return l}(n[0],n[n.length-1],null==e?10:e)},e.tickFormat=function(e,n){var r=t();return Lo(r[0],r[r.length-1],null==e?10:e,n)},e.nice=function(n){null==n&&(n=10);var r,o,a=t(),i=0,s=a.length-1,l=a[i],u=a[s],c=10;for(u<l&&(o=l,l=u,u=o,o=i,i=s,s=o);c-- >0;){if((o=or(l,u,n))===r)return a[i]=l,a[s]=u,t(a);if(o>0)l=Math.floor(l/o)*o,u=Math.ceil(u/o)*o;else{if(!(o<0))break;l=Math.ceil(l*o)/o,u=Math.floor(u*o)/o}r=o}return e},e}function Do(){var e=go()(fo,fo);return e.copy=function(){return t=e,Do().domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown());var t},vo.apply(e,arguments),ko(e)}Ao=Ro({thousands:",",grouping:[3],currency:["$",""]}),Eo=Ao.format,Io=Ao.formatPrefix;var Bo=n(334);const No=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],Vo=[1,0,0,0,1,0,0,0,1],Fo=1e-6,Uo=1e-12;const{vtkErrorMacro:zo,vtkWarningMacro:Go}=dn;let Wo=0;function Ho(e){return()=>zo("vtkMath::".concat(e," - NOT IMPLEMENTED"))}function jo(e,t,n,r){let o;for(let a=0;a<t;a++)o=e[n*t+a],e[n*t+a]=e[r*t+a],e[r*t+a]=o}function Ko(e,t,n,r){let o;for(let a=0;a<t;a++)o=e[a*t+n],e[a*t+n]=e[a*t+r],e[a*t+r]=o}function Zo(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3;const t=Array(e);for(let n=0;n<e;++n)t[n]=0;return t}const qo=()=>Math.PI;function Xo(e,t){return t>1023?e*2**1023*2**(t-1023):t<-1074?5e-324*e*2**(t+1074):e*2**t}function Yo(e){return e/180*Math.PI}function Qo(e){return 180*e/Math.PI}const{round:$o,floor:Jo,ceil:ea,min:ta,max:na}=Math;function ra(e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=1/0;for(let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=e.length;r<o;r+=t)e[r]<n&&(n=e[r]);return n}function oa(e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=-1/0;for(let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=e.length;r<o;r+=t)n<e[r]&&(n=e[r]);return n}function aa(e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=1/0,r=-1/0;for(let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=e.length;o<a;o+=t)e[o]<n&&(n=e[o]),r<e[o]&&(r=e[o]);return[n,r]}const ia=Ho("ceilLog2"),sa=Ho("factorial");function la(e){let t=1;for(;t<e;)t*=2;return t}function ua(e){return e===la(e)}function ca(e,t){let n=1;for(let r=1;r<=t;++r)n*=(e-r+1)/r;return Math.floor(n)}function da(e,t){if(e<t)return 0;const n=Zo(t);for(let r=0;r<t;++r)n[r]=r;return n}function fa(e,t,n){let r=0;for(let o=t-1;o>=0;--o)if(n[o]<e-t+o){let e=n[o]+1;for(;o<t;)n[o++]=e++;r=1;break}return r}function pa(e){Bo("".concat(e),{global:!0}),Wo=e}function ha(){return Wo}function ma(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return e+((arguments.length>1&&void 0!==arguments[1]?arguments[1]:1)-e)*Math.random()}const ga=Ho("gaussian");function va(e,t,n){return n[0]=e[0]+t[0],n[1]=e[1]+t[1],n[2]=e[2]+t[2],n}function ya(e,t,n){return n[0]=e[0]-t[0],n[1]=e[1]-t[1],n[2]=e[2]-t[2],n}function ba(e,t){return e[0]*=t,e[1]*=t,e[2]*=t,e}function _a(e,t){return e[0]*=t,e[1]*=t,e}function Ta(e,t,n,r){return r[0]=e[0]+t[0]*n,r[1]=e[1]+t[1]*n,r[2]=e[2]+t[2]*n,r}function xa(e,t,n,r){return r[0]=e[0]+t[0]*n,r[1]=e[1]+t[1]*n,r}function Sa(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function wa(e,t,n){n[0]=e[0]*t[0],n[1]=e[0]*t[1],n[2]=e[0]*t[2],n[3]=e[1]*t[0],n[4]=e[1]*t[1],n[5]=e[1]*t[2],n[6]=e[2]*t[0],n[7]=e[2]*t[1],n[8]=e[2]*t[2]}function Ca(e,t,n){const r=e[1]*t[2]-e[2]*t[1],o=e[2]*t[0]-e[0]*t[2],a=e[0]*t[1]-e[1]*t[0];return n[0]=r,n[1]=o,n[2]=a,n}function Pa(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;switch(t){case 1:return Math.abs(e);case 2:return Math.sqrt(e[0]*e[0]+e[1]*e[1]);case 3:return Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);default:{let n=0;for(let r=0;r<t;r++)n+=e[r]*e[r];return Math.sqrt(n)}}}function Aa(e){const t=Pa(e);return 0!==t&&(e[0]/=t,e[1]/=t,e[2]/=t),t}function Ea(e){const t=Pa(e,3);return 0!==t&&(e[0]/=t,e[1]/=t,e[2]/=t,e[3]/=t),t}function Ia(e,t,n,r){const o=e[0]*e[0],a=e[1]*e[1],i=e[2]*e[2],s=Math.sqrt(o+a+i);let l,u,c;o>a&&o>i?(l=0,u=1,c=2):a>i?(l=1,u=2,c=0):(l=2,u=0,c=1);const d=e[l]/s,f=e[u]/s,p=e[c]/s,h=Math.sqrt(d*d+p*p);if(0!==r){const e=Math.sin(r),o=Math.cos(r);t&&(t[l]=(p*o-d*f*e)/h,t[u]=e*h,t[c]=(-d*o-f*p*e)/h),n&&(n[l]=(-p*e-d*f*o)/h,n[u]=o*h,n[c]=(d*e-f*p*o)/h)}else t&&(t[l]=p/h,t[u]=0,t[c]=-d/h),n&&(n[l]=-d*f/h,n[u]=h,n[c]=-f*p/h)}function Oa(e,t,n){const r=Sa(t,t);if(0===r)return n[0]=0,n[1]=0,n[2]=0,!1;const o=Sa(e,t)/r;for(let a=0;a<3;a++)n[a]=t[a];return ba(n,o),!0}function Ma(e,t){return e[0]*t[0]+e[1]*t[1]}function Ra(e,t,n){const r=Ma(t,t);if(0===r)return n[0]=0,n[1]=0,!1;const o=Ma(e,t)/r;for(let a=0;a<2;a++)n[a]=t[a];return _a(n,o),!0}function La(e,t){return(e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1])+(e[2]-t[2])*(e[2]-t[2])}function ka(e,t){const n=[0,0,0];return Ca(e,t,n),Math.atan2(Pa(n),Sa(e,t))}function Da(e,t,n){const r=Math.abs(e-n);return 1/Math.sqrt(2*Math.PI*t)*Math.exp(-(r**2)/(2*t))}function Ba(e,t,n){const r=Math.abs(e-n);return Math.exp(-(r**2)/(2*t))}function Na(e,t,n){n[0]=e[0]*t[0],n[1]=e[0]*t[1],n[2]=e[1]*t[0],n[3]=e[1]*t[1]}function Va(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function Fa(e){const t=Va(e);return 0!==t&&(e[0]/=t,e[1]/=t),t}function Ua(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 2===t.length?t[0][0]*t[1][1]-t[1][0]*t[0][1]:4===t.length?t[0]*t[3]-t[1]*t[2]:Number.NaN}function za(e,t){let n,r,o;const a=[0,0,0];for(let i=0;i<3;i++)o=Math.abs(e[3*i]),(r=Math.abs(e[3*i+1]))>o&&(o=r),(r=Math.abs(e[3*i+2]))>o&&(o=r),a[i]=1/o;o=a[0]*Math.abs(e[0]),n=0,(r=a[1]*Math.abs(e[3]))>=o&&(o=r,n=1),(r=a[2]*Math.abs(e[6]))>=o&&(n=2),0!==n&&(jo(e,3,n,0),a[n]=a[0]),t[0]=n,e[3]/=e[0],e[6]/=e[0],e[4]-=e[3]*e[1],e[7]-=e[6]*e[1],o=a[1]*Math.abs(e[4]),n=1,(r=a[2]*Math.abs(e[7]))>=o&&(n=2,jo(e,3,1,2),a[2]=a[1]),t[1]=n,e[7]/=e[4],e[5]-=e[3]*e[2],e[8]-=e[6]*e[2]+e[7]*e[5],t[2]=2}function Ga(e,t,n){let r=n[t[0]];n[t[0]]=n[0],n[0]=r,r=n[t[1]],n[t[1]]=n[1],n[1]=r-e[3]*n[0],r=n[t[2]],n[t[2]]=n[2],n[2]=r-e[6]*n[0]-e[7]*n[1],n[2]/=e[8],n[1]=(n[1]-e[5]*n[2])/e[4],n[0]=(n[0]-e[1]*n[1]-e[2]*n[2])/e[0]}function Wa(e,t,n){const r=e[0],o=e[1],a=e[2],i=e[3],s=e[4],l=e[5],u=e[6],c=e[7],d=e[8],f=+Ua(s,c,l,d),p=-Ua(i,u,l,d),h=+Ua(i,u,s,c),m=-Ua(o,c,a,d),g=+Ua(r,u,a,d),v=-Ua(r,u,o,c),y=+Ua(o,s,a,l),b=-Ua(r,i,a,l),_=+Ua(r,i,o,s),T=r*f+o*p+a*h,x=f*t[0]+m*t[1]+y*t[2],S=p*t[0]+g*t[1]+b*t[2],w=h*t[0]+v*t[1]+_*t[2];n[0]=x/T,n[1]=S/T,n[2]=w/T}function Ha(e,t,n){const r=e[0]*t[0]+e[1]*t[1]+e[2]*t[2],o=e[3]*t[0]+e[4]*t[1]+e[5]*t[2],a=e[6]*t[0]+e[7]*t[1]+e[8]*t[2];n[0]=r,n[1]=o,n[2]=a}function ja(e,t,n){const r=[...e],o=[...t];for(let a=0;a<3;a++)n[a]=r[0]*o[a]+r[1]*o[a+3]+r[2]*o[a+6],n[a+3]=r[3]*o[a]+r[4]*o[a+3]+r[5]*o[a+6],n[a+6]=r[6]*o[a]+r[7]*o[a+3]+r[8]*o[a+6]}function Ka(e,t,n,r,o,a,i){r!==o&&zo("Number of columns of A must match number of rows of B.");const s=[...e],l=[...t];for(let u=0;u<n;u++)for(let e=0;e<a;e++){i[u*a+e]=0;for(let t=0;t<r;t++)i[u*a+e]+=s[u*r+t]*l[e+a*t]}}function Za(e,t){let n;n=e[3],t[3]=e[1],t[1]=n,n=e[6],t[6]=e[2],t[2]=n,n=e[7],t[7]=e[5],t[5]=n,t[0]=e[0],t[4]=e[4],t[8]=e[8]}function qa(e,t){const n=e[0],r=e[1],o=e[2],a=e[3],i=e[4],s=e[5],l=e[6],u=e[7],c=e[8],d=+Ua(i,u,s,c),f=-Ua(a,l,s,c),p=+Ua(a,l,i,u),h=-Ua(r,u,o,c),m=+Ua(n,l,o,c),g=-Ua(n,l,r,u),v=+Ua(r,i,o,s),y=-Ua(n,a,o,s),b=+Ua(n,a,r,i),_=n*d+r*f+o*p;0===_&&Go("Matrix has 0 determinant"),t[0]=d/_,t[3]=f/_,t[6]=p/_,t[1]=h/_,t[4]=m/_,t[7]=g/_,t[2]=v/_,t[5]=y/_,t[8]=b/_}function Xa(e){return e[0]*e[4]*e[8]+e[3]*e[7]*e[2]+e[6]*e[1]*e[5]-e[0]*e[7]*e[5]-e[3]*e[1]*e[8]-e[6]*e[4]*e[2]}function Ya(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Fo;if(e.length!==t.length)return!1;return e.every(function(e,r){return Math.abs(e-t[r])<=n})}const Qa=Ya;function $a(e){for(let t=0;t<3;t++)e[3*t]=e[3*t+1]=e[3*t+2]=0,e[3*t+t]=1}function Ja(e,t){for(let n=0;n<e;n++){for(let r=0;r<e;r++)t[n*e+r]=0;t[n*e+n]=1}return t}function ei(e){return Qa(e,No,arguments.length>1&&void 0!==arguments[1]?arguments[1]:Fo)}function ti(e){return Qa(e,Vo,arguments.length>1&&void 0!==arguments[1]?arguments[1]:Fo)}function ni(e,t){const n=e[0]*e[0],r=e[0]*e[1],o=e[0]*e[2],a=e[0]*e[3],i=e[1]*e[1],s=e[2]*e[2],l=e[3]*e[3],u=e[1]*e[2],c=e[1]*e[3],d=e[2]*e[3],f=i+s+l;let p=1/(n+f);const h=(n-f)*p;p*=2,t[0]=i*p+h,t[3]=(u+a)*p,t[6]=(c-o)*p,t[1]=(u-a)*p,t[4]=s*p+h,t[7]=(d+r)*p,t[2]=(c+o)*p,t[5]=(d-r)*p,t[8]=l*p+h}function ri(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!"".concat(e).includes("e"))return+"".concat(Math.round("".concat(e,"e+").concat(t)),"e-").concat(t);const n="".concat(e).split("e");let r="";return+n[1]+t>0&&(r="+"),+"".concat(Math.round("".concat(+n[0],"e").concat(r).concat(+n[1]+t)),"e-").concat(t)}function oi(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return t[0]=ri(e[0],n),t[1]=ri(e[1],n),t[2]=ri(e[2],n),t}function ai(e,t,n,r){let o,a,i,s,l,u,c,d,f,p,h,m,g,v,y,b;const _=Zo(t),T=Zo(t),x=(e,t,n)=>{v=e[t],g=e[n],e[t]=v-m*(g+v*p),e[n]=g+m*(v-g*p)};for(Ja(t,r),l=0;l<t;l++)_[l]=n[l]=e[l+l*t],T[l]=0;for(o=0;o<20;o++){for(h=0,l=0;l<t-1;l++)for(s=l+1;s<t;s++)h+=Math.abs(e[l*t+s]);if(0===h)break;for(c=o<3?.2*h/(t*t):0,l=0;l<t-1;l++)for(s=l+1;s<t;s++)if(v=100*Math.abs(e[l*t+s]),o>3&&Math.abs(n[l])+v===Math.abs(n[l])&&Math.abs(n[s])+v===Math.abs(n[s]))e[l*t+s]=0;else if(Math.abs(e[l*t+s])>c){for(g=n[s]-n[l],Math.abs(g)+v===Math.abs(g)?f=e[l*t+s]/g:(d=.5*g/e[l*t+s],f=1/(Math.abs(d)+Math.sqrt(1+d*d)),d<0&&(f=-f)),y=1/Math.sqrt(1+f*f),m=f*y,p=m/(1+y),g=f*e[l*t+s],T[l]-=g,T[s]+=g,n[l]-=g,n[s]+=g,e[l*t+s]=0,a=0;a<=l-1;a++)x(e,a*t+l,a*t+s);for(a=l+1;a<=s-1;a++)x(e,l*t+a,a*t+s);for(a=s+1;a<t;a++)x(e,l*t+a,s*t+a);for(a=0;a<t;a++)x(r,a*t+l,a*t+s)}for(l=0;l<t;l++)_[l]+=T[l],n[l]=_[l],T[l]=0}if(o>=20)return Go("vtkMath::Jacobi: Error extracting eigenfunctions"),0;for(a=0;a<t-1;a++){for(i=a,b=n[i],o=a+1;o<t;o++)(n[o]>=b||Math.abs(n[o]-b)<Uo)&&(i=o,b=n[i]);i!==a&&(n[i]=n[a],n[a]=b,Ko(r,t,a,i))}const S=(t>>1)+(1&t);for(u=0,o=0;o<t*t;o++)r[o]>=0&&u++;if(u<S)for(o=0;o<t;o++)r[o*t+a]*=-1;return 1}function ii(e,t){const n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];n[0]=e[0]+e[4]+e[8],n[5]=e[0]-e[4]-e[8],n[10]=-e[0]+e[4]-e[8],n[15]=-e[0]-e[4]+e[8],n[1]=n[4]=e[7]-e[5],n[2]=n[8]=e[2]-e[6],n[3]=n[12]=e[3]-e[1],n[6]=n[9]=e[3]+e[1],n[7]=n[13]=e[2]+e[6],n[11]=n[14]=e[7]+e[5];const r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];ai([...n],4,[0,0,0,0],r),t[0]=r[0],t[1]=r[4],t[2]=r[8],t[3]=r[12]}function si(e,t,n){const r=e[0]*t[0],o=e[0]*t[1],a=e[0]*t[2],i=e[0]*t[3],s=e[1]*t[0],l=e[1]*t[1],u=e[1]*t[2],c=e[1]*t[3],d=e[2]*t[0],f=e[2]*t[1],p=e[2]*t[2],h=e[2]*t[3],m=e[3]*t[0],g=e[3]*t[1],v=e[3]*t[2],y=e[3]*t[3];n[0]=r-l-p-y,n[1]=o+s+h-v,n[2]=a-c+d+g,n[3]=i+u-f+m}function li(e,t){for(let f=0;f<9;f++)t[f]=e[f];const n=Zo(3),r=Zo(3);let o;for(let f=0;f<3;f++){const e=Math.abs(t[3*f]),r=Math.abs(t[3*f+1]),a=Math.abs(t[3*f+2]);o=r>e?r:e,o=a>o?a:o,n[f]=1,0!==o&&(n[f]/=o)}const a=Math.abs(t[0])*n[0],i=Math.abs(t[3])*n[1],s=Math.abs(t[6])*n[2];r[0]=0,o=a,i>=o&&(o=i,r[0]=1),s>=o&&(r[0]=2),0!==r[0]&&(Ko(t,3,r[0],0),n[r[0]]=n[0]);const l=Math.abs(t[4])*n[1],u=Math.abs(t[7])*n[2];r[1]=1,o=l,u>=o&&(r[1]=2,Ko(t,3,1,2)),r[2]=2;let c=0;if(Xa(t)<0){c=1;for(let e=0;e<9;e++)t[e]=-t[e]}const d=Zo(4);if(ii(t,d),ni(d,t),c)for(let f=0;f<9;f++)t[f]=-t[f];1!==r[1]&&Ko(t,3,r[1],1),0!==r[0]&&Ko(t,3,r[0],0)}function ui(e,t,n){let r,o,a,i,s,l;if(ai([...e],3,t,n),t[0]!==t[1]||t[0]!==t[2]){for(Za(n,n),r=0;r<3;r++)if(t[(r+1)%3]===t[(r+2)%3]){for(l=Math.abs(n[3*r]),i=0,o=1;o<3;o++)l<(s=Math.abs(n[3*r+o]))&&(l=s,i=o);i!==r&&(s=t[i],t[i]=t[r],t[r]=s,jo(n,3,r,i)),n[3*i+i]<0&&(n[3*i]=-n[3*i],n[3*i+1]=-n[3*i+1],n[3*i+2]=-n[3*i+2]),o=(i+1)%3,a=(i+2)%3,n[3*o]=0,n[3*o+1]=0,n[3*o+2]=0,n[3*o+o]=1;const e=Ca([n[3*i],n[3*i+1],n[3*i+2]],[n[3*o],n[3*o+1],n[3*o+2]],[]);Aa(e);const u=Ca(e,[n[3*i],n[3*i+1],n[3*i+2]],[]);for(let t=0;t<3;t++)n[3*a+t]=e[t],n[3*o+t]=u[t];return void Za(n,n)}for(l=Math.abs(n[0]),i=0,r=1;r<3;r++)l<(s=Math.abs(n[3*r]))&&(l=s,i=r);if(0!==i){const e=t[i];t[i]=t[0],t[0]=e,jo(n,3,i,0)}if(Math.abs(n[4])<Math.abs(n[7])){const e=t[2];t[2]=t[1],t[1]=e,jo(n,3,1,2)}for(r=0;r<2;r++)n[3*r+r]<0&&(n[3*r]=-n[3*r],n[3*r+1]=-n[3*r+1],n[3*r+2]=-n[3*r+2]);Xa(n)<0&&(n[6]=-n[6],n[7]=-n[7],n[8]=-n[8]),Za(n,n)}else $a(n)}function ci(e,t,n,r){let o;const a=[...e],i=Xa(a);if(i<0)for(o=0;o<9;o++)a[o]=-a[o];li(a,t),Za(a,a),ja(a,t,r),ui(r,n,r),ja(t,r,t),Za(r,r),i<0&&(n[0]=-n[0],n[1]=-n[1],n[2]=-n[2])}function di(e,t,n){let r,o,a,i,s,l,u,c=0;const d=Zo(n);for(r=0;r<n;r++){for(i=0,o=0;o<n;o++)(u=Math.abs(e[r*n+o]))>i&&(i=u);if(0===i)return Go("Unable to factor linear system"),0;d[r]=1/i}for(o=0;o<n;o++){for(r=0;r<o;r++){for(s=e[r*n+o],a=0;a<r;a++)s-=e[r*n+a]*e[a*n+o];e[r*n+o]=s}for(i=0,r=o;r<n;r++){for(s=e[r*n+o],a=0;a<o;a++)s-=e[r*n+a]*e[a*n+o];e[r*n+o]=s,(l=d[r]*Math.abs(s))>=i&&(i=l,c=r)}if(o!==c){for(a=0;a<n;a++)l=e[c*n+a],e[c*n+a]=e[o*n+a],e[o*n+a]=l;d[c]=d[o]}if(t[o]=c,Math.abs(e[o*n+o])<=Uo)return Go("Unable to factor linear system"),0;if(o!==n-1)for(l=1/e[o*n+o],r=o+1;r<n;r++)e[r*n+o]*=l}return 1}function fi(e,t,n,r){let o,a,i,s,l;for(i=-1,o=0;o<r;o++){if(s=t[o],l=n[s],n[s]=n[o],i>=0)for(a=i;a<=o-1;a++)l-=e[o*r+a]*n[a];else 0!==l&&(i=o);n[o]=l}for(o=r-1;o>=0;o--){for(l=n[o],a=o+1;a<r;a++)l-=e[o*r+a]*n[a];n[o]=l/e[o*r+o]}}function pi(e,t,n){if(2===n){const n=Zo(2),r=Ua(e[0],e[1],e[2],e[3]);return 0===r?0:(n[0]=(e[3]*t[0]-e[1]*t[1])/r,n[1]=(-e[2]*t[0]+e[0]*t[1])/r,t[0]=n[0],t[1]=n[1],1)}if(1===n)return 0===e[0]?0:(t[0]/=e[0],1);const r=Zo(n);return 0===di(e,r,n)?0:(fi(e,r,t,n),1)}function hi(e,t,n){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;const o=(arguments.length>3&&void 0!==arguments[3]?arguments[3]:null)||Zo(n),a=r||Zo(n);if(0===di(e,o,n))return null;for(let i=0;i<n;i++){for(let e=0;e<n;e++)a[e]=0;a[i]=1,fi(e,o,a,n);for(let e=0;e<n;e++)t[e*n+i]=a[e]}return t}function mi(e,t){let n=+Number.MAX_VALUE,r=-Number.MAX_VALUE;for(let o=0;o<t;o++)for(let n=o;n<t;n++)Math.abs(e[o*t+n])>r&&(r=Math.abs(e[o*t+n]));for(let o=0;o<t;o++)Math.abs(e[o*t+o])<n&&(n=Math.abs(e[o*t+o]));return 0===n?Number.MAX_VALUE:r/n}function gi(e,t,n){return ai(e,3,t,n)}function vi(e,t,n,r){if(e<n)return Go("Insufficient number of samples. Underdetermined."),0;let o,a,i;const s=Zo(n*n),l=Zo(n),u=Zo(n*n);for(i=0;i<e;i++)for(o=0;o<n;o++)for(a=o;a<n;a++)s[o*n+a]+=t[i*n+o]*t[i*n+a];for(o=0;o<n;o++)for(a=0;a<o;a++)s[o*n+a]=s[a*n+o];for(ai(s,n,l,u),o=0;o<n;o++)r[o]=u[o*n+n-1];return 1}function yi(e,t,n,r,o,a){let i=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];if(e<n||e<o)return Go("Insufficient number of samples. Underdetermined."),0;const s=Zo(o);let l,u,c,d,f=1,p=0,h=0;if(i){for(c=0;c<o;c++)s[c]=1;for(u=0;u<e;u++)for(c=0;c<o;c++)Math.abs(r[u*o+c])>Uo&&(f=0,s[c]=0);if(f&&1===o)return Go("Detected homogeneous system (Y=0), calling SolveHomogeneousLeastSquares()"),vi(e,t,n,a);if(f)h=1;else for(c=0;c<o;c++)s[c]&&(h=1)}h&&(l=Zo(n),p=vi(e,t,n,l));const m=Zo(n*n),g=Zo(n*n),v=Zo(n*o);for(d=0;d<e;d++)for(u=0;u<n;u++){for(c=u;c<n;c++)m[u*n+c]+=t[d*n+u]*t[d*n+c];for(c=0;c<o;c++)v[u*o+c]+=t[d*n+u]*r[d*o+c]}for(u=0;u<n;u++)for(c=0;c<u;c++)m[u*n+c]=m[c*n+u];const y=hi(m,g,n);if(y)for(u=0;u<n;u++)for(c=0;c<o;c++)for(a[u*o+c]=0,d=0;d<n;d++)a[u*o+c]+=g[u*n+d]*v[d*o+c];if(h)for(c=0;c<o;c++)if(s[c])for(u=0;u<n;u++)a[u*o+c]=l[u*o];return h?p&&y:y}function bi(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,.5,1];switch(e.length){case 3:return t[0]=17*parseInt(e[0],16)/255,t[1]=17*parseInt(e[1],16)/255,t[2]=17*parseInt(e[2],16)/255,t;case 4:return t[0]=17*parseInt(e[1],16)/255,t[1]=17*parseInt(e[2],16)/255,t[2]=17*parseInt(e[3],16)/255,t;case 6:return t[0]=parseInt(e.substr(0,2),16)/255,t[1]=parseInt(e.substr(2,2),16)/255,t[2]=parseInt(e.substr(4,2),16)/255,t;case 7:return t[0]=parseInt(e.substr(1,2),16)/255,t[1]=parseInt(e.substr(3,2),16)/255,t[2]=parseInt(e.substr(5,2),16)/255,t;case 9:return t[0]=parseInt(e.substr(1,2),16)/255,t[1]=parseInt(e.substr(3,2),16)/255,t[2]=parseInt(e.substr(5,2),16)/255,t[3]=parseInt(e.substr(7,2),16)/255,t;default:return t}}function _i(e,t){let n,r;const[o,a,i]=e,s=1/6;let l=o,u=o;a>l?l=a:a<u&&(u=a),i>l?l=i:i<u&&(u=i);const c=l;r=c>0?(l-u)/l:0,r>0?(n=o===l?s*(a-i)/(l-u):a===l?1/3+s*(i-o)/(l-u):2/3+s*(o-a)/(l-u),n<0&&(n+=1)):n=0,t[0]=n,t[1]=r,t[2]=c}function Ti(e,t){const[n,r,o]=e,a=1/3,i=1/6,s=2/3,l=5/6;let u,c,d;n>i&&n<=a?(c=1,u=(a-n)/i,d=0):n>a&&n<=.5?(c=1,d=(n-a)/i,u=0):n>.5&&n<=s?(d=1,c=(s-n)/i,u=0):n>s&&n<=l?(d=1,u=(n-s)/i,c=0):n>l&&n<=1?(u=1,d=(1-n)/i,c=0):(u=1,c=n/i,d=0),u=r*u+(1-r),c=r*c+(1-r),d=r*d+(1-r),u*=o,c*=o,d*=o,t[0]=u,t[1]=c,t[2]=d}function xi(e,t){const[n,r,o]=e;let a=(n+16)/116,i=r/500+a,s=a-o/200;a**3>.008856?a**=3:a=(a-16/116)/7.787,i**3>.008856?i**=3:i=(i-16/116)/7.787,s**3>.008856?s**=3:s=(s-16/116)/7.787;t[0]=.9505*i,t[1]=1*a,t[2]=1.089*s}function Si(e,t){const[n,r,o]=e;let a=n/.9505,i=r/1,s=o/1.089;a>.008856?a**=1/3:a=7.787*a+16/116,i>.008856?i**=1/3:i=7.787*i+16/116,s>.008856?s**=1/3:s=7.787*s+16/116,t[0]=116*i-16,t[1]=500*(a-i),t[2]=200*(i-s)}function wi(e,t){const[n,r,o]=e;let a=3.2406*n+-1.5372*r+-.4986*o,i=-.9689*n+1.8758*r+.0415*o,s=.0557*n+-.204*r+1.057*o;a>.0031308?a=1.055*a**(1/2.4)-.055:a*=12.92,i>.0031308?i=1.055*i**(1/2.4)-.055:i*=12.92,s>.0031308?s=1.055*s**(1/2.4)-.055:s*=12.92;let l=a;l<i&&(l=i),l<s&&(l=s),l>1&&(a/=l,i/=l,s/=l),a<0&&(a=0),i<0&&(i=0),s<0&&(s=0),t[0]=a,t[1]=i,t[2]=s}function Ci(e,t){let[n,r,o]=e;n>.04045?n=((n+.055)/1.055)**2.4:n/=12.92,r>.04045?r=((r+.055)/1.055)**2.4:r/=12.92,o>.04045?o=((o+.055)/1.055)**2.4:o/=12.92,t[0]=.4124*n+.3576*r+.1805*o,t[1]=.2126*n+.7152*r+.0722*o,t[2]=.0193*n+.1192*r+.9505*o}function Pi(e,t){const n=[0,0,0];Ci(e,n),Si(n,t)}function Ai(e,t){const n=[0,0,0];xi(e,n),wi(n,t)}function Ei(e){return e[0]=1,e[1]=-1,e[2]=1,e[3]=-1,e[4]=1,e[5]=-1,e}function Ii(e){return!(e[1]-e[0]<0)}function Oi(e,t,n){return n[0]=Math.min(e[0],t[0]),n[1]=Math.max(e[0],t[0]),n[2]=Math.min(e[1],t[1]),n[3]=Math.max(e[1],t[1]),n[4]=Math.min(e[2],t[2]),n[5]=Math.max(e[2],t[2]),n}function Mi(e,t,n){return e<t?t:e>n?n:e}function Ri(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[0,0,0];return r[0]=Mi(e[0],t[0],n[0]),r[1]=Mi(e[1],t[1],n[1]),r[2]=Mi(e[2],t[2],n[2]),r}function Li(e,t){let n=0;return t[0]!==t[1]&&(n=e<t[0]?t[0]:e>t[1]?t[1]:e,n=(n-t[0])/(t[1]-t[0])),n}const ki=Ho("GetScalarTypeFittingRange"),Di=Ho("GetAdjustedScalarRange");function Bi(e,t){if(!e||!t)return 0;for(let n=0;n<6;n+=2)if(e[n]<t[n]||e[n]>t[n+1]||e[n+1]<t[n]||e[n+1]>t[n+1])return 0;return 1}function Ni(e,t,n){if(!e||!t)return 0;for(let r=0;r<6;r+=2)if(e[r]+n[r/2]<t[r]||e[r]-n[r/2]>t[r+1]||e[r+1]+n[r/2]<t[r]||e[r+1]-n[r/2]>t[r+1])return 0;return 1}function Vi(e,t,n){if(!e||!t||!n)return 0;for(let r=0;r<3;r++)if(e[r]+n[r]<t[2*r]||e[r]-n[r]>t[2*r+1])return 0;return 1}function Fi(e,t,n,r){const o=Zo(3),a=Zo(3),i=Zo(3),s=Zo(3),l=Zo(3),u=Zo(3);for(let _=0;_<3;++_)o[_]=e[_]-t[_],a[_]=t[_]-n[_],i[_]=n[_]-e[_],s[_]=-o[_],l[_]=-a[_],u[_]=-i[_];const c=Pa(s),d=Pa(l),f=Pa(i),p=Zo(3);Ca(o,a,p);const h=Pa(p),m=c*d*f/(2*h),g=2*h*h,v=d*d*Sa(o,u)/g,y=f*f*Sa(s,a)/g,b=c*c*Sa(i,l)/g;for(let _=0;_<3;++_)r[_]=v*e[_]+y*t[_]+b*n[_];return m}const Ui=1/0,zi=-1/0,Gi=e=>!Number.isFinite(e),{isFinite:Wi,isNaN:Hi}=Number,ji=Hi;function Ki(){return[].concat([Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE])}function Zi(e){let t=-1,n=-1;for(let r=0;r<e.length;r++){const o=Math.abs(e[r]);o>t&&(n=r,t=o)}return n}function qi(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;const n=new Array(t),r=new Array(t);for(let a=0;a<t;++a)n[a]=a,r[a]=a;for(let a=t-1;a>0;a--){let o=-1/0,i=0,s=0;for(let l=0;l<=a;++l){const u=n[l];for(let n=0;n<=a;++n){const a=r[n],c=Math.abs(e[u+t*a]);c>o&&(o=c,i=l,s=n)}}[n[a],n[i]]=[n[i],n[a]],[r[a],r[s]]=[r[s],r[a]]}const o=new Array(t*t).fill(0);for(let a=0;a<t;++a){const i=n[a]+t*r[a];o[i]=e[i]<0?-1:1}return o}function Xi(e){const t=Math.floor(255*e);return t>15?t.toString(16):"0".concat(t.toString(16))}function Yi(e){return"".concat(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#").concat(e.map(Xi).join(""))}function Qi(e){return Math.round(255*e)}function $i(e){return 3===e.length?"rgb(".concat(e.map(Qi).join(", "),")"):"rgba(".concat(Qi(e[0]||0),", ").concat(Qi(e[1]||0),", ").concat(Qi(e[2]||0),", ").concat(e[3]||0,")")}var Ji={Pi:qo,ldexp:Xo,radiansFromDegrees:Yo,degreesFromRadians:Qo,round:$o,floor:Jo,ceil:ea,ceilLog2:ia,min:ta,max:na,arrayMin:ra,arrayMax:oa,arrayRange:aa,isPowerOfTwo:ua,nearestPowerOfTwo:la,factorial:sa,binomial:ca,beginCombination:da,nextCombination:fa,randomSeed:pa,getSeed:ha,random:ma,gaussian:ga,add:va,subtract:ya,multiplyScalar:ba,multiplyScalar2D:_a,multiplyAccumulate:Ta,multiplyAccumulate2D:xa,dot:Sa,outer:wa,cross:Ca,norm:Pa,normalize:Aa,perpendiculars:Ia,projectVector:Oa,projectVector2D:Ra,distance2BetweenPoints:La,angleBetweenVectors:ka,gaussianAmplitude:Da,gaussianWeight:Ba,dot2D:Ma,outer2D:Na,norm2D:Va,normalize2D:Fa,determinant2x2:Ua,LUFactor3x3:za,LUSolve3x3:Ga,linearSolve3x3:Wa,multiply3x3_vect3:Ha,multiply3x3_mat3:ja,multiplyMatrix:Ka,transpose3x3:Za,invert3x3:qa,identity3x3:$a,identity:Ja,isIdentity:ei,isIdentity3x3:ti,determinant3x3:Xa,quaternionToMatrix3x3:ni,areEquals:Ya,areMatricesEqual:Qa,roundNumber:ri,roundVector:oi,matrix3x3ToQuaternion:ii,multiplyQuaternion:si,orthogonalize3x3:li,diagonalize3x3:ui,singularValueDecomposition3x3:ci,solveLinearSystem:pi,invertMatrix:hi,luFactorLinearSystem:di,luSolveLinearSystem:fi,estimateMatrixCondition:mi,jacobi:gi,jacobiN:ai,solveHomogeneousLeastSquares:vi,solveLeastSquares:yi,hex2float:bi,rgb2hsv:_i,hsv2rgb:Ti,lab2xyz:xi,xyz2lab:Si,xyz2rgb:wi,rgb2xyz:Ci,rgb2lab:Pi,lab2rgb:Ai,uninitializeBounds:Ei,areBoundsInitialized:Ii,computeBoundsFromPoints:Oi,clampValue:Mi,clampVector:Ri,clampAndNormalizeValue:Li,getScalarTypeFittingRange:ki,getAdjustedScalarRange:Di,extentIsWithinOtherExtent:Bi,boundsIsWithinOtherBounds:Ni,pointIsWithinBounds:Vi,solve3PointCircle:Fi,inf:Ui,negInf:zi,isInf:Gi,isNan:Hi,isNaN:Hi,isFinite:Wi,createUninitializedBounds:Ki,getMajorAxisIndex:Zi,getSparseOrthogonalMatrix:qi,floatToHex2:Xi,floatRGB2HexCode:Yi,float2CssRGBA:$i};function es(e,t,n){var r=t[0],o=t[1],a=t[2],i=t[3];return e[0]=n[0]*r+n[4]*o+n[8]*a+n[12]*i,e[1]=n[1]*r+n[5]*o+n[9]*a+n[13]*i,e[2]=n[2]*r+n[6]*o+n[10]*a+n[14]*i,e[3]=n[3]*r+n[7]*o+n[11]*a+n[15]*i,e}!function(){var e=function(){var e=new O(4);return O!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e}()}();function ts(){var e=new O(4);return O!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function ns(e,t,n){n*=.5;var r=Math.sin(n);return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=Math.cos(n),e}function rs(e,t,n){var r=t[0],o=t[1],a=t[2],i=t[3],s=n[0],l=n[1],u=n[2],c=n[3];return e[0]=r*c+i*s+o*u-a*l,e[1]=o*c+i*l+a*s-r*u,e[2]=a*c+i*u+r*l-o*s,e[3]=i*c-r*s-o*l-a*u,e}function os(e,t,n,r){var o,a,i,s,l,u=t[0],c=t[1],d=t[2],f=t[3],p=n[0],h=n[1],m=n[2],g=n[3];return(a=u*p+c*h+d*m+f*g)<0&&(a=-a,p=-p,h=-h,m=-m,g=-g),1-a>I?(o=Math.acos(a),i=Math.sin(o),s=Math.sin((1-r)*o)/i,l=Math.sin(r*o)/i):(s=1-r,l=r),e[0]=s*u+l*p,e[1]=s*c+l*h,e[2]=s*d+l*m,e[3]=s*f+l*g,e}var as=function(e,t,n,r){var o=new O(4);return o[0]=e,o[1]=t,o[2]=n,o[3]=r,o},is=function(e,t){var n=t[0],r=t[1],o=t[2],a=t[3],i=n*n+r*r+o*o+a*a;return i>0&&(i=1/Math.sqrt(i)),e[0]=n*i,e[1]=r*i,e[2]=o*i,e[3]=a*i,e};(function(){var e=Vn(),t=Fn(1,0,0),n=Fn(0,1,0)})(),function(){var e=ts(),t=ts()}(),function(){var e=Ee()}();const ss={};function ls(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,ss,n),dn.obj(e,t),dn.setGet(e,t,["transform"]),function(e,t){t.classHierarchy.push("vtkImplicitFunction"),e.functionValue=n=>{if(!t.transform)return e.evaluateFunction(n);const r=[];return t.transform.transformPoint(n,r),e.evaluateFunction(r)},e.evaluateFunction=e=>{dn.vtkErrorMacro("not implemented")}}(e,t)}var us={newInstance:dn.newInstance(ls,"vtkImplicitFunction"),extend:ls};const cs=1e-6,ds="coincide",fs="disjoint";function ps(e,t,n){const r=n[0]*(e[0]-t[0])+n[1]*(e[1]-t[1])+n[2]*(e[2]-t[2]);return Math.abs(r)}function hs(e,t,n,r){const o=[];ya(e,t,o);const a=Sa(n,o);r[0]=e[0]-a*n[0],r[1]=e[1]-a*n[1],r[2]=e[2]-a*n[2]}function ms(e,t,n){const r=Sa(e,t);let o=Sa(t,t);return 0===o&&(o=1),n[0]=e[0]-r*t[0]/o,n[1]=e[1]-r*t[1]/o,n[2]=e[2]-r*t[2]/o,n}function gs(e,t,n,r){const o=[];ya(e,t,o);const a=Sa(n,o),i=Sa(n,n);0!==i?(r[0]=e[0]-a*n[0]/i,r[1]=e[1]-a*n[1]/i,r[2]=e[2]-a*n[2]/i):(r[0]=e[0],r[1]=e[1],r[2]=e[2])}function vs(e,t,n,r){const o={intersection:!1,betweenPoints:!1,t:Number.MAX_VALUE,x:[]},a=[],i=[];ya(t,e,a),ya(n,e,i);const s=Sa(r,i),l=Sa(r,a);let u,c;return u=l<0?-l:l,c=s<0?-s*cs:s*cs,u<=c||(o.t=s/l,o.x[0]=e[0]+o.t*a[0],o.x[1]=e[1]+o.t*a[1],o.x[2]=e[2]+o.t*a[2],o.intersection=!0,o.betweenPoints=o.t>=0&&o.t<=1),o}function ys(e,t,n,r){const o={intersection:!1,l0:[],l1:[],error:null},a=[];Ca(t,r,a);const i=a.map(e=>Math.abs(e));if(i[0]+i[1]+i[2]<cs){const r=[];return ya(e,n,r),0===Sa(t,r)?o.error=ds:o.error=fs,o}let s;s=i[0]>i[1]&&i[0]>i[2]?"x":i[1]>i[2]?"y":"z";const l=[],u=-Sa(t,e),c=-Sa(r,n);switch(s){case"x":l[0]=0,l[1]=(c*t[2]-u*r[2])/a[0],l[2]=(u*r[1]-c*t[1])/a[0];break;case"y":l[0]=(u*r[2]-c*t[2])/a[1],l[1]=0,l[2]=(c*t[0]-u*r[0])/a[1];break;case"z":l[0]=(c*t[1]-u*r[1])/a[2],l[1]=(u*r[0]-c*t[0])/a[2],l[2]=0}return o.l0=l,va(l,a,o.l1),o.intersection=!0,o}const bs={evaluate:function(e,t,n){return e[0]*(n[0]-t[0])+e[1]*(n[1]-t[1])+e[2]*(n[2]-t[2])},distanceToPlane:ps,projectPoint:hs,projectVector:ms,generalizedProjectPoint:gs,intersectWithLine:vs,intersectWithPlane:ys,DISJOINT:fs,COINCIDE:ds};const _s={normal:[0,0,1],origin:[0,0,0]};function Ts(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,_s,n),us.extend(e,t,n),dn.setGetArray(e,t,["normal","origin"],3),function(e,t){t.classHierarchy.push("vtkPlane"),e.distanceToPlane=e=>ps(e,t.origin,t.normal),e.projectPoint=(e,n)=>{hs(e,t.origin,t.normal,n)},e.projectVector=(e,n)=>ms(e,t.normal,n),e.push=e=>{if(0!==e)for(let n=0;n<3;n++)t.origin[n]+=e*t.normal[n]},e.generalizedProjectPoint=(e,n)=>{gs(e,t.origin,t.normal,n)},e.evaluateFunction=(e,n,r)=>Array.isArray(e)?t.normal[0]*(e[0]-t.origin[0])+t.normal[1]*(e[1]-t.origin[1])+t.normal[2]*(e[2]-t.origin[2]):t.normal[0]*(e-t.origin[0])+t.normal[1]*(n-t.origin[1])+t.normal[2]*(r-t.origin[2]),e.evaluateGradient=e=>[t.normal[0],t.normal[1],t.normal[2]],e.intersectWithLine=(e,n)=>vs(e,n,t.origin,t.normal),e.intersectWithPlane=(e,n)=>ys(e,n,t.origin,t.normal)}(e,t)}var xs=u({newInstance:dn.newInstance(Ts,"vtkPlane"),extend:Ts},bs);const Ss=[Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE];function ws(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]}function Cs(e){return(null===e||void 0===e?void 0:e.length)>=6&&e[0]<=e[1]&&e[2]<=e[3]&&e[4]<=e[5]}function Ps(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function As(e){return Ps(e,Ss)}function Es(e,t,n,r){const[o,a,i,s,l,u]=e;return e[0]=o<t?o:t,e[1]=a>t?a:t,e[2]=i<n?i:n,e[3]=s>n?s:n,e[4]=l<r?l:r,e[5]=u>r?u:r,e}function Is(e,t){if(0===t.length)return e;if(Array.isArray(t[0]))for(let n=0;n<t.length;++n)Es(e,...t[n]);else for(let n=0;n<t.length;n+=3)Es(e,...t.slice(n,n+3));return e}function Os(e,t,n,r,o,a,i){const[s,l,u,c,d,f]=e;return void 0===i?(e[0]=Math.min(t[0],s),e[1]=Math.max(t[1],l),e[2]=Math.min(t[2],u),e[3]=Math.max(t[3],c),e[4]=Math.min(t[4],d),e[5]=Math.max(t[5],f)):(e[0]=Math.min(t,s),e[1]=Math.max(n,l),e[2]=Math.min(r,u),e[3]=Math.max(o,c),e[4]=Math.min(a,d),e[5]=Math.max(i,f)),e}function Ms(e,t,n,r){const[o,a,i,s,l,u]=e;return e[0]=t,e[1]=t>a?t:a,e[2]=n,e[3]=n>s?n:s,e[4]=r,e[5]=r>u?r:u,o!==t||i!==n||l!==r}function Rs(e,t,n,r){const[o,a,i,s,l,u]=e;return e[0]=t<o?t:o,e[1]=t,e[2]=n<i?n:i,e[3]=n,e[4]=r<l?r:l,e[5]=r,a!==t||s!==n||u!==r}function Ls(e,t){return null==t?function(e){const t=[0,0,0];let n=-1,r=0,o=0;for(let a=0;a<3;++a)o=e[2*a+1]-e[2*a],o>r&&(r=o,n=a),t[a]=o>0?1:0;if(n<0)return Ls(e,.5);for(let a=0;a<3;++a)if(!t[a]){const t=.005*r;e[2*a]-=t,e[2*a+1]+=t}return e}(e):(e[0]-=t,e[1]+=t,e[2]-=t,e[3]+=t,e[4]-=t,e[5]+=t,e)}function ks(e,t,n,r){return!!Cs(e)&&(t>=0?(e[0]*=t,e[1]*=t):(e[0]=t*e[1],e[1]=t*e[0]),n>=0?(e[2]*=n,e[3]*=n):(e[2]=n*e[3],e[3]=n*e[2]),r>=0?(e[4]*=r,e[5]*=r):(e[4]=r*e[5],e[5]=r*e[4]),!0)}function Ds(e){return[.5*(e[0]+e[1]),.5*(e[2]+e[3]),.5*(e[4]+e[5])]}function Bs(e,t){return e[2*t+1]-e[2*t]}function Ns(e){return[Bs(e,0),Bs(e,1),Bs(e,2)]}function Vs(e){return e.slice(0,2)}function Fs(e){return e.slice(2,4)}function Us(e){return e.slice(4,6)}function zs(e){const t=Ns(e);return t[0]>t[1]?t[0]>t[2]?t[0]:t[2]:t[1]>t[2]?t[1]:t[2]}function Gs(e){if(Cs(e)){const t=Ns(e);return t[0]*t[0]+t[1]*t[1]+t[2]*t[2]}return null}function Ws(e){const t=Gs(e);return null!==t?Math.sqrt(t):null}function Hs(e){return[e[0],e[2],e[4]]}function js(e){return[e[1],e[3],e[5]]}function Ks(e,t){return e<=0&&t>=0||e>=0&&t<=0}function Zs(e,t){return t[0]=[e[0],e[2],e[4]],t[1]=[e[0],e[2],e[5]],t[2]=[e[0],e[3],e[4]],t[3]=[e[0],e[3],e[5]],t[4]=[e[1],e[2],e[4]],t[5]=[e[1],e[2],e[5]],t[6]=[e[1],e[3],e[4]],t[7]=[e[1],e[3],e[5]],t}function qs(e,t,n){return t[0]=e[0],t[1]=e[2],t[2]=e[4],n[0]=e[1],n[1]=e[3],n[2]=e[5],t}function Xs(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];const r=Zs(e,[]);for(let o=0;o<r.length;++o)qn(r[o],r[o],t);return As(n),Is(n,r)}function Ys(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return t[0]=.5*(e[1]-e[0]),t[1]=.5*(e[3]-e[2]),t[2]=.5*(e[5]-e[4]),t}function Qs(e,t,n,r){const o=[].concat(Ss),a=e.getData();for(let i=0;i<a.length;i+=3){const e=[a[i],a[i+1],a[i+2]],s=Sa(e,t);o[0]=Math.min(s,o[0]),o[1]=Math.max(s,o[1]);const l=Sa(e,n);o[2]=Math.min(l,o[2]),o[3]=Math.max(l,o[3]);const u=Sa(e,r);o[4]=Math.min(u,o[4]),o[5]=Math.max(u,o[5])}return o}function $s(e,t,n,r,o){let a=!0;const i=[];let s=0;const l=[],u=[0,0,0];for(let c=0;c<3;c++)t[c]<e[2*c]?(i[c]=1,u[c]=e[2*c],a=!1):t[c]>e[2*c+1]?(i[c]=0,u[c]=e[2*c+1],a=!1):i[c]=2;if(a)return r[0]=t[0],r[1]=t[1],r[2]=t[2],o[0]=0,1;for(let c=0;c<3;c++)2!==i[c]&&0!==n[c]?l[c]=(u[c]-t[c])/n[c]:l[c]=-1;for(let c=0;c<3;c++)l[s]<l[c]&&(s=c);if(l[s]>1||l[s]<0)return 0;o[0]=l[s];for(let c=0;c<3;c++)if(s!==c){if(r[c]=t[c]+l[s]*n[c],r[c]<e[2*c]||r[c]>e[2*c+1])return 0}else r[c]=u[c];return 1}function Js(e,t,n){const r=[];let o=0,a=1,i=1;for(let s=4;s<=5;++s){r[2]=e[s];for(let s=2;s<=3;++s){r[1]=e[s];for(let s=0;s<=1;++s)if(r[0]=e[s],o=xs.evaluate(n,t,r),i&&(a=o>=0?1:-1,i=0),0===o||a>0&&o<0||a<0&&o>0)return 1}}return 0}function el(e,t){if(!Cs(e)||!Cs(t))return!1;const n=[0,0,0,0,0,0];let r;for(let o=0;o<3;o++)if(r=!1,t[2*o]>=e[2*o]&&t[2*o]<=e[2*o+1]?(r=!0,n[2*o]=t[2*o]):e[2*o]>=t[2*o]&&e[2*o]<=t[2*o+1]&&(r=!0,n[2*o]=e[2*o]),t[2*o+1]>=e[2*o]&&t[2*o+1]<=e[2*o+1]?(r=!0,n[2*o+1]=t[2*o+1]):e[2*o+1]>=t[2*o]&&e[2*o+1]<=t[2*o+1]&&(r=!0,n[2*o+1]=e[2*o+1]),!r)return!1;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],!0}function tl(e,t){if(!Cs(e)||!Cs(t))return!1;for(let n=0;n<3;n++)if(!(t[2*n]>=e[2*n]&&t[2*n]<=e[2*n+1])&&!(e[2*n]>=t[2*n]&&e[2*n]<=t[2*n+1])&&!(t[2*n+1]>=e[2*n]&&t[2*n+1]<=e[2*n+1])&&!(e[2*n+1]>=t[2*n]&&e[2*n+1]<=t[2*n+1]))return!1;return!0}function nl(e,t,n,r){return!(t<e[0]||t>e[1])&&(!(n<e[2]||n>e[3])&&!(r<e[4]||r>e[5]))}function rl(e,t,n){const r=[[0,1,2,3,4,5,6,7],[0,1,4,5,2,3,6,7],[0,2,4,6,1,3,5,7]],o=[0,0,0,0,0,0,0,0];let a=0;for(let d=0;d<2;d++)for(let r=2;r<4;r++)for(let i=4;i<6;i++){const s=[e[d],e[r],e[i]];o[a++]=xs.evaluate(n,t,s)}let i=2;for(;i--&&!(Ks(o[r[i][0]],o[r[i][4]])&&Ks(o[r[i][1]],o[r[i][5]])&&Ks(o[r[i][2]],o[r[i][6]])&&Ks(o[r[i][3]],o[r[i][7]])););if(i<0)return!1;const s=Math.sign(n[i]),l=Math.abs((e[2*i+1]-e[2*i])*n[i]);let u=s>0?1:0;for(let d=0;d<4;d++){if(0===l)continue;const e=Math.abs(o[r[i][d]])/l;s>0&&e<u&&(u=e),s<0&&e>u&&(u=e)}const c=(1-u)*e[2*i]+u*e[2*i+1];return s>0?e[2*i]=c:e[2*i+1]=c,!0}function ol(e,t){for(let r=0;r<3;++r)t[r]=t[r]<1?1:t[r];let n=t[0]*t[1]*t[2];for(;n>e;){for(let e=0;e<3;++e)t[e]=t[e]>1?t[e]-1:1;n=t[0]*t[1]*t[2]}}function al(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];t=t<=0?1:t;let o=0;const a=[0,0,0];let i=-1,s=0;const l=Ns(e),u=l[0]+l[1]+l[2],c=u*(.001/3);for(let m=0;m<3;++m)l[m]>s&&(i=m,s=l[m]),l[m]>c?(a[m]=1,o++):a[m]=0;const d=Hs(e),f=js(e);if(o<1)return n[0]=1,n[1]=1,n[2]=1,r[0]=d[0]-.5,r[1]=f[0]+.5,r[2]=d[1]-.5,r[3]=f[1]+.5,r[4]=d[2]-.5,r[5]=f[2]+.5,1;let p=t;p/=a[0]?l[0]/u:1,p/=a[1]?l[1]/u:1,p/=a[2]?l[2]/u:1,p**=1/o;for(let m=0;m<3;++m)n[m]=a[m]?Math.floor(p*l[m]/u):1,n[m]=n[m]<1?1:n[m];ol(t,n);const h=.5*l[i]/n[i];for(let m=0;m<3;++m)a[m]?(r[2*m]=d[m],r[2*m+1]=f[m]):(r[2*m]=d[m]-h,r[2*m+1]=f[m]+h);return n[0]*n[1]*n[2]}function il(e,t){if(e[0]>=t[0]&&e[0]<=t[1]&&e[1]>=t[2]&&e[1]<=t[3]&&e[2]>=t[4]&&e[2]<=t[5])return 0;const n=[0,0,0];return e[0]<t[0]?n[0]=t[0]-e[0]:e[0]>t[1]&&(n[0]=e[0]-t[1]),e[1]<t[2]?n[1]=t[2]-e[1]:e[1]>t[3]&&(n[1]=e[1]-t[3]),e[2]<t[4]?n[2]=t[4]-e[2]:e[2]>t[5]&&(n[2]=e[2]-t[5]),Sa(n,n)}class sl{constructor(e){this.bounds=e,this.bounds||(this.bounds=new Float64Array(Ss))}getBounds(){return this.bounds}equals(e){return ws(this.bounds,e)}isValid(){return Cs(this.bounds)}setBounds(e){return Ps(this.bounds,e)}reset(){return As(this.bounds)}addPoint(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Es(this.bounds,...t)}addPoints(e){return Is(this.bounds,e)}addBounds(e,t,n,r,o,a){return Os(this.bounds,e,t,n,r,o,a)}setMinPoint(e,t,n){return Ms(this.bounds,e,t,n)}setMaxPoint(e,t,n){return Rs(this.bounds,e,t,n)}inflate(e){return Ls(this.bounds,e)}scale(e,t,n){return ks(this.bounds,e,t,n)}getCenter(){return Ds(this.bounds)}getLength(e){return Bs(this.bounds,e)}getLengths(){return Ns(this.bounds)}getMaxLength(){return zs(this.bounds)}getDiagonalLength(){return Ws(this.bounds)}getDiagonalLength2(){return Gs(this.bounds)}getMinPoint(){return Hs(this.bounds)}getMaxPoint(){return js(this.bounds)}getXRange(){return Vs(this.bounds)}getYRange(){return Fs(this.bounds)}getZRange(){return Us(this.bounds)}getCorners(e){return Zs(this.bounds,e)}computeCornerPoints(e,t){return qs(this.bounds,e,t)}computeLocalBounds(e,t,n){return Qs(this.bounds,e,t,n)}transformBounds(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return Xs(this.bounds,e,t)}computeScale3(e){return Ys(this.bounds,e)}cutWithPlane(e,t){return rl(this.bounds,e,t)}intersectBox(e,t,n,r){return $s(this.bounds,e,t,n,r)}intersectPlane(e,t){return Js(this.bounds,e,t)}intersect(e){return el(this.bounds,e)}intersects(e){return tl(this.bounds,e)}containsPoint(e,t,n){return nl(this.bounds,e,t,n)}contains(e){return tl(this.bounds,e)}computeDivisions(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return al(this.bounds,e,t,n)}distance2ToBounds(e){return il(e,this.bounds)}}var ll=u({newInstance:function(e){const t=e&&e.bounds;return new sl(t)}},{equals:ws,isValid:Cs,setBounds:Ps,reset:As,addPoint:Es,addPoints:Is,addBounds:Os,setMinPoint:Ms,setMaxPoint:Rs,inflate:Ls,scale:ks,scaleAboutCenter:function(e,t,n,r){if(!Cs(e))return!1;const o=Ds(e);return e[0]-=o[0],e[1]-=o[0],e[2]-=o[1],e[3]-=o[1],e[4]-=o[2],e[5]-=o[2],ks(e,t,n,r),e[0]+=o[0],e[1]+=o[0],e[2]+=o[1],e[3]+=o[1],e[4]+=o[2],e[5]+=o[2],!0},getCenter:Ds,getLength:Bs,getLengths:Ns,getMaxLength:zs,getDiagonalLength:Ws,getDiagonalLength2:Gs,getMinPoint:Hs,getMaxPoint:js,getXRange:Vs,getYRange:Fs,getZRange:Us,getCorners:Zs,computeCornerPoints:qs,computeLocalBounds:Qs,transformBounds:Xs,computeScale3:Ys,cutWithPlane:rl,intersectBox:$s,intersectPlane:Js,intersect:el,intersects:tl,containsPoint:nl,contains:function(e,t){return!!tl(e,t)&&(!!nl(e,...Hs(t))&&!!nl(e,...js(t)))},computeDivisions:al,clampDivisions:ol,distance2ToBounds:il,INIT_BOUNDS:Ss});var ul={CoordinateSystem:{DISPLAY:0,WORLD:1}};const{CoordinateSystem:cl}=ul;function dl(e){return()=>dn.vtkErrorMacro("vtkProp::".concat(e," - NOT IMPLEMENTED"))}const fl={allocatedRenderTime:10,coordinateSystem:cl.WORLD,dragable:!0,estimatedRenderTime:0,paths:null,pickable:!0,renderTimeMultiplier:1,savedEstimatedRenderTime:0,textures:[],useBounds:!0,visibility:!0};function pl(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,fl,n),dn.obj(e,t),dn.get(e,t,["estimatedRenderTime","allocatedRenderTime"]),dn.setGet(e,t,["_parentProp","coordinateSystem","dragable","pickable","renderTimeMultiplier","useBounds","visibility"]),dn.moveToProtected(e,t,["parentProp"]),function(e,t){t.classHierarchy.push("vtkProp"),e.getMTime=()=>{let e=t.mtime;for(let n=0;n<t.textures.length;++n){const r=t.textures[n].getMTime();r>e&&(e=r)}return e},e.processSelectorPixelBuffers=(e,t)=>{},e.getNestedProps=()=>null,e.getActors=()=>[],e.getActors2D=()=>[],e.getVolumes=()=>[],e.pick=dl("pick"),e.hasKey=dl("hasKey"),e.getNestedVisibility=()=>t.visibility&&(!t._parentProp||t._parentProp.getNestedVisibility()),e.getNestedPickable=()=>t.pickable&&(!t._parentProp||t._parentProp.getNestedPickable()),e.getNestedDragable=()=>t.dragable&&(!t._parentProp||t._parentProp.getNestedDragable()),e.getRedrawMTime=()=>t.mtime,e.setEstimatedRenderTime=e=>{t.estimatedRenderTime=e,t.savedEstimatedRenderTime=e},e.restoreEstimatedRenderTime=()=>{t.estimatedRenderTime=t.savedEstimatedRenderTime},e.addEstimatedRenderTime=e=>{t.estimatedRenderTime+=e},e.setAllocatedRenderTime=e=>{t.allocatedRenderTime=e,t.savedEstimatedRenderTime=t.estimatedRenderTime,t.estimatedRenderTime=0},e.getSupportsSelection=()=>!1,e.getTextures=()=>t.textures,e.hasTexture=e=>-1!==t.textures.indexOf(e),e.addTexture=n=>{n&&!e.hasTexture(n)&&(t.textures=t.textures.concat(n),e.modified())},e.removeTexture=n=>{const r=t.textures.filter(e=>e!==n);t.textures.length!==r.length&&(t.textures=r,e.modified())},e.removeAllTextures=()=>{t.textures=[],e.modified()},e.setCoordinateSystemToWorld=()=>e.setCoordinateSystem(cl.WORLD),e.setCoordinateSystemToDisplay=()=>e.setCoordinateSystem(cl.DISPLAY)}(e,t)}var hl=u({newInstance:dn.newInstance(pl,"vtkProp"),extend:pl},ul);function ml(e,t){t.classHierarchy.push("vtkProp3D"),e.addPosition=n=>{t.position=t.position.map((e,t)=>e+n[t]),e.modified()},e.getOrientationWXYZ=()=>{const e=ts();oe(e,t.rotation);const n=new Float64Array(3),r=function(e,t){var n=2*Math.acos(t[3]),r=Math.sin(n/2);return r>I?(e[0]=t[0]/r,e[1]=t[1]/r,e[2]=t[2]/r):(e[0]=1,e[1]=0,e[2]=0),n}(n,e);return[Qo(r),n[0],n[1],n[2]]},e.getOrientationQuaternion=function(){return oe(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t.rotation)},e.rotateX=n=>{0!==n&&(j(t.rotation,t.rotation,Yo(n)),e.modified())},e.rotateY=n=>{0!==n&&(K(t.rotation,t.rotation,Yo(n)),e.modified())},e.rotateZ=n=>{0!==n&&(Z(t.rotation,t.rotation,Yo(n)),e.modified())},e.rotateWXYZ=(n,r,o,a)=>{if(0===n||0===r&&0===o&&0===a)return;const i=Yo(n),s=ts();ns(s,[r,o,a],i);const l=new Float64Array(16);se(l,s),z(t.rotation,t.rotation,l),e.modified()},e.rotateQuaternion=n=>{if(Math.abs(n[3])>=.999999)return;const r=se(new Float64Array(16),n);z(t.rotation,t.rotation,r),e.modified()},e.setOrientation=(n,r,o)=>(n!==t.orientation[0]||r!==t.orientation[1]||o!==t.orientation[2])&&(t.orientation=[n,r,o],B(t.rotation),e.rotateZ(o),e.rotateX(n),e.rotateY(r),e.modified(),!0),e.setOrientationFromQuaternion=n=>{const r=M();return se(r,n),!Qa(r,t.rotation)&&(t.rotation=r,e.modified(),!0)},e.setUserMatrix=n=>!Qa(t.userMatrix,n)&&(L(t.userMatrix,n),e.modified(),!0),e.getMatrix=()=>(e.computeMatrix(),t.matrix),e.computeMatrix=()=>{if(e.getMTime()>t.matrixMTime.getMTime()){B(t.matrix),t.userMatrix&&z(t.matrix,t.matrix,t.userMatrix),G(t.matrix,t.matrix,t.origin),G(t.matrix,t.matrix,t.position),z(t.matrix,t.matrix,t.rotation),W(t.matrix,t.matrix,t.scale),G(t.matrix,t.matrix,[-t.origin[0],-t.origin[1],-t.origin[2]]),N(t.matrix,t.matrix),t.isIdentity=!0;for(let e=0;e<4;++e)for(let n=0;n<4;++n)(e===n?1:0)!==t.matrix[e+4*n]&&(t.isIdentity=!1);t.matrixMTime.modified()}},e.getBoundsByReference=()=>{if(null===t.mapper)return t.bounds;const n=t.mapper.getBounds();if(!n||6!==n.length)return n;if(n[0]>n[1])return t.mapperBounds=n,t.bounds=[...ll.INIT_BOUNDS],t.boundsMTime.modified(),n;if(!t.mapperBounds||!n.every((e,r)=>n[r]===t.mapperBounds[r])||e.getMTime()>t.boundsMTime.getMTime()){dn.vtkDebugMacro("Recomputing bounds..."),t.mapperBounds=n,e.computeMatrix();const r=new Float64Array(16);N(r,t.matrix),ll.transformBounds(n,r,t.bounds),t.boundsMTime.modified()}return t.bounds},e.getBounds=()=>{const t=e.getBoundsByReference();try{return[...t]}catch(d_){return t}},e.getCenter=()=>ll.getCenter(t.bounds),e.getLength=()=>ll.getLength(t.bounds),e.getXRange=()=>ll.getXRange(t.bounds),e.getYRange=()=>ll.getYRange(t.bounds),e.getZRange=()=>ll.getZRange(t.bounds),e.getUserMatrix=()=>t.userMatrix,e.onModified(function(){e.computeMatrix()}),e.getProperty=function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;var r;null==t.properties[n]&&(t.properties[n]=null===(r=e.makeProperty)||void 0===r?void 0:r.call(e));return t.properties[n]},e.getProperties=()=>{var n;0===t.properties.length&&(t.properties[0]=null===(n=e.makeProperty)||void 0===n?void 0:n.call(e));return t.properties},e.setProperty=(e,n)=>{const r=Number.isInteger(e),[o,a]=r?[e,n]:[0,e];return t.properties[o]!==a&&(t.properties[o]=a,!0)},e.getMTime=()=>{let e=t.mtime;return t.properties.forEach(t=>{if(null!==t){const n=t.getMTime();e=n>e?n:e}}),e}}const gl={origin:[0,0,0],position:[0,0,0],orientation:[0,0,0],rotation:null,scale:[1,1,1],bounds:[...ll.INIT_BOUNDS],properties:[],userMatrix:null,userMatrixMTime:null,cachedProp3D:null,isIdentity:!0,matrixMTime:null};function vl(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,gl,n),hl.extend(e,t,n),t.matrixMTime={},dn.obj(t.matrixMTime),dn.get(e,t,["isIdentity"]),dn.getArray(e,t,["orientation"]),dn.setGetArray(e,t,["origin","position","scale"],3),dn.setGet(e,t,["properties"]),t.matrix=B(new Float64Array(16)),t.rotation=B(new Float64Array(16)),t.userMatrix=B(new Float64Array(16)),t.transform=null,ml(e,t)}var yl={newInstance:dn.newInstance(vl,"vtkProp3D"),extend:vl};const bl={FLAT:0,GOURAUD:1,PHONG:2},_l={POINTS:0,WIREFRAME:1,SURFACE:2};var Tl={Shading:bl,Representation:_l,Interpolation:bl};const{Representation:xl,Interpolation:Sl}=Tl;function wl(e){return()=>dn.vtkErrorMacro("vtkProperty::".concat(e," - NOT IMPLEMENTED"))}const Cl={color:[1,1,1],ambientColor:[1,1,1],diffuseColor:[1,1,1],specularColor:[1,1,1],edgeColor:[0,0,0],ambient:0,diffuse:1,metallic:0,roughness:.6,normalStrength:1,emission:1,baseIOR:1.45,specular:0,specularPower:1,opacity:1,interpolation:Sl.GOURAUD,representation:xl.SURFACE,edgeVisibility:!1,backfaceCulling:!1,frontfaceCulling:!1,pointSize:1,lineWidth:1,lighting:!0,shading:!1,materialName:null,ORMTexture:null,RMTexture:null};function Pl(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Cl,n),dn.obj(e,t),dn.setGet(e,t,["lighting","interpolation","ambient","diffuse","metallic","roughness","normalStrength","emission","baseIOR","specular","specularPower","opacity","edgeVisibility","lineWidth","pointSize","backfaceCulling","frontfaceCulling","representation","diffuseTexture","metallicTexture","roughnessTexture","normalTexture","ambientOcclusionTexture","emissionTexture","ORMTexture","RMTexture"]),dn.setGetArray(e,t,["ambientColor","specularColor","diffuseColor","edgeColor"],3),function(e,t){t.classHierarchy.push("vtkProperty"),e.setColor=(n,r,o)=>{Array.isArray(n)?t.color[0]===n[0]&&t.color[1]===n[1]&&t.color[2]===n[2]||(t.color[0]=n[0],t.color[1]=n[1],t.color[2]=n[2],e.modified()):t.color[0]===n&&t.color[1]===r&&t.color[2]===o||(t.color[0]=n,t.color[1]=r,t.color[2]=o,e.modified()),e.setDiffuseColor(t.color),e.setAmbientColor(t.color),e.setSpecularColor(t.color)},e.computeCompositeColor=wl("ComputeCompositeColor"),e.getColor=()=>{let e=0;t.ambient+t.diffuse+t.specular>0&&(e=1/(t.ambient+t.diffuse+t.specular));for(let n=0;n<3;n++)t.color[n]=e*(t.ambient*t.ambientColor[n]+t.diffuse*t.diffuseColor[n]+t.specular*t.specularColor[n]);return[].concat(t.color)},e.setSpecularPower=n=>{const r=1/Math.max(1,n);t.roughness===r&&t.specularPower===n||(t.specularPower=n,t.roughness=r,e.modified())},e.addShaderVariable=wl("AddShaderVariable"),e.setInterpolationToFlat=()=>e.setInterpolation(Sl.FLAT),e.setInterpolationToGouraud=()=>e.setInterpolation(Sl.GOURAUD),e.setInterpolationToPhong=()=>e.setInterpolation(Sl.PHONG),e.getInterpolationAsString=()=>dn.enumToString(Sl,t.interpolation),e.setRepresentationToWireframe=()=>e.setRepresentation(xl.WIREFRAME),e.setRepresentationToSurface=()=>e.setRepresentation(xl.SURFACE),e.setRepresentationToPoints=()=>e.setRepresentation(xl.POINTS),e.getRepresentationAsString=()=>dn.enumToString(xl,t.representation)}(e,t)}var Al=u({newInstance:dn.newInstance(Pl,"vtkProperty"),extend:Pl},Tl);const El={mapper:null,backfaceProperty:null,forceOpaque:!1,forceTranslucent:!1};function Il(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,El,n),yl.extend(e,t,n),t.boundsMTime={},dn.obj(t.boundsMTime),dn.setGet(e,t,["backfaceProperty","forceOpaque","forceTranslucent","mapper"]),function(e,t){t.classHierarchy.push("vtkActor");const n=u({},e);e.getActors=()=>[e],e.getIsOpaque=()=>{if(t.forceOpaque)return!0;if(t.forceTranslucent)return!1;t.properties[0]||e.getProperty();let n=t.properties[0].getOpacity()>=1;return n=n&&(!t.texture||!t.texture.isTranslucent()),n=n&&(!t.mapper||t.mapper.getIsOpaque()),n},e.hasTranslucentPolygonalGeometry=()=>null!==t.mapper&&(t.properties[0]||e.getProperty(),!e.getIsOpaque()),e.makeProperty=Al.newInstance,e.getMTime=()=>{let e=n.getMTime();if(null!==t.backfaceProperty){const n=t.backfaceProperty.getMTime();e=n>e?n:e}return e},e.getRedrawMTime=()=>{let e=t.mtime;if(null!==t.mapper){let n=t.mapper.getMTime();e=n>e?n:e,null!==t.mapper.getInput()&&(t.mapper.getInputAlgorithm().update(),n=t.mapper.getInput().getMTime(),e=n>e?n:e)}return e},e.getSupportsSelection=()=>!!t.mapper&&t.mapper.getSupportsSelection(),e.processSelectorPixelBuffers=(e,n)=>{t.mapper&&t.mapper.processSelectorPixelBuffers&&t.mapper.processSelectorPixelBuffers(e,n)}}(e,t)}var Ol={newInstance:dn.newInstance(Il,"vtkActor"),extend:Il};const Ml={VOID:"",CHAR:"Int8Array",SIGNED_CHAR:"Int8Array",UNSIGNED_CHAR:"Uint8Array",UNSIGNED_CHAR_CLAMPED:"Uint8ClampedArray",SHORT:"Int16Array",UNSIGNED_SHORT:"Uint16Array",INT:"Int32Array",UNSIGNED_INT:"Uint32Array",FLOAT:"Float32Array",DOUBLE:"Float64Array"};var Rl={DefaultDataType:Ml.FLOAT,DataTypeByteSize:{Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},VtkDataTypes:Ml};const{vtkErrorMacro:Ll}=fn,{DefaultDataType:kl}=Rl;function Dl(e,t,n){const r=e.length;let o,a,i=Number.MAX_VALUE,s=-Number.MAX_VALUE;for(a=t;a<r;a+=n)if(!Number.isNaN(e[a])){i=e[a],s=i;break}for(;a<r;a+=n)o=e[a],o<i?i=o:o>s&&(s=o);return{min:i,max:s}}function Bl(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(t<0&&n>1){const t=e.length/n,r=new Float64Array(t);for(let o=0,a=0;o<t;++o){for(let t=a+n;a<t;++a)r[o]+=e[a]*e[a];r[o]**=.5}return Dl(r,0,1)}return Dl(e,t<0?0:t,n)}function Nl(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=e||[];for(;n.length<=t;)n.push(null);return n}function Vl(e){return Object.prototype.toString.call(e).slice(8,-1)}const Fl={computeRange:Bl,createRangeHelper:function(){let e=Number.MAX_VALUE,t=-Number.MAX_VALUE,n=0,r=0;return{add(o){e>o&&(e=o),t<o&&(t=o),n++,r+=o},get:()=>({min:e,max:t,count:n,sum:r,mean:r/n}),getRange:()=>({min:e,max:t})}},fastComputeRange:Dl,getDataType:Vl,getMaxNorm:function(e){const t=e.getNumberOfComponents();let n=0;const r=new Array(t);for(let o=0;o<e.getNumberOfTuples();++o){e.getTuple(o,r);const a=Pa(r,t);a>n&&(n=a)}return n}};const Ul={name:"",numberOfComponents:1,dataType:kl,rangeTuple:[0,0]};function zl(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(Object.assign(t,Ul,n),Array.isArray(n.values)&&void 0===n.dataType&&console.warn("vtkDataArray.newInstance: no dataType provided, converting to Float32Array"),!t.empty&&!t.values&&!t.size)throw new TypeError("Cannot create vtkDataArray object without: size > 0, values");var r;(t.values?Array.isArray(t.values)&&(t.values=At(t.dataType,t.values)):t.values=Pt(t.dataType,t.size),t.values)&&(t.size=null!==(r=t.size)&&void 0!==r?r:t.values.length,t.dataType=Vl(t.values));if(Nt(e,t),Gt(e,t,["name","numberOfComponents"]),t.size%t.numberOfComponents!==0)throw new RangeError("model.size is not a multiple of model.numberOfComponents");!function(e,t){function n(n){if(n<0)return!1;const r=e.getNumberOfComponents(),o=t.values.length/(r>0?r:1);if(n===o)return!0;if(n>o){const e=t.values;return t.values=Pt(t.dataType,(n+o)*r),t.values.set(e),!0}return t.size>n*r&&(t.size=n*r,e.dataChange()),!0}t.classHierarchy.push("vtkDataArray"),e.dataChange=()=>{t.ranges=null,e.modified()},e.allocate=t=>{n(e.getNumberOfTuples()+t)},e.resize=r=>{n(r);const o=r*e.getNumberOfComponents();return t.size!==o&&(t.size=o,e.dataChange(),!0)},e.initialize=()=>(e.resize(0),e),e.getElementComponentSize=()=>t.values.BYTES_PER_ELEMENT,e.getComponent=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t.values[e*t.numberOfComponents+n]},e.setComponent=(n,r,o)=>{o!==t.values[n*t.numberOfComponents+r]&&(t.values[n*t.numberOfComponents+r]=o,e.dataChange())},e.getValue=n=>{const r=n/t.numberOfComponents,o=n%t.numberOfComponents;return e.getComponent(r,o)},e.setValue=(n,r)=>{const o=n/t.numberOfComponents,a=n%t.numberOfComponents;e.setComponent(o,a,r)},e.getData=()=>t.size===t.values.length?t.values:t.values.subarray(0,t.size),e.getRange=function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,r=n;r<0&&(r=1===t.numberOfComponents?0:t.numberOfComponents);let o=null;return t.ranges||(t.ranges=Nl(t.ranges,t.numberOfComponents)),o=t.ranges[r],o?(t.rangeTuple[0]=o.min,t.rangeTuple[1]=o.max,t.rangeTuple):(o=Bl(e.getData(),n,t.numberOfComponents),t.ranges[r]=o,t.rangeTuple[0]=o.min,t.rangeTuple[1]=o.max,t.rangeTuple)},e.setRange=(e,n)=>{t.ranges||(t.ranges=Nl(t.ranges,t.numberOfComponents));const r={min:e.min,max:e.max};return t.ranges[n]=r,t.rangeTuple[0]=r.min,t.rangeTuple[1]=r.max,t.rangeTuple},e.getRanges=function(){if(arguments.length>0&&void 0!==arguments[0]&&!arguments[0])return structuredClone(t.ranges);const n=[];for(let r=0;r<t.numberOfComponents;r++){const[t,o]=e.getRange(r),a={min:t,max:o};n.push(a)}if(t.numberOfComponents>1){const[t,r]=e.getRange(-1),o={min:t,max:r};n.push(o)}return n},e.setTuple=(e,n)=>{const r=e*t.numberOfComponents;for(let o=0;o<t.numberOfComponents;o++)t.values[r+o]=n[o]},e.setTuples=(e,n)=>{let r=e*t.numberOfComponents;const o=Math.min(n.length,t.size-r);for(let a=0;a<o;)t.values[r++]=n[a++]},e.insertTuple=(r,o)=>(t.size<=r*t.numberOfComponents&&(t.size=(r+1)*t.numberOfComponents,n(r+1)),e.setTuple(r,o),r),e.insertTuples=(r,o)=>{const a=r+o.length/t.numberOfComponents;return t.size<a*t.numberOfComponents&&(t.size=a*t.numberOfComponents,n(a)),e.setTuples(r,o),a},e.insertNextTuple=n=>{const r=t.size/t.numberOfComponents;return e.insertTuple(r,n)},e.insertNextTuples=n=>{const r=t.size/t.numberOfComponents;return e.insertTuples(r,n)},e.findTuple=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e-6;for(let r=0;r<t.size;r+=t.numberOfComponents)if(Math.abs(e[0]-t.values[r])<=n){let o=!0;for(let a=1;a<t.numberOfComponents;++a)if(Math.abs(e[a]-t.values[r+a])>n){o=!1;break}if(o)return r/t.numberOfComponents}return-1},e.getTuple=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const r=t.numberOfComponents||1,o=e*r;switch(r){case 4:n[3]=t.values[o+3];case 3:n[2]=t.values[o+2];case 2:n[1]=t.values[o+1];case 1:n[0]=t.values[o];break;default:for(let e=r-1;e>=0;--e)n[e]=t.values[o+e]}return n},e.getTuples=(n,r)=>{const o=(null!==n&&void 0!==n?n:0)*t.numberOfComponents,a=(null!==r&&void 0!==r?r:e.getNumberOfTuples())*t.numberOfComponents,i=e.getData().subarray(o,a);return i.length>0?i:null},e.getTupleLocation=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1)*t.numberOfComponents},e.getNumberOfComponents=()=>t.numberOfComponents,e.getNumberOfValues=()=>t.size,e.getNumberOfTuples=()=>t.size/t.numberOfComponents,e.getDataType=()=>t.dataType,e.newClone=()=>Gl({empty:!0,name:t.name,dataType:t.dataType,numberOfComponents:t.numberOfComponents}),e.getName=()=>(t.name||(e.modified(),t.name="vtkDataArray".concat(e.getMTime())),t.name),e.setData=(n,r)=>{t.values=n,t.size=n.length,t.dataType=Vl(n),r&&(t.numberOfComponents=r),t.size%t.numberOfComponents!==0&&(t.numberOfComponents=1),e.dataChange()},e.getState=()=>{if(t.deleted)return null;const n=u(u({},t),{},{vtkClass:e.getClassName()});n.values=Array.from(n.values),delete n.buffer,Object.keys(n).forEach(e=>{n[e]||delete n[e]});const r={};return Object.keys(n).sort().forEach(e=>{r[e]=n[e]}),r.mtime&&delete r.mtime,r},e.deepCopy=n=>{const r=e.getDataType(),o=t.values;e.shallowCopy(n),t.ranges=structuredClone(n.getRanges()),(null===o||void 0===o?void 0:o.length)>=n.getNumberOfValues()&&r===n.getDataType()?(o.set(n.getData()),t.values=o,e.dataChange()):e.setData(n.getData().slice())},e.interpolateTuple=(n,r,o,a,i,s)=>{const l=t.numberOfComponents||1;l===r.getNumberOfComponents()&&l===a.getNumberOfComponents()||Ll("numberOfComponents must match");const u=r.getTuple(o),c=a.getTuple(i),d=[];switch(d.length=l,l){case 4:d[3]=u[3]+(c[3]-u[3])*s;case 3:d[2]=u[2]+(c[2]-u[2])*s;case 2:d[1]=u[1]+(c[1]-u[1])*s;case 1:d[0]=u[0]+(c[0]-u[0])*s;break;default:for(let e=0;e<l;e++)d[e]=u[e]+(c[e]-u[e])*s}return e.insertTuple(n,d)}}(e,t)}const Gl=Qt(zl,"vtkDataArray");var Wl=u(u({newInstance:Gl,extend:zl},Fl),Rl);const Hl={clippingPlanes:[]};var jl={extend:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Hl,n),dn.obj(e,t),dn.algo(e,t,1,0),t.clippingPlanes||(t.clippingPlanes=[]),function(e,t){t.classHierarchy.push("vtkAbstractMapper"),e.update=()=>{e.getInputData()},e.addClippingPlane=n=>!!n.isA("vtkPlane")&&!t.clippingPlanes.includes(n)&&(t.clippingPlanes.push(n),e.modified(),!0),e.getNumberOfClippingPlanes=()=>t.clippingPlanes.length,e.removeAllClippingPlanes=()=>0!==t.clippingPlanes.length&&(t.clippingPlanes.length=0,e.modified(),!0),e.removeClippingPlane=n=>{const r=t.clippingPlanes.indexOf(n);return-1!==r&&(t.clippingPlanes.splice(r,1),e.modified(),!0)},e.getClippingPlanes=()=>t.clippingPlanes,e.setClippingPlanes=t=>{if(t)if(Array.isArray(t)){const n=t.length;for(let r=0;r<n&&r<6;r++)e.addClippingPlane(t[r])}else e.addClippingPlane(t)},e.getClippingPlaneInDataCoords=(e,n,r)=>{const o=t.clippingPlanes,a=e;if(o){const e=o.length;if(n>=0&&n<e){const e=o[n],t=e.getNormal(),i=e.getOrigin(),s=t[0],l=t[1],u=t[2],c=-(s*i[0]+l*i[1]+u*i[2]);return r[0]=s*a[0]+l*a[4]+u*a[8]+c*a[12],r[1]=s*a[1]+l*a[5]+u*a[9]+c*a[13],r[2]=s*a[2]+l*a[6]+u*a[10]+c*a[14],void(r[3]=s*a[3]+l*a[7]+u*a[11]+c*a[15])}}dn.vtkErrorMacro("Clipping plane index ".concat(n," is out of range."))}}(e,t)}};var Kl={extend:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,(e=>u({bounds:[...ll.INIT_BOUNDS],center:[0,0,0],viewSpecificProperties:{}},e))(n)),jl.extend(e,t,n),dn.setGet(e,t,["viewSpecificProperties"]),function(e,t){e.getBounds=()=>(dn.vtkErrorMacro("vtkAbstractMapper3D.getBounds - NOT IMPLEMENTED"),Ki()),e.getCenter=()=>{var n;const r=e.getBounds();return t.center=ll.isValid(r)?ll.getCenter(r):null,null===(n=t.center)||void 0===n?void 0:n.slice()},e.getLength=()=>{const t=e.getBounds();return ll.getDiagonalLength(t)}}(e,t)}};const{vtkErrorMacro:Zl,vtkWarningMacro:ql}=dn;const Xl={arrays:[],copyFieldFlags:[],doCopyAllOn:!0,doCopyAllOff:!1};function Yl(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Xl,n),dn.obj(e,t),function(e,t){t.classHierarchy.push("vtkFieldData");const n=e.getState;t.arrays&&(t.arrays=t.arrays.map(e=>({data:ut(e.data)}))),e.initialize=()=>{e.initializeFields(),e.copyAllOn(),e.clearFieldFlags()},e.initializeFields=()=>{t.arrays=[],t.copyFieldFlags={},e.modified()},e.copyStructure=n=>{e.initializeFields(),t.copyFieldFlags=n.getCopyFieldFlags().map(e=>e),t.arrays=n.getArrays().map(e=>({data:e}))},e.getNumberOfArrays=()=>t.arrays.length,e.getNumberOfActiveArrays=()=>t.arrays.length,e.addArray=n=>{const r=n.getName(),{array:o,index:a}=e.getArrayWithIndex(r);return null!=o?(t.arrays[a]={data:n},a):(t.arrays=[].concat(t.arrays,{data:n}),t.arrays.length-1)},e.removeAllArrays=()=>{t.arrays=[]},e.removeArray=n=>{const r=t.arrays.findIndex(e=>e.data.getName()===n);return e.removeArrayByIndex(r)},e.removeArrayByIndex=e=>-1!==e&&e<t.arrays.length&&(t.arrays.splice(e,1),!0),e.getArrays=()=>t.arrays.map(e=>e.data),e.getArray=t=>"number"===typeof t?e.getArrayByIndex(t):e.getArrayByName(t),e.getArrayByName=e=>t.arrays.reduce((t,n,r)=>n.data.getName()===e?n.data:t,null),e.getArrayWithIndex=e=>{const n=t.arrays.findIndex(t=>t.data.getName()===e);return{array:-1!==n?t.arrays[n].data:null,index:n}},e.getArrayByIndex=e=>e>=0&&e<t.arrays.length?t.arrays[e].data:null,e.hasArray=t=>e.getArrayWithIndex(t).index>=0,e.getArrayName=e=>{const n=t.arrays[e];return n?n.data.getName():""},e.getCopyFieldFlags=()=>t.copyFieldFlags,e.getFlag=e=>t.copyFieldFlags[e],e.passData=function(n){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;n.getArrays().forEach(a=>{const i=e.getFlag(a.getName());if(!1!==i&&(!t.doCopyAllOff||!0===i)&&a){let t=e.getArrayByName(a.getName());if(t)if(a.getNumberOfComponents()===t.getNumberOfComponents())if(r>-1&&r<a.getNumberOfTuples()){const e=o>-1?o:r;t.insertTuple(e,a.getTuple(r))}else t.insertTuples(0,a.getTuples());else Zl("Unhandled case in passData");else if(r<0||r>a.getNumberOfTuples())e.addArray(a),n.getAttributes(a).forEach(t=>{e.setAttribute(a,t)});else{const i=a.getNumberOfComponents();let s=a.getNumberOfValues();const l=o>-1?o:r;s<=l*i&&(s=(l+1)*i),t=Wl.newInstance({name:a.getName(),dataType:a.getDataType(),numberOfComponents:i,values:dn.newTypedArray(a.getDataType(),s),size:0}),t.insertTuple(l,a.getTuple(r)),e.addArray(t),n.getAttributes(a).forEach(n=>{e.setAttribute(t,n)})}}})},e.interpolateData=function(n){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.5;n.getArrays().forEach(s=>{const l=e.getFlag(s.getName());if(!1!==l&&(!t.doCopyAllOff||!0===l)&&s){let t=e.getArrayByName(s.getName());if(t)if(s.getNumberOfComponents()===t.getNumberOfComponents())if(r>-1&&r<s.getNumberOfTuples()){const e=a>-1?a:r;t.interpolateTuple(e,s,r,s,o,i),ql("Unexpected case in interpolateData")}else t.insertTuples(s.getTuples());else Zl("Unhandled case in interpolateData");else if(r<0||o<0||r>s.getNumberOfTuples())e.addArray(s),n.getAttributes(s).forEach(t=>{e.setAttribute(s,t)});else{const l=s.getNumberOfComponents();let u=s.getNumberOfValues();const c=a>-1?a:r;u<=c*l&&(u=(c+1)*l),t=Wl.newInstance({name:s.getName(),dataType:s.getDataType(),numberOfComponents:l,values:dn.newTypedArray(s.getDataType(),u),size:0}),t.interpolateTuple(c,s,r,s,o,i),e.addArray(t),n.getAttributes(s).forEach(n=>{e.setAttribute(t,n)})}}})},e.copyFieldOn=e=>{t.copyFieldFlags[e]=!0},e.copyFieldOff=e=>{t.copyFieldFlags[e]=!1},e.copyAllOn=()=>{t.doCopyAllOn&&!t.doCopyAllOff||(t.doCopyAllOn=!0,t.doCopyAllOff=!1,e.modified())},e.copyAllOff=()=>{!t.doCopyAllOn&&t.doCopyAllOff||(t.doCopyAllOn=!1,t.doCopyAllOff=!0,e.modified())},e.clearFieldFlags=()=>{t.copyFieldFlags={}},e.deepCopy=e=>{t.arrays=e.getArrays().map(e=>{const t=e.newClone();return t.deepCopy(e),{data:t}})},e.copyFlags=e=>e.getCopyFieldFlags().map(e=>e),e.reset=()=>t.arrays.forEach(e=>e.data.reset()),e.getMTime=()=>t.arrays.reduce((e,t)=>t.data.getMTime()>e?t.data.getMTime():e,t.mtime),e.getNumberOfComponents=()=>t.arrays.reduce((e,t)=>e+t.data.getNumberOfComponents(),0),e.getNumberOfTuples=()=>t.arrays.length>0?t.arrays[0].getNumberOfTuples():0,e.getState=()=>{const e=n();return e&&(e.arrays=t.arrays.map(e=>({data:e.data.getState()}))),e}}(e,t)}var Ql={newInstance:dn.newInstance(Yl,"vtkFieldData"),extend:Yl};var $l={AttributeCopyOperations:{COPYTUPLE:0,INTERPOLATE:1,PASSDATA:2,ALLCOPY:3},AttributeLimitTypes:{MAX:0,EXACT:1,NOLIMIT:2},AttributeTypes:{SCALARS:0,VECTORS:1,NORMALS:2,TCOORDS:3,TENSORS:4,GLOBALIDS:5,PEDIGREEIDS:6,EDGEFLAG:7,NUM_ATTRIBUTES:8},CellGhostTypes:{DUPLICATECELL:1,HIGHCONNECTIVITYCELL:2,LOWCONNECTIVITYCELL:4,REFINEDCELL:8,EXTERIORCELL:16,HIDDENCELL:32},DesiredOutputPrecision:{DEFAULT:0,SINGLE:1,DOUBLE:2},PointGhostTypes:{DUPLICATEPOINT:1,HIDDENPOINT:2},ghostArrayName:"vtkGhostType"};const{AttributeTypes:Jl,AttributeCopyOperations:eu}=$l,{vtkWarningMacro:tu}=dn;const nu={activeScalars:-1,activeVectors:-1,activeTensors:-1,activeNormals:-1,activeTCoords:-1,activeGlobalIds:-1,activePedigreeIds:-1};function ru(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,nu,n),Ql.extend(e,t,n),dn.setGet(e,t,["activeScalars","activeNormals","activeTCoords","activeVectors","activeTensors","activeGlobalIds","activePedigreeIds"]),t.arrays||(t.arrays={}),function(e,t){const n=["Scalars","Vectors","Normals","TCoords","Tensors","GlobalIds","PedigreeIds"];function r(e){let t=n.find(t=>Jl[t.toUpperCase()]===e||"number"!==typeof e&&t.toLowerCase()===e.toLowerCase());return"undefined"===typeof t&&(t=null),t}t.classHierarchy.push("vtkDataSetAttributes");const o=u({},e);e.checkNumberOfComponents=e=>!0,e.setAttribute=(n,o)=>{const a=r(o);if(n&&"PEDIGREEIDS"===a.toUpperCase()&&!n.isA("vtkDataArray"))return tu("Cannot set attribute ".concat(a,". The attribute must be a vtkDataArray.")),-1;if(n&&!e.checkNumberOfComponents(n,a))return tu("Cannot set attribute ".concat(a,". Incorrect number of components.")),-1;let i=t["active".concat(a)];if(i>=0&&i<t.arrays.length){if(t.arrays[i]===n)return i;e.removeArrayByIndex(i)}return n?(i=e.addArray(n),t["active".concat(a)]=i):t["active".concat(a)]=-1,e.modified(),t["active".concat(a)]},e.getAttributes=t=>n.filter(n=>e["get".concat(n)]()===t),e.setActiveAttributeByName=(t,n)=>e.setActiveAttributeByIndex(e.getArrayWithIndex(t).index,n),e.setActiveAttributeByIndex=(n,o)=>{const a=r(o);if(n>=0&&n<t.arrays.length){if("PEDIGREEIDS"!==a.toUpperCase()){const t=e.getArrayByIndex(n);if(!t.isA("vtkDataArray"))return tu("Cannot set attribute ".concat(a,". Only vtkDataArray subclasses can be set as active attributes.")),-1;if(!e.checkNumberOfComponents(t,a))return tu("Cannot set attribute ".concat(a,". Incorrect number of components.")),-1}return t["active".concat(a)]=n,e.modified(),n}return-1===n&&(t["active".concat(a)]=n,e.modified()),-1},e.getActiveAttribute=t=>{const n=r(t);return e["get".concat(n)]()},e.removeAllArrays=()=>{n.forEach(e=>{t["active".concat(e)]=-1}),o.removeAllArrays()},e.removeArrayByIndex=e=>(-1!==e&&n.forEach(n=>{e===t["active".concat(n)]?t["active".concat(n)]=-1:e<t["active".concat(n)]&&(t["active".concat(n)]-=1)}),o.removeArrayByIndex(e)),n.forEach(n=>{const r="active".concat(n);e["get".concat(n)]=()=>e.getArrayByIndex(t[r]),e["set".concat(n)]=t=>e.setAttribute(t,n),e["setActive".concat(n)]=t=>e.setActiveAttributeByIndex(e.getArrayWithIndex(t).index,n),e["copy".concat(n,"Off")]=()=>{const e=n.toUpperCase();t.copyAttributeFlags[eu.PASSDATA][Jl[e]]=!1},e["copy".concat(n,"On")]=()=>{const e=n.toUpperCase();t.copyAttributeFlags[eu.PASSDATA][Jl[e]]=!0}}),e.initializeAttributeCopyFlags=()=>{t.copyAttributeFlags=[],Object.keys(eu).filter(e=>"ALLCOPY"!==e).forEach(e=>{t.copyAttributeFlags[eu[e]]=Object.keys(Jl).filter(e=>"NUM_ATTRIBUTES"!==e).reduce((e,t)=>(e[Jl[t]]=!0,e),[])}),t.copyAttributeFlags[eu.COPYTUPLE][Jl.GLOBALIDS]=!1,t.copyAttributeFlags[eu.INTERPOLATE][Jl.GLOBALIDS]=!1,t.copyAttributeFlags[eu.COPYTUPLE][Jl.PEDIGREEIDS]=!1},e.initialize=dn.chain(e.initialize,e.initializeAttributeCopyFlags),t.dataArrays&&Object.keys(t.dataArrays).length&&Object.keys(t.dataArrays).forEach(n=>{t.dataArrays[n].ref||"vtkDataArray"!==t.dataArrays[n].type||e.addArray(Wl.newInstance(t.dataArrays[n]))});const a=e.shallowCopy;e.shallowCopy=(e,n)=>{a(e,n),t.arrays=e.getArrays().map(e=>{const t=e.newClone();return t.shallowCopy(e,n),{data:t}})},e.initializeAttributeCopyFlags()}(e,t)}var ou=u({newInstance:dn.newInstance(ru,"vtkDataSetAttributes"),extend:ru},$l);var au={FieldDataTypes:{UNIFORM:0,DATA_OBJECT_FIELD:0,COORDINATE:1,POINT_DATA:1,POINT:2,POINT_FIELD_DATA:2,CELL:3,CELL_FIELD_DATA:3,VERTEX:4,VERTEX_FIELD_DATA:4,EDGE:5,EDGE_FIELD_DATA:5,ROW:6,ROW_DATA:6},FieldAssociations:{FIELD_ASSOCIATION_POINTS:0,FIELD_ASSOCIATION_CELLS:1,FIELD_ASSOCIATION_NONE:2,FIELD_ASSOCIATION_POINTS_THEN_CELLS:3,FIELD_ASSOCIATION_VERTICES:4,FIELD_ASSOCIATION_EDGES:5,FIELD_ASSOCIATION_ROWS:6,NUMBER_OF_ASSOCIATIONS:7}};const iu=["pointData","cellData","fieldData"];const su={};function lu(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,su,n),dn.obj(e,t),dn.setGet(e,t,iu),dn.getArray(e,t,["bounds"],6),function(e,t){t.classHierarchy.push("vtkDataSet"),iu.forEach(e=>{t[e]?t[e]=ut(t[e]):t[e]=ou.newInstance()}),e.computeBounds=()=>{if(t.modifiedTime&&t.computeTime&&t.modifiedTime>t.computeTime||!t.computeTime){const n=e.getPoints();null!==n&&void 0!==n&&n.getNumberOfPoints()?ll.setBounds(t.bounds,n.getBoundsByReference()):t.bounds=Ji.createUninitializedBounds(),t.computeTime=dn.getCurrentGlobalMTime()}},e.getLength2=()=>{const t=e.getBoundsByReference();return t&&6===t.length?ll.getDiagonalLength2(t):0},e.getLength=()=>Math.sqrt(e.getLength2()),e.getCenter=()=>{const t=e.getBoundsByReference();return t&&6===t.length?ll.getCenter(t):[0,0,0]},e.getCellBounds=t=>{const n=e.getCell(t);return n?n.getBounds():Ji.createUninitializedBounds()},e.getBounds=dn.chain(()=>e.computeBounds,e.getBounds),e.getBoundsByReference=dn.chain(()=>e.computeBounds,e.getBoundsByReference);const n=e.shallowCopy;e.shallowCopy=function(e){n(e,arguments.length>1&&void 0!==arguments[1]&&arguments[1]),iu.forEach(n=>{t[n]=ou.newInstance(),t[n].shallowCopy(e.getReferenceByName(n))})};const r=e.getMTime;e.getMTime=()=>iu.reduce((e,n)=>{var r,o;return Math.max(e,null!==(r=null===(o=t[n])||void 0===o?void 0:o.getMTime())&&void 0!==r?r:e)},r()),e.initialize=()=>(iu.forEach(e=>{var n;return null===(n=t[e])||void 0===n?void 0:n.initialize()}),e)}(e,t)}var uu=u({newInstance:dn.newInstance(lu,"vtkDataSet"),extend:lu},au);const cu={UNCHANGED:0,SINGLE_POINT:1,X_LINE:2,Y_LINE:3,Z_LINE:4,XY_PLANE:5,YZ_PLANE:6,XZ_PLANE:7,XYZ_GRID:8,EMPTY:9};var du={StructuredType:cu};const{StructuredType:fu}=du;var pu=u({getDataDescriptionFromExtent:function(e){let t=0;for(let n=0;n<3;++n)e[2*n]<e[2*n+1]&&t++;return e[0]>e[1]||e[2]>e[3]||e[4]>e[5]?fu.EMPTY:3===t?fu.XYZ_GRID:2===t?e[0]===e[1]?fu.YZ_PLANE:e[2]===e[3]?fu.XZ_PLANE:fu.XY_PLANE:1===t?e[0]<e[1]?fu.X_LINE:e[2]<e[3]?fu.Y_LINE:fu.Z_LINE:fu.SINGLE_POINT}},du);const{vtkErrorMacro:hu}=dn;const mu={direction:null,indexToWorld:null,worldToIndex:null,spacing:[1,1,1],origin:[0,0,0],extent:[0,-1,0,-1,0,-1],dataDescription:cu.EMPTY};function gu(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,mu,n),uu.extend(e,t,n),t.direction?Array.isArray(t.direction)&&(t.direction=new Float64Array(t.direction.slice(0,9))):t.direction=ke(new Float64Array(9)),t.indexToWorld=new Float64Array(16),t.worldToIndex=new Float64Array(16),dn.get(e,t,["indexToWorld","worldToIndex"]),dn.setGetArray(e,t,["origin","spacing"],3),dn.setGetArray(e,t,["direction"],9),dn.getArray(e,t,["extent"],6),function(e,t){t.classHierarchy.push("vtkImageData"),e.setExtent=function(){if(t.deleted)return hu("instance deleted - cannot call any method"),!1;for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];const a=1===r.length?r[0]:r;if(6!==a.length)return!1;const i=t.extent.some((e,t)=>e!==a[t]);return i&&(t.extent=a.slice(),t.dataDescription=pu.getDataDescriptionFromExtent(t.extent),e.modified()),i},e.setDimensions=function(){let n,r,o;if(t.deleted)hu("instance deleted - cannot call any method");else{if(1===arguments.length){const e=arguments.length<=0?void 0:arguments[0];n=e[0],r=e[1],o=e[2]}else{if(3!==arguments.length)return void hu("Bad dimension specification");n=arguments.length<=0?void 0:arguments[0],r=arguments.length<=1?void 0:arguments[1],o=arguments.length<=2?void 0:arguments[2]}e.setExtent(0,n-1,0,r-1,0,o-1)}},e.getDimensions=()=>[t.extent[1]-t.extent[0]+1,t.extent[3]-t.extent[2]+1,t.extent[5]-t.extent[4]+1],e.getNumberOfCells=()=>{const t=e.getDimensions();let n=1;for(let e=0;e<3;e++){if(0===t[e])return 0;t[e]>1&&(n*=t[e]-1)}return n},e.getNumberOfPoints=()=>{const t=e.getDimensions();return t[0]*t[1]*t[2]},e.getPoint=n=>{const r=e.getDimensions();if(0===r[0]||0===r[1]||0===r[2])return hu("Requesting a point from an empty image."),null;const o=new Float64Array(3);switch(t.dataDescription){case cu.EMPTY:return null;case cu.SINGLE_POINT:break;case cu.X_LINE:o[0]=n;break;case cu.Y_LINE:o[1]=n;break;case cu.Z_LINE:o[2]=n;break;case cu.XY_PLANE:o[0]=n%r[0],o[1]=n/r[0];break;case cu.YZ_PLANE:o[1]=n%r[1],o[2]=n/r[1];break;case cu.XZ_PLANE:o[0]=n%r[0],o[2]=n/r[0];break;case cu.XYZ_GRID:o[0]=n%r[0],o[1]=n/r[0]%r[1],o[2]=n/(r[0]*r[1]);break;default:hu("Invalid dataDescription")}const a=[0,0,0];return e.indexToWorld(o,a),a},e.getBounds=()=>e.extentToBounds(e.getSpatialExtent()),e.extentToBounds=e=>ll.transformBounds(e,t.indexToWorld),e.getSpatialExtent=()=>ll.inflate([...t.extent],.5),e.computeTransforms=()=>{q(t.indexToWorld,t.origin),t.indexToWorld[0]=t.direction[0],t.indexToWorld[1]=t.direction[1],t.indexToWorld[2]=t.direction[2],t.indexToWorld[4]=t.direction[3],t.indexToWorld[5]=t.direction[4],t.indexToWorld[6]=t.direction[5],t.indexToWorld[8]=t.direction[6],t.indexToWorld[9]=t.direction[7],t.indexToWorld[10]=t.direction[8],W(t.indexToWorld,t.indexToWorld,t.spacing),V(t.worldToIndex,t.indexToWorld)},e.indexToWorld=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return qn(n,e,t.indexToWorld),n},e.indexToWorldVec3=e.indexToWorld,e.worldToIndex=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return qn(n,e,t.worldToIndex),n},e.worldToIndexVec3=e.worldToIndex,e.indexToWorldBounds=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return ll.transformBounds(e,t.indexToWorld,n)},e.worldToIndexBounds=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return ll.transformBounds(e,t.worldToIndex,n)},t._onOriginChanged=e.computeTransforms,t._onDirectionChanged=e.computeTransforms,t._onSpacingChanged=e.computeTransforms,e.computeTransforms(),e.getCenter=()=>ll.getCenter(e.getBounds()),e.computeHistogram=function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const r=[0,0,0,0,0,0];e.worldToIndexBounds(t,r);const o=[0,0,0],a=[0,0,0];ll.computeCornerPoints(r,o,a),oi(o,o),oi(a,a);const i=e.getDimensions();Ri(o,[0,0,0],[i[0]-1,i[1]-1,i[2]-1],o),Ri(a,[0,0,0],[i[0]-1,i[1]-1,i[2]-1],a);const s=i[0],l=i[0]*i[1],u=e.getPointData().getScalars().getData();let c=-1/0,d=1/0,f=0,p=0,h=0;for(let e=o[2];e<=a[2];e++)for(let t=o[1];t<=a[1];t++){let i=o[0]+t*s+e*l;for(let s=o[0];s<=a[0];s++){if(!n||n([s,t,e],r)){const e=u[i];e>c&&(c=e),e<d&&(d=e),f+=e*e,p+=e,h+=1}++i}}const m=h>0?p/h:0,g=h?Math.abs(f/h-m*m):0;return{minimum:d,maximum:c,average:m,variance:g,sigma:Math.sqrt(g),count:h}},e.computeIncrements=function(e){const t=[];let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;for(let r=0;r<3;++r)t[r]=n,n*=e[2*r+1]-e[2*r]+1;return t},e.computeOffsetIndex=t=>{let[n,r,o]=t;const a=e.getExtent(),i=e.getPointData().getScalars().getNumberOfComponents(),s=e.computeIncrements(a,i);return Math.floor((Math.round(n)-a[0])*s[0]+(Math.round(r)-a[2])*s[1]+(Math.round(o)-a[4])*s[2])},e.getOffsetIndexFromWorld=t=>{const n=e.getExtent(),r=e.worldToIndex(t);for(let e=0;e<3;++e)if(r[e]<n[2*e]||r[e]>n[2*e+1])return hu("GetScalarPointer: Pixel ".concat(r," is not in memory. Current extent = ").concat(n)),NaN;return e.computeOffsetIndex(r)},e.getScalarValueFromWorld=function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const r=e.getPointData().getScalars().getNumberOfComponents();if(n<0||n>=r)return hu("GetScalarPointer: Scalar Component ".concat(n," is not within bounds. Current Scalar numberOfComponents: ").concat(r)),NaN;const o=e.getOffsetIndexFromWorld(t);return Number.isNaN(o)?o:e.getPointData().getScalars().getComponent(o,n)};const n=e.initialize;e.initialize=()=>(e.set({direction:ke(t.direction),spacing:[1,1,1],origin:[0,0,0],extent:[0,-1,0,-1,0,-1],dataDescription:cu.EMPTY}),n())}(e,t)}var vu={newInstance:dn.newInstance(gu,"vtkImageData"),extend:gu};const yu={LUMINANCE:1,LUMINANCE_ALPHA:2,RGB:3,RGBA:4};var bu={VectorMode:{MAGNITUDE:0,COMPONENT:1,RGBCOLORS:2},ScalarMappingTarget:yu,Scale:{LINEAR:0,LOG10:1}};var _u={ColorMode:{DEFAULT:0,MAP_SCALARS:1,DIRECT_SCALARS:2},GetArray:{BY_ID:0,BY_NAME:1},ScalarMode:{DEFAULT:0,USE_POINT_DATA:1,USE_CELL_DATA:2,USE_POINT_FIELD_DATA:3,USE_CELL_FIELD_DATA:4,USE_FIELD_DATA:5}};const{ScalarMappingTarget:Tu,Scale:xu,VectorMode:Su}=bu,{VtkDataTypes:wu}=Wl,{ColorMode:Cu}=_u,{vtkErrorMacro:Pu}=dn;function Au(e){return e}function Eu(e){return Math.floor(255*e+.5)}const Iu={alpha:1,vectorComponent:0,vectorSize:-1,vectorMode:Su.COMPONENT,mappingRange:null,annotationArray:null,annotatedValueMap:null,indexedLookup:!1,scale:xu.LINEAR};function Ou(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Iu,n),dn.obj(e,t),t.mappingRange=[0,255],t.annotationArray=[],t.annotatedValueMap=[],dn.setGet(e,t,["vectorSize","vectorComponent","vectorMode","alpha","indexedLookup"]),dn.setArray(e,t,["mappingRange"],2),dn.getArray(e,t,["mappingRange"]),function(e,t){t.classHierarchy.push("vtkScalarsToColors"),e.setVectorModeToMagnitude=()=>e.setVectorMode(Su.MAGNITUDE),e.setVectorModeToComponent=()=>e.setVectorMode(Su.COMPONENT),e.setVectorModeToRGBColors=()=>e.setVectorMode(Su.RGBCOLORS),e.build=()=>{},e.isOpaque=()=>!0,e.setAnnotations=(n,r)=>{if(!(n&&!r||!n&&r))if(n&&r&&n.length!==r.length)Pu("Values and annotations do not have the same number of tuples so ignoring");else{if(t.annotationArray=[],r&&n){const e=r.length;for(let o=0;o<e;o++)t.annotationArray.push({value:n[o],annotation:String(r[o])})}e.updateAnnotatedValueMap(),e.modified()}},e.setAnnotation=(n,r)=>{let o=e.checkForAnnotatedValue(n),a=!1;return o>=0?t.annotationArray[o].annotation!==r&&(t.annotationArray[o].annotation=r,a=!0):(t.annotationArray.push({value:n,annotation:r}),o=t.annotationArray.length-1,a=!0),a&&(e.updateAnnotatedValueMap(),e.modified()),o},e.getNumberOfAnnotatedValues=()=>t.annotationArray.length,e.getAnnotatedValue=e=>e<0||e>=t.annotationArray.length?null:t.annotationArray[e].value,e.getAnnotation=e=>void 0===t.annotationArray[e]?null:t.annotationArray[e].annotation,e.getAnnotatedValueIndex=n=>t.annotationArray.length?e.checkForAnnotatedValue(n):-1,e.removeAnnotation=n=>{const r=e.checkForAnnotatedValue(n),o=r>=0;return o&&(t.annotationArray.splice(r,1),e.updateAnnotatedValueMap(),e.modified()),o},e.resetAnnotations=()=>{t.annotationArray=[],t.annotatedValueMap=[],e.modified()},e.getAnnotationColor=(n,r)=>{if(t.indexedLookup){const t=e.getAnnotatedValueIndex(n);e.getIndexedColor(t,r)}else e.getColor(parseFloat(n),r),r[3]=1},e.checkForAnnotatedValue=t=>e.getAnnotatedValueIndexInternal(t),e.getAnnotatedValueIndexInternal=e=>{if(void 0!==t.annotatedValueMap[e]){const n=t.annotationArray.length;return t.annotatedValueMap[e]%n}return-1},e.getIndexedColor=(e,t)=>{t[0]=0,t[1]=0,t[2]=0,t[3]=0},e.updateAnnotatedValueMap=()=>{t.annotatedValueMap=[];const e=t.annotationArray.length;for(let n=0;n<e;n++)t.annotatedValueMap[t.annotationArray[n].value]=n},e.mapScalars=(t,n,r)=>{const o=t.getNumberOfComponents();let a=null;if(n===Cu.DEFAULT&&(t.getDataType()===wu.UNSIGNED_CHAR||t.getDataType()===wu.UNSIGNED_CHAR_CLAMPED)||n===Cu.DIRECT_SCALARS&&t)a=e.convertToRGBA(t,o,t.getNumberOfTuples());else{const n={type:"vtkDataArray",name:"temp",numberOfComponents:4,dataType:wu.UNSIGNED_CHAR},i=dn.newTypedArray(n.dataType,4*t.getNumberOfTuples());n.values=i,n.size=i.length,a=Wl.newInstance(n);let s=r;s<0&&o>1?e.mapVectorsThroughTable(t,a,Tu.RGBA,-1,-1):(s<0&&(s=0),s>=o&&(s=o-1),e.mapScalarsThroughTable(t,a,Tu.RGBA,s))}return a},e.mapVectorsToMagnitude=(e,t,n)=>{const r=e.getNumberOfTuples(),o=e.getNumberOfComponents(),a=t.getData(),i=e.getData();for(let s=0;s<r;s++){let e=0;for(let t=0;t<n;t++)e+=i[s*o+t]*i[s*o+t];a[s]=Math.sqrt(e)}},e.mapVectorsThroughTable=(t,n,r,o,a)=>{let i=e.getVectorMode(),s=a,l=o;const u=t.getNumberOfComponents();i===Su.COMPONENT?(-1===l&&(l=e.getVectorComponent()),l<0&&(l=0),l>=u&&(l=u-1)):(-1===s&&(s=e.getVectorSize()),s<=0?(l=0,s=u):(l<0&&(l=0),l>=u&&(l=u-1),l+s>u&&(s=u-l)),i!==Su.MAGNITUDE||1!==u&&1!==s||(i=Su.COMPONENT));let c=0;switch(l>0&&(c=l),i){case Su.COMPONENT:e.mapScalarsThroughTable(t,n,r,c);break;case Su.RGBCOLORS:break;case Su.MAGNITUDE:default:{const o=Wl.newInstance({numberOfComponents:1,values:new Float32Array(t.getNumberOfTuples())});e.mapVectorsToMagnitude(t,o,s),e.mapScalarsThroughTable(o,n,r,0);break}}},e.luminanceToRGBA=(e,t,n,r)=>{const o=r(n),a=t.getData(),i=e.getData(),s=a.length;let l=0;for(let u=0;u<s;u+=1){const e=r(a[u]);i[4*l]=e,i[4*l+1]=e,i[4*l+2]=e,i[4*l+3]=o,l++}},e.luminanceAlphaToRGBA=(e,t,n,r)=>{const o=t.getData(),a=e.getData(),i=o.length;let s=0;for(let l=0;l<i;l+=2){const e=r(o[l]);a[s]=e,a[s+1]=e,a[s+2]=e,a[s+3]=r(o[l+1])*n,s+=4}},e.rGBToRGBA=(e,t,n,r)=>{const o=Eu(n),a=t.getData(),i=e.getData(),s=a.length;let l=0;for(let u=0;u<s;u+=3)i[4*l]=r(a[u]),i[4*l+1]=r(a[u+1]),i[4*l+2]=r(a[u+2]),i[4*l+3]=o,l++},e.rGBAToRGBA=(e,t,n,r)=>{const o=t.getData(),a=e.getData(),i=o.length;let s=0;for(let l=0;l<i;l+=4)a[4*s]=r(o[l]),a[4*s+1]=r(o[l+1]),a[4*s+2]=r(o[l+2]),a[4*s+3]=r(o[l+3])*n,s++},e.convertToRGBA=(n,r,o)=>{let{alpha:a}=t;if(4===r&&a>=1&&n.getDataType()===wu.UNSIGNED_CHAR)return n;const i=Wl.newInstance({numberOfComponents:4,empty:!0,size:4*o,dataType:wu.UNSIGNED_CHAR});if(o<=0)return i;a=a>0?a:0,a=a<1?a:1;let s=Au;switch(n.getDataType()!==wu.FLOAT&&n.getDataType()!==wu.DOUBLE||(s=Eu),r){case 1:e.luminanceToRGBA(i,n,a,s);break;case 2:e.luminanceAlphaToRGBA(i,n,s);break;case 3:e.rGBToRGBA(i,n,a,s);break;case 4:e.rGBAToRGBA(i,n,a,s);break;default:return Pu("Cannot convert colors"),null}return i},e.usingLogScale=()=>!1,e.getNumberOfAvailableColors=()=>16777216,e.setRange=(t,n)=>e.setMappingRange(t,n),e.getRange=()=>e.getMappingRange(),e.areScalarsOpaque=(n,r,o)=>{if(!n)return e.isOpaque();const a=n.getNumberOfComponents();return(r!==Cu.DEFAULT||n.getDataType()!==wu.UNSIGNED_CHAR)&&r!==Cu.DIRECT_SCALARS||(3===a||1===a?t.alpha>=1:255===n.getRange(a-1)[0])}}(e,t)}var Mu=u({newInstance:dn.newInstance(Ou,"vtkScalarsToColors"),extend:Ou},bu);const{vtkErrorMacro:Ru}=dn;const Lu={numberOfColors:256,hueRange:[0,.66667],saturationRange:[1,1],valueRange:[1,1],alphaRange:[1,1],nanColor:[.5,0,0,1],belowRangeColor:[0,0,0,1],aboveRangeColor:[1,1,1,1],useAboveRangeColor:!1,useBelowRangeColor:!1,alpha:1};function ku(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Lu,n),Mu.extend(e,t,n),t.table||(t.table=[]),t.buildTime={},dn.obj(t.buildTime),t.opaqueFlagBuildTime={},dn.obj(t.opaqueFlagBuildTime,{mtime:0}),t.insertTime={},dn.obj(t.insertTime,{mtime:0}),dn.get(e,t,["buildTime"]),dn.setGet(e,t,["numberOfColors","useAboveRangeColor","useBelowRangeColor"]),dn.setArray(e,t,["alphaRange","hueRange","saturationRange","valueRange"],2),dn.setArray(e,t,["nanColor","belowRangeColor","aboveRangeColor"],4),dn.getArray(e,t,["hueRange","saturationRange","valueRange","alphaRange","nanColor","belowRangeColor","aboveRangeColor"]),function(e,t){t.classHierarchy.push("vtkLookupTable"),e.isOpaque=()=>{if(t.opaqueFlagBuildTime.getMTime()<e.getMTime()){let e=!0;t.nanColor[3]<1&&(e=0),t.useBelowRangeColor&&t.belowRangeColor[3]<1&&(e=0),t.useAboveRangeColor&&t.aboveRangeColor[3]<1&&(e=0);for(let n=3;n<t.table.length&&e;n+=4)t.table[n]<255&&(e=!1);t.opaqueFlag=e,t.opaqueFlagBuildTime.modified()}return t.opaqueFlag},e.usingLogScale=()=>!1,e.getNumberOfAvailableColors=()=>t.table.length/4-3,e.linearIndexLookup=(e,t)=>{let n=0;const r=Number(e);return r<t.range[0]?n=t.maxIndex+0+1.5:r>t.range[1]?n=t.maxIndex+1+1.5:(n=(r+t.shift)*t.scale,n=n<t.maxIndex?n:t.maxIndex),Math.floor(n)},e.linearLookup=(t,n,r)=>{let o=0;o=ji(t)?Math.floor(r.maxIndex+1.5+2):e.linearIndexLookup(t,r);const a=4*o;return n.slice(a,a+4)},e.indexedLookupFunction=(n,r,o)=>{let a=e.getAnnotatedValueIndexInternal(n);-1===a&&(a=t.numberOfColors+2);const i=4*a;return[r[i],r[i+1],r[i+2],r[i+3]]},e.lookupShiftAndScale=(e,t)=>{t.shift=-e[0],t.scale=Number.MAX_VALUE,e[1]>e[0]&&(t.scale=(t.maxIndex+1)/(e[1]-e[0]))},e.mapScalarsThroughTable=(n,r,o,a)=>{let i=e.linearLookup;t.indexedLookup&&(i=e.indexedLookupFunction);const s=e.getMappingRange(),l={maxIndex:e.getNumberOfColors()-1,range:s,shift:0,scale:0};e.lookupShiftAndScale(s,l);const u=e.getAlpha(),c=n.getNumberOfTuples(),d=n.getNumberOfComponents(),f=r.getData(),p=n.getData();if(u>=1){if(o===yu.RGBA)for(let e=0;e<c;e++){const n=i(p[e*d+a],t.table,l);f[4*e]=n[0],f[4*e+1]=n[1],f[4*e+2]=n[2],f[4*e+3]=n[3]}}else if(o===yu.RGBA)for(let e=0;e<c;e++){const n=i(p[e*d+a],t.table,l);f[4*e]=n[0],f[4*e+1]=n[1],f[4*e+2]=n[2],f[4*e+3]=Math.floor(n[3]*u+.5)}},e.forceBuild=()=>{let n=0,r=0,o=0,a=0;const i=t.numberOfColors-1;i&&(n=(t.hueRange[1]-t.hueRange[0])/i,r=(t.saturationRange[1]-t.saturationRange[0])/i,o=(t.valueRange[1]-t.valueRange[0])/i,a=(t.alphaRange[1]-t.alphaRange[0])/i),t.table.length=4*i+16;const s=[],l=[];for(let e=0;e<=i;e++)s[0]=t.hueRange[0]+e*n,s[1]=t.saturationRange[0]+e*r,s[2]=t.valueRange[0]+e*o,Ti(s,l),l[3]=t.alphaRange[0]+e*a,t.table[4*e]=255*l[0]+.5,t.table[4*e+1]=255*l[1]+.5,t.table[4*e+2]=255*l[2]+.5,t.table[4*e+3]=255*l[3]+.5;e.buildSpecialColors(),t.buildTime.modified()},e.setTable=n=>{if(Array.isArray(n)){const r=n[0].length;t.numberOfColors=n.length;const o=4-r;let a=0;for(let e=0;e<t.numberOfColors;e++)t.table[4*e]=255,t.table[4*e+1]=255,t.table[4*e+2]=255,t.table[4*e+3]=255;for(let e=0;e<n.length;e++){const i=n[e];for(let e=0;e<r;e++)t.table[a++]=i[e];a+=o}return e.buildSpecialColors(),t.insertTime.modified(),e.modified(),!0}if(4!==n.getNumberOfComponents())return Ru("Expected 4 components for RGBA colors"),!1;if(n.getDataType()!==Ml.UNSIGNED_CHAR)return Ru("Expected unsigned char values for RGBA colors"),!1;t.numberOfColors=n.getNumberOfTuples();const r=n.getData();t.table.length=r.length;for(let e=0;e<r.length;e++)t.table[e]=r[e];return e.buildSpecialColors(),t.insertTime.modified(),e.modified(),!0},e.buildSpecialColors=()=>{const{numberOfColors:e}=t,n=t.table;let r=4*(e+0);t.useBelowRangeColor||0===e?(n[r]=255*t.belowRangeColor[0]+.5,n[r+1]=255*t.belowRangeColor[1]+.5,n[r+2]=255*t.belowRangeColor[2]+.5,n[r+3]=255*t.belowRangeColor[3]+.5):(n[r]=n[0],n[r+1]=n[1],n[r+2]=n[2],n[r+3]=n[3]),r=4*(e+1),t.useAboveRangeColor||0===e?(n[r]=255*t.aboveRangeColor[0]+.5,n[r+1]=255*t.aboveRangeColor[1]+.5,n[r+2]=255*t.aboveRangeColor[2]+.5,n[r+3]=255*t.aboveRangeColor[3]+.5):(n[r]=n[4*(e-1)+0],n[r+1]=n[4*(e-1)+1],n[r+2]=n[4*(e-1)+2],n[r+3]=n[4*(e-1)+3]),r=4*(e+2),n[r]=255*t.nanColor[0]+.5,n[r+1]=255*t.nanColor[1]+.5,n[r+2]=255*t.nanColor[2]+.5,n[r+3]=255*t.nanColor[3]+.5},e.build=()=>{(t.table.length<1||e.getMTime()>t.buildTime.getMTime()&&t.insertTime.getMTime()<=t.buildTime.getMTime())&&e.forceBuild()},t.table.length>0&&(e.buildSpecialColors(),t.insertTime.modified())}(e,t)}var Du={newInstance:dn.newInstance(ku,"vtkLookupTable"),extend:ku};const Bu={Off:0,PolygonOffset:1};let Nu=Bu.PolygonOffset,Vu=Bu.Off;const Fu=["VTK_RESOLVE_OFF","VTK_RESOLVE_POLYGON_OFFSET"];function Uu(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const t=Vu===e;return Vu=e,t}var zu={Resolve:Bu,getResolveCoincidentTopologyAsString:function(){return Fu[Vu]},getResolveCoincidentTopologyPolygonOffsetFaces:function(){return Nu},getResolveCoincidentTopology:function(){return Vu},setResolveCoincidentTopology:Uu,setResolveCoincidentTopologyPolygonOffsetFaces:function(e){const t=Nu===e;return Nu=e,t},setResolveCoincidentTopologyToDefault:function(){return Uu(Bu.Off)},setResolveCoincidentTopologyToOff:function(){return Uu(Bu.Off)},setResolveCoincidentTopologyToPolygonOffset:function(){return Uu(Bu.PolygonOffset)}};function Gu(e,t,n){n.forEach(n=>{e["get".concat(n.method)]=()=>t[n.key],e["set".concat(n.method)]=dn.objectSetterMap.object(e,t,{name:n.key,params:["factor","offset"]})})}const Wu=["Polygon","Line","Point"],Hu={modified:()=>{}};Gu(Hu,{Polygon:{factor:2,offset:0},Line:{factor:1,offset:-1},Point:{factor:0,offset:-2}},Wu.map(e=>({key:e,method:"ResolveCoincidentTopology".concat(e,"OffsetParameters")})));var ju={implementCoincidentTopologyMethods:function(e,t){void 0===t.resolveCoincidentTopology&&(t.resolveCoincidentTopology=!1),dn.setGet(e,t,["resolveCoincidentTopology"]),t.topologyOffset={Polygon:{factor:0,offset:0},Line:{factor:0,offset:0},Point:{factor:0,offset:0}},Object.keys(zu).forEach(t=>{e[t]=zu[t]}),Object.keys(Hu).filter(e=>"modified"!==e).forEach(t=>{e[t]=Hu[t]}),Gu(e,t.topologyOffset,Wu.map(e=>({key:e,method:"RelativeCoincidentTopology".concat(e,"OffsetParameters")}))),e.getCoincidentTopologyPolygonOffsetParameters=()=>{const t=Hu.getResolveCoincidentTopologyPolygonOffsetParameters(),n=e.getRelativeCoincidentTopologyPolygonOffsetParameters();return{factor:t.factor+n.factor,offset:t.offset+n.offset}},e.getCoincidentTopologyLineOffsetParameters=()=>{const t=Hu.getResolveCoincidentTopologyLineOffsetParameters(),n=e.getRelativeCoincidentTopologyLineOffsetParameters();return{factor:t.factor+n.factor,offset:t.offset+n.offset}},e.getCoincidentTopologyPointOffsetParameter=()=>{const t=Hu.getResolveCoincidentTopologyPointOffsetParameters(),n=e.getRelativeCoincidentTopologyPointOffsetParameters();return{factor:t.factor+n.factor,offset:t.offset+n.offset}}},staticOffsetAPI:Hu,otherStaticMethods:zu,CATEGORIES:Wu,Resolve:Bu};const Ku={MIN_KNOWN_PASS:0,ACTOR_PASS:0,COMPOSITE_INDEX_PASS:1,ID_LOW24:2,ID_HIGH24:3,MAX_KNOWN_PASS:3};var Zu={PassTypes:Ku};const{FieldAssociations:qu}=uu,{staticOffsetAPI:Xu,otherStaticMethods:Yu}=ju,{ColorMode:Qu,ScalarMode:$u,GetArray:Ju}=_u,{VectorMode:ec}=bu,{VtkDataTypes:tc}=Wl;function nc(e){return()=>dn.vtkErrorMacro("vtkMapper::".concat(e," - NOT IMPLEMENTED"))}function rc(e,t){const n=e[1]%2===0?1:-1;if(e[0]+=n,e[0]>=t[0]||e[0]<0){const r=e[2]%2===0?1:-1;e[0]-=n,e[1]+=r,(e[1]>=t[1]||e[1]<0)&&(e[1]-=r,e[2]++)}}function oc(e,t){return e[0]+t[0]*(e[1]+t[1]*e[2])}function ac(e,t,n){const r=Math.floor(t),o=r%(2*n[0]);let a,i;o<n[0]?(e[0]=o,a=1,i=e[0]===n[0]-1):(e[0]=2*n[0]-1-o,a=-1,i=0===e[0]);const s=Math.floor(r/n[0]),l=s%(2*n[1]);let u,c;l<n[1]?(e[1]=l,u=1,c=e[1]===n[1]-1):(e[1]=2*n[1]-1-l,u=-1,c=0===e[1]),e[2]=Math.floor(s/n[1]);const d=t-r;i?c?e[2]+=d:e[1]+=u*d:e[0]+=a*d,e[0]=(e[0]+.5)/n[0],e[1]=(e[1]+.5)/n[1],e[2]=(e[2]+.5)/n[2]}const ic=new WeakMap;function sc(e,t){t.classHierarchy.push("vtkMapper"),e.getBounds=()=>{const n=e.getInputData();return n?(t.static||e.update(),t.bounds=n.getBounds()):t.bounds=Ki(),t.bounds},e.setForceCompileOnly=e=>{t.forceCompileOnly=e},e.setSelectionWebGLIdsToVTKIds=e=>{t.selectionWebGLIdsToVTKIds=e},e.createDefaultLookupTable=()=>{t.lookupTable=Du.newInstance()},e.getColorModeAsString=()=>dn.enumToString(Qu,t.colorMode),e.setColorModeToDefault=()=>e.setColorMode(0),e.setColorModeToMapScalars=()=>e.setColorMode(1),e.setColorModeToDirectScalars=()=>e.setColorMode(2),e.getScalarModeAsString=()=>dn.enumToString($u,t.scalarMode),e.setScalarModeToDefault=()=>e.setScalarMode(0),e.setScalarModeToUsePointData=()=>e.setScalarMode(1),e.setScalarModeToUseCellData=()=>e.setScalarMode(2),e.setScalarModeToUsePointFieldData=()=>e.setScalarMode(3),e.setScalarModeToUseCellFieldData=()=>e.setScalarMode(4),e.setScalarModeToUseFieldData=()=>e.setScalarMode(5),e.getAbstractScalars=(e,n,r,o,a)=>{if(!e||!t.scalarVisibility)return{scalars:null,cellFlag:!1};let i=null,s=!1;if(n===$u.DEFAULT)i=e.getPointData().getScalars(),i||(i=e.getCellData().getScalars(),s=!0);else if(n===$u.USE_POINT_DATA)i=e.getPointData().getScalars();else if(n===$u.USE_CELL_DATA)i=e.getCellData().getScalars(),s=!0;else if(n===$u.USE_POINT_FIELD_DATA){const t=e.getPointData();i=r===Ju.BY_ID?t.getArrayByIndex(o):t.getArrayByName(a)}else if(n===$u.USE_CELL_FIELD_DATA){const t=e.getCellData();s=!0,i=r===Ju.BY_ID?t.getArrayByIndex(o):t.getArrayByName(a)}else if(n===$u.USE_FIELD_DATA){const t=e.getFieldData();i=r===Ju.BY_ID?t.getArrayByIndex(o):t.getArrayByName(a)}return{scalars:i,cellFlag:s}},e.mapScalars=(n,r)=>{const{scalars:o,cellFlag:a}=e.getAbstractScalars(n,t.scalarMode,t.arrayAccessMode,t.arrayId,t.colorByArrayName);if(t.areScalarsMappedFromCells=a,!o)return t.colorCoordinates=null,t.colorTextureMap=null,void(t.colorMapColors=null);const i="".concat(e.getMTime()).concat(o.getMTime()).concat(r);if(t.colorBuildString!==i){if(t.useLookupTableScalarRange||e.getLookupTable().setRange(t.scalarRange[0],t.scalarRange[1]),e.canUseTextureMapForColoring(o,a))t.mapScalarsToTexture(o,a,r);else{t.colorCoordinates=null,t.colorTextureMap=null;const n=e.getLookupTable();n&&(n.build(),t.colorMapColors=n.mapScalars(o,t.colorMode,t.fieldDataTupleId))}t.colorBuildString="".concat(e.getMTime()).concat(o.getMTime()).concat(r)}},t.mapScalarsToTexture=(n,r,o)=>{const a=t.lookupTable.getRange(),i=t.lookupTable.usingLogScale(),s=t.lookupTable.getAlpha(),l=i?[Math.log10(a[0]),Math.log10(a[1])]:a;if(t.colorMapColors=null,null==t.colorTextureMap||e.getMTime()>t.colorTextureMap.getMTime()||t.lookupTable.getMTime()>t.colorTextureMap.getMTime()||t.lookupTable.getAlpha()!==o){t.lookupTable.setAlpha(o),t.colorTextureMap=null,t.lookupTable.build();const e=t.lookupTable.getNumberOfAvailableColors(),n=2048,a=2,u=r?n**3-3:4096-2;t.numberOfColorsInRange=Math.min(Math.max(e,a),u);const c=t.numberOfColorsInRange+3,d=t.numberOfColorsInRange+2,f=r?[Math.min(Math.ceil(c/n**0),n),Math.min(Math.ceil(c/n**1),n),Math.min(Math.ceil(c/n**2),n)]:[d,2,1],p=f[0]*f[1]*f[2],h=new Float64Array(p);h.fill(NaN);const m=t.numberOfColorsInRange,g=m+2,v=[0,0,0],y=l[0],b=l[1]-l[0];for(let t=0;t<g;++t){const e=y+b*(t-1)/(m-1),n=i?10**e:e;h[oc(v,f)]=n,rc(v,f)}const _=Wl.newInstance({numberOfComponents:1,values:h}),T=t.lookupTable.mapScalars(_,t.colorMode,0);t.colorTextureMap=vu.newInstance(),t.colorTextureMap.setDimensions(f),t.colorTextureMap.getPointData().setScalars(T),t.lookupTable.setAlpha(s)}const u=t.lookupTable.getVectorMode()===ec.MAGNITUDE&&n.getNumberOfComponents()>1?-1:t.lookupTable.getVectorComponent();t.colorCoordinates=function(e,t,n,r,o,a,i){const s=new Array(arguments.length);for(let O=0;O<arguments.length;++O){var l,u;const e=arguments[O];s[O]=null!==(l=null===(u=e.getMTime)||void 0===u?void 0:u.call(e))&&void 0!==l?l:e}const c=s.join("/"),d=ic.get(e);if(d&&d.stringHash===c)return d.textureCoordinates;const f=(n[1]-n[0])/(o-1),[p,h]=[n[0]-f,n[1]+f],m=p-.5*f,g=1/(h-p+f),v=p,y=(o+1)/(h-p),b=e.getData(),_=e.getNumberOfTuples(),T=e.getNumberOfComponents(),x=t<0||t>=T,S=a[2]<=1?2:3,w=Wl.newInstance({numberOfComponents:S,values:new Float32Array(_*S)}),C=w.getData(),P=[0,0,0];ac(P,o+2,a);let A=0,E=0;const I=[.5,.5,.5];for(let O=0;O<_;++O){let e;if(x){let t=0;for(let e=0;e<T;++e){const n=Number(b[A+e]);t+=n*n}e=Math.sqrt(t)}else e=Number(b[A+t]);if(r&&(e=Math.log10(e)),A+=T,ji(e))I[0]=P[0],I[1]=P[1],I[2]=P[2];else if(i){let t=(e-v)*y;t<1?t=0:t>o&&(t=o+1),ac(I,t,a)}else{I[1]=.49;const t=(e-m)*g;I[0]=t>1e3?1e3:t<-1e3?-1e3:t}for(let t=0;t<S;++t)C[E++]=I[t]}return ic.set(e,{stringHash:c,textureCoordinates:w}),w}(n,u,l,i,t.numberOfColorsInRange,t.colorTextureMap.getDimensions(),r)},e.getIsOpaque=()=>{const n=e.getInputData(),r=e.getAbstractScalars(n,t.scalarMode,t.arrayAccessMode,t.arrayId,t.colorByArrayName).scalars;if(!t.scalarVisibility||null==r)return!0;const o=e.getLookupTable();return!o||(o.build(),o.areScalarsOpaque(r,t.colorMode,-1))},e.canUseTextureMapForColoring=(e,n)=>!(!n||t.colorMode===Qu.DIRECT_SCALARS)||!!t.interpolateScalarsBeforeMapping&&((!t.lookupTable||!t.lookupTable.getIndexedLookup())&&(!!e&&((t.colorMode!==Qu.DEFAULT||e.getDataType()!==tc.UNSIGNED_CHAR)&&t.colorMode!==Qu.DIRECT_SCALARS))),e.clearColorArrays=()=>{t.colorMapColors=null,t.colorCoordinates=null,t.colorTextureMap=null},e.getLookupTable=()=>(t.lookupTable||e.createDefaultLookupTable(),t.lookupTable),e.getMTime=()=>{let e=t.mtime;if(null!==t.lookupTable){const n=t.lookupTable.getMTime();e=n>e?n:e}return e},e.getPrimitiveCount=()=>{const t=e.getInputData();return{points:t.getPoints().getNumberOfValues()/3,verts:t.getVerts().getNumberOfValues()-t.getVerts().getNumberOfCells(),lines:t.getLines().getNumberOfValues()-2*t.getLines().getNumberOfCells(),triangles:t.getPolys().getNumberOfValues()-3*t.getPolys().getNumberOfCells()}},e.acquireInvertibleLookupTable=nc("AcquireInvertibleLookupTable"),e.valueToColor=nc("ValueToColor"),e.colorToValue=nc("ColorToValue"),e.useInvertibleColorFor=nc("UseInvertibleColorFor"),e.clearInvertibleColor=nc("ClearInvertibleColor"),e.processSelectorPixelBuffers=(e,n)=>{if(!e||!t.selectionWebGLIdsToVTKIds||!t.populateSelectionSettings)return;const r=e.getRawPixelBuffer(Ku.ID_LOW24),o=e.getRawPixelBuffer(Ku.ID_HIGH24),a=e.getCurrentPass(),i=e.getFieldAssociation();let s=null;i===qu.FIELD_ASSOCIATION_POINTS?s=t.selectionWebGLIdsToVTKIds.points:i===qu.FIELD_ASSOCIATION_CELLS&&(s=t.selectionWebGLIdsToVTKIds.cells),s&&n.forEach(t=>{if(a===Ku.ID_LOW24){let n=0;o&&(n+=o[t],n*=256),n+=r[t+2],n*=256,n+=r[t+1],n*=256,n+=r[t];const a=s[n],i=e.getPixelBuffer(Ku.ID_LOW24);i[t]=255&a,i[t+1]=(65280&a)>>8,i[t+2]=(16711680&a)>>16}else if(a===Ku.ID_HIGH24&&o){let n=0;n+=o[t],n*=256,n+=r[t+2],n*=256,n+=r[t+1],n*=256,n+=r[t];const a=s[n];e.getPixelBuffer(Ku.ID_HIGH24)[t]=(4278190080&a)>>24}})}}const lc={colorMapColors:null,areScalarsMappedFromCells:!1,static:!1,lookupTable:null,scalarVisibility:!0,scalarRange:[0,1],useLookupTableScalarRange:!1,colorMode:0,scalarMode:0,arrayAccessMode:1,renderTime:0,colorByArrayName:null,fieldDataTupleId:-1,populateSelectionSettings:!0,selectionWebGLIdsToVTKIds:null,interpolateScalarsBeforeMapping:!1,colorCoordinates:null,colorTextureMap:null,numberOfColorsInRange:0,forceCompileOnly:0,useInvertibleColors:!1,invertibleScalars:null,customShaderAttributes:[]};function uc(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,lc,n),Kl.extend(e,t,n),dn.get(e,t,["areScalarsMappedFromCells","colorCoordinates","colorMapColors","colorTextureMap","numberOfColorsInRange","selectionWebGLIdsToVTKIds"]),dn.setGet(e,t,["colorByArrayName","arrayAccessMode","colorMode","fieldDataTupleId","interpolateScalarsBeforeMapping","lookupTable","populateSelectionSettings","renderTime","scalarMode","scalarVisibility","static","useLookupTableScalarRange","customShaderAttributes"]),dn.setGetArray(e,t,["scalarRange"],2),ju.implementCoincidentTopologyMethods(e,t),sc(e,t)}var cc=u(u(u({newInstance:dn.newInstance(uc,"vtkMapper"),extend:uc},Xu),Yu),_u);const{isVtkObject:dc}=dn;function fc(e){let t=0;return e.filter((e,n)=>n===t&&(t+=e+1,!0))}function pc(e){let t=0;for(let n=0;n<e.length;)n+=e[n]+1,t++;return t}const hc={extractCellSizes:fc,getNumberOfCells:pc};function mc(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Wl.extend(e,t,function(e){return u({empty:!0,numberOfComponents:1,dataType:Ml.UNSIGNED_INT},e)}(n)),function(e,t){t.classHierarchy.push("vtkCellArray");const n=u({},e);e.getNumberOfCells=n=>void 0===t.numberOfCells||n?(t.cellSizes?t.numberOfCells=t.cellSizes.length:t.numberOfCells=pc(e.getData()),t.numberOfCells):t.numberOfCells,e.getCellSizes=n=>void 0===t.cellSizes||n?(t.cellSizes=fc(e.getData()),t.cellSizes):t.cellSizes,e.resize=r=>{const o=e.getNumberOfTuples();n.resize(r);const a=e.getNumberOfTuples();a<o&&(0===a?(t.numberOfCells=0,t.cellSizes=[]):(t.numberOfCells=void 0,t.cellSizes=void 0))},e.setData=e=>{n.setData(e,1),t.numberOfCells=void 0,t.cellSizes=void 0},e.getCell=e=>{let n=e;const r=t.values[n++];return t.values.subarray(n,n+r)},e.insertNextCell=n=>{let r;r=dc(n)?n.getPointsIds():n;const o=e.getNumberOfCells();return e.insertNextTuples([r.length,...r]),++t.numberOfCells,null!=t.cellSizes&&t.cellSizes.push(r.length),o},e.getMaxCellSize=()=>e.getCellSizes().reduce((e,t)=>Math.max(e,t),0)}(e,t)}var gc=u({newInstance:dn.newInstance(mc,"vtkCellArray"),extend:mc},hc);const{vtkErrorMacro:vc}=dn;const yc={empty:!0,numberOfComponents:3,dataType:Ml.FLOAT,bounds:[1,-1,1,-1,1,-1]};function bc(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,yc,n),Wl.extend(e,t,n),dn.getArray(e,t,["bounds"],6),function(e,t){let n=0;t.classHierarchy.push("vtkPoints"),e.getNumberOfPoints=e.getNumberOfTuples,e.setNumberOfPoints=function(n){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;e.getNumberOfPoints()!==n&&(t.size=n*r,t.values=dn.newTypedArray(t.dataType,t.size),e.setNumberOfComponents(r),e.modified())},e.setPoint=function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];e.setTuple(t,r)},e.getPoint=e.getTuple,e.findPoint=e.findTuple,e.insertNextPoint=(t,n,r)=>e.insertNextTuple([t,n,r]),e.insertPoint=(t,n)=>e.insertTuple(t,n);const r=e.getBounds;e.getBounds=()=>(n<t.mtime&&e.computeBounds(),r());const o=e.getBoundsByReference;e.getBoundsByReference=()=>(n<t.mtime&&e.computeBounds(),o()),e.computeBounds=()=>{if(3===e.getNumberOfComponents()){const n=e.getRange(0);t.bounds[0]=n[0],t.bounds[1]=n[1];const r=e.getRange(1);t.bounds[2]=r[0],t.bounds[3]=r[1];const o=e.getRange(2);t.bounds[4]=o[0],t.bounds[5]=o[1]}else if(2===e.getNumberOfComponents()){const n=e.getRange(0);t.bounds[0]=n[0],t.bounds[1]=n[1];const r=e.getRange(1);t.bounds[2]=r[0],t.bounds[3]=r[1],t.bounds[4]=0,t.bounds[5]=0}else vc("getBounds called on an array with components of ".concat(e.getNumberOfComponents())),Ei(t.bounds);n=dn.getCurrentGlobalMTime()},e.setNumberOfComponents(t.numberOfComponents<2?3:t.numberOfComponents)}(e,t)}var _c={newInstance:dn.newInstance(bc,"vtkPoints"),extend:bc};const Tc={bounds:[-1,-1,-1,-1,-1,-1],pointsIds:[]};function xc(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Tc,n),dn.obj(e,t),t.points||(t.points=_c.newInstance()),dn.get(e,t,["points","pointsIds"]),function(e,t){t.classHierarchy.push("vtkCell"),e.initialize=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(n){t.pointsIds=n;let r=t.points.getData();r.length!==3*t.pointsIds.length&&(r=dn.newTypedArray(e.getDataType(),3*t.pointsIds.length));const o=e.getData();t.pointsIds.forEach((e,t)=>{let n=3*e,a=3*t;r[a]=o[n],r[++a]=o[++n],r[++a]=o[++n]}),t.points.setData(r)}else{t.points=e,t.pointsIds=new Array(e.getNumberOfPoints());for(let n=e.getNumberOfPoints()-1;n>=0;--n)t.pointsIds[n]=n}},e.getBounds=()=>t.points.getBounds(),e.getLength2=()=>{const t=ll.getLengths(e.getBounds());return t[0]*t[0]+t[1]*t[1]+t[2]*t[2]},e.getParametricDistance=e=>{let t,n=0;for(let r=0;r<3;r++)t=e[r]<0?-e[r]:e[r]>1?e[r]-1:0,t>n&&(n=t);return n},e.getNumberOfPoints=()=>t.points.getNumberOfPoints(),e.deepCopy=e=>{e.initialize(t.points,t.pointsIds)},e.getCellDimension=()=>{},e.intersectWithLine=(e,t,n,r,o,a,i)=>{},e.evaluatePosition=(e,t,n,r,o,a)=>{dn.vtkErrorMacro("vtkCell.evaluatePosition is not implemented.")}}(e,t)}var Sc={newInstance:dn.newInstance(xc,"vtkCell"),extend:xc};const wc={array:null,maxId:0,extend:0};function Cc(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,wc,n),dn.obj(e,t),function(e,t){t.classHierarchy.push("vtkCellLinks"),e.buildLinks=n=>{const r=n.getPoints().getNumberOfPoints(),o=n.getNumberOfCells(),a=new Uint32Array(r);if(n.isA("vtkPolyData")){for(let t=0;t<o;++t){const{cellPointIds:r}=n.getCellPoints(t);r.forEach(t=>{e.incrementLinkCount(t)})}e.allocateLinks(r),t.maxId=r-1;for(let t=0;t<o;++t){const{cellPointIds:r}=n.getCellPoints(t);r.forEach(n=>{e.insertCellReference(n,a[n]++,t)})}}else{for(let t=0;t<o;t++)Sc.newInstance().getPointsIds().forEach(t=>{e.incrementLinkCount(t)});e.allocateLinks(r),t.maxId=r-1;for(let t=0;t<o;++t)Sc.newInstance().getPointsIds().forEach(n=>{e.insertCellReference(n,a[n]++,t)})}},e.allocate=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;t.array=Array(e).fill().map(()=>({ncells:0,cells:null})),t.extend=n,t.maxId=-1},e.initialize=()=>{t.array=null},e.getLink=e=>t.array[e],e.getNcells=e=>t.array[e].ncells,e.getCells=e=>t.array[e].cells,e.insertNextPoint=e=>{t.array.push({ncells:e,cells:Array(e)}),++t.maxId},e.insertNextCellReference=(e,n)=>{t.array[e].cells[t.array[e].ncells++]=n},e.deletePoint=e=>{t.array[e].ncells=0,t.array[e].cells=null},e.removeCellReference=(e,n)=>{t.array[n].cells=t.array[n].cells.filter(t=>t!==e),t.array[n].ncells=t.array[n].cells.length},e.addCellReference=(e,n)=>{t.array[n].cells[t.array[n].ncells++]=e},e.resizeCellList=(e,n)=>{t.array[e].cells.length=n},e.squeeze=()=>{!function(e,t){let n=t;for(t>=e.array.length&&(n+=e.array.length);n>e.array.length;)e.array.push({ncells:0,cells:null});e.array.length=n}(t,t.maxId+1)},e.reset=()=>{t.maxId=-1},e.deepCopy=e=>{t.array=[...e.array],t.extend=e.extend,t.maxId=e.maxId},e.incrementLinkCount=e=>{++t.array[e].ncells},e.allocateLinks=e=>{for(let n=0;n<e;++n)t.array[n].cells=new Array(t.array[n].ncells)},e.insertCellReference=(e,n,r)=>{t.array[e].cells[n]=r}}(e,t)}var Pc={newInstance:dn.newInstance(Cc,"vtkCellLinks"),extend:Cc};const Ac={VTK_EMPTY_CELL:0,VTK_VERTEX:1,VTK_POLY_VERTEX:2,VTK_LINE:3,VTK_POLY_LINE:4,VTK_TRIANGLE:5,VTK_TRIANGLE_STRIP:6,VTK_POLYGON:7,VTK_PIXEL:8,VTK_QUAD:9,VTK_TETRA:10,VTK_VOXEL:11,VTK_HEXAHEDRON:12,VTK_WEDGE:13,VTK_PYRAMID:14,VTK_PENTAGONAL_PRISM:15,VTK_HEXAGONAL_PRISM:16,VTK_QUADRATIC_EDGE:21,VTK_QUADRATIC_TRIANGLE:22,VTK_QUADRATIC_QUAD:23,VTK_QUADRATIC_POLYGON:36,VTK_QUADRATIC_TETRA:24,VTK_QUADRATIC_HEXAHEDRON:25,VTK_QUADRATIC_WEDGE:26,VTK_QUADRATIC_PYRAMID:27,VTK_BIQUADRATIC_QUAD:28,VTK_TRIQUADRATIC_HEXAHEDRON:29,VTK_QUADRATIC_LINEAR_QUAD:30,VTK_QUADRATIC_LINEAR_WEDGE:31,VTK_BIQUADRATIC_QUADRATIC_WEDGE:32,VTK_BIQUADRATIC_QUADRATIC_HEXAHEDRON:33,VTK_BIQUADRATIC_TRIANGLE:34,VTK_CUBIC_LINE:35,VTK_CONVEX_POINT_SET:41,VTK_POLYHEDRON:42,VTK_PARAMETRIC_CURVE:51,VTK_PARAMETRIC_SURFACE:52,VTK_PARAMETRIC_TRI_SURFACE:53,VTK_PARAMETRIC_QUAD_SURFACE:54,VTK_PARAMETRIC_TETRA_REGION:55,VTK_PARAMETRIC_HEX_REGION:56,VTK_HIGHER_ORDER_EDGE:60,VTK_HIGHER_ORDER_TRIANGLE:61,VTK_HIGHER_ORDER_QUAD:62,VTK_HIGHER_ORDER_POLYGON:63,VTK_HIGHER_ORDER_TETRAHEDRON:64,VTK_HIGHER_ORDER_WEDGE:65,VTK_HIGHER_ORDER_PYRAMID:66,VTK_HIGHER_ORDER_HEXAHEDRON:67,VTK_LAGRANGE_CURVE:68,VTK_LAGRANGE_TRIANGLE:69,VTK_LAGRANGE_QUADRILATERAL:70,VTK_LAGRANGE_TETRAHEDRON:71,VTK_LAGRANGE_HEXAHEDRON:72,VTK_LAGRANGE_WEDGE:73,VTK_LAGRANGE_PYRAMID:74,VTK_NUMBER_OF_CELL_TYPES:75},Ec=["vtkEmptyCell","vtkVertex","vtkPolyVertex","vtkLine","vtkPolyLine","vtkTriangle","vtkTriangleStrip","vtkPolygon","vtkPixel","vtkQuad","vtkTetra","vtkVoxel","vtkHexahedron","vtkWedge","vtkPyramid","vtkPentagonalPrism","vtkHexagonalPrism","UnknownClass","UnknownClass","UnknownClass","UnknownClass","vtkQuadraticEdge","vtkQuadraticTriangle","vtkQuadraticQuad","vtkQuadraticTetra","vtkQuadraticHexahedron","vtkQuadraticWedge","vtkQuadraticPyramid","vtkBiQuadraticQuad","vtkTriQuadraticHexahedron","vtkQuadraticLinearQuad","vtkQuadraticLinearWedge","vtkBiQuadraticQuadraticWedge","vtkBiQuadraticQuadraticHexahedron","vtkBiQuadraticTriangle","vtkCubicLine","vtkQuadraticPolygon","UnknownClass","UnknownClass","UnknownClass","UnknownClass","vtkConvexPointSet","UnknownClass","UnknownClass","UnknownClass","UnknownClass","UnknownClass","UnknownClass","UnknownClass","UnknownClass","UnknownClass","vtkParametricCurve","vtkParametricSurface","vtkParametricTriSurface","vtkParametricQuadSurface","vtkParametricTetraRegion","vtkParametricHexRegion","UnknownClass","UnknownClass","UnknownClass","vtkHigherOrderEdge","vtkHigherOrderTriangle","vtkHigherOrderQuad","vtkHigherOrderPolygon","vtkHigherOrderTetrahedron","vtkHigherOrderWedge","vtkHigherOrderPyramid","vtkHigherOrderHexahedron"];const Ic={getClassNameFromTypeId:function(e){return e<Ec.length?Ec[e]:"UnknownClass"},getTypeIdFromClassName:function(e){return Ec.findIndex(e)},isLinear:function(e){return e<Ac.VTK_QUADRATIC_EDGE||e===Ac.VTK_CONVEX_POINT_SET||e===Ac.VTK_POLYHEDRON},hasSubCells:function(e){return e===Ac.VTK_TRIANGLE_STRIP||e===Ac.VTK_POLY_LINE||e===Ac.VTK_POLY_VERTEX}};const Oc={size:0,maxId:-1,extend:1e3};function Mc(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Oc,n),dn.obj(e,t),dn.get(e,t,["size","maxId","extend"]),dn.getArray(e,t,["typeArray","locationArray"]),function(e,t){t.classHierarchy.push("vtkCellTypes"),e.allocate=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:512,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;t.size=e>0?e:1,t.extend=n>0?n:1,t.maxId=-1,t.typeArray=new Uint8Array(e),t.locationArray=new Uint32Array(e)},e.insertCell=(e,n,r)=>{t.typeArray[e]=n,t.locationArray[e]=r,e>t.maxId&&(t.maxId=e)},e.insertNextCell=(n,r)=>(e.insertCell(++t.maxId,n,r),t.maxId),e.setCellTypes=(e,n,r)=>{t.size=e,t.typeArray=n,t.locationArray=r,t.maxId=e-1},e.getCellLocation=e=>t.locationArray[e],e.deleteCell=e=>{t.typeArray[e]=Ac.VTK_EMPTY_CELL},e.getNumberOfTypes=()=>t.maxId+1,e.isType=t=>{const n=e.getNumberOfTypes();for(let r=0;r<n;++r)if(t===e.getCellType(r))return!0;return!1},e.insertNextType=t=>e.insertNextCell(t,-1),e.getCellType=e=>t.typeArray[e],e.reset=()=>{t.maxId=-1},e.deepCopy=n=>{e.allocate(n.getSize(),n.getExtend()),t.typeArray.set(n.getTypeArray()),t.locationArray.set(n.getLocationArray()),t.maxId=n.getMaxId()}}(e,t)}var Rc=u({newInstance:dn.newInstance(Mc,"vtkCellTypes"),extend:Mc},Ic);const Lc={NO_INTERSECTION:0,YES_INTERSECTION:1,ON_LINE:2};var kc={IntersectionState:Lc};const{IntersectionState:Dc}=kc;function Bc(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;const o={t:Number.MIN_VALUE,distance:0},a=[];let i;a[0]=n[0]-t[0],a[1]=n[1]-t[1],a[2]=n[2]-t[2];const s=a[0]*(e[0]-t[0])+a[1]*(e[1]-t[1])+a[2]*(e[2]-t[2]),l=Sa(a,a);let u=1e-5*s;return 0!==l&&(o.t=s/l),u<0&&(u=-u),-u<l&&l<u||l<=0||o.t<0?i=t:o.t>1?i=n:(i=a,a[0]=t[0]+o.t*a[0],a[1]=t[1]+o.t*a[1],a[2]=t[2]+o.t*a[2]),r&&(r[0]=i[0],r[1]=i[1],r[2]=i[2]),o.distance=La(i,e),o}function Nc(e,t,n,r,o,a){const i=[],s=[],l=[];o[0]=0,a[0]=0,ya(t,e,i),ya(r,n,s),ya(n,e,l);const u=[Sa(i,i),-Sa(i,s),-Sa(i,s),Sa(s,s)],c=[];if(c[0]=Sa(i,l),c[1]=-Sa(s,l),0===pi(u,c,2)){let i=Number.MAX_VALUE;const s=[e,t,n,r],l=[n,n,e,e],u=[r,r,t,t];let c;a[0],a[0],o[0],o[0],o[0],o[0],a[0],a[0];for(let e=0;e<4;e++)c=Bc(s[e],l[e],u[e]),c.distance<i&&(i=c.distance,c.t);return Dc.ON_LINE}return o[0]=c[0],a[0]=c[1],o[0]>=0&&o[0]<=1&&a[0]>=0&&a[0]<=1?Dc.YES_INTERSECTION:Dc.NO_INTERSECTION}const Vc={distanceToLine:Bc,intersection:Nc};const Fc={orientations:null};function Uc(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Fc,n),Sc.extend(e,t,n),dn.setGet(e,t,["orientations"]),function(e,t){t.classHierarchy.push("vtkLine"),e.getCellDimension=()=>1,e.intersectWithLine=(e,n,r,o,a)=>{const i={intersect:0,t:Number.MAX_VALUE,subId:0,betweenPoints:null};a[1]=0,a[2]=0;const s=[],l=[],u=[];t.points.getPoint(0,l),t.points.getPoint(1,u);const c=[],d=[],f=Nc(e,n,l,u,c,d);var p;if(i.t=c[0],i.betweenPoints=(p=i.t)>=0&&p<=1,a[0]=d[0],f===Dc.YES_INTERSECTION){for(let t=0;t<3;t++)o[t]=l[t]+a[0]*(u[t]-l[t]),s[t]=e[t]+i.t*(n[t]-e[t]);if(La(o,s)<=r*r)return i.intersect=1,i}else{let t;if(i.t<0)return t=Bc(e,l,u,o),t.distance<=r*r?(i.t=0,i.intersect=1,i.betweenPoints=!0,i):i;if(i.t>1)return t=Bc(n,l,u,o),t.distance<=r*r?(i.t=1,i.intersect=1,i.betweenPoints=!0,i):i;if(a[0]<0)return a[0]=0,t=Bc(l,e,n,o),i.t=t.t,t.distance<=r*r?(i.intersect=1,i):i;if(a[0]>1)return a[0]=1,t=Bc(u,e,n,o),i.t=t.t,t.distance<=r*r?(i.intersect=1,i):i}return i},e.evaluateLocation=(e,n,r)=>{const o=[],a=[];t.points.getPoint(0,o),t.points.getPoint(1,a);for(let t=0;t<3;t++)n[t]=o[t]+e[0]*(a[t]-o[t]);r[0]=1-e[0],r[1]=e[0]},e.evaluateOrientation=(e,n,r)=>!!t.orientations&&(os(n,t.orientations[0],t.orientations[1],e[0]),r[0]=1-e[0],r[1]=e[0],!0)}(e,t)}var zc=u(u({newInstance:dn.newInstance(Uc,"vtkLine"),extend:Uc},Vc),kc);const Gc={};function Wc(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Gc,n),uu.extend(e,t,n),dn.setGet(e,t,["points"]),function(e,t){t.classHierarchy.push("vtkPointSet"),t.points?t.points=ut(t.points):t.points=_c.newInstance(),e.getNumberOfPoints=()=>t.points.getNumberOfPoints(),e.getBounds=()=>t.points.getBounds(),e.computeBounds=()=>{e.getBounds()};const n=e.shallowCopy;e.shallowCopy=function(e){n(e,arguments.length>1&&void 0!==arguments[1]&&arguments[1]),t.points=_c.newInstance(),t.points.shallowCopy(e.getPoints())};const r=e.getMTime;e.getMTime=()=>{var e,n;const o=r();return Math.max(o,null!==(e=null===(n=t.points)||void 0===n?void 0:n.getMTime())&&void 0!==e?e:o)};const o=e.initialize;e.initialize=()=>{var e;return null===(e=t.points)||void 0===e||e.initialize(),o()}}(e,t)}var Hc={newInstance:dn.newInstance(Wc,"vtkPointSet"),extend:Wc};const jc={orientations:null,distanceFunction:$n};function Kc(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,jc,n),Sc.extend(e,t,n),dn.setGet(e,t,["orientations","distanceFunction"]),t.distancesTime={},dn.obj(t.distancesTime,{mtime:0}),function(e,t){t.classHierarchy.push("vtkPolyLine");const n=zc.newInstance();n.getPoints().setNumberOfPoints(2),e.getCellDimension=()=>1,e.intersectWithLine=(r,o,a,i,s,l,u)=>{const c={intersect:0,t:Number.MAX_VALUE,subId:0,betweenPoints:null},d=e.getNumberOfPoints()-1;let f=Number.MAX_VALUE;for(let e=0;e<d;e++){const d=[0,0,0];n.getPoints().getData().set(t.points.getData().subarray(3*e,3*(e+2)));const p=n.intersectWithLine(a,i,s,l,u);if(1===p.intersect&&p.t<=c.t+s&&p.t>=r&&p.t<=o){c.intersect=1;const t=n.getParametricDistance(d);if(t<f||t===f&&p.t<c.t){c.subId=e,c.t=p.t,f=t;for(let e=0;e<3;e++)l[e],d[e]}}}return c},e.evaluateLocation=(e,r,o,a)=>(n.getPoints().getData().set(t.points.getData().subarray(3*e,3*(e+2))),n.evaluateLocation(r,o,a)),e.evaluateOrientation=(e,r,o,a)=>(t.orientations?n.setOrientations([t.orientations[e],t.orientations[e+1]]):n.setOrientations(null),n.evaluateOrientation(r,o,a)),e.getDistancesToFirstPoint=()=>{const n=t.distancesTime.getMTime();if(n<t.points.getMTime()||n<e.getMTime()){const n=e.getNumberOfPoints();if(t.distances?t.distances.length=n:t.distances=new Array(n),n>0){const e=new Array(3),r=new Array(3);let o=0;t.distances[0]=o,t.points.getPoint(0,e);for(let a=1;a<n;++a)t.points.getPoint(a,r),o+=t.distanceFunction(e,r),t.distances[a]=o,Un(e,r)}t.distancesTime.modified()}return t.distances},e.findPointIdAtDistanceFromFirstPoint=t=>{const n=e.getDistancesToFirstPoint();if(n.length<2)return-1;let r=0,o=n.length-1;if(t<n[r]||t>n[o]||0===n[o])return-1;for(;o-r>1;){const e=Math.floor((r+o)/2);n[e]<=t?r=e:o=e}return r}}(e,t)}var Zc={newInstance:dn.newInstance(Kc,"vtkPolyLine"),extend:Kc};const qc={elements:[]};function Xc(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,qc,n),dn.obj(e,t),function(e,t){t.classHierarchy.push("vtkPriorityQueue"),e.push=(e,n)=>{const r=t.elements.findIndex(t=>t.priority>e);t.elements.splice(r,0,{priority:e,element:n})},e.pop=()=>t.elements.length>0?t.elements.shift().element:null,e.deleteById=e=>{t.elements=t.elements.filter(t=>{let{element:n}=t;return n.id!==e})},e.length=()=>t.elements.length}(e,t)}var Yc={newInstance:dn.newInstance(Xc,"vtkPriorityQueue"),extend:Xc};const Qc=1e-6,$c=1.1920929e-7,Jc={FAILURE:-1,OUTSIDE:0,INSIDE:1,INTERSECTION:2,ON_LINE:3};function ed(e,t,n,r,o){return(r[e]-n[e])*(o[t]-n[t])-(o[e]-n[e])*(r[t]-n[t])}const td={PolygonWithPointIntersectionState:Jc,pointInPolygon:function(e,t,n,r){if(e[0]<n[0]||e[0]>n[1]||e[1]<n[2]||e[1]>n[3]||e[2]<n[4]||e[2]>n[5])return Jc.OUTSIDE;if(Aa(r)<=$c)return Jc.FAILURE;let o=1e-8*((n[1]-n[0])*(n[1]-n[0])+(n[3]-n[2])*(n[3]-n[2])+(n[5]-n[4])*(n[5]-n[4]));o*=o,o=0===o?$c:o;const a=[],i=[];for(let c=0;c<t.length;){if(a[0]=t[c++],a[1]=t[c++],a[2]=t[c++],La(e,a)<=o)return Jc.INSIDE;const{distance:n,t:r}=zc.distanceToLine(e,a,i);if(n<=o&&r>0&&r<1)return Jc.INSIDE}let s,l;Math.abs(r[0])>Math.abs(r[1])?Math.abs(r[0])>Math.abs(r[2])?(s=1,l=2):(s=0,l=1):Math.abs(r[1])>Math.abs(r[2])?(s=0,l=2):(s=0,l=1);let u=0;for(let c=0;c<t.length;)a[0]=t[c++],a[1]=t[c++],a[2]=t[c++],c<t.length?(i[0]=t[c],i[1]=t[c+1],i[2]=t[c+2]):(i[0]=t[0],i[1]=t[1],i[2]=t[2]),a[l]<=e[l]?i[l]>e[l]&&ed(s,l,a,i,e)>0&&++u:i[l]<=e[l]&&ed(s,l,a,i,e)<0&&--u;return 0===u?Jc.OUTSIDE:Jc.INSIDE},getBounds:function(e,t,n){const r=e.length,o=[];t.getPoint(e[0],o),n[0]=o[0],n[1]=o[0],n[2]=o[1],n[3]=o[1],n[4]=o[2],n[5]=o[2];for(let i=1;i<r;i++)t.getPoint(e[i],o),ll.addPoint(n,...o);const a=ll.getLengths(n);return Sa(a,a)},getNormal:function(e,t,n){n.length=3,n[0]=0,n[1]=0,n[2]=0;const r=[];let o=[],a=[];const i=[],s=[];t.getPoint(e[0],r),t.getPoint(e[1],o);for(let l=2;l<e.length;l++){t.getPoint(e[l],a),ya(a,o,i),ya(r,o,s);const u=[0,0,0];Ca(i,s,u),va(n,u,n),[o,a]=[a,o]}return Aa(n)},computeCentroid:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,0,0];n[0]=0,n[1]=0,n[2]=0;const r=e.length,o=[];for(let a=0;a<r;a++)t.getPoint(e[a],o),n[0]+=o[0],n[1]+=o[1],n[2]+=o[2];return n[0]/=r,n[1]/=r,n[2]/=r,n}};function nd(e,t){function n(e){const n=[0,0,0],r=[0,0,0],o=[0,0,0],a=[0,0,0];ya(e.point,e.previous.point,n),ya(e.next.point,e.point,r),ya(e.previous.point,e.next.point,o),Ca(n,r,a);const i=Sa(a,t.normal);if(i<=0)return-1;const s=Pa(n)+Pa(r)+Pa(o);return s*s/i}function r(e){if(t.pointCount<=3)return!0;const n=e.previous,r=e.next,o=[0,0,0];ya(r.point,n.point,o);const a=[0,0,0];if(Ca(o,t.normal,a),Aa(a),0===Pa(a))return!1;let i=xs.evaluate(a,n.point,r.next.point),s=i>Qc?1:i<-1e-6?-1:0,l=s<0?1:0;for(let t=r.next.next;t.id!==n.id;t=t.next){const e=t.previous;i=xs.evaluate(a,n.point,t.point);const o=i>Qc?1:i<-1e-6?-1:0;if(o!==s){if(l||(l=o<=0?1:0),zc.intersection(n.point,r.point,t.point,e.point,[0],[0])===Lc.YES_INTERSECTION)return!1;s=o}}return 1===l}function o(e,r){t.pointCount-=1;const o=e.previous,a=e.next;t.tris=t.tris.concat(e.point),t.tris=t.tris.concat(a.point),t.tris=t.tris.concat(o.point),o.next=a,a.previous=o,r.deleteById(o.id),r.deleteById(a.id);const i=n(o);i>0&&r.push(i,o);const s=n(a);s>0&&r.push(s,a),e.id===t.firstPoint.id&&(t.firstPoint=a)}function a(){!function(){const e=[0,0,0],n=[0,0,0];t.normal=[0,0,0];const r=[...t.firstPoint.point];let o=t.firstPoint;for(let a=0;a<t.pointCount;a++){ya(o.point,r,e),ya(o.next.point,r,n);const a=[0,0,0];Ca(e,n,a),va(t.normal,a,t.normal),o=o.next}Aa(t.normal)}();const e=Yc.newInstance();let a=t.firstPoint;for(let r=0;r<t.pointCount;r++){const t=n(a);t>0&&e.push(t,a),a=a.next}for(;t.pointCount>2&&e.length()>0;)if(t.pointCount===e.length()){o(e.pop(),e)}else{const t=e.pop();r(t)&&o(t,e)}return t.pointCount<=2}t.classHierarchy.push("vtkPolygon"),e.triangulate=()=>t.firstPoint?a():null,e.setPoints=e=>{t.pointCount=e.length,t.firstPoint={id:0,point:e[0],next:null,previous:null};let n=t.firstPoint;for(let r=1;r<t.pointCount;r++)n.next={id:r,point:e[r],next:null,previous:n},n=n.next;t.firstPoint.previous=n,n.next=t.firstPoint},e.getPointArray=()=>t.tris}const rd={firstPoint:null,pointCount:0,tris:[]};function od(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,rd,n),dn.obj(e,t),nd(e,t)}var ad=u({newInstance:dn.newInstance(od,"vtkPolygon"),extend:od},td);function id(e,t,n,r){const o=n[0]-t[0],a=n[1]-t[1],i=n[2]-t[2],s=e[0]-t[0],l=e[1]-t[1],u=e[2]-t[2];r[0]=a*u-i*l,r[1]=i*s-o*u,r[2]=o*l-a*s}function sd(e,t,n,r){id(e,t,n,r);const o=Math.sqrt(r[0]*r[0]+r[1]*r[1]+r[2]*r[2]);0!==o&&(r[0]/=o,r[1]/=o,r[2]/=o)}function ld(e){e[0]=-1,e[1]=1,e[2]=0,e[3]=-1,e[4]=0,e[5]=1}const ud={computeNormalDirection:id,computeNormal:sd,interpolationDerivs:ld,intersectWithTriangle:function(e,t,n,r,o,a){let i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1e-6,s=!1;const l=[],u=[],c=[],d=[],f=[];sd(e,t,n,d),sd(r,o,a,f);const p=-Sa(d,e),h=-Sa(f,r),m=[Sa(f,e)+h,Sa(f,t)+h,Sa(f,n)+h];if(m[0]*m[1]>i&&m[0]*m[2]>i)return{intersect:!1,coplanar:s,pt1:l,pt2:u,surfaceId:c};const g=[Sa(d,r)+p,Sa(d,o)+p,Sa(d,a)+p];if(g[0]*g[1]>i&&g[0]*g[2]>i)return{intersect:!1,coplanar:s,pt1:l,pt2:u,surfaceId:c};if(Math.abs(d[0]-f[0])<1e-9&&Math.abs(d[1]-f[1])<1e-9&&Math.abs(d[2]-f[2])<1e-9&&Math.abs(p-h)<1e-9)return s=!0,{intersect:!1,coplanar:s,pt1:l,pt2:u,surfaceId:c};const v=[e,t,n],y=[r,o,a],b=Sa(d,f),_=(p-h*b)/(b*b-1),T=(h-p*b)/(b*b-1),x=[_*d[0]+T*f[0],_*d[1]+T*f[1],_*d[2]+T*f[2]],S=Ca(d,f,[]);Aa(S);let w=0,C=0;const P=[],A=[];let E,I,O=50,M=50;for(let R=0;R<3;R++){const t=R,n=(R+1)%3,o=xs.intersectWithLine(v[t],v[n],r,f);o.intersection&&o.t>0-i&&o.t<1+i&&(o.t<1+i&&o.t>1-i&&(O=w),P[w++]=Sa(o.x,S)-Sa(x,S));const a=xs.intersectWithLine(y[t],y[n],e,d);a.intersection&&a.t>0-i&&a.t<1+i&&(a.t<1+i&&a.t>1-i&&(M=C),A[C++]=Sa(a.x,S)-Sa(x,S))}if(w>2){w--;const e=P[2];P[2]=P[O],P[O]=e}if(C>2){C--;const e=A[2];A[2]=A[M],A[M]=e}if(2!==w||2!==C)return{intersect:!1,coplanar:s,pt1:l,pt2:u,surfaceId:c};if(Number.isNaN(P[0])||Number.isNaN(P[1])||Number.isNaN(A[0])||Number.isNaN(A[1]))return{intersect:!1,coplanar:s,pt1:l,pt2:u,surfaceId:c};if(P[0]>P[1]){const e=P[1];P[1]=P[0],P[0]=e}if(A[0]>A[1]){const e=A[1];A[1]=A[0],A[0]=e}return P[1]<A[0]||A[1]<P[0]?{intersect:!1,coplanar:s,pt1:l,pt2:u,surfaceId:c}:(P[0]<A[0]?P[1]<A[1]?(c[0]=2,c[1]=1,E=A[0],I=P[1]):(c[0]=2,c[1]=2,E=A[0],I=A[1]):P[1]<A[1]?(c[0]=1,c[1]=1,E=P[0],I=P[1]):(c[0]=1,c[1]=2,E=P[0],I=A[1]),Ta(x,S,E,l),Ta(x,S,I,u),{intersect:!0,coplanar:s,pt1:l,pt2:u,surfaceId:c})}};const cd={};function dd(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,cd,n),Sc.extend(e,t,n),function(e,t){t.classHierarchy.push("vtkTriangle"),e.getCellDimension=()=>2,e.intersectWithLine=(n,r,o,a,i)=>{const s={subId:0,t:Number.MAX_VALUE,intersect:0,betweenPoints:!1};i[2]=0;const l=[],u=o*o,c=[],d=[],f=[];t.points.getPoint(0,c),t.points.getPoint(1,d),t.points.getPoint(2,f);const p=[],h=[];if(sd(c,d,f,p),0!==p[0]||0!==p[1]||0!==p[2]){const t=xs.intersectWithLine(n,r,c,p);if(s.betweenPoints=t.betweenPoints,s.t=t.t,a[0]=t.x[0],a[1]=t.x[1],a[2]=t.x[2],!t.intersection)return i[0]=0,i[1]=0,s.intersect=0,s;const o=e.evaluatePosition(a,l,i,h);if(o.evaluation>=0)return o.dist2<=u?(s.intersect=1,s):(s.intersect=o.evaluation,s)}const m=La(c,d),g=La(d,f),v=La(f,c);t.line||(t.line=zc.newInstance()),m>g&&m>v?(t.line.getPoints().setPoint(0,c),t.line.getPoints().setPoint(1,d)):g>v&&g>m?(t.line.getPoints().setPoint(0,d),t.line.getPoints().setPoint(1,f)):(t.line.getPoints().setPoint(0,f),t.line.getPoints().setPoint(1,c));const y=t.line.intersectWithLine(n,r,o,a,i);if(s.betweenPoints=y.betweenPoints,s.t=y.t,y.intersect){const e=[],t=[],n=[];for(let r=0;r<3;r++)e[r]=c[r]-f[r],t[r]=d[r]-f[r],n[r]=a[r]-f[r];return i[0]=Sa(n,e)/v,i[1]=Sa(n,t)/g,s.intersect=1,s}return i[0]=0,i[1]=0,s.intersect=0,s},e.evaluatePosition=(e,n,r,o)=>{const a={subId:0,dist2:0,evaluation:-1};let i,s;const l=[],u=[],c=[],d=[];let f;const p=[],h=[],m=[];let g=0,v=0;const y=[];let b,_,T,x=[];const S=[],w=[],C=[];a.subId=0,r[2]=0,t.points.getPoint(1,l),t.points.getPoint(2,u),t.points.getPoint(0,c),id(l,u,c,d),xs.generalizedProjectPoint(e,l,d,C);let P=0;for(i=0;i<3;i++)f=d[i]<0?-d[i]:d[i],f>P&&(P=f,v=i);for(s=0,i=0;i<3;i++)i!==v&&(y[s++]=i);for(i=0;i<2;i++)p[i]=C[y[i]]-c[y[i]],h[i]=l[y[i]]-c[y[i]],m[i]=u[y[i]]-c[y[i]];if(g=Ua(h,m),0===g)return r[0]=0,r[1]=0,a.evaluation=-1,a;if(r[0]=Ua(p,m)/g,r[1]=Ua(h,p)/g,o[0]=1-(r[0]+r[1]),o[1]=r[0],o[2]=r[1],o[0]>=0&&o[0]<=1&&o[1]>=0&&o[1]<=1&&o[2]>=0&&o[2]<=1)n&&(a.dist2=La(C,e),n[0]=C[0],n[1]=C[1],n[2]=C[2]),a.evaluation=1;else{let t;if(n)if(o[1]<0&&o[2]<0)for(b=La(e,c),_=zc.distanceToLine(e,l,c,t,S),T=zc.distanceToLine(e,c,u,t,w),b<_?(a.dist2=b,x=c):(a.dist2=_,x=S),T<a.dist2&&(a.dist2=T,x=w),i=0;i<3;i++)n[i]=x[i];else if(o[2]<0&&o[0]<0)for(b=La(e,l),_=zc.distanceToLine(e,l,c,t,S),T=zc.distanceToLine(e,l,u,t,w),b<_?(a.dist2=b,x=l):(a.dist2=_,x=S),T<a.dist2&&(a.dist2=T,x=w),i=0;i<3;i++)n[i]=x[i];else if(o[1]<0&&o[0]<0)for(b=La(e,u),_=zc.distanceToLine(e,u,c,t,S),T=zc.distanceToLine(e,l,u,t,w),b<_?(a.dist2=b,x=u):(a.dist2=_,x=S),T<a.dist2&&(a.dist2=T,x=w),i=0;i<3;i++)n[i]=x[i];else if(o[0]<0){const t=zc.distanceToLine(e,l,u,n);a.dist2=t.distance}else if(o[1]<0){const t=zc.distanceToLine(e,u,c,n);a.dist2=t.distance}else if(o[2]<0){const t=zc.distanceToLine(e,l,c,n);a.dist2=t.distance}a.evaluation=0}return a},e.evaluateLocation=(e,n,r)=>{const o=[],a=[],i=[];t.points.getPoint(0,o),t.points.getPoint(1,a),t.points.getPoint(2,i);const s=1-e[0]-e[1];for(let t=0;t<3;t++)n[t]=o[t]*s+a[t]*e[0]+i[t]*e[1];r[0]=s,r[1]=e[0],r[2]=e[1]},e.getParametricDistance=e=>{let t,n=0;const r=[];r[0]=e[0],r[1]=e[1],r[2]=1-e[0]-e[1];for(let o=0;o<3;o++)t=r[o]<0?-r[o]:r[o]>1?r[o]-1:0,t>n&&(n=t);return n},e.derivatives=(e,n,r,o,a)=>{const i=t.points.getPoint(0),s=t.points.getPoint(1),l=t.points.getPoint(2),u=[],c=[],d=[],f=[];sd(i,s,l,u),ya(s,i,c),ya(l,i,f),Ca(u,c,d);const p=Aa(c);if(p<=0||Aa(d)<=0){for(let e=0;e<o;e++)for(let t=0;t<3;t++)a[e*o+t]=0;return}const h=[0,0],m=[p,0],g=[Sa(f,c),Sa(f,d)],v=new Array(6);ld(v);const y=[m[0]-h[0],m[1]-h[1],g[0]-h[0],g[1]-h[1]],b=dn.newTypedArray(Ct.Float64Array,4);hi(y,b,2);for(let t=0;t<o;t++){let e=0,n=0;for(let a=0;a<3;a++)e+=v[a]*r[o*a+t],n+=v[3+a]*r[o*a+t];const i=e*b[0]+n*b[1],s=e*b[2]+n*b[3];a[3*t]=i*c[0]+s*d[0],a[3*t+1]=i*c[1]+s*d[1],a[3*t+2]=i*c[2]+s*d[2]}},e.cellBoundary=(e,n,r)=>{const o=n[0]-n[1],a=.5*(1-n[0])-n[1],i=2*n[0]+n[1]-1;return o>=0&&a>=0?(r[0]=t.pointsIds[0],r[1]=t.pointsIds[1]):a<0&&i>=0?(r[0]=t.pointsIds[1],r[1]=t.pointsIds[2]):(r[0]=t.pointsIds[2],r[1]=t.pointsIds[0]),!(n[0]<0||n[1]<0||n[0]>1||n[1]>1||1-n[0]-n[1]<0)}}(e,t)}var fd=u({newInstance:dn.newInstance(dd,"vtkTriangle"),extend:dd},ud);const pd={};function hd(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,pd,n),Sc.extend(e,t,n),function(e,t){t.classHierarchy.push("vtkQuad"),e.getCellDimension=()=>2,e.getCellType=()=>Ac.VTK_QUAD,e.getNumberOfEdges=()=>4,e.getNumberOfFaces=()=>0,e.intersectWithLine=(e,n,r,o,a)=>{let i,s={subId:0,t:Number.MAX_VALUE,intersect:0,betweenPoints:!1};const l=t.points.getPoint(0,[]),u=t.points.getPoint(1,[]),c=t.points.getPoint(2,[]),d=t.points.getPoint(3,[]),f=La(l,c),p=La(u,d);if(f===p){let e,n=0,r=0;for(let o=0;o<4;o++)e=t.pointsIds[o],e>n&&(n=e,r=o);i=0===r||2===r?0:1}else i=f<p?0:1;let h,m=null;t.triangle?m=t.triangle.getPoints():(t.triangle=fd.newInstance(),m=_c.newInstance(),m.setNumberOfPoints(3),t.triangle.initialize(m));const g={intersected:!1,subId:-1,x:[0,0,0],pCoords:[0,0,0],t:-1};let v;const y={intersected:!1,subId:-1,x:[0,0,0],pCoords:[0,0,0],t:-1};let b,_;switch(i){case 0:m.setPoint(0,...l),m.setPoint(1,...u),m.setPoint(2,...c),h=t.triangle.intersectWithLine(e,n,r,g.x,g.pCoords),m.setPoint(0,...c),m.setPoint(1,...d),m.setPoint(2,...l),v=t.triangle.intersectWithLine(e,n,r,y.x,y.pCoords),b=h.intersect&&v.intersect?h.t<=v.t:h.intersect,_=h.intersect&&v.intersect?v.t<h.t:v.intersect,b?(s=h,o[0]=g.x[0],o[1]=g.x[1],o[2]=g.x[2],a[0]=g.pCoords[0]+g.pCoords[1],a[1]=g.pCoords[1],a[2]=g.pCoords[2]):_&&(s=v,o[0]=y.x[0],o[1]=y.x[1],o[2]=y.x[2],a[0]=1-(y.pCoords[0]+y.pCoords[1]),a[1]=1-y.pCoords[1],a[2]=y.pCoords[2]);break;case 1:m.setPoint(0,...l),m.setPoint(1,...u),m.setPoint(2,...d),h=t.triangle.intersectWithLine(e,n,r,g.x,g.pCoords),m.setPoint(0,...c),m.setPoint(1,...d),m.setPoint(2,...u),v=t.triangle.intersectWithLine(e,n,r,y.x,y.pCoords),b=h.intersect&&v.intersect?h.t<=v.t:h.intersect,_=h.intersect&&v.intersect?v.t<h.t:v.intersect,b?(s=h,o[0]=g.x[0],o[1]=g.x[1],o[2]=g.x[2],a[0]=g.pCoords[0],a[1]=g.pCoords[1],a[2]=g.pCoords[2]):_&&(s=v,o[0]=y.x[0],o[1]=y.x[1],o[2]=y.x[2],a[0]=1-y.pCoords[0],a[1]=1-y.pCoords[1],a[2]=y.pCoords[2])}return s},e.interpolationFunctions=(e,t)=>{const n=1-e[0],r=1-e[1];t[0]=n*r,t[1]=e[0]*r,t[2]=e[0]*e[1],t[3]=n*e[1]},e.evaluateLocation=(n,r,o)=>{const a=[];e.interpolationFunctions(n,o),r[0]=0,r[1]=0,r[2]=0;for(let e=0;e<4;e++){t.points.getPoint(e,a);for(let t=0;t<3;t++)r[t]+=a[t]*o[e]}}}(e,t)}var md={newInstance:dn.newInstance(hd,"vtkQuad"),extend:hd};const{vtkErrorMacro:gd}=dn;function vd(e){return()=>gd("vtkTriangleStrip.".concat(e," - NOT IMPLEMENTED"))}const yd={decomposeStrip:function(e,t){if(!Array.isArray(e)||e.length<3)return void gd("decomposeStrip - Invalid points array");let n=e[0],r=e[1];for(let o=0;o<e.length-2;o++){const a=e[o+2];o%2?t.insertNextCell([r,n,a]):t.insertNextCell([n,r,a]),n=r,r=a}}};const bd={line:null,triangle:null,tris:null};function _d(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,bd,n),Sc.extend(e,t,n),t.line||(t.line=zc.newInstance()),t.triangle||(t.triangle=fd.newInstance()),function(e,t){t.classHierarchy.push("vtkTriangleStrip");const n=e.initialize;e.initialize=(e,r)=>{t.triangle.initialize(e,r),n(e,r)},e.getCellType=()=>Ac.VTK_TRIANGLE_STRIP,e.getCellDimension=()=>2,e.getNumberOfEdges=()=>t.pointsIds.length,e.getNumberOfFaces=()=>0,e.evaluatePosition=(e,n,r,o,a)=>{const i=[0,0,0];let s=Number.MAX_VALUE,l=0;const u=[],c=[],d=[];r[2]=0,c[0]=0,c[1]=0,c[2]=0;const f=t.triangle.getPoints();f.setNumberOfPoints(3);const p=t.triangle.getPointsIds().length;for(let t=0;t<p;t++)a[t]=0;for(let h=0;h<p-2;h++){const o=[];f.getPoint(h,o);const a=[];f.getPoint(h+1,a);const p=[];f.getPoint(h+2,p),f.setData(Float32Array.from([...o,...a,...p]),3);const m=t.triangle.evaluatePosition(e,d,i,u),g=m.dist2;m.evaluation>=0&&(g<s||g===s&&0===l)&&(l=m,n&&(n[0]=d[0],n[1]=d[1],n[2]=d[2]),r[0]=i[0],r[1]=i[1],s=g,c[0]=u[0],c[1]=u[1],c[2]=u[2])}return o[0]=s,a[0]=c[0],a[1]=c[1],a[2]=c[2],l},e.evaluateLocation=(e,n,r,o)=>{const a=[[0,1,2],[1,0,2]],i=e%2,s=t.pointsIds.length;for(let t=0;t<s;t++)o[t]=0;const l=1-n[0]-n[1];o[e]=l,o[e+1]=n[0],o[e+2]=n[1];const u=[];t.points.getPoint(e+a[i][0],u);const c=[];t.points.getPoint(e+a[i][1],c);const d=[];t.points.getPoint(e+a[i][2],d);for(let t=0;t<3;t++)r[t]=u[t]*o[e]+c[t]*o[e+1]+d[t]*o[e+2]},e.cellBoundary=(e,n,r)=>{const o=[[0,1,2],[1,0,2]],a=e%2,i=t.triangle.getPointsIds();return i[0]=t.pointsIds[o[a][0]],i[1]=t.pointsIds[o[a][1]],i[2]=t.pointsIds[o[a][2]],t.triangle.cellBoundary(0,n,r)},e.getEdge=e=>{let n,r;const o=t.pointsIds.length;return 0===e?(n=0,r=1):e===o-1?(n=e-1,r=e):(n=e-1,r=e+1),t.line.getPointsIds()[0]=t.pointsIds[n],t.line.getPointsIds()[1]=t.pointsIds[r],t.line.getPoints().setPoint(0,t.points.getPoint(n)),t.line.getPoints().setPoint(1,t.points.getPoint(r)),t.line},e.intersectWithLine=(e,n,r,o,a)=>{const i=t.pointsIds.length-2,s=t.triangle.getPoints();s.setNumberOfPoints(3);for(let l=0;l<i;l++){const i=[];t.points.getPoint(t.pointsIds[l],i);const u=[];t.points.getPoint(t.pointsIds[l+1],u);const c=[];t.points.getPoint(t.pointsIds[l+2],c),s.setData(Float32Array.from([...i,...u,...c]),3);const d=t.triangle.intersectWithLine(e,n,r,o,a);if(d.intersect)return d}return!1},e.triangulate=()=>{const e=t.points.getNumberOfPoints()-2;t.tris=new Array(3*e);const n=[[0,1,2],[1,0,2]];for(let r=0;r<e;r++){const e=r%2;for(let o=0;o<3;o++)t.tris[3*r+o]=r+n[e][o]}return!0},e.getPointArray=()=>t.tris,e.derivatives=(e,n,r,o,a)=>{const i=[];t.points.getPoint(e,i);const s=[];t.points.getPoint(e+1,s);const l=[];t.points.getPoint(e+2,l);const u=t.triangle.getPoints();u.setPoint(0,...i),u.setPoint(1,...s),u.setPoint(2,...l),t.triangle.derivatives(0,n,r,o,a)},e.getParametricCenter=e=>(e[0]=.333333,e[1]=.333333,e[2]=0,Math.floor((t.pointsIds.length-2)/2)),e.contour=(e,t,n,r,o,a,i,s,l,u,c)=>vd("contour")(),e.clip=(e,t,n,r,o,a,i,s,l,u)=>vd("clip")()}(e,t)}var Td=u({newInstance:dn.newInstance(_d,"vtkTriangleStrip"),extend:_d},yd);const xd=["verts","lines","polys","strips"];const{vtkWarningMacro:Sd}=dn,wd={[Ac.VTK_LINE]:zc,[Ac.VTK_QUAD]:md,[Ac.VTK_POLY_LINE]:zc,[Ac.VTK_TRIANGLE]:fd,[Ac.VTK_TRIANGLE_STRIP]:Td,[Ac.VTK_POLY_LINE]:Zc,[Ac.VTK_POLYGON]:ad};const Cd={};function Pd(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Cd,n),Hc.extend(e,t,n),dn.get(e,t,["cells","links"]),dn.setGet(e,t,["verts","lines","polys","strips"]),function(e,t){t.classHierarchy.push("vtkPolyData"),xd.forEach(n=>{e["getNumberOf".concat(function(e){return e.replace(/(?:^\w|[A-Z]|\b\w)/g,e=>e.toUpperCase()).replace(/\s+/g,"")}(n))]=()=>t[n].getNumberOfCells(),t[n]?t[n]=ut(t[n]):t[n]=gc.newInstance()}),e.getNumberOfCells=()=>xd.reduce((e,n)=>e+t[n].getNumberOfCells(),0);const n=e.shallowCopy;e.shallowCopy=function(e){n(e,arguments.length>1&&void 0!==arguments[1]&&arguments[1]),xd.forEach(n=>{t[n]=gc.newInstance(),t[n].shallowCopy(e.getReferenceByName(n))})};const r=e.getMTime;e.getMTime=()=>xd.reduce((e,n)=>{var r,o;return Math.max(e,null!==(r=null===(o=t[n])||void 0===o?void 0:o.getMTime())&&void 0!==r?r:e)},r());const o=e.initialize;e.initialize=()=>(xd.forEach(e=>{var n;return null===(n=t[e])||void 0===n?void 0:n.initialize()}),o()),e.buildCells=()=>{const n=e.getNumberOfVerts(),r=e.getNumberOfLines(),o=e.getNumberOfPolys(),a=e.getNumberOfStrips(),i=n+r+o+a,s=new Uint8Array(i);let l=s;const u=new Uint32Array(i);let c=u;if(n){let e=0;t.verts.getCellSizes().forEach((t,n)=>{c[n]=e,l[n]=t>1?Ac.VTK_POLY_VERTEX:Ac.VTK_VERTEX,e+=t+1}),c=c.subarray(n),l=l.subarray(n)}if(r){let e=0;t.lines.getCellSizes().forEach((t,n)=>{c[n]=e,l[n]=t>2?Ac.VTK_POLY_LINE:Ac.VTK_LINE,1===t&&Sd("Building VTK_LINE ",n," with only one point, but VTK_LINE needs at least two points. Check the input."),e+=t+1}),c=c.subarray(r),l=l.subarray(r)}if(o){let e=0;t.polys.getCellSizes().forEach((t,n)=>{switch(c[n]=e,t){case 3:l[n]=Ac.VTK_TRIANGLE;break;case 4:l[n]=Ac.VTK_QUAD;break;default:l[n]=Ac.VTK_POLYGON}t<3&&Sd("Building VTK_TRIANGLE ",n," with less than three points, but VTK_TRIANGLE needs at least three points. Check the input."),e+=t+1}),c+=c.subarray(o),l+=l.subarray(o)}if(a){let e=0;l.fill(Ac.VTK_TRIANGLE_STRIP,0,a),t.strips.getCellSizes().forEach((t,n)=>{c[n]=e,e+=t+1})}t.cells=Rc.newInstance(),t.cells.setCellTypes(i,s,u)},e.buildLinks=function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;void 0===t.cells&&e.buildCells(),t.links=Pc.newInstance(),n>0?t.links.allocate(n):t.links.allocate(e.getPoints().getNumberOfPoints()),t.links.buildLinks(e)},e.getCellType=e=>t.cells.getCellType(e),e.getCellPoints=n=>{const r=e.getCellType(n);let o=null;switch(r){case Ac.VTK_VERTEX:case Ac.VTK_POLY_VERTEX:o=t.verts;break;case Ac.VTK_LINE:case Ac.VTK_POLY_LINE:o=t.lines;break;case Ac.VTK_TRIANGLE:case Ac.VTK_QUAD:case Ac.VTK_POLYGON:o=t.polys;break;case Ac.VTK_TRIANGLE_STRIP:o=t.strips;break;default:return o=null,{type:0,cellPointIds:null}}const a=t.cells.getCellLocation(n);return{cellType:r,cellPointIds:o.getCell(a)}},e.getPointCells=e=>t.links.getCells(e),e.getCellEdgeNeighbors=(e,n,r)=>{const o=t.links.getLink(n),a=t.links.getLink(r);return o.cells.filter(t=>t!==e&&-1!==a.cells.indexOf(t))},e.getCell=function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const r=e.getCellPoints(t),o=n||wd[r.cellType].newInstance();return o.initialize(e.getPoints(),r.cellPointIds),o},e.getMaxCellSize=()=>xd.reduce((e,n)=>{var r,o,a;return Math.max(e,null!==(r=null===(o=t[n])||void 0===o||null===(a=o.getMaxCellSize)||void 0===a?void 0:a.call(o))&&void 0!==r?r:0)},0)}(e,t)}var Ad={newInstance:dn.newInstance(Pd,"vtkPolyData"),extend:Pd};const Ed={image:null,canvas:null,jsImageData:null,imageBitmap:null,imageLoaded:!1,repeat:!1,interpolate:!1,edgeClamp:!1,mipLevel:0,resizable:!1};function Id(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Ed,n),dn.obj(e,t),dn.algo(e,t,6,0),dn.get(e,t,["canvas","image","jsImageData","imageBitmap","imageLoaded","resizable"]),dn.setGet(e,t,["repeat","edgeClamp","interpolate","mipLevel"]),function(e,t){t.classHierarchy.push("vtkTexture"),e.imageLoaded=()=>{t.image.removeEventListener("load",e.imageLoaded),t.imageLoaded=!0,e.modified()},e.setJsImageData=n=>{t.jsImageData!==n&&(null!==n&&(e.setInputData(null),e.setInputConnection(null),t.image=null,t.canvas=null,t.imageBitmap=null),t.jsImageData=n,t.imageLoaded=!0,e.modified())},e.setImageBitmap=n=>{t.imageBitmap!==n&&(null!==n&&(e.setInputData(null),e.setInputConnection(null),t.image=null,t.canvas=null,t.jsImageData=null),t.imageBitmap=n,t.imageLoaded=!0,e.modified())},e.setCanvas=n=>{t.canvas!==n&&(null!==n&&(e.setInputData(null),e.setInputConnection(null),t.image=null,t.imageBitmap=null,t.jsImageData=null),t.canvas=n,e.modified())},e.setImage=n=>{t.image!==n&&(null!==n&&(e.setInputData(null),e.setInputConnection(null),t.canvas=null,t.jsImageData=null,t.imageBitmap=null),t.image=n,t.imageLoaded=!1,n.complete?e.imageLoaded():n.addEventListener("load",e.imageLoaded),e.modified())},e.getDimensionality=()=>{let n=0,r=0,o=1;if(e.getInputData()){const t=e.getInputData();n=t.getDimensions()[0],r=t.getDimensions()[1],o=t.getDimensions()[2]}return t.jsImageData&&(n=t.jsImageData.width,r=t.jsImageData.height),t.canvas&&(n=t.canvas.width,r=t.canvas.height),t.image&&(n=t.image.width,r=t.image.height),t.imageBitmap&&(n=t.imageBitmap.width,r=t.imageBitmap.height),(n>1)+(r>1)+(o>1)},e.getInputAsJsImageData=()=>{if(!t.imageLoaded||e.getInputData())return null;if(t.jsImageData)return t.jsImageData;if(t.imageBitmap)return t.imageBitmap;if(t.canvas)return t.canvas.getContext("2d").getImageData(0,0,t.canvas.width,t.canvas.height);if(t.image){const e=t.image.width,n=t.image.height,r=new OffscreenCanvas(e,n).getContext("2d");return r.translate(0,n),r.scale(1,-1),r.drawImage(t.image,0,0,e,n),r.getImageData(0,0,e,n)}return null}}(e,t)}var Od=u({newInstance:dn.newInstance(Id,"vtkTexture"),extend:Id},{generateMipmaps:(e,t,n)=>{const r=e.createShaderModule({code:"\n    @group(0) @binding(0) var inputTexture: texture_2d<f32>;\n    @group(0) @binding(1) var outputTexture: texture_storage_2d<rgba8unorm, write>;\n\n    @compute @workgroup_size(8, 8)\n    fn main(@builtin(global_invocation_id) global_id: vec3<u32>) {\n      let texelCoord = vec2<i32>(global_id.xy);\n      let outputSize = textureDimensions(outputTexture);\n\n      if (texelCoord.x >= i32(outputSize.x) || texelCoord.y >= i32(outputSize.y)) {\n        return;\n      }\n\n      let inputSize = textureDimensions(inputTexture);\n      let scale = vec2<f32>(inputSize) / vec2<f32>(outputSize);\n\n      // Compute the floating-point source coordinate\n      let srcCoord = (vec2<f32>(texelCoord) + 0.5) * scale - 0.5;\n\n      // Get integer coordinates for the four surrounding texels\n      let x0 = i32(floor(srcCoord.x));\n      let x1 = min(x0 + 1, i32(inputSize.x) - 1);\n      let y0 = i32(floor(srcCoord.y));\n      let y1 = min(y0 + 1, i32(inputSize.y) - 1);\n\n      // Compute the weights\n      let wx = srcCoord.x - f32(x0);\n      let wy = srcCoord.y - f32(y0);\n\n      // Fetch the four texels\n      let c00 = textureLoad(inputTexture, vec2<i32>(x0, y0), 0);\n      let c10 = textureLoad(inputTexture, vec2<i32>(x1, y0), 0);\n      let c01 = textureLoad(inputTexture, vec2<i32>(x0, y1), 0);\n      let c11 = textureLoad(inputTexture, vec2<i32>(x1, y1), 0);\n\n      // Bilinear interpolation\n      let color = mix(\n        mix(c00, c10, wx),\n        mix(c01, c11, wx),\n        wy\n      );\n\n      textureStore(outputTexture, texelCoord, color);\n    }\n  "}),o=e.createBindGroupLayout({entries:[{binding:0,visibility:GPUShaderStage.COMPUTE,texture:{sampleType:"float"}},{binding:1,visibility:GPUShaderStage.COMPUTE,storageTexture:{format:"rgba8unorm",access:"write-only"}},{binding:2,visibility:GPUShaderStage.COMPUTE,sampler:{type:"filtering"}}]}),a=e.createPipelineLayout({bindGroupLayouts:[o]}),i=e.createComputePipeline({label:"ComputeMipmapPipeline",layout:a,compute:{module:r,entryPoint:"main"}}),s=e.createSampler({magFilter:"linear",minFilter:"linear"});for(let l=1;l<n;l++){const n=t.createView({baseMipLevel:l-1,mipLevelCount:1}),r=t.createView({baseMipLevel:l,mipLevelCount:1}),o=e.createBindGroup({layout:i.getBindGroupLayout(0),entries:[{binding:0,resource:n},{binding:1,resource:r},{binding:2,resource:s}]}),a=e.createCommandEncoder({label:"MipmapGenerateCommandEncoder"}),u=a.beginComputePass();u.setPipeline(i),u.setBindGroup(0,o);const c=Math.max(1,t.width>>l),d=Math.max(1,t.height>>l),f=Math.ceil(c/8),p=Math.ceil(d/8);u.dispatchWorkgroups(f,p),u.end(),e.queue.submit([a.finish()])}}});const Md=[[-1,0,0],[1,0,0],[0,-1,0],[0,1,0],[0,0,-1],[0,0,1]],Rd=[[8,7,11,3],[9,1,10,5],[4,9,0,8],[2,11,6,10],[0,3,2,1],[4,5,6,7]],Ld=[[0,1],[1,3],[2,3],[0,2],[4,5],[5,7],[6,7],[4,6],[0,4],[1,5],[3,7],[2,6]],kd=[0,1,0,1,0,1,0,1,2,2,2,2],Dd=[[1,2],[1,2],[0,2],[0,2],[0,1],[0,1]],Bd=new Float64Array(3),Nd=new Float64Array(3),Vd=new Float64Array(3),Fd=new Float64Array(3),Ud=new Float64Array(3),zd=new Float64Array(3),Gd=new Float64Array(16);function Wd(e,t){e.strokeStyle=t.strokeColor,e.lineWidth=t.strokeSize,e.fillStyle=t.fontColor,e.font="".concat(t.fontStyle," ").concat(t.fontSize,"px ").concat(t.fontFamily)}function Hd(e){const t=[],n=[];for(let r=0;r<3;r++){const o=Do().domain([e[2*r],e[2*r+1]]);t[r]=o.ticks(5);const a=o.tickFormat(5);n[r]=t[r].map(a)}return{ticks:t,tickStrings:n}}const jd=dn.newInstance(function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{renderable:null};Object.assign(t,{},n),dn.obj(e,t),t.tmPolyData=Ad.newInstance(),t.tmMapper=cc.newInstance(),t.tmMapper.setInputData(t.tmPolyData),t.tmActor=Ol.newInstance({parentProp:e}),t.tmActor.setMapper(t.tmMapper),dn.setGet(e,t,["renderable"]),dn.get(e,t,["lastSize","lastAspectRatio","axisTextStyle","tickTextStyle","tmActor","ticks"]),t.forceUpdate=!1,t.lastRedrawTime={},dn.obj(t.lastRedrawTime,{mtime:0}),t.lastRebuildTime={},dn.obj(t.lastRebuildTime,{mtime:0}),t.lastSize=[-1,-1],t.lastTickBounds=[],function(e,t){t.classHierarchy.push("vtkCubeAxesActorHelper"),e.setRenderable=n=>{t.renderable!==n&&(t.renderable=n,t.tmActor.addTexture(t.renderable.getTmTexture()),t.tmActor.setProperty(n.getProperty()),t.tmActor.setParentProp(n),e.modified())},e.createPolyDataForOneLabel=(e,n,r,o,a,i,s)=>{const l=t.renderable.get_tmAtlas().get(e);if(!l)return;const u=t.renderable.getTextPolyData().getPoints().getData(),c=t.lastSize;Bd[0]=u[3*n],Bd[1]=u[3*n+1],Bd[2]=u[3*n+2],qn(Vd,Bd,r),Vd[0]+=.1,qn(Nd,Vd,o),Wn(Ud,Nd,Bd),Vd[0]-=.1,Vd[1]+=.1,qn(Nd,Vd,o),Wn(zd,Nd,Bd);for(let t=0;t<3;t++)Ud[t]/=.05*c[0],zd[t]/=.05*c[1];let d=s.ptIdx,f=s.cellIdx;Bd[0]=u[3*n],Bd[1]=u[3*n+1],Bd[2]=u[3*n+2],a[0]<-.5?Hn(Vd,Ud,a[0]*i-l.width):a[0]>.5?Hn(Vd,Ud,a[0]*i):Hn(Vd,Ud,a[0]*i-l.width/2),Gn(Bd,Bd,Vd),Hn(Vd,zd,a[1]*i-l.height/2),Gn(Bd,Bd,Vd),s.points[3*d]=Bd[0],s.points[3*d+1]=Bd[1],s.points[3*d+2]=Bd[2],s.tcoords[2*d]=l.tcoords[0],s.tcoords[2*d+1]=l.tcoords[1],d++,Hn(Vd,Ud,l.width),Gn(Bd,Bd,Vd),s.points[3*d]=Bd[0],s.points[3*d+1]=Bd[1],s.points[3*d+2]=Bd[2],s.tcoords[2*d]=l.tcoords[2],s.tcoords[2*d+1]=l.tcoords[3],d++,Hn(Vd,zd,l.height),Gn(Bd,Bd,Vd),s.points[3*d]=Bd[0],s.points[3*d+1]=Bd[1],s.points[3*d+2]=Bd[2],s.tcoords[2*d]=l.tcoords[4],s.tcoords[2*d+1]=l.tcoords[5],d++,Hn(Vd,Ud,l.width),Wn(Bd,Bd,Vd),s.points[3*d]=Bd[0],s.points[3*d+1]=Bd[1],s.points[3*d+2]=Bd[2],s.tcoords[2*d]=l.tcoords[6],s.tcoords[2*d+1]=l.tcoords[7],d++,s.polys[4*f]=3,s.polys[4*f+1]=d-4,s.polys[4*f+2]=d-3,s.polys[4*f+3]=d-2,f++,s.polys[4*f]=3,s.polys[4*f+1]=d-4,s.polys[4*f+2]=d-2,s.polys[4*f+3]=d-1,s.ptIdx+=4,s.cellIdx+=2},e.updateTexturePolyData=()=>{const n=t.camera.getCompositeProjectionMatrix(t.lastAspectRatio,-1,1);N(n,n);const r=t.renderable.getTextValues().length,o=4*r,a=2*r,i=new Float64Array(3*o),s=new Uint16Array(4*a),l=new Float32Array(2*o);V(Gd,n);const u={ptIdx:0,cellIdx:0,polys:s,points:i,tcoords:l};let c=0,d=0,f=0;const p=t.renderable.getTextPolyData().getPoints().getData(),h=t.renderable.getTextValues();for(;c<p.length/3;){Bd[0]=p[3*c],Bd[1]=p[3*c+1],Bd[2]=p[3*c+2],qn(Vd,Bd,n),Bd[0]=p[3*c+3],Bd[1]=p[3*c+4],Bd[2]=p[3*c+5],qn(Fd,Bd,n),Wn(Vd,Vd,Fd);const r=[Vd[0],Vd[1]];Fa(r),e.createPolyDataForOneLabel(h[d],c,n,Gd,r,t.renderable.getAxisTitlePixelOffset(),u),c+=2,d++;for(let o=0;o<t.renderable.getTickCounts()[f];o++)e.createPolyDataForOneLabel(h[d],c,n,Gd,r,t.renderable.getTickLabelPixelOffset(),u),c++,d++;f++}const m=Wl.newInstance({numberOfComponents:2,values:l,name:"TextureCoordinates"});t.tmPolyData.getPointData().setTCoords(m),t.tmPolyData.getPoints().setData(i,3),t.tmPolyData.getPoints().modified(),t.tmPolyData.getPolys().setData(s,1),t.tmPolyData.getPolys().modified(),t.tmPolyData.modified()},e.updateAPISpecificData=(n,r,o)=>{t.lastSize[0]===n[0]&&t.lastSize[1]===n[1]||(t.lastSize[0]=n[0],t.lastSize[1]=n[1],t.lastAspectRatio=n[0]/n[1],t.forceUpdate=!0),t.camera=r,e.updateTexturePolyData()}}(e,t)},"vtkCubeAxesActorHelper");function Kd(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Ol.extend(e,t,function(e,t,n){return u(u({boundsScaleFactor:1.3,camera:null,dataBounds:[...ll.INIT_BOUNDS],faceVisibilityAngle:8,gridLines:!0,axisLabels:null,axisTitlePixelOffset:35,tickLabelPixelOffset:12,generateTicks:Hd},n),{},{axisTextStyle:u({fontColor:"white",fontStyle:"normal",fontSize:18,fontFamily:"serif"},null===n||void 0===n?void 0:n.axisTextStyle),tickTextStyle:u({fontColor:"white",fontStyle:"normal",fontSize:14,fontFamily:"serif"},null===n||void 0===n?void 0:n.tickTextStyle)})}(0,0,n)),t.lastFacesToDraw=[!1,!1,!1,!1,!1,!1],t.axisLabels=["X-Axis","Y-Axis","Z-Axis"],t.tickCounts=[],t.textValues=[],t.lastTickBounds=[],t.tmCanvas=document.createElement("canvas"),t.tmContext=t.tmCanvas.getContext("2d"),t._tmAtlas=new Map,t.tmTexture=Od.newInstance({resizable:!0}),t.tmTexture.setInterpolate(!1),e.getProperty().setDiffuse(0),e.getProperty().setAmbient(1),t.gridMapper=cc.newInstance(),t.polyData=Ad.newInstance(),t.gridMapper.setInputData(t.polyData),t.gridActor=Ol.newInstance(),t.gridActor.setMapper(t.gridMapper),t.gridActor.setProperty(e.getProperty()),t.gridActor.setParentProp(e),t.textPolyData=Ad.newInstance(),dn.setGet(e,t,["axisTitlePixelOffset","boundsScaleFactor","faceVisibilityAngle","gridLines","tickLabelPixelOffset","generateTicks"]),dn.setGetArray(e,t,["dataBounds"],6),dn.setGetArray(e,t,["axisLabels"],3),dn.get(e,t,["axisTextStyle","tickTextStyle","camera","tmTexture","textValues","textPolyData","tickCounts","gridActor"]),function(e,t){t.classHierarchy.push("vtkCubeAxesActor"),e.setCamera=n=>{t.camera!==n&&(t.cameraModifiedSub&&(t.cameraModifiedSub.unsubscribe(),t.cameraModifiedSub=null),t.camera=n,n&&(t.cameraModifiedSub=n.onModified(e.update)),e.update(),e.modified())},e.computeFacesToDraw=()=>{const e=t.camera.getViewMatrix();N(e,e);let n=!1;const r=ll.getDiagonalLength(t.dataBounds),o=Math.sin(t.faceVisibilityAngle*Math.PI/180);for(let a=0;a<6;a++){let i=!1;const s=Math.floor(a/2),l=(s+1)%3,u=(s+2)%3;t.dataBounds[2*l]!==t.dataBounds[2*l+1]&&t.dataBounds[2*u]!==t.dataBounds[2*u+1]&&(Bd[s]=t.dataBounds[a]-.1*r*Md[a][s],Bd[l]=.5*(t.dataBounds[2*l]+t.dataBounds[2*l+1]),Bd[u]=.5*(t.dataBounds[2*u]+t.dataBounds[2*u+1]),qn(Vd,Bd,e),Bd[s]=t.dataBounds[a],qn(Fd,Bd,e),Wn(Vd,Fd,Vd),jn(Vd,Vd),i=Vd[2]>o,t.camera.getParallelProjection()||(jn(Fd,Fd),i=Kn(Fd,Vd)>o)),i!==t.lastFacesToDraw[a]&&(t.lastFacesToDraw[a]=i,n=!0)}return n},e.updatePolyData=(e,n,r)=>{let o=0,a=0;o+=8;let i=0;for(let t=0;t<12;t++)n[t]>0&&i++;if(a+=i,t.gridLines)for(let t=0;t<6;t++)e[t]&&(o+=2*r[Dd[t][0]].length+2*r[Dd[t][1]].length,a+=r[Dd[t][0]].length+r[Dd[t][1]].length);const s=new Float64Array(3*o),l=new Uint32Array(3*a);let u=0,c=0;for(let d=0;d<2;d++)for(let e=0;e<2;e++)for(let n=0;n<2;n++)s[3*u]=t.dataBounds[n],s[3*u+1]=t.dataBounds[2+e],s[3*u+2]=t.dataBounds[4+d],u++;for(let t=0;t<12;t++)n[t]>0&&(l[3*c]=2,l[3*c+1]=Ld[t][0],l[3*c+2]=Ld[t][1],c++);if(t.gridLines)for(let d=0;d<6;d++)if(e[d]){const e=Math.floor(d/2);let n=r[Dd[d][0]];for(let r=0;r<n.length;r++)s[3*u+e]=t.dataBounds[d],s[3*u+Dd[d][0]]=n[r],s[3*u+Dd[d][1]]=t.dataBounds[2*Dd[d][1]],u++,s[3*u+e]=t.dataBounds[d],s[3*u+Dd[d][0]]=n[r],s[3*u+Dd[d][1]]=t.dataBounds[2*Dd[d][1]+1],u++,l[3*c]=2,l[3*c+1]=u-2,l[3*c+2]=u-1,c++;n=r[Dd[d][1]];for(let r=0;r<n.length;r++)s[3*u+e]=t.dataBounds[d],s[3*u+Dd[d][1]]=n[r],s[3*u+Dd[d][0]]=t.dataBounds[2*Dd[d][0]],u++,s[3*u+e]=t.dataBounds[d],s[3*u+Dd[d][1]]=n[r],s[3*u+Dd[d][0]]=t.dataBounds[2*Dd[d][0]+1],u++,l[3*c]=2,l[3*c+1]=u-2,l[3*c+2]=u-1,c++}t.polyData.getPoints().setData(s,3),t.polyData.getPoints().modified(),t.polyData.getLines().setData(l,1),t.polyData.getLines().modified(),t.polyData.modified()},e.updateTextData=(e,n,r,o)=>{let a=0;for(let t=0;t<12;t++)1===n[t]&&(a+=2,a+=r[kd[t]].length);const i=t.polyData.getPoints().getData(),s=new Float64Array(3*a);let l=0,u=0,c=0;for(let d=0;d<6;d++)if(e[d])for(let e=0;e<4;e++){const a=Rd[d][e];if(1===n[a]){const e=kd[a],n=3*Ld[a][0],f=3*Ld[a][1];s[3*l]=.5*(i[n]+i[f]),s[3*l+1]=.5*(i[n+1]+i[f+1]),s[3*l+2]=.5*(i[n+2]+i[f+2]),l++,s[3*l+Math.floor(d/2)]=t.dataBounds[d],s[3*l+Dd[d][0]]=.5*(t.dataBounds[2*Dd[d][0]]+t.dataBounds[2*Dd[d][0]+1]),s[3*l+Dd[d][1]]=.5*(t.dataBounds[2*Dd[d][1]]+t.dataBounds[2*Dd[d][1]+1]),l++,t.textValues[u]=t.axisLabels[e],u++;const p=(e+1)%3,h=(e+2)%3,m=r[e],g=o[e];t.tickCounts[c]=m.length;for(let r=0;r<m.length;r++)s[3*l+e]=m[r],s[3*l+p]=i[n+p],s[3*l+h]=i[n+h],l++,t.textValues[u]=g[r],u++;c++}}t.textPolyData.getPoints().setData(s,3),t.textPolyData.modified()},e.update=()=>{if(!t.camera)return;const n=e.computeFacesToDraw(),r=t.lastFacesToDraw;let o=!1;for(let e=0;e<6;e++)t.dataBounds[e]!==t.lastTickBounds[e]&&(o=!0,t.lastTickBounds[e]=t.dataBounds[e]);if(n||o||t.forceUpdate){const n=new Array(12).fill(0);for(let e=0;e<6;e++)if(r[e])for(let t=0;t<4;t++)n[Rd[e][t]]++;const a=t.generateTicks(t.dataBounds);e.updatePolyData(r,n,a.ticks),e.updateTextData(r,n,a.ticks,a.tickStrings),(o||t.forceUpdate)&&e.updateTextureAtlas(a.tickStrings)}t.forceUpdate=!1},e.updateTextureAtlas=e=>{t.tmContext.textBaseline="bottom",t.tmContext.textAlign="left",t._tmAtlas.clear();let n=0,r=1;for(let o=0;o<3;o++){if(!t._tmAtlas.has(t.axisLabels[o])){Wd(t.tmContext,t.axisTextStyle);const e=t.tmContext.measureText(t.axisLabels[o]),a={height:e.actualBoundingBoxAscent+2,startingHeight:r,width:e.width+2,textStyle:t.axisTextStyle};t._tmAtlas.set(t.axisLabels[o],a),r+=a.height,n<a.width&&(n=a.width)}Wd(t.tmContext,t.tickTextStyle);for(let a=0;a<e[o].length;a++)if(!t._tmAtlas.has(e[o][a])){const i=t.tmContext.measureText(e[o][a]),s={height:i.actualBoundingBoxAscent+2,startingHeight:r,width:i.width+2,textStyle:t.tickTextStyle};t._tmAtlas.set(e[o][a],s),r+=s.height,n<s.width&&(n=s.width)}}n=la(n),r=la(r),t._tmAtlas.forEach(e=>{e.tcoords=[0,(r-e.startingHeight-e.height)/r,e.width/n,(r-e.startingHeight-e.height)/r,e.width/n,(r-e.startingHeight)/r,0,(r-e.startingHeight)/r]}),t.tmCanvas.width=n,t.tmCanvas.height=r,t.tmContext.textBaseline="bottom",t.tmContext.textAlign="left",t.tmContext.clearRect(0,0,n,r),t._tmAtlas.forEach((e,n)=>{Wd(t.tmContext,e.textStyle),t.tmContext.fillText(n,1,e.startingHeight+e.height-1)}),t.tmTexture.setCanvas(t.tmCanvas),t.tmTexture.modified()},e.onModified(()=>{t.forceUpdate=!0,e.update()}),e.setTickTextStyle=n=>{t.tickTextStyle=u(u({},t.tickTextStyle),n),e.modified()},e.setAxisTextStyle=n=>{t.axisTextStyle=u(u({},t.axisTextStyle),n),e.modified()},e.get_tmAtlas=()=>t._tmAtlas,e.getBounds=()=>(e.update(),ll.setBounds(t.bounds,t.gridActor.getBounds()),ll.scaleAboutCenter(t.bounds,t.boundsScaleFactor,t.boundsScaleFactor,t.boundsScaleFactor),t.bounds);const n=dn.chain(e.setProperty,t.gridActor.setProperty);e.setProperty=e=>n(e)[0]}(e,t)}var Zd={newInstance:dn.newInstance(Kd,"vtkCubeAxesActor"),extend:Kd,newCubeAxesActorHelper:jd,defaultGenerateTicks:Hd};const qd={};function Xd(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,qd,n),gn.extend(e,t,n),t.CubeAxesActorHelper=Zd.newCubeAxesActorHelper(),function(e,t){t.classHierarchy.push("vtkOpenGLCubeAxesActor"),e.buildPass=n=>{n&&(t._openGLRenderer=e.getFirstAncestorOfType("vtkOpenGLRenderer"),t._openGLRenderWindow=t._openGLRenderer.getParent(),t.CubeAxesActorHelper.getRenderable()||t.CubeAxesActorHelper.setRenderable(t.renderable),e.prepareNodes(),e.addMissingNode(t.CubeAxesActorHelper.getTmActor()),e.addMissingNode(t.renderable.getGridActor()),e.removeUnusedNodes())},e.opaquePass=(e,n)=>{if(e){const e=t._openGLRenderer?t._openGLRenderer.getRenderable().getActiveCamera():null,n=t._openGLRenderer.getTiledSizeAndOrigin();t.CubeAxesActorHelper.updateAPISpecificData([n.usize,n.vsize],e,t._openGLRenderWindow.getRenderable())}}}(e,t)}const Yd=Qt(Xd,"vtkOpenGLCubeAxesActor");Tn("vtkCubeAxesActor",Yd);const Qd={ARRAY_BUFFER:0,ELEMENT_ARRAY_BUFFER:1,TEXTURE_BUFFER:2};var $d={ObjectType:Qd};const{ObjectType:Jd}=$d;const ef={objectType:Jd.ARRAY_BUFFER,context:null,allocatedGPUMemoryInBytes:0};function tf(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,ef,n),dn.obj(e,t),dn.get(e,t,["_openGLRenderWindow","allocatedGPUMemoryInBytes"]),dn.moveToProtected(e,t,["openGLRenderWindow"]),function(e,t){function n(e){switch(e){case Jd.ELEMENT_ARRAY_BUFFER:return t.context.ELEMENT_ARRAY_BUFFER;case Jd.TEXTURE_BUFFER:if("TEXTURE_BUFFER"in t.context)return t.context.TEXTURE_BUFFER;case Jd.ARRAY_BUFFER:default:return t.context.ARRAY_BUFFER}}t.classHierarchy.push("vtkOpenGLBufferObject");let r=null,o=null,a=!0,i="";e.getType=()=>r,e.setType=e=>{r=e},e.getHandle=()=>o,e.isReady=()=>!1===a,e.generateBuffer=e=>{const a=n(e);return null===o&&(o=t.context.createBuffer(),r=e),n(r)===a},e.upload=(s,l)=>e.generateBuffer(l)?(t.context.bindBuffer(n(r),o),t.context.bufferData(n(r),s,t.context.STATIC_DRAW),t.allocatedGPUMemoryInBytes=s.length*s.BYTES_PER_ELEMENT,a=!1,!0):(i="Trying to upload array buffer to incompatible buffer.",!1),e.bind=()=>!!o&&(t.context.bindBuffer(n(r),o),!0),e.release=()=>!!o&&(t.context.bindBuffer(n(r),null),!0),e.releaseGraphicsResources=()=>{null!==o&&(t.context.bindBuffer(n(r),null),t.context.deleteBuffer(o),o=null,t.allocatedGPUMemoryInBytes=0)},e.setOpenGLRenderWindow=n=>{t._openGLRenderWindow!==n&&(e.releaseGraphicsResources(),t._openGLRenderWindow=n,t.context=null,n&&(t.context=t._openGLRenderWindow.getContext()))},e.getError=()=>i}(e,t)}var nf=u(u({newInstance:dn.newInstance(tf),extend:tf},{}),$d);function rf(e){let t=0,n=0;for(let o=0;o<3;++o){const r=e.getRange(o),a=r[1]-r[0];t+=a*a;const i=.5*(r[1]+r[0]);n+=i*i}const r=t>0&&(Math.abs(n)/t>1e6||Math.abs(Math.log10(t))>3||0===t&&n>1e6);if(r){const t=new Float64Array(3),n=new Float64Array(3);for(let r=0;r<3;++r){const o=e.getRange(r),a=o[1]-o[0];t[r]=.5*(o[1]+o[0]),n[r]=a>0?1/a:1}return{useShiftAndScale:r,coordShift:t,coordScale:n}}return{useShiftAndScale:r,coordShift:new Float32Array([0,0,0]),coordScale:new Float32Array([1,1,1])}}const{vtkErrorMacro:of}=dn;function af(e,t){t.classHierarchy.push("vtkOpenGLCellArrayBufferObject"),e.setType(Qd.ARRAY_BUFFER),e.createVBO=function(n,r,o,a){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;if(!n.getData()||!n.getData().length)return t.elementCount=0,0;t.blockSize=3,t.vertexOffset=0,t.normalOffset=0,t.tCoordOffset=0,t.tCoordComponents=0,t.colorComponents=0,t.colorOffset=0,t.customData=[];const s=a.points.getData();let l=null,u=null,c=null;const d=a.colors?a.colors.getNumberOfComponents():0,f=a.tcoords?a.tcoords.getNumberOfComponents():0;a.normals&&(t.normalOffset=4*t.blockSize,t.blockSize+=3,l=a.normals.getData()),a.customAttributes&&a.customAttributes.forEach(e=>{e&&(t.customData.push({data:e.getData(),offset:4*t.blockSize,components:e.getNumberOfComponents(),name:e.getName()}),t.blockSize+=e.getNumberOfComponents())}),a.tcoords&&(t.tCoordOffset=4*t.blockSize,t.tCoordComponents=f,t.blockSize+=f,u=a.tcoords.getData()),a.colors?(t.colorComponents=a.colors.getNumberOfComponents(),t.colorOffset=0,c=a.colors.getData(),t.colorBO||(t.colorBO=nf.newInstance()),t.colorBO.setOpenGLRenderWindow(t._openGLRenderWindow)):t.colorBO=null,t.stride=4*t.blockSize;let p,h=0,m=0,g=0,v=0,y=0,b=0;const _={anythingToPoints(e,t,n,r){for(let o=0;o<e;++o)p(t[n+o],r)},linesToWireframe(e,t,n,r){for(let o=0;o<e-1;++o)p(t[n+o],r),p(t[n+o+1],r)},polysToWireframe(e,t,n,r){if(e>2)for(let o=0;o<e;++o)p(t[n+o],r),p(t[n+(o+1)%e],r)},stripsToWireframe(e,t,n,r){if(e>2){for(let o=0;o<e-1;++o)p(t[n+o],r),p(t[n+o+1],r);for(let o=0;o<e-2;o++)p(t[n+o],r),p(t[n+o+2],r)}},polysToSurface(e,t,n,r){for(let o=0;o<e-2;o++)p(t[n+0],r),p(t[n+o+1],r),p(t[n+o+2],r)},stripsToSurface(e,t,n,r){for(let o=0;o<e-2;o++)p(t[n+o],r),p(t[n+o+1+o%2],r),p(t[n+o+1+(o+1)%2],r)}},T={anythingToPoints:(e,t)=>e,linesToWireframe:(e,t)=>e>1?2*(e-1):0,polysToWireframe:(e,t)=>e>2?2*e:0,stripsToWireframe:(e,t)=>e>2?4*e-6:0,polysToSurface:(e,t)=>e>2?3*(e-2):0,stripsToSurface:(e,t,n)=>e>2?3*(e-2):0};let x=null,S=null;o===_l.POINTS||"verts"===r?(x=_.anythingToPoints,S=T.anythingToPoints):o===_l.WIREFRAME||"lines"===r?(x=_["".concat(r,"ToWireframe")],S=T["".concat(r,"ToWireframe")]):(x=_["".concat(r,"ToSurface")],S=T["".concat(r,"ToSurface")]);const w=n.getData(),C=w.length;let P=0;for(let e=0;e<C;)P+=S(w[e],w),e+=w[e]+1;let A=null;const E=new Float32Array(P*t.blockSize);c&&(A=new Uint8Array(4*P));let I=0,O=0;const{useShiftAndScale:M,coordShift:R,coordScale:L}=rf(a.points);if(M?e.setCoordShiftAndScale(R,L):!0===t.coordShiftAndScaleEnabled&&e.setCoordShiftAndScale(null,null),i)if(i.points||i.cells){const e=new Int32Array(P+i.points.length);e.set(i.points),i.points=e;const t=new Int32Array(P+i.cells.length);t.set(i.cells),i.cells=t}else i.points=new Int32Array(P),i.cells=new Int32Array(P);let k=a.vertexOffset;p=function(e,n){if(i&&(i.points[k]=e,i.cells[k]=b+a.cellOffset),++k,h=3*e,t.coordShiftAndScaleEnabled?(E[I++]=(s[h++]-t.coordShift[0])*t.coordScale[0],E[I++]=(s[h++]-t.coordShift[1])*t.coordScale[1],E[I++]=(s[h++]-t.coordShift[2])*t.coordScale[2]):(E[I++]=s[h++],E[I++]=s[h++],E[I++]=s[h++]),null!==l&&(m=a.haveCellNormals?3*(b+a.cellOffset):3*e,E[I++]=l[m++],E[I++]=l[m++],E[I++]=l[m++]),t.customData.forEach(t=>{y=e*t.components;for(let e=0;e<t.components;++e)E[I++]=t.data[y++]}),null!==u){g=a.useTCoordsPerCell?n*f:e*f;for(let e=0;e<f;++e)E[I++]=u[g++]}null!==c&&(v=a.haveCellScalars?(b+a.cellOffset)*d:e*d,A[O++]=c[v++],A[O++]=c[v++],A[O++]=c[v++],A[O++]=4===d?c[v++]:255)};for(let e=0;e<C;e+=w[e]+1,b++)x(w[e],w,e+1,b+a.cellOffset);return t.elementCount=P,e.upload(E,Qd.ARRAY_BUFFER),t.colorBO&&(t.colorBOStride=4,t.colorBO.upload(A,Qd.ARRAY_BUFFER)),b},e.setCoordShiftAndScale=(e,n)=>{null===e||e.constructor===Float64Array&&3===e.length?null===n||n.constructor===Float64Array&&3===n.length?(null!==t.coordShift&&null!==e&&Yn(e,t.coordShift)||(t.coordShift=e),null!==t.coordScale&&null!==n&&Yn(n,t.coordScale)||(t.coordScale=n),t.coordShiftAndScaleEnabled=function(e,t){return null!==e&&null!==t&&!(Xn(e,[0,0,0])&&Xn(t,[1,1,1]))}(t.coordShift,t.coordScale),t.coordShiftAndScaleEnabled?t.inverseShiftAndScaleMatrix=function(e,t){const n=new Float64Array(3);var r,o;o=t,(r=n)[0]=1/o[0],r[1]=1/o[1],r[2]=1/o[2];const a=new Float64Array(16);return ae(a,ts(),e,n),a}(t.coordShift,t.coordScale):t.inverseShiftAndScaleMatrix=null):of("Wrong type for coordScale, expected vec3 or null"):of("Wrong type for coordShift, expected vec3 or null")}}const sf={elementCount:0,stride:0,colorBOStride:0,vertexOffset:0,normalOffset:0,tCoordOffset:0,tCoordComponents:0,colorOffset:0,colorComponents:0,tcoordBO:null,customData:[],coordShift:null,coordScale:null,coordShiftAndScaleEnabled:!1,inverseShiftAndScaleMatrix:null};function lf(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,sf,n),nf.extend(e,t,n),dn.setGet(e,t,["colorBO","elementCount","stride","colorBOStride","vertexOffset","normalOffset","tCoordOffset","tCoordComponents","colorOffset","colorComponents","customData"]),dn.get(e,t,["coordShift","coordScale","coordShiftAndScaleEnabled","inverseShiftAndScaleMatrix"]),af(e,t)}var uf={newInstance:dn.newInstance(lf),extend:lf};const{vtkErrorMacro:cf}=dn;const df={shaderType:"Unknown",source:"",error:"",handle:0,dirty:!1,context:null};function ff(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,df,n),dn.obj(e,t),dn.setGet(e,t,["shaderType","source","error","handle","context"]),function(e,t){t.classHierarchy.push("vtkShader"),e.compile=()=>{let e=t.context.VERTEX_SHADER;if(!t.source||!t.source.length||"Unknown"===t.shaderType)return!1;if(0!==t.handle&&(t.context.deleteShader(t.handle),t.handle=0),e="Fragment"===t.shaderType?t.context.FRAGMENT_SHADER:t.context.VERTEX_SHADER,t.handle=t.context.createShader(e),t.context.shaderSource(t.handle,t.source),t.context.compileShader(t.handle),!t.context.getShaderParameter(t.handle,t.context.COMPILE_STATUS)){const e=t.context.getShaderInfoLog(t.handle);return cf("Error compiling shader '".concat(t.source,"': ").concat(e)),t.context.deleteShader(t.handle),t.handle=0,!1}return!0},e.cleanup=()=>{"Unknown"!==t.shaderType&&0!==t.handle&&(t.context.deleteShader(t.handle),t.handle=0,t.dirty=!0)}}(e,t)}var pf={newInstance:dn.newInstance(ff,"vtkShader"),extend:ff};const{vtkErrorMacro:hf}=dn;const mf={vertexShaderHandle:0,fragmentShaderHandle:0,geometryShaderHandle:0,vertexShader:null,fragmentShader:null,geometryShader:null,linked:!1,bound:!1,compiled:!1,error:"",handle:0,numberOfOutputs:0,attributesLocs:null,uniformLocs:null,md5Hash:0,context:null,lastCameraMTime:null};function gf(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,mf,n),t.attributesLocs={},t.uniformLocs={},t.vertexShader=pf.newInstance(),t.vertexShader.setShaderType("Vertex"),t.fragmentShader=pf.newInstance(),t.fragmentShader.setShaderType("Fragment"),t.geometryShader=pf.newInstance(),t.geometryShader.setShaderType("Geometry"),dn.obj(e,t),dn.get(e,t,["lastCameraMTime"]),dn.setGet(e,t,["error","handle","compiled","bound","md5Hash","vertexShader","fragmentShader","geometryShader","linked"]),function(e,t){t.classHierarchy.push("vtkShaderProgram"),e.compileShader=()=>t.vertexShader.compile()?t.fragmentShader.compile()?e.attachShader(t.vertexShader)&&e.attachShader(t.fragmentShader)?e.link()?(e.setCompiled(!0),1):(hf("Links failed: ".concat(t.error)),0):(hf(t.error),0):(hf(t.fragmentShader.getSource().split("\n").map((e,t)=>"".concat(t,": ").concat(e)).join("\n")),hf(t.fragmentShader.getError()),0):(hf(t.vertexShader.getSource().split("\n").map((e,t)=>"".concat(t,": ").concat(e)).join("\n")),hf(t.vertexShader.getError()),0),e.cleanup=()=>{"Unknown"!==t.shaderType&&0!==t.handle&&(e.release(),0!==t.vertexShaderHandle&&(t.context.detachShader(t.handle,t.vertexShaderHandle),t.vertexShaderHandle=0),0!==t.fragmentShaderHandle&&(t.context.detachShader(t.handle,t.fragmentShaderHandle),t.fragmentShaderHandle=0),t.context.deleteProgram(t.handle),t.handle=0,e.setCompiled(!1))},e.bind=()=>!(!t.linked&&!e.link())&&(t.context.useProgram(t.handle),e.setBound(!0),!0),e.isBound=()=>!!t.bound,e.release=()=>{t.context.useProgram(null),e.setBound(!1)},e.setContext=e=>{t.vertexShader.setContext(e),t.fragmentShader.setContext(e),t.geometryShader.setContext(e)},e.link=()=>{if(t.linked)return!0;if(0===t.handle)return t.error="Program has not been initialized, and/or does not have shaders.",!1;if(t.uniformLocs={},t.context.linkProgram(t.handle),!t.context.getProgramParameter(t.handle,t.context.LINK_STATUS)){const e=t.context.getProgramInfoLog(t.handle);return hf("Error linking shader ".concat(e)),t.handle=0,!1}return e.setLinked(!0),t.attributeLocs={},!0},e.setUniformMatrix=(n,r)=>{const o=e.findUniform(n);if(-1===o)return t.error="Could not set uniform ".concat(n," . No such uniform."),!1;const a=new Float32Array(r);return t.context.uniformMatrix4fv(o,!1,a),!0},e.setUniformMatrix3x3=(n,r)=>{const o=e.findUniform(n);if(-1===o)return t.error="Could not set uniform ".concat(n," . No such uniform."),!1;const a=new Float32Array(r);return t.context.uniformMatrix3fv(o,!1,a),!0},e.setUniformf=(n,r)=>{const o=e.findUniform(n);return-1===o?(t.error="Could not set uniform ".concat(n," . No such uniform."),!1):(t.context.uniform1f(o,r),!0)},e.setUniformfv=(n,r)=>{const o=e.findUniform(n);return-1===o?(t.error="Could not set uniform ".concat(n," . No such uniform."),!1):(t.context.uniform1fv(o,r),!0)},e.setUniformi=(n,r)=>{const o=e.findUniform(n);return-1===o?(t.error="Could not set uniform ".concat(n," . No such uniform."),!1):(t.context.uniform1i(o,r),!0)},e.setUniformiv=(n,r)=>{const o=e.findUniform(n);return-1===o?(t.error="Could not set uniform ".concat(n," . No such uniform."),!1):(t.context.uniform1iv(o,r),!0)},e.setUniform2f=(n,r,o)=>{const a=e.findUniform(n);if(-1===a)return t.error="Could not set uniform ".concat(n," . No such uniform."),!1;if(void 0===o)throw new RangeError("Invalid number of values for array");return t.context.uniform2f(a,r,o),!0},e.setUniform2fv=(n,r)=>{const o=e.findUniform(n);return-1===o?(t.error="Could not set uniform ".concat(n," . No such uniform."),!1):(t.context.uniform2fv(o,r),!0)},e.setUniform2i=(n,r,o)=>{const a=e.findUniform(n);if(-1===a)return t.error="Could not set uniform ".concat(n," . No such uniform."),!1;if(void 0===o)throw new RangeError("Invalid number of values for array");return t.context.uniform2i(a,r,o),!0},e.setUniform2iv=(n,r)=>{const o=e.findUniform(n);return-1===o?(t.error="Could not set uniform ".concat(n," . No such uniform."),!1):(t.context.uniform2iv(o,r),!0)},e.setUniform3f=(n,r,o,a)=>{const i=e.findUniform(n);if(-1===i)return t.error="Could not set uniform ".concat(n," . No such uniform."),!1;if(void 0===a)throw new RangeError("Invalid number of values for array");return t.context.uniform3f(i,r,o,a),!0},e.setUniform3fArray=(n,r)=>{const o=e.findUniform(n);if(-1===o)return t.error="Could not set uniform ".concat(n," . No such uniform."),!1;if(!Array.isArray(r)||3!==r.length)throw new RangeError("Invalid number of values for array");return t.context.uniform3f(o,r[0],r[1],r[2]),!0},e.setUniform3fv=(n,r)=>{const o=e.findUniform(n);return-1===o?(t.error="Could not set uniform ".concat(n," . No such uniform."),!1):(t.context.uniform3fv(o,r),!0)},e.setUniform3i=function(n){const r=e.findUniform(n);if(-1===r)return t.error="Could not set uniform ".concat(n," . No such uniform."),!1;for(var o=arguments.length,a=new Array(o>1?o-1:0),i=1;i<o;i++)a[i-1]=arguments[i];let s=a;if(1===s.length&&Array.isArray(s[0])&&(s=s[0]),3!==s.length)throw new RangeError("Invalid number of values for array");return t.context.uniform3i(r,s[0],s[1],s[2]),!0},e.setUniform3iv=(n,r)=>{const o=e.findUniform(n);return-1===o?(t.error="Could not set uniform ".concat(n," . No such uniform."),!1):(t.context.uniform3iv(o,r),!0)},e.setUniform4f=function(n){const r=e.findUniform(n);if(-1===r)return t.error="Could not set uniform ".concat(n," . No such uniform."),!1;for(var o=arguments.length,a=new Array(o>1?o-1:0),i=1;i<o;i++)a[i-1]=arguments[i];let s=a;if(1===s.length&&Array.isArray(s[0])&&(s=s[0]),4!==s.length)throw new RangeError("Invalid number of values for array");return t.context.uniform4f(r,s[0],s[1],s[2],s[3]),!0},e.setUniform4fv=(n,r)=>{const o=e.findUniform(n);return-1===o?(t.error="Could not set uniform ".concat(n," . No such uniform."),!1):(t.context.uniform4fv(o,r),!0)},e.setUniform4i=function(n){const r=e.findUniform(n);if(-1===r)return t.error="Could not set uniform ".concat(n," . No such uniform."),!1;for(var o=arguments.length,a=new Array(o>1?o-1:0),i=1;i<o;i++)a[i-1]=arguments[i];let s=a;if(1===s.length&&Array.isArray(s[0])&&(s=s[0]),4!==s.length)throw new RangeError("Invalid number of values for array");return t.context.uniform4i(r,s[0],s[1],s[2],s[3]),!0},e.setUniform4iv=(n,r)=>{const o=e.findUniform(n);return-1===o?(t.error="Could not set uniform ".concat(n," . No such uniform."),!1):(t.context.uniform4iv(o,r),!0)},e.findUniform=e=>{if(!e||!t.linked)return-1;let n=t.uniformLocs[e];return void 0!==n?n:(n=t.context.getUniformLocation(t.handle,e),null===n?(t.error="Uniform ".concat(e," not found in current shader program."),t.uniformLocs[e]=-1,-1):(t.uniformLocs[e]=n,n))},e.isUniformUsed=e=>{if(!e)return!1;let n=t.uniformLocs[e];return void 0!==n?null!==n:t.linked?(n=t.context.getUniformLocation(t.handle,e),t.uniformLocs[e]=n,null!==n):(hf("attempt to find uniform when the shader program is not linked"),!1)},e.isAttributeUsed=e=>{if(!e)return!1;if(e in t.attributeLocs)return!0;if(!t.linked)return hf("attempt to find uniform when the shader program is not linked"),!1;const n=t.context.getAttribLocation(t.handle,e);return-1!==n&&(t.attributeLocs[e]=n,!0)},e.attachShader=n=>{if(0===n.getHandle())return t.error="Shader object was not initialized, cannot attach it.",!1;if("Unknown"===n.getShaderType())return t.error="Shader object is of type Unknown and cannot be used.",!1;if(0===t.handle){const e=t.context.createProgram();if(0===e)return t.error="Could not create shader program.",!1;t.handle=e,t.linked=!1}return"Vertex"===n.getShaderType()&&(0!==t.vertexShaderHandle&&t.context.detachShader(t.handle,t.vertexShaderHandle),t.vertexShaderHandle=n.getHandle()),"Fragment"===n.getShaderType()&&(0!==t.fragmentShaderHandle&&t.context.detachShader(t.handle,t.fragmentShaderHandle),t.fragmentShaderHandle=n.getHandle()),t.context.attachShader(t.handle,n.getHandle()),e.setLinked(!1),!0},e.detachShader=e=>{if(0===e.getHandle())return t.error="shader object was not initialized, cannot attach it.",!1;if("Unknown"===e.getShaderType())return t.error="Shader object is of type Unknown and cannot be used.",!1;switch(0===t.handle&&(t.error="This shader program has not been initialized yet."),e.getShaderType()){case"Vertex":return t.vertexShaderHandle!==e.getHandle()?(t.error="The supplied shader was not attached to this program.",!1):(t.context.detachShader(t.handle,e.getHandle()),t.vertexShaderHandle=0,t.linked=!1,!0);case"Fragment":return t.fragmentShaderHandle!==e.getHandle()?(t.error="The supplied shader was not attached to this program.",!1):(t.context.detachShader(t.handle,e.getHandle()),t.fragmentShaderHandle=0,t.linked=!1,!0);default:return!1}},e.setContext=e=>{t.context=e,t.vertexShader.setContext(e),t.fragmentShader.setContext(e),t.geometryShader.setContext(e)},e.setLastCameraMTime=e=>{t.lastCameraMTime=e}}(e,t)}var vf={newInstance:dn.newInstance(gf,"vtkShaderProgram"),extend:gf,substitute:function(e,t,n,r){const o="string"===typeof n?n:n.join("\n"),a=!1===r?t:new RegExp(t,"g"),i=e.replace(a,o);return{replace:i!==o,result:i}}};const yf={forceEmulation:!1,handleVAO:0,handleProgram:0,supported:!0,buffers:null,context:null};function bf(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,yf,n),t.buffers=[],dn.obj(e,t),dn.get(e,t,["supported"]),dn.setGet(e,t,["forceEmulation"]),function(e,t){t.classHierarchy.push("vtkOpenGLVertexArrayObject"),e.exposedMethod=()=>{},e.initialize=()=>{t.instancingExtension=null,t._openGLRenderWindow.getWebgl2()||(t.instancingExtension=t.context.getExtension("ANGLE_instanced_arrays")),!t.forceEmulation&&t._openGLRenderWindow&&t._openGLRenderWindow.getWebgl2()?(t.extension=null,t.supported=!0,t.handleVAO=t.context.createVertexArray()):(t.extension=t.context.getExtension("OES_vertex_array_object"),!t.forceEmulation&&t.extension?(t.supported=!0,t.handleVAO=t.extension.createVertexArrayOES()):t.supported=!1)},e.isReady=()=>0!==t.handleVAO||!1===t.supported,e.bind=()=>{if(e.isReady()||e.initialize(),e.isReady()&&t.supported)t.extension?t.extension.bindVertexArrayOES(t.handleVAO):t.context.bindVertexArray(t.handleVAO);else if(e.isReady()){const e=t.context;for(let n=0;n<t.buffers.length;++n){const r=t.buffers[n];t.context.bindBuffer(e.ARRAY_BUFFER,r.buffer);for(let n=0;n<r.attributes.length;++n){const o=r.attributes[n],a=o.isMatrix?o.size:1;for(let n=0;n<a;++n)e.enableVertexAttribArray(o.index+n),e.vertexAttribPointer(o.index+n,o.size,o.type,o.normalize,o.stride,o.offset+o.stride*n/o.size),o.divisor>0&&(t.instancingExtension?t.instancingExtension.vertexAttribDivisorANGLE(o.index+n,1):e.vertexAttribDivisor(o.index+n,1))}}}},e.release=()=>{if(e.isReady()&&t.supported)t.extension?t.extension.bindVertexArrayOES(null):t.context.bindVertexArray(null);else if(e.isReady()){const e=t.context;for(let n=0;n<t.buffers.length;++n){const r=t.buffers[n];t.context.bindBuffer(e.ARRAY_BUFFER,r.buffer);for(let n=0;n<r.attributes.length;++n){const o=r.attributes[n],a=o.isMatrix?o.size:1;for(let n=0;n<a;++n)e.enableVertexAttribArray(o.index+n),e.vertexAttribPointer(o.index+n,o.size,o.type,o.normalize,o.stride,o.offset+o.stride*n/o.size),o.divisor>0&&(t.instancingExtension?t.instancingExtension.vertexAttribDivisorANGLE(o.index+n,0):e.vertexAttribDivisor(o.index+n,0)),e.disableVertexAttribArray(o.index+n)}}}},e.shaderProgramChanged=()=>{e.release(),t.handleVAO&&(t.extension?t.extension.deleteVertexArrayOES(t.handleVAO):t.context.deleteVertexArray(t.handleVAO)),t.handleVAO=0,t.handleProgram=0},e.releaseGraphicsResources=()=>{e.shaderProgramChanged(),t.handleVAO&&(t.extension?t.extension.deleteVertexArrayOES(t.handleVAO):t.context.deleteVertexArray(t.handleVAO)),t.handleVAO=0,t.supported=!0,t.handleProgram=0},e.addAttributeArray=(t,n,r,o,a,i,s,l)=>e.addAttributeArrayWithDivisor(t,n,r,o,a,i,s,l,0,!1),e.addAttributeArrayWithDivisor=(n,r,o,a,i,s,l,u,c,d)=>{if(!n)return!1;if(!n.isBound()||0===r.getHandle()||r.getType()!==Qd.ARRAY_BUFFER)return!1;if(0===t.handleProgram&&(t.handleProgram=n.getHandle()),e.isReady()||e.initialize(),!e.isReady()||t.handleProgram!==n.getHandle())return!1;const f=t.context,p={};if(p.name=o,p.index=f.getAttribLocation(t.handleProgram,o),p.offset=a,p.stride=i,p.type=s,p.size=l,p.normalize=u,p.isMatrix=d,p.divisor=c,-1===p.Index)return!1;if(r.bind(),f.enableVertexAttribArray(p.index),f.vertexAttribPointer(p.index,p.size,p.type,p.normalize,p.stride,p.offset),c>0&&(t.instancingExtension?t.instancingExtension.vertexAttribDivisorANGLE(p.index,1):f.vertexAttribDivisor(p.index,1)),p.buffer=r.getHandle(),!t.supported){let e=!1;for(let n=0;n<t.buffers.length;++n){const r=t.buffers[n];if(r.buffer===p.buffer){e=!0;let t=!1;for(let e=0;e<r.attributes.length;++e)r.attributes[e].name===o&&(t=!0,r.attributes[e]=p);t||r.attributes.push(p)}}e||t.buffers.push({buffer:p.buffer,attributes:[p]})}return!0},e.addAttributeMatrixWithDivisor=(n,r,o,a,i,s,l,u,c)=>{const d=e.addAttributeArrayWithDivisor(n,r,o,a,i,s,l,u,c,!0);if(!d)return d;const f=t.context,p=f.getAttribLocation(t.handleProgram,o);for(let e=1;e<l;e++)f.enableVertexAttribArray(p+e),f.vertexAttribPointer(p+e,l,s,u,i,a+i*e/l),c>0&&(t.instancingExtension?t.instancingExtension.vertexAttribDivisorANGLE(p+e,1):f.vertexAttribDivisor(p+e,1));return!0},e.removeAttributeArray=n=>{if(!e.isReady()||0===t.handleProgram)return!1;if(!t.supported)for(let e=0;e<t.buffers.length;++e){const r=t.buffers[e];for(let o=0;o<r.attributes.length;++o)if(r.attributes[o].name===n)return r.attributes.splice(o,1),r.attributes.length||t.buffers.splice(e,1),!0}return!0},e.setOpenGLRenderWindow=n=>{t._openGLRenderWindow!==n&&(e.releaseGraphicsResources(),t._openGLRenderWindow=n,t.context=null,n&&(t.context=t._openGLRenderWindow.getContext()))}}(e,t)}var _f={newInstance:dn.newInstance(bf,"vtkOpenGLVertexArrayObject"),extend:bf};const Tf={Start:0,Points:0,Lines:1,Tris:2,TriStrips:3,TrisEdges:4,TriStripsEdges:5,End:6};const xf={context:null,program:null,shaderSourceTime:null,VAO:null,attributeUpdateTime:null,CABO:null,primitiveType:0,pointPicking:!1};function Sf(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,xf,n),dn.obj(e,t),t.shaderSourceTime={},dn.obj(t.shaderSourceTime),t.attributeUpdateTime={},dn.obj(t.attributeUpdateTime),dn.setGet(e,t,["program","shaderSourceTime","VAO","attributeUpdateTime","CABO","primitiveType","pointPicking"]),t.program=vf.newInstance(),t.VAO=_f.newInstance(),t.CABO=uf.newInstance(),function(e,t){t.classHierarchy.push("vtkOpenGLHelper"),e.setOpenGLRenderWindow=e=>{t.context=e.getContext(),t.program.setContext(t.context),t.VAO.setOpenGLRenderWindow(e),t.CABO.setOpenGLRenderWindow(e)},e.releaseGraphicsResources=e=>{t.VAO.releaseGraphicsResources(),t.CABO.releaseGraphicsResources(),t.CABO.setElementCount(0)},e.drawArrays=(n,r,o,a)=>{if(t.CABO.getElementCount()){const i=e.getOpenGLMode(o),s=e.haveWideLines(n,r),l=t.context,u=l.getParameter(l.DEPTH_WRITEMASK);t.pointPicking&&l.depthMask(!1),i===l.LINES&&s?(e.updateShaders(n,r,a),l.drawArraysInstanced(i,0,t.CABO.getElementCount(),2*Math.ceil(r.getProperty().getLineWidth()))):(l.lineWidth(r.getProperty().getLineWidth()),e.updateShaders(n,r,a),l.drawArrays(i,0,t.CABO.getElementCount()),l.lineWidth(1));const c=(i===l.POINTS?1:0)||(i===l.LINES?2:3);return t.pointPicking&&l.depthMask(u),t.CABO.getElementCount()/c}return 0},e.getOpenGLMode=e=>{if(t.pointPicking)return t.context.POINTS;const n=t.primitiveType;return e===_l.POINTS||n===Tf.Points?t.context.POINTS:e===_l.WIREFRAME||n===Tf.Lines||n===Tf.TrisEdges||n===Tf.TriStripsEdges?t.context.LINES:t.context.TRIANGLES},e.haveWideLines=(e,n)=>n.getProperty().getLineWidth()>1&&!(t.CABO.getOpenGLRenderWindow()&&t.CABO.getOpenGLRenderWindow().getHardwareMaximumLineWidth()>=n.getProperty().getLineWidth()),e.getNeedToRebuildShaders=(t,n,r)=>!!(r.getNeedToRebuildShaders(e,t,n)||0===e.getProgram()||e.getShaderSourceTime().getMTime()<r.getMTime()||e.getShaderSourceTime().getMTime()<n.getMTime()),e.updateShaders=(n,r,o)=>{if(e.getNeedToRebuildShaders(n,r,o)){const a={Vertex:null,Fragment:null,Geometry:null};o.buildShaders(a,n,r);const i=t.CABO.getOpenGLRenderWindow().getShaderCache().readyShaderProgramArray(a.Vertex,a.Fragment,a.Geometry);i!==e.getProgram()&&(e.setProgram(i),e.getVAO().releaseGraphicsResources()),e.getShaderSourceTime().modified()}else t.CABO.getOpenGLRenderWindow().getShaderCache().readyShaderProgram(e.getProgram());e.getVAO().bind(),o.setMapperShaderParameters(e,n,r),o.setPropertyShaderParameters(e,n,r),o.setCameraShaderParameters(e,n,r),o.setLightingShaderParameters(e,n,r),o.invokeShaderCallbacks(e,n,r)},e.setMapperShaderParameters=(n,r,o)=>{if(e.haveWideLines(n,r)){e.getProgram().setUniform2f("viewportSize",o.usize,o.vsize);const t=parseFloat(r.getProperty().getLineWidth()),n=t/2;e.getProgram().setUniformf("lineWidthStepSize",t/Math.ceil(t)),e.getProgram().setUniformf("halfLineWidth",n)}t.primitiveType===Tf.Points||r.getProperty().getRepresentation()===_l.POINTS?e.getProgram().setUniformf("pointSize",r.getProperty().getPointSize()):t.pointPicking&&e.getProgram().setUniformf("pointSize",e.getPointPickingPrimitiveSize())},e.replaceShaderPositionVC=(n,r,o)=>{let a=n.Vertex;a=vf.substitute(a,"//VTK::PositionVC::Dec",["//VTK::PositionVC::Dec","uniform float pointSize;"]).result,a=vf.substitute(a,"//VTK::PositionVC::Impl",["//VTK::PositionVC::Impl","  gl_PointSize = pointSize;"],!1).result,e.getOpenGLMode(o.getProperty().getRepresentation())===t.context.LINES&&e.haveWideLines(r,o)&&(a=vf.substitute(a,"//VTK::PositionVC::Dec",["//VTK::PositionVC::Dec","uniform vec2 viewportSize;","uniform float lineWidthStepSize;","uniform float halfLineWidth;"]).result,a=vf.substitute(a,"//VTK::PositionVC::Impl",["//VTK::PositionVC::Impl"," if (halfLineWidth > 0.0)","   {","   float offset = float(gl_InstanceID / 2) * lineWidthStepSize - halfLineWidth;","   vec4 tmpPos = gl_Position;","   vec3 tmpPos2 = tmpPos.xyz / tmpPos.w;","   tmpPos2.x = tmpPos2.x + 2.0 * mod(float(gl_InstanceID), 2.0) * offset / viewportSize[0];","   tmpPos2.y = tmpPos2.y + 2.0 * mod(float(gl_InstanceID + 1), 2.0) * offset / viewportSize[1];","   gl_Position = vec4(tmpPos2.xyz * tmpPos.w, tmpPos.w);","   }"]).result),n.Vertex=a},e.getPointPickingPrimitiveSize=()=>t.primitiveType===Tf.Points?2:t.primitiveType===Tf.Lines?4:6,e.getAllocatedGPUMemoryInBytes=()=>e.getCABO().getAllocatedGPUMemoryInBytes()}(e,t)}var wf={newInstance:dn.newInstance(Sf),extend:Sf,primTypes:Tf};const Cf={NEAREST:0,LINEAR:1,NEAREST_MIPMAP_NEAREST:2,NEAREST_MIPMAP_LINEAR:3,LINEAR_MIPMAP_NEAREST:4,LINEAR_MIPMAP_LINEAR:5};var Pf={Wrap:{CLAMP_TO_EDGE:0,REPEAT:1,MIRRORED_REPEAT:2},Filter:Cf};const Af=new Float32Array(1),Ef=new Int32Array(Af.buffer);var If={fromHalf:function(e){const t=(32768&e)>>15,n=(31744&e)>>10,r=1023&e;return 0===n?(t?-1:1)*2**-14*(r/1024):31===n?r?NaN:1/0*(t?-1:1):(t?-1:1)*2**(n-15)*(1+r/1024)},toHalf:function(e){Af[0]=e;const t=Ef[0];let n=t>>16&32768,r=t>>12&2047;const o=t>>23&255;return o<103?n:o>142?(n|=31744,n|=(255===o?0:1)&&8388607&t,n):o<113?(r|=2048,n|=(r>>114-o)+(r>>113-o&1),n):(n|=o-112<<10|r>>1,n+=1&r,n)}};let Of;function Mf(){return void 0===Of&&(Of=function(){try{const e=4,t=2,n=1,r=new Int16Array([0,32767]),o=[1,1],a=document.createElement("canvas");a.width=e,a.height=e;const i=a.getContext("webgl2");if(!i)return!1;const s=i.getExtension("EXT_texture_norm16");if(!s)return!1;const l="#version 300 es\n    void main() {\n      gl_PointSize = ".concat(e.toFixed(1),";\n      gl_Position = vec4(0, 0, 0, 1);\n    }\n  "),u="#version 300 es\n    precision highp float;\n    precision highp int;\n    precision highp sampler2D;\n\n    uniform sampler2D u_image;\n\n    out vec4 color;\n\n    void main() {\n        vec4 intColor = texture(u_image, gl_PointCoord.xy);\n        color = vec4(vec3(intColor.rrr), 1);\n    }\n    ",c=i.createShader(i.VERTEX_SHADER);if(i.shaderSource(c,l),i.compileShader(c),!i.getShaderParameter(c,i.COMPILE_STATUS))return!1;const d=i.createShader(i.FRAGMENT_SHADER);if(i.shaderSource(d,u),i.compileShader(d),!i.getShaderParameter(d,i.COMPILE_STATUS))return!1;const f=i.createProgram();if(i.attachShader(f,c),i.attachShader(f,d),i.linkProgram(f),!i.getProgramParameter(f,i.LINK_STATUS))return!1;const p=i.createTexture();i.bindTexture(i.TEXTURE_2D,p),i.texImage2D(i.TEXTURE_2D,0,s.R16_SNORM_EXT,t,n,0,i.RED,i.SHORT,r),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR),i.useProgram(f),i.drawArrays(i.POINTS,0,1);const h=new Uint8Array(4);i.readPixels(o[0],o[1],1,1,i.RGBA,i.UNSIGNED_BYTE,h);const[m,g,v]=h,y=i.getExtension("WEBGL_lose_context");return y&&y.loseContext(),m===g&&g===v&&0!==m}catch(e){return!1}}()),Of}const{Wrap:Rf,Filter:Lf}=Pf,{VtkDataTypes:kf}=Wl,{vtkDebugMacro:Df,vtkErrorMacro:Bf,vtkWarningMacro:Nf,requiredParam:Vf}=fn,{toHalf:Ff}=If;function Uf(e,t){function n(){return{internalFormat:t.internalFormat,format:t.format,openGLDataType:t.openGLDataType,width:t.width,height:t.height}}t.classHierarchy.push("vtkOpenGLTexture"),e.render=function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(n?t._openGLRenderWindow=n:(t._openGLRenderer=e.getFirstAncestorOfType("vtkOpenGLRenderer"),t._openGLRenderWindow=t._openGLRenderer.getLastAncestorOfType("vtkOpenGLRenderWindow")),t.context=t._openGLRenderWindow.getContext(),t.renderable.getInterpolate()?(t.generateMipmap?e.setMinificationFilter(Lf.LINEAR_MIPMAP_LINEAR):e.setMinificationFilter(Lf.LINEAR),e.setMagnificationFilter(Lf.LINEAR)):(e.setMinificationFilter(Lf.NEAREST),e.setMagnificationFilter(Lf.NEAREST)),t.renderable.getRepeat()&&(e.setWrapR(Rf.REPEAT),e.setWrapS(Rf.REPEAT),e.setWrapT(Rf.REPEAT)),t.renderable.getInputData()&&t.renderable.setImage(null),!t.handle||t.renderable.getMTime()>t.textureBuildTime.getMTime()){if(null!==t.renderable.getImageBitmap()&&(t.renderable.getInterpolate()&&(t.generateMipmap=!0,e.setMinificationFilter(Lf.LINEAR_MIPMAP_LINEAR)),t.renderable.getImageBitmap()&&t.renderable.getImageLoaded()&&(e.create2DFromImageBitmap(t.renderable.getImageBitmap()),e.activate(),e.sendParameters(),t.textureBuildTime.modified())),null!==t.renderable.getImage()&&(t.renderable.getInterpolate()&&(t.generateMipmap=!0,e.setMinificationFilter(Lf.LINEAR_MIPMAP_LINEAR)),t.renderable.getImage()&&t.renderable.getImageLoaded()&&(e.create2DFromImage(t.renderable.getImage()),e.activate(),e.sendParameters(),t.textureBuildTime.modified())),null!==t.renderable.getCanvas()){t.renderable.getInterpolate()&&(t.generateMipmap=!0,e.setMinificationFilter(Lf.LINEAR_MIPMAP_LINEAR));const n=t.renderable.getCanvas();e.create2DFromRaw({width:n.width,height:n.height,numComps:4,dataType:kf.UNSIGNED_CHAR,data:n,flip:!0}),e.activate(),e.sendParameters(),t.textureBuildTime.modified()}if(null!==t.renderable.getJsImageData()){const n=t.renderable.getJsImageData();t.renderable.getInterpolate()&&(t.generateMipmap=!0,e.setMinificationFilter(Lf.LINEAR_MIPMAP_LINEAR)),e.create2DFromRaw({width:n.width,height:n.height,numComps:4,dataType:kf.UNSIGNED_CHAR,data:n.data,flip:!0}),e.activate(),e.sendParameters(),t.textureBuildTime.modified()}const n=t.renderable.getInputData(0);if(n&&n.getPointData().getScalars()){const r=n.getExtent(),o=n.getPointData().getScalars(),a=[];for(let e=0;e<t.renderable.getNumberOfInputPorts();++e){const n=t.renderable.getInputData(e),r=n?n.getPointData().getScalars().getData():null;r&&a.push(r)}t.renderable.getInterpolate()&&4===o.getNumberOfComponents()&&(t.generateMipmap=!0,e.setMinificationFilter(Lf.LINEAR_MIPMAP_LINEAR)),a.length%6===0?e.createCubeFromRaw({width:r[1]-r[0]+1,height:r[3]-r[2]+1,numComps:o.getNumberOfComponents(),dataType:o.getDataType(),data:a}):e.create2DFromRaw({width:r[1]-r[0]+1,height:r[3]-r[2]+1,numComps:o.getNumberOfComponents(),dataType:o.getDataType(),data:o.getData()}),e.activate(),e.sendParameters(),t.textureBuildTime.modified()}}t.handle&&e.activate()};const r=()=>{if(t.minificationFilter!==Lf.LINEAR&&t.magnificationFilter!==Lf.LINEAR||Mf())return t.oglNorm16Ext};function o(e){const[t,n,r,o,a,i]=e;return[n-t+1,o-r+1,i-a+1]}function a(e){const[t,n,r]=o(e);return t*n*r}function i(e,n){const r=new((arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)||e.constructor)(n.reduce((e,t)=>e+a(t),0)),o=[t.width,t.height,t.depth];let i=0;return n.forEach(t=>{!function(e,t,n,r,o){const[a,i,s,l,u,c]=n,[d,f]=t,p=d*f;let h=o;for(let m=u;m<=c;m++){const t=m*p;for(let n=s;n<=l;n++){const o=t+n*d;for(let t=o+a,n=o+i;t<=n;t++,h++)r[h]=e[t]}}}(e,o,t,r,i),i+=a(t)}),r}function s(e){if(t._openGLRenderWindow.getWebgl2())return e;const n=[],r=t.width,o=t.height,a=t.components;if(e&&(!ua(r)||!ua(o))){const i=t.context.getExtension("OES_texture_half_float"),s=la(r),l=la(o),u=s*l*t.components;for(let c=0;c<e.length;c++)if(null!==e[c]){let d=null;const f=o/l,p=r/s;let h=!1;t.openGLDataType===t.context.FLOAT?d=new Float32Array(u):i&&t.openGLDataType===i.HALF_FLOAT_OES?(d=new Uint16Array(u),h=!0):d=new Uint8Array(u);for(let t=0;t<l;t++){const n=t*s*a,i=t*f;let l=Math.floor(i),u=Math.ceil(i);u>=o&&(u=o-1);const m=i-l,g=1-m;l=l*r*a,u=u*r*a;for(let t=0;t<s;t++){const o=t*a,i=t*p;let s=Math.floor(i),f=Math.ceil(i);f>=r&&(f=r-1);const v=i-s;s*=a,f*=a;for(let t=0;t<a;t++)d[n+o+t]=h?If.toHalf(If.fromHalf(e[c][l+s+t])*g*(1-v)+If.fromHalf(e[c][l+f+t])*g*v+If.fromHalf(e[c][u+s+t])*m*(1-v)+If.fromHalf(e[c][u+f+t])*m*v):e[c][l+s+t]*g*(1-v)+e[c][l+f+t]*g*v+e[c][u+s+t]*m*(1-v)+e[c][u+f+t]*m*v}}n.push(d),t.width=s,t.height=l}else n.push(null)}if(0===n.length)for(let t=0;t<e.length;t++)n.push(e[t]);return n}function l(e){if(t._openGLRenderWindow){var n;if(t.resizable||null!==(n=t.renderable)&&void 0!==n&&n.getResizable())return!1;if(t._openGLRenderWindow.getWebgl2()){return!(t._openGLRenderWindow.getGLInformations().RENDERER.value.match(/WebKit/gi)&&navigator.platform.match(/Mac/gi)&&r())||e!==kf.UNSIGNED_SHORT&&e!==kf.SHORT}return!1}return!1}function u(n,r){const o=n.getNumberOfComponents(),a=n.getDataType(),i=n.getData(),s=new Array(o),l=new Array(o);for(let e=0;e<o;++e){const[t,r]=n.getRange(e);s[e]=t,l[e]=r}const u=function(e,t,n){const r=new Array(n),o=new Array(n);for(let a=0;a<n;++a)r[a]=e[a],o[a]=t[a]-e[a]||1;return{scale:o,offset:r}}(s,l,o);return function(n,r,o,a){e.getOpenGLDataType(n);const i=function(e,t){for(let n=0;n<e.length;n++){const r=e[n],o=t[n]+r;if(r<-2048||r>2048||o<-2048||o>2048)return!1}return!0}(r,o)||a;let s=!1;if(t._openGLRenderWindow.getWebgl2())s=t.openGLDataType===t.context.FLOAT&&null===t.context.getExtension("OES_texture_float_linear")&&i||t.openGLDataType===t.context.HALF_FLOAT;else{const e=t.context.getExtension("OES_texture_half_float");s=e&&t.openGLDataType===e.HALF_FLOAT_OES}t.canUseHalfFloat=s&&i}(a,u.offset,u.scale,r),e.useHalfFloat()||e.getOpenGLDataType(a,!0),{numComps:o,dataType:a,data:i,scaleOffsets:u}}e.destroyTexture=()=>{e.deactivate(),t.context&&t.handle&&t.context.deleteTexture(t.handle),t._prevTexParams=null,t.handle=0,t.numberOfDimensions=0,t.target=0,t.components=0,t.width=0,t.height=0,t.depth=0,e.resetFormatAndType()},e.createTexture=()=>{t.handle||(t.handle=t.context.createTexture(),t.target&&(t.context.bindTexture(t.target,t.handle),t.context.texParameteri(t.target,t.context.TEXTURE_MIN_FILTER,e.getOpenGLFilterMode(t.minificationFilter)),t.context.texParameteri(t.target,t.context.TEXTURE_MAG_FILTER,e.getOpenGLFilterMode(t.magnificationFilter)),t.context.texParameteri(t.target,t.context.TEXTURE_WRAP_S,e.getOpenGLWrapMode(t.wrapS)),t.context.texParameteri(t.target,t.context.TEXTURE_WRAP_T,e.getOpenGLWrapMode(t.wrapT)),t._openGLRenderWindow.getWebgl2()&&t.context.texParameteri(t.target,t.context.TEXTURE_WRAP_R,e.getOpenGLWrapMode(t.wrapR)),t.context.bindTexture(t.target,null)))},e.getTextureUnit=()=>t._openGLRenderWindow?t._openGLRenderWindow.getTextureUnitForTexture(e):-1,e.activate=()=>{t._openGLRenderWindow.activateTexture(e),e.bind()},e.deactivate=()=>{t._openGLRenderWindow&&t._openGLRenderWindow.deactivateTexture(e)},e.releaseGraphicsResources=n=>{n&&t.handle&&(n.activateTexture(e),n.deactivateTexture(e),t.context.deleteTexture(t.handle),t._prevTexParams=null,t.handle=0,t.numberOfDimensions=0,t.target=0,t.internalFormat=0,t.format=0,t.openGLDataType=0,t.components=0,t.width=0,t.height=0,t.depth=0,t.allocatedGPUMemoryInBytes=0),t.shaderProgram&&(t.shaderProgram.releaseGraphicsResources(n),t.shaderProgram=null)},e.bind=()=>{t.context.bindTexture(t.target,t.handle),t.autoParameters&&e.getMTime()>t.sendParametersTime.getMTime()&&e.sendParameters()},e.isBound=()=>{let e=!1;if(t.context&&t.handle){let n=0;if(t.target===t.context.TEXTURE_2D)n=t.context.TEXTURE_BINDING_2D;else Nf("impossible case");e=t.context.getIntegerv(n)===t.handle}return e},e.sendParameters=()=>{t.context.texParameteri(t.target,t.context.TEXTURE_WRAP_S,e.getOpenGLWrapMode(t.wrapS)),t.context.texParameteri(t.target,t.context.TEXTURE_WRAP_T,e.getOpenGLWrapMode(t.wrapT)),t._openGLRenderWindow.getWebgl2()&&t.context.texParameteri(t.target,t.context.TEXTURE_WRAP_R,e.getOpenGLWrapMode(t.wrapR)),t.context.texParameteri(t.target,t.context.TEXTURE_MIN_FILTER,e.getOpenGLFilterMode(t.minificationFilter)),t.context.texParameteri(t.target,t.context.TEXTURE_MAG_FILTER,e.getOpenGLFilterMode(t.magnificationFilter)),t._openGLRenderWindow.getWebgl2()&&(t.context.texParameteri(t.target,t.context.TEXTURE_BASE_LEVEL,t.baseLevel),t.context.texParameteri(t.target,t.context.TEXTURE_MAX_LEVEL,t.maxLevel)),t.sendParametersTime.modified()},e.getInternalFormat=(n,r)=>(t._forceInternalFormat||(t.internalFormat=e.getDefaultInternalFormat(n,r)),t.internalFormat||Df("Unable to find suitable internal format for T=".concat(n," NC= ").concat(r)),[t.context.R32F,t.context.RG32F,t.context.RGB32F,t.context.RGBA32F].includes(t.internalFormat)&&!t.context.getExtension("OES_texture_float_linear")&&Nf("Failed to load OES_texture_float_linear. Texture filtering is not available for *32F internal formats."),t.internalFormat),e.getDefaultInternalFormat=(n,o)=>{let a=0;return a=t._openGLRenderWindow.getDefaultTextureInternalFormat(n,o,r(),e.useHalfFloat()),a||(a||(Df("Unsupported internal texture type!"),Df("Unable to find suitable internal format for T=".concat(n," NC= ").concat(o))),a)},e.useHalfFloat=()=>t.enableUseHalfFloat&&t.canUseHalfFloat,e.setInternalFormat=n=>{t._forceInternalFormat=!0,n!==t.internalFormat&&(t.internalFormat=n,e.modified())},e.getFormat=(n,r)=>(t.format=e.getDefaultFormat(n,r),t.format),e.getDefaultFormat=(e,n)=>{if(t._openGLRenderWindow.getWebgl2())switch(n){case 1:return t.context.RED;case 2:return t.context.RG;case 3:default:return t.context.RGB;case 4:return t.context.RGBA}else switch(n){case 1:return t.context.LUMINANCE;case 2:return t.context.LUMINANCE_ALPHA;case 3:default:return t.context.RGB;case 4:return t.context.RGBA}},e.resetFormatAndType=()=>{t._prevTexParams=null,t.format=0,t.internalFormat=0,t._forceInternalFormat=!1,t.openGLDataType=0},e.getDefaultDataType=n=>{const o=e.useHalfFloat();if(t._openGLRenderWindow.getWebgl2())switch(n){case kf.UNSIGNED_CHAR:return t.context.UNSIGNED_BYTE;case r()&&!o&&kf.SHORT:return t.context.SHORT;case r()&&!o&&kf.UNSIGNED_SHORT:return t.context.UNSIGNED_SHORT;case o&&kf.SHORT:case o&&kf.UNSIGNED_SHORT:return t.context.HALF_FLOAT;case kf.FLOAT:case kf.VOID:default:return t.context.FLOAT}switch(n){case kf.UNSIGNED_CHAR:return t.context.UNSIGNED_BYTE;case kf.FLOAT:case kf.VOID:default:if(t.context.getExtension("OES_texture_float")&&t.context.getExtension("OES_texture_float_linear"))return t.context.FLOAT;{const e=t.context.getExtension("OES_texture_half_float");if(e&&t.context.getExtension("OES_texture_half_float_linear"))return e.HALF_FLOAT_OES}return t.context.UNSIGNED_BYTE}},e.getOpenGLDataType=function(n){let r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t.openGLDataType&&!r||(t.openGLDataType=e.getDefaultDataType(n)),t.openGLDataType},e.getShiftAndScale=()=>{let e=0,n=1;switch(t.openGLDataType){case t.context.BYTE:n=127.5,e=n-128;break;case t.context.UNSIGNED_BYTE:n=255,e=0;break;case t.context.SHORT:n=32767.5,e=n-32768;break;case t.context.UNSIGNED_SHORT:n=65536,e=0;break;case t.context.INT:n=2147483647.5,e=n-2147483648;break;case t.context.UNSIGNED_INT:n=4294967295,e=0;case t.context.FLOAT:}return{shift:e,scale:n}},e.getOpenGLFilterMode=e=>{switch(e){case Lf.NEAREST:return t.context.NEAREST;case Lf.LINEAR:return t.context.LINEAR;case Lf.NEAREST_MIPMAP_NEAREST:return t.context.NEAREST_MIPMAP_NEAREST;case Lf.NEAREST_MIPMAP_LINEAR:return t.context.NEAREST_MIPMAP_LINEAR;case Lf.LINEAR_MIPMAP_NEAREST:return t.context.LINEAR_MIPMAP_NEAREST;case Lf.LINEAR_MIPMAP_LINEAR:return t.context.LINEAR_MIPMAP_LINEAR;default:return t.context.NEAREST}},e.getOpenGLWrapMode=e=>{switch(e){case Rf.CLAMP_TO_EDGE:return t.context.CLAMP_TO_EDGE;case Rf.REPEAT:return t.context.REPEAT;case Rf.MIRRORED_REPEAT:return t.context.MIRRORED_REPEAT;default:return t.context.CLAMP_TO_EDGE}},e.updateArrayDataTypeForGL=function(e,n){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];const a=[];let s=t.width*t.height*t.components;r&&(s*=t.depth);const l=!!o.length;if(e!==kf.FLOAT&&t.openGLDataType===t.context.FLOAT)for(let t=0;t<n.length;t++)if(n[t])if(l)a.push(i(n[t],o,Float32Array));else{const e=n[t].length>s?n[t].subarray(0,s):n[t];a.push(new Float32Array(e))}else a.push(null);if(e!==kf.UNSIGNED_CHAR&&t.openGLDataType===t.context.UNSIGNED_BYTE)for(let t=0;t<n.length;t++)if(n[t])if(l)a.push(i(n[t],o,Uint8Array));else{const e=n[t].length>s?n[t].subarray(0,s):n[t];a.push(new Uint8Array(e))}else a.push(null);let u=!1;if(t._openGLRenderWindow.getWebgl2())u=t.openGLDataType===t.context.HALF_FLOAT;else{const e=t.context.getExtension("OES_texture_half_float");u=e&&t.openGLDataType===e.HALF_FLOAT_OES}if(u)for(let t=0;t<n.length;t++)if(n[t]){const e=l?i(n[t],o):n[t],r=new Uint16Array(l?e.length:s),u=r.length;for(let t=0;t<u;t++)r[t]=Ff(e[t]);a.push(r)}else a.push(null);if(0===a.length)for(let t=0;t<n.length;t++)a.push(l&&n[t]?i(n[t],o):n[t]);return a},e.create2DFromRaw=function(){let{width:n=Vf("width"),height:o=Vf("height"),numComps:a=Vf("numComps"),dataType:i=Vf("dataType"),data:u=Vf("data"),flip:c=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e.getOpenGLDataType(i,!0),e.getInternalFormat(i,a),e.getFormat(i,a),!t.internalFormat||!t.format||!t.openGLDataType)return Bf("Failed to determine texture parameters."),!1;t.target=t.context.TEXTURE_2D,t.components=a,t.width=n,t.height=o,t.depth=1,t.numberOfDimensions=2,t._openGLRenderWindow.activateTexture(e),e.createTexture(),e.bind();const d=[u],f=s(e.updateArrayDataTypeForGL(i,d));return t.context.pixelStorei(t.context.UNPACK_FLIP_Y_WEBGL,c),t.context.pixelStorei(t.context.UNPACK_ALIGNMENT,1),l(i)?(t.context.texStorage2D(t.target,1,t.internalFormat,t.width,t.height),null!=f[0]&&t.context.texSubImage2D(t.target,0,0,0,t.width,t.height,t.format,t.openGLDataType,f[0])):t.context.texImage2D(t.target,0,t.internalFormat,t.width,t.height,0,t.format,t.openGLDataType,f[0]),t.generateMipmap&&t.context.generateMipmap(t.target),c&&t.context.pixelStorei(t.context.UNPACK_FLIP_Y_WEBGL,!1),t.allocatedGPUMemoryInBytes=t.width*t.height*t.depth*a*t._openGLRenderWindow.getDefaultTextureByteSize(i,r(),e.useHalfFloat()),e.deactivate(),!0},e.createCubeFromRaw=function(){let{width:n=Vf("width"),height:o=Vf("height"),numComps:a=Vf("numComps"),dataType:i=Vf("dataType"),data:u=Vf("data")}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e.getOpenGLDataType(i),e.getInternalFormat(i,a),e.getFormat(i,a),!t.internalFormat||!t.format||!t.openGLDataType)return Bf("Failed to determine texture parameters."),!1;t.target=t.context.TEXTURE_CUBE_MAP,t.components=a,t.width=n,t.height=o,t.depth=1,t.numberOfDimensions=2,t._openGLRenderWindow.activateTexture(e),t.maxLevel=u.length/6-1,e.createTexture(),e.bind();const c=s(e.updateArrayDataTypeForGL(i,u)),d=[];let f=t.width,p=t.height;for(let e=0;e<c.length;e++){e%6===0&&0!==e&&(f/=2,p/=2),d[e]=Pt(i,p*f*t.components);for(let n=0;n<p;++n){const r=n*f*t.components,o=(p-n-1)*f*t.components;d[e].set(c[e].slice(o,o+f*t.components),r)}}t.context.pixelStorei(t.context.UNPACK_ALIGNMENT,1),l(i)&&t.context.texStorage2D(t.target,6,t.internalFormat,t.width,t.height);for(let e=0;e<6;e++){let n=0,r=t.width,o=t.height;for(;r>=1&&o>=1;){let a=null;n<=t.maxLevel&&(a=d[6*n+e]),l(i)?null!=a&&t.context.texSubImage2D(t.context.TEXTURE_CUBE_MAP_POSITIVE_X+e,n,0,0,r,o,t.format,t.openGLDataType,a):t.context.texImage2D(t.context.TEXTURE_CUBE_MAP_POSITIVE_X+e,n,t.internalFormat,r,o,0,t.format,t.openGLDataType,a),n++,r/=2,o/=2}}return t.allocatedGPUMemoryInBytes=t.width*t.height*t.depth*a*t._openGLRenderWindow.getDefaultTextureByteSize(i,r(),e.useHalfFloat()),e.deactivate(),!0},e.createDepthFromRaw=function(){let{width:n=Vf("width"),height:o=Vf("height"),dataType:a=Vf("dataType"),data:i=Vf("data")}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.getOpenGLDataType(a),t.format=t.context.DEPTH_COMPONENT,t._openGLRenderWindow.getWebgl2()?a===kf.FLOAT?t.internalFormat=t.context.DEPTH_COMPONENT32F:t.internalFormat=t.context.DEPTH_COMPONENT16:t.internalFormat=t.context.DEPTH_COMPONENT,t.internalFormat&&t.format&&t.openGLDataType?(t.target=t.context.TEXTURE_2D,t.components=1,t.width=n,t.height=o,t.depth=1,t.numberOfDimensions=2,t._openGLRenderWindow.activateTexture(e),e.createTexture(),e.bind(),t.context.pixelStorei(t.context.UNPACK_ALIGNMENT,1),l(a)?(t.context.texStorage2D(t.target,1,t.internalFormat,t.width,t.height),null!=i&&t.context.texSubImage2D(t.target,0,0,0,t.width,t.height,t.format,t.openGLDataType,i)):t.context.texImage2D(t.target,0,t.internalFormat,t.width,t.height,0,t.format,t.openGLDataType,i),t.generateMipmap&&t.context.generateMipmap(t.target),t.allocatedGPUMemoryInBytes=t.width*t.height*t.depth*t.components*t._openGLRenderWindow.getDefaultTextureByteSize(a,r(),e.useHalfFloat()),e.deactivate(),!0):(Bf("Failed to determine texture parameters."),!1)},e.create2DFromImage=n=>{if(e.getOpenGLDataType(kf.UNSIGNED_CHAR),e.getInternalFormat(kf.UNSIGNED_CHAR,4),e.getFormat(kf.UNSIGNED_CHAR,4),!t.internalFormat||!t.format||!t.openGLDataType)return Bf("Failed to determine texture parameters."),!1;t.target=t.context.TEXTURE_2D,t.components=4,t.depth=1,t.numberOfDimensions=2,t._openGLRenderWindow.activateTexture(e),e.createTexture(),e.bind();const o=!t._openGLRenderWindow.getWebgl2()&&(!ua(n.width)||!ua(n.height));let a=n,i=n.width,s=n.height,u=!0;const c=window.chrome;if(o||c){const e=new OffscreenCanvas(la(n.width),la(n.height));i=e.width,s=e.height;const t=e.getContext("2d");t.translate(0,e.height),t.scale(1,-1),t.drawImage(n,0,0,n.width,n.height,0,0,e.width,e.height),a=e,u=!1}return t.width=i,t.height=s,t.context.pixelStorei(t.context.UNPACK_FLIP_Y_WEBGL,u),t.context.pixelStorei(t.context.UNPACK_ALIGNMENT,1),l(kf.UNSIGNED_CHAR)?(t.context.texStorage2D(t.target,1,t.internalFormat,t.width,t.height),t.context.texSubImage2D(t.target,0,0,0,t.width,t.height,t.format,t.openGLDataType,a)):t.context.texImage2D(t.target,0,t.internalFormat,t.width,t.height,0,t.format,t.openGLDataType,a),t.generateMipmap&&t.context.generateMipmap(t.target),t.allocatedGPUMemoryInBytes=t.width*t.height*t.depth*t.components*t._openGLRenderWindow.getDefaultTextureByteSize(kf.UNSIGNED_CHAR,r(),e.useHalfFloat()),e.deactivate(),!0},e.create2DFromImageBitmap=n=>(e.getOpenGLDataType(kf.UNSIGNED_CHAR),e.getInternalFormat(kf.UNSIGNED_CHAR,4),e.getFormat(kf.UNSIGNED_CHAR,4),t.internalFormat&&t.format&&t.openGLDataType?(t.target=t.context.TEXTURE_2D,t.components=4,t.depth=1,t.numberOfDimensions=2,t._openGLRenderWindow.activateTexture(e),e.createTexture(),e.bind(),t.context.pixelStorei(t.context.UNPACK_ALIGNMENT,1),t.width=n.width,t.height=n.height,l(kf.UNSIGNED_CHAR)?(t.context.texStorage2D(t.target,1,t.internalFormat,t.width,t.height),t.context.texSubImage2D(t.target,0,0,0,t.width,t.height,t.format,t.openGLDataType,n)):t.context.texImage2D(t.target,0,t.internalFormat,t.width,t.height,0,t.format,t.openGLDataType,n),t.generateMipmap&&t.context.generateMipmap(t.target),t.allocatedGPUMemoryInBytes=t.width*t.height*t.depth*t.components*t._openGLRenderWindow.getDefaultTextureByteSize(kf.UNSIGNED_CHAR,r(),e.useHalfFloat()),e.deactivate(),!0):(Bf("Failed to determine texture parameters."),!1)),e.create2DFilterableFromRaw=function(){let{width:t=Vf("width"),height:n=Vf("height"),numComps:r=Vf("numComps"),dataType:o=Vf("dataType"),data:a=Vf("data"),preferSizeOverAccuracy:i=!1,ranges:s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.create2DFilterableFromDataArray({width:t,height:n,dataArray:Wl.newInstance({numComps:r,dataType:o,values:a,ranges:s}),preferSizeOverAccuracy:i})},e.create2DFilterableFromDataArray=function(){let{width:t=Vf("width"),height:n=Vf("height"),dataArray:r=Vf("dataArray"),preferSizeOverAccuracy:o=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{numComps:a,dataType:i,data:s}=u(r,o);e.create2DFromRaw({width:t,height:n,numComps:a,dataType:i,data:s})},e.updateVolumeInfoForGL=(n,o)=>{var a,i;let s=!1;const l=e.useHalfFloat();null!==(a=t.volumeInfo)&&void 0!==a&&a.scale&&null!==(i=t.volumeInfo)&&void 0!==i&&i.offset||(t.volumeInfo={scale:new Array(o),offset:new Array(o)});for(let e=0;e<o;++e)t.volumeInfo.scale[e]=1,t.volumeInfo.offset[e]=0;if(r()&&!l&&n===kf.SHORT){for(let e=0;e<o;++e)t.volumeInfo.scale[e]=32767;s=!0}if(r()&&!l&&n===kf.UNSIGNED_SHORT){for(let e=0;e<o;++e)t.volumeInfo.scale[e]=65535;s=!0}if(n===kf.UNSIGNED_CHAR){for(let e=0;e<o;++e)t.volumeInfo.scale[e]=255;s=!0}return(n===kf.FLOAT||l&&(n===kf.SHORT||n===kf.UNSIGNED_SHORT))&&(s=!0),s},e.create3DFromRaw=function(){let{width:i=Vf("width"),height:u=Vf("height"),depth:c=Vf("depth"),numComps:d=Vf("numComps"),dataType:f=Vf("dataType"),data:p=Vf("data"),updatedExtents:h=[]}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},m=f,g=p;if(!e.updateVolumeInfoForGL(m,d)&&g){const e=i*u*c,n=structuredClone(t.volumeInfo),r=new Float32Array(e*d);t.volumeInfo.offset=n.offset,t.volumeInfo.scale=n.scale;let o=0;const a=n.scale.map(e=>1/e);for(let t=0;t<e;t++)for(let e=0;e<d;e++)r[o]=(g[o]-n.offset[e])*a[e],o++;m=kf.FLOAT,g=r}if(e.getOpenGLDataType(m),e.getInternalFormat(m,d),e.getFormat(m,d),!t.internalFormat||!t.format||!t.openGLDataType)return Bf("Failed to determine texture parameters."),!1;t.target=t.context.TEXTURE_3D,t.components=d,t.width=i,t.height=u,t.depth=c,t.numberOfDimensions=3,t._openGLRenderWindow.activateTexture(e),e.createTexture(),e.bind();const v=h.length>0,y=!v||!it(t._prevTexParams,n()),b=[g],_=s(e.updateArrayDataTypeForGL(m,b,!0,y?[]:h));if(t.context.pixelStorei(t.context.UNPACK_ALIGNMENT,1),y)l(m)?(t.context.texStorage3D(t.target,1,t.internalFormat,t.width,t.height,t.depth),null!=_[0]&&t.context.texSubImage3D(t.target,0,0,0,0,t.width,t.height,t.depth,t.format,t.openGLDataType,_[0])):t.context.texImage3D(t.target,0,t.internalFormat,t.width,t.height,t.depth,0,t.format,t.openGLDataType,_[0]),t._prevTexParams=n();else if(v){const e=_[0];let n=0;for(let r=0;r<h.length;r++){const i=h[r],s=o(i),l=a(i),u=new e.constructor(e.buffer,n,l);n+=u.byteLength,t.context.texSubImage3D(t.target,0,i[0],i[2],i[4],s[0],s[1],s[2],t.format,t.openGLDataType,u)}}return t.generateMipmap&&t.context.generateMipmap(t.target),t.allocatedGPUMemoryInBytes=t.width*t.height*t.depth*t.components*t._openGLRenderWindow.getDefaultTextureByteSize(m,r(),e.useHalfFloat()),e.deactivate(),!0},e.create3DFilterableFromRaw=function(){let{width:t=Vf("width"),height:n=Vf("height"),depth:r=Vf("depth"),numComps:o=Vf("numComps"),dataType:a=Vf("dataType"),data:i=Vf("data"),preferSizeOverAccuracy:s=!1,ranges:l,updatedExtents:u=[]}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.create3DFilterableFromDataArray({width:t,height:n,depth:r,dataArray:Wl.newInstance({numComps:o,dataType:a,values:i,ranges:l}),preferSizeOverAccuracy:s,updatedExtents:u})},e.create3DFilterableFromDataArray=function(){let{width:n=Vf("width"),height:r=Vf("height"),depth:o=Vf("depth"),dataArray:a=Vf("dataArray"),preferSizeOverAccuracy:i=!1,updatedExtents:s=[]}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{numComps:c,dataType:d,data:f,scaleOffsets:p}=u(a,i),h=[],m=[];for(let e=0;e<c;++e)h[e]=0,m[e]=1;if(t.volumeInfo={scale:m,offset:h,dataComputedScale:p.scale,dataComputedOffset:p.offset,width:n,height:r,depth:o},t._openGLRenderWindow.getWebgl2())return e.create3DFromRaw({width:n,height:r,depth:o,numComps:c,dataType:d,data:f,updatedExtents:s});const g=n*r*o,v=structuredClone(p);let y=(e,t,n,r,o)=>{e[t]=n},b=kf.UNSIGNED_CHAR;if(d===kf.UNSIGNED_CHAR)for(let e=0;e<c;++e)v.offset[e]=0,v.scale[e]=255;else t.context.getExtension("OES_texture_float")&&t.context.getExtension("OES_texture_float_linear")?(b=kf.FLOAT,y=(e,t,n,r,o)=>{e[t]=(n-r)/o}):(b=kf.UNSIGNED_CHAR,y=(e,t,n,r,o)=>{e[t]=255*(n-r)/o});if(e.getOpenGLDataType(b),e.getInternalFormat(b,c),e.getFormat(b,c),!t.internalFormat||!t.format||!t.openGLDataType)return Bf("Failed to determine texture parameters."),!1;t.target=t.context.TEXTURE_2D,t.components=c,t.depth=1,t.numberOfDimensions=2;let _=t.context.getParameter(t.context.MAX_TEXTURE_SIZE);_>4096&&(b===kf.FLOAT||c>=3)&&(_=4096);let T=1,x=1;g>_*_&&(T=Math.ceil(Math.sqrt(g/(_*_))),x=T);let S=Math.sqrt(g)/T;S=la(S);const w=Math.floor(S*T/n),C=Math.ceil(o/w),P=la(r*C/x);let A;t.width=S,t.height=P,t._openGLRenderWindow.activateTexture(e),e.createTexture(),e.bind(),t.volumeInfo.xreps=w,t.volumeInfo.yreps=C,t.volumeInfo.xstride=T,t.volumeInfo.ystride=x,t.volumeInfo.offset=v.offset,t.volumeInfo.scale=v.scale;const E=S*P*c;A=b===kf.FLOAT?new Float32Array(E):new Uint8Array(E);let I=0;const O=Math.floor(n/T),M=Math.floor(r/x);for(let e=0;e<C;e++){const a=Math.min(w,o-e*w),i=c*(t.width-a*Math.floor(n/T));for(let t=0;t<M;t++){for(let o=0;o<a;o++){const a=c*((e*w+o)*n*r+x*t*n);for(let e=0;e<O;e++)for(let t=0;t<c;t++)y(A,I,f[a+T*e*c+t],v.offset[t],v.scale[t]),I++}I+=i}}return t.context.pixelStorei(t.context.UNPACK_ALIGNMENT,1),l(b)?(t.context.texStorage2D(t.target,1,t.internalFormat,t.width,t.height),null!=A&&t.context.texSubImage2D(t.target,0,0,0,t.width,t.height,t.format,t.openGLDataType,A)):t.context.texImage2D(t.target,0,t.internalFormat,t.width,t.height,0,t.format,t.openGLDataType,A),e.deactivate(),!0},e.setOpenGLRenderWindow=n=>{t._openGLRenderWindow!==n&&(e.releaseGraphicsResources(),t._openGLRenderWindow=n,t.context=null,n&&(t.context=t._openGLRenderWindow.getContext()))},e.getMaximumTextureSize=e=>e&&e.isCurrent()?e.getIntegerv(e.MAX_TEXTURE_SIZE):-1,e.enableUseHalfFloat=e=>{t.enableUseHalfFloat=e}}const zf={_openGLRenderWindow:null,_forceInternalFormat:!1,_prevTexParams:null,context:null,handle:0,sendParametersTime:null,textureBuildTime:null,numberOfDimensions:0,target:0,format:0,openGLDataType:0,components:0,width:0,height:0,depth:0,autoParameters:!0,wrapS:Rf.CLAMP_TO_EDGE,wrapT:Rf.CLAMP_TO_EDGE,wrapR:Rf.CLAMP_TO_EDGE,minificationFilter:Lf.NEAREST,magnificationFilter:Lf.NEAREST,minLOD:-1e3,maxLOD:1e3,baseLevel:0,maxLevel:1e3,generateMipmap:!1,oglNorm16Ext:null,allocatedGPUMemoryInBytes:0,enableUseHalfFloat:!0,canUseHalfFloat:!1};function Gf(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,zf,n),gn.extend(e,t,n),t.sendParametersTime={},Nt(t.sendParametersTime,{mtime:0}),t.textureBuildTime={},Nt(t.textureBuildTime,{mtime:0}),Gt(e,t,["format","openGLDataType"]),Wt(e,t,["keyMatrixTime","minificationFilter","magnificationFilter","wrapS","wrapT","wrapR","generateMipmap","oglNorm16Ext"]),Ft(e,t,["width","height","volumeInfo","components","handle","target","allocatedGPUMemoryInBytes"]),Zt(0,t,["openGLRenderWindow"]),Uf(e,t)}const Wf=Qt(Gf,"vtkOpenGLTexture");var Hf=u({newInstance:Wf,extend:Gf},Pf);Tn("vtkTexture",Wf);var jf={implementReplaceShaderCoincidentOffset:function(e,t){e.replaceShaderCoincidentOffset=(n,r,o)=>{const a=e.getCoincidentParameters(r,o);if(a&&(0!==a.factor||0!==a.offset)){let e=n.Fragment;e=vf.substitute(e,"//VTK::Coincident::Dec",["uniform float cfactor;","uniform float coffset;"]).result,t.context.getExtension("EXT_frag_depth")&&(0!==a.factor?(e=vf.substitute(e,"//VTK::UniformFlow::Impl",["float cscale = length(vec2(dFdx(gl_FragCoord.z),dFdy(gl_FragCoord.z)));","//VTK::UniformFlow::Impl"],!1).result,e=vf.substitute(e,"//VTK::Depth::Impl","gl_FragDepthEXT = gl_FragCoord.z + cfactor*cscale + 0.000016*coffset;").result):e=vf.substitute(e,"//VTK::Depth::Impl","gl_FragDepthEXT = gl_FragCoord.z + 0.000016*coffset;").result),t._openGLRenderWindow.getWebgl2()&&(0!==a.factor?(e=vf.substitute(e,"//VTK::UniformFlow::Impl",["float cscale = length(vec2(dFdx(gl_FragCoord.z),dFdy(gl_FragCoord.z)));","//VTK::UniformFlow::Impl"],!1).result,e=vf.substitute(e,"//VTK::Depth::Impl","gl_FragDepth = gl_FragCoord.z + cfactor*cscale + 0.000016*coffset;").result):e=vf.substitute(e,"//VTK::Depth::Impl","gl_FragDepth = gl_FragCoord.z + 0.000016*coffset;").result),n.Fragment=e}}},implementBuildShadersWithReplacements:function(e,t){e.applyShaderReplacements=(e,t,n)=>{let r=null;if(t&&(r=t.ShaderReplacements),r)for(let o=0;o<r.length;o++){const t=r[o];if(n&&t.replaceFirst||!n&&!t.replaceFirst){const n=t.shaderType,r=e[n],o=vf.substitute(r,t.originalValue,t.replacementValue,t.replaceAll);e[n]=o.result}}},e.buildShaders=(n,r,o)=>{e.getReplacedShaderTemplate(n,r,o),t.lastRenderPassShaderReplacement=t.currentRenderPass?t.currentRenderPass.getShaderReplacement():null,t.lastRenderPassShaderReplacement&&t.lastRenderPassShaderReplacement(n);const a=t.renderable.getViewSpecificProperties().OpenGL;e.applyShaderReplacements(n,a,!0),e.replaceShaderValues(n,r,o),e.applyShaderReplacements(n,a)},e.getReplacedShaderTemplate=(n,r,o)=>{const a=t.renderable.getViewSpecificProperties().OpenGL;e.getShaderTemplate(n,r,o);let i=n.Vertex;if(a){const e=a.VertexShaderCode;void 0!==e&&""!==e&&(i=e)}n.Vertex=i;let s=n.Fragment;if(a){const e=a.FragmentShaderCode;void 0!==e&&""!==e&&(s=e)}n.Fragment=s;let l=n.Geometry;if(a){const e=a.GeometryShaderCode;void 0!==e&&(l=e)}n.Geometry=l}}};const{FieldAssociations:Kf}=uu,{primTypes:Zf}=wf,{Representation:qf,Shading:Xf}=Al,{ScalarMode:Yf}=cc,{Filter:Qf,Wrap:$f}=Hf,{vtkErrorMacro:Jf}=fn,ep={type:"StartEvent"},tp={type:"EndEvent"},{CoordinateSystem:np}=hl;function rp(n,r){function o(e,t,n){return t.identity(n),e.reduce((e,n,r)=>0===r?n?t.copy(e,n):t.identity(e):n?t.multiply(e,e,n):e,n)}r.classHierarchy.push("vtkOpenGLPolyDataMapper"),n.buildPass=e=>{e&&(r.currentRenderPass=null,r.openGLActor=n.getFirstAncestorOfType("vtkOpenGLActor"),r._openGLRenderer=r.openGLActor.getFirstAncestorOfType("vtkOpenGLRenderer"),r._openGLRenderWindow=r._openGLRenderer.getLastAncestorOfType("vtkOpenGLRenderWindow"),r.openGLCamera=r._openGLRenderer.getViewNodeFor(r._openGLRenderer.getRenderable().getActiveCamera()))},n.translucentPass=(e,t)=>{e&&(r.currentRenderPass=t,n.render())},n.zBufferPass=e=>{e&&(r.haveSeenDepthRequest=!0,r.renderDepth=!0,n.render(),r.renderDepth=!1)},n.opaqueZBufferPass=e=>n.zBufferPass(e),n.opaquePass=e=>{e&&n.render()},n.render=()=>{const e=r._openGLRenderWindow.getContext();if(r.context!==e){r.context=e;for(let e=Zf.Start;e<Zf.End;e++)r.primitives[e].setOpenGLRenderWindow(r._openGLRenderWindow)}const t=r.openGLActor.getRenderable(),o=r._openGLRenderer.getRenderable();n.renderPiece(o,t)},n.getShaderTemplate=(e,t,n)=>{e.Vertex="//VTK::System::Dec\n\n/*=========================================================================\n\n  Program:   Visualization Toolkit\n  Module:    vtkPolyDataVS.glsl\n\n  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen\n  All rights reserved.\n  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.\n\n     This software is distributed WITHOUT ANY WARRANTY; without even\n     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR\n     PURPOSE.  See the above copyright notice for more information.\n\n=========================================================================*/\n\nattribute vec4 vertexMC;\n\n// frag position in VC\n//VTK::PositionVC::Dec\n\n// optional normal declaration\n//VTK::Normal::Dec\n\n// extra lighting parameters\n//VTK::Light::Dec\n\n// Texture coordinates\n//VTK::TCoord::Dec\n\n// material property values\n//VTK::Color::Dec\n\n// clipping plane vars\n//VTK::Clip::Dec\n\n// camera and actor matrix values\n//VTK::Camera::Dec\n\n// Apple Bug\n//VTK::PrimID::Dec\n\n// picking support\n//VTK::Picking::Dec\n\nvoid main()\n{\n  //VTK::Color::Impl\n\n  //VTK::Normal::Impl\n\n  //VTK::TCoord::Impl\n\n  //VTK::Clip::Impl\n\n  //VTK::PrimID::Impl\n\n  //VTK::PositionVC::Impl\n\n  //VTK::Light::Impl\n\n  //VTK::Picking::Impl\n}\n",e.Fragment="//VTK::System::Dec\n\n/*=========================================================================\n\n  Program:   Visualization Toolkit\n  Module:    vtkPolyDataFS.glsl\n\n  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen\n  All rights reserved.\n  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.\n\n     This software is distributed WITHOUT ANY WARRANTY; without even\n     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR\n     PURPOSE.  See the above copyright notice for more information.\n\n=========================================================================*/\n// Template for the polydata mappers fragment shader\n\nuniform int PrimitiveIDOffset;\n\n// VC position of this fragment\n//VTK::PositionVC::Dec\n\n// optional color passed in from the vertex shader, vertexColor\n//VTK::Color::Dec\n\n// optional surface normal declaration\n//VTK::Normal::Dec\n\n// extra lighting parameters\n//VTK::Light::Dec\n\n// define vtkImageLabelOutlineOn\n//VTK::ImageLabelOutlineOn\n\n// Texture coordinates\n//VTK::TCoord::Dec\n\n// picking support\n//VTK::Picking::Dec\n\n// Depth Peeling Support\n//VTK::DepthPeeling::Dec\n\n// clipping plane vars\n//VTK::Clip::Dec\n\n// label outline \n//VTK::LabelOutline::Dec\n\n// the output of this shader\n//VTK::Output::Dec\n\n// Apple Bug\n//VTK::PrimID::Dec\n\n// handle coincident offsets\n//VTK::Coincident::Dec\n\n//VTK::ZBuffer::Dec\n\n//VTK::LabelOutlineHelperFunction\n\nvoid main()\n{\n  // VC position of this fragment. This should not branch/return/discard.\n  //VTK::PositionVC::Impl\n\n  // Place any calls that require uniform flow (e.g. dFdx) here.\n  //VTK::UniformFlow::Impl\n\n  // Set gl_FragDepth here (gl_FragCoord.z by default)\n  //VTK::Depth::Impl\n\n  // Early depth peeling abort:\n  //VTK::DepthPeeling::PreColor\n\n  // Apple Bug\n  //VTK::PrimID::Impl\n\n  //VTK::Clip::Impl\n\n  //VTK::Color::Impl\n\n  // Generate the normal if we are not passed in one\n  //VTK::Normal::Impl\n\n  //VTK::TCoord::Impl\n\n  //VTK::Light::Impl\n\n  if (gl_FragData[0].a <= 0.0)\n    {\n    discard;\n    }\n\n  //VTK::DepthPeeling::Impl\n\n  //VTK::Picking::Impl\n\n  // handle coincident offsets\n  //VTK::Coincident::Impl\n\n  //VTK::ZBuffer::Impl\n\n  //VTK::RenderPassFragmentShader::Impl\n}\n",e.Geometry=""},n.replaceShaderColor=(e,t,n)=>{let o=e.Vertex,a=e.Geometry,i=e.Fragment;const s=r.lastBoundBO.getReferenceByName("lastLightComplexity");let l=["uniform float ambient;","uniform float diffuse;","uniform float specular;","uniform float opacityUniform; // the fragment opacity","uniform vec3 ambientColorUniform;","uniform vec3 diffuseColorUniform;"];s&&(l=l.concat(["uniform vec3 specularColorUniform;","uniform float specularPowerUniform;"]));let u=["vec3 ambientColor;","  vec3 diffuseColor;","  float opacity;"];s&&(u=u.concat(["  vec3 specularColor;","  float specularPower;"])),u=u.concat(["  ambientColor = ambientColorUniform;","  diffuseColor = diffuseColorUniform;","  opacity = opacityUniform;"]),s&&(u=u.concat(["  specularColor = specularColorUniform;","  specularPower = specularPowerUniform;"])),0===r.lastBoundBO.getCABO().getColorComponents()||r.drawingEdges||(l=l.concat(["varying vec4 vertexColorVSOutput;"]),o=vf.substitute(o,"//VTK::Color::Dec",["attribute vec4 scalarColor;","varying vec4 vertexColorVSOutput;"]).result,o=vf.substitute(o,"//VTK::Color::Impl",["vertexColorVSOutput =  scalarColor;"]).result,a=vf.substitute(a,"//VTK::Color::Dec",["in vec4 vertexColorVSOutput[];","out vec4 vertexColorGSOutput;"]).result,a=vf.substitute(a,"//VTK::Color::Impl",["vertexColorGSOutput = vertexColorVSOutput[i];"]).result),0===r.lastBoundBO.getCABO().getColorComponents()||r.drawingEdges?(r.renderable.getAreScalarsMappedFromCells()||r.renderable.getInterpolateScalarsBeforeMapping())&&r.renderable.getColorCoordinates()&&!r.drawingEdges?i=vf.substitute(i,"//VTK::Color::Impl",u.concat(["  vec4 texColor = texture2D(texture1, tcoordVCVSOutput.st);","  diffuseColor = texColor.rgb;","  ambientColor = texColor.rgb;","  opacity = opacity*texColor.a;"])).result:(n.getBackfaceProperty()&&!r.drawingEdges&&(l=l.concat(["uniform float opacityUniformBF; // the fragment opacity","uniform float ambientIntensityBF; // the material ambient","uniform float diffuseIntensityBF; // the material diffuse","uniform vec3 ambientColorUniformBF; // ambient material color","uniform vec3 diffuseColorUniformBF; // diffuse material color"]),s?(l=l.concat(["uniform float specularIntensityBF; // the material specular intensity","uniform vec3 specularColorUniformBF; // intensity weighted color","uniform float specularPowerUniformBF;"]),u=u.concat(["if (gl_FrontFacing == false) {","  ambientColor = ambientIntensityBF * ambientColorUniformBF;","  diffuseColor = diffuseIntensityBF * diffuseColorUniformBF;","  specularColor = specularIntensityBF * specularColorUniformBF;","  specularPower = specularPowerUniformBF;","  opacity = opacityUniformBF; }"])):u=u.concat(["if (gl_FrontFacing == false) {","  ambientColor = ambientIntensityBF * ambientColorUniformBF;","  diffuseColor = diffuseIntensityBF * diffuseColorUniformBF;","  opacity = opacityUniformBF; }"])),r.haveCellScalars&&!r.drawingEdges&&(l=l.concat(["uniform samplerBuffer texture1;"])),i=vf.substitute(i,"//VTK::Color::Impl",u).result):i=vf.substitute(i,"//VTK::Color::Impl",u.concat(["  diffuseColor = vertexColorVSOutput.rgb;","  ambientColor = vertexColorVSOutput.rgb;","  opacity = opacity*vertexColorVSOutput.a;"])).result,i=vf.substitute(i,"//VTK::Color::Dec",l).result,e.Vertex=o,e.Geometry=a,e.Fragment=i},n.replaceShaderLight=(e,t,n)=>{let o=e.Fragment;const a=r.lastBoundBO.getReferenceByName("lastLightComplexity"),i=r.lastBoundBO.getReferenceByName("lastLightCount");let s=[];switch(a){case 0:o=vf.substitute(o,"//VTK::Light::Impl",["  gl_FragData[0] = vec4(ambientColor * ambient + diffuseColor * diffuse, opacity);","  //VTK::Light::Impl"],!1).result;break;case 1:o=vf.substitute(o,"//VTK::Light::Impl",["  float df = max(0.0, normalVCVSOutput.z);","  float sf = pow(df, specularPower);","  vec3 diffuseL = df * diffuseColor;","  vec3 specularL = sf * specularColor;","  gl_FragData[0] = vec4(ambientColor * ambient + diffuseL * diffuse + specularL * specular, opacity);","  //VTK::Light::Impl"],!1).result;break;case 2:for(let e=0;e<i;++e)s=s.concat(["uniform vec3 lightColor".concat(e,";"),"uniform vec3 lightDirectionVC".concat(e,"; // normalized"),"uniform vec3 lightHalfAngleVC".concat(e,"; // normalized")]);o=vf.substitute(o,"//VTK::Light::Dec",s).result,s=["vec3 diffuseL = vec3(0,0,0);","  vec3 specularL = vec3(0,0,0);","  float df;"];for(let e=0;e<i;++e)s=s.concat(["  df = max(0.0, dot(normalVCVSOutput, -lightDirectionVC".concat(e,"));"),"  diffuseL += ((df".concat("",") * lightColor").concat(e,");"),"  if (dot(normalVCVSOutput, lightDirectionVC".concat(e,") < 0.0)"),"    {","    float sf = sign(df)*pow(max(1e-5,\n                                              dot(reflect(lightDirectionVC".concat(e,",normalVCVSOutput),\n                                                  normalize(-vertexVC.xyz))),\n                                         specularPower);"),"    specularL += (sf".concat(""," * lightColor").concat(e,");"),"    }"]);s=s.concat(["  diffuseL = diffuseL * diffuseColor;","  specularL = specularL * specularColor;","  gl_FragData[0] = vec4(ambientColor * ambient + diffuseL * diffuse + specularL * specular, opacity);","  //VTK::Light::Impl"]),o=vf.substitute(o,"//VTK::Light::Impl",s,!1).result;break;case 3:for(let e=0;e<i;++e)s=s.concat(["uniform vec3 lightColor".concat(e,";"),"uniform vec3 lightDirectionVC".concat(e,"; // normalized"),"uniform vec3 lightHalfAngleVC".concat(e,"; // normalized"),"uniform vec3 lightPositionVC".concat(e,";"),"uniform vec3 lightAttenuation".concat(e,";"),"uniform float lightConeAngle".concat(e,";"),"uniform float lightExponent".concat(e,";"),"uniform int lightPositional".concat(e,";")]);o=vf.substitute(o,"//VTK::Light::Dec",s).result,s=["vec3 diffuseL = vec3(0,0,0);","  vec3 specularL = vec3(0,0,0);","  vec3 vertLightDirectionVC;","  float attenuation;","  float df;"];for(let e=0;e<i;++e)s=s.concat(["  attenuation = 1.0;","  if (lightPositional".concat(e," == 0)"),"    {","      vertLightDirectionVC = lightDirectionVC".concat(e,";"),"    }","  else","    {","    vertLightDirectionVC = vertexVC.xyz - lightPositionVC".concat(e,";"),"    float distanceVC = length(vertLightDirectionVC);","    vertLightDirectionVC = normalize(vertLightDirectionVC);","    attenuation = 1.0 /","      (lightAttenuation".concat(e,".x"),"       + lightAttenuation".concat(e,".y * distanceVC"),"       + lightAttenuation".concat(e,".z * distanceVC * distanceVC);"),"    // per OpenGL standard cone angle is 90 or less for a spot light","    if (lightConeAngle".concat(e," <= 90.0)"),"      {","      float coneDot = dot(vertLightDirectionVC, lightDirectionVC".concat(e,");"),"      // if inside the cone","      if (coneDot >= cos(radians(lightConeAngle".concat(e,")))"),"        {","        attenuation = attenuation * pow(coneDot, lightExponent".concat(e,");"),"        }","      else","        {","        attenuation = 0.0;","        }","      }","    }","    df = max(0.0, attenuation*dot(normalVCVSOutput, -vertLightDirectionVC));","    diffuseL += ((df".concat("",") * lightColor").concat(e,");"),"    if (dot(normalVCVSOutput, vertLightDirectionVC) < 0.0)","      {","      float sf = sign(df)*attenuation*pow(max(1e-5,\n                                                           dot(reflect(lightDirectionVC".concat(e,",\n                                                                       normalVCVSOutput),\n                                                               normalize(-vertexVC.xyz))),\n                                                       specularPower);"),"    specularL += ((sf".concat("",") * lightColor").concat(e,");"),"    }"]);s=s.concat(["  diffuseL = diffuseL * diffuseColor;","  specularL = specularL * specularColor;","  gl_FragData[0] = vec4(ambientColor * ambient + diffuseL * diffuse + specularL * specular, opacity);","  //VTK::Light::Impl"]),o=vf.substitute(o,"//VTK::Light::Impl",s,!1).result;break;default:Jf("bad light complexity")}e.Fragment=o},n.replaceShaderNormal=(e,t,n)=>{if(r.lastBoundBO.getReferenceByName("lastLightComplexity")>0){let t=e.Vertex,o=e.Geometry,a=e.Fragment;r.lastBoundBO.getCABO().getNormalOffset()?(t=vf.substitute(t,"//VTK::Normal::Dec",["attribute vec3 normalMC;","uniform mat3 normalMatrix;","varying vec3 normalVCVSOutput;"]).result,t=vf.substitute(t,"//VTK::Normal::Impl",["normalVCVSOutput = normalMatrix * normalMC;"]).result,o=vf.substitute(o,"//VTK::Normal::Dec",["in vec3 normalVCVSOutput[];","out vec3 normalVCGSOutput;"]).result,o=vf.substitute(o,"//VTK::Normal::Impl",["normalVCGSOutput = normalVCVSOutput[i];"]).result,a=vf.substitute(a,"//VTK::Normal::Dec",["varying vec3 normalVCVSOutput;"]).result,a=vf.substitute(a,"//VTK::Normal::Impl",["vec3 normalVCVSOutput = normalize(normalVCVSOutput);","  if (gl_FrontFacing == false) { normalVCVSOutput = -normalVCVSOutput; }"]).result):r.haveCellNormals?(a=vf.substitute(a,"//VTK::Normal::Dec",["uniform mat3 normalMatrix;","uniform samplerBuffer textureN;"]).result,a=vf.substitute(a,"//VTK::Normal::Impl",["vec3 normalVCVSOutput = normalize(normalMatrix *","    texelFetchBuffer(textureN, gl_PrimitiveID + PrimitiveIDOffset).xyz);","  if (gl_FrontFacing == false) { normalVCVSOutput = -normalVCVSOutput; }"]).result):r.lastBoundBO.getOpenGLMode(n.getProperty().getRepresentation())===r.context.LINES?(a=vf.substitute(a,"//VTK::UniformFlow::Impl",["  vec3 fdx = dFdx(vertexVC.xyz);","  vec3 fdy = dFdy(vertexVC.xyz);","  //VTK::UniformFlow::Impl"]).result,a=vf.substitute(a,"//VTK::Normal::Impl",["vec3 normalVCVSOutput;","  if (abs(fdx.x) > 0.0)","    { fdx = normalize(fdx); normalVCVSOutput = normalize(cross(vec3(fdx.y, -fdx.x, 0.0), fdx)); }","  else { fdy = normalize(fdy); normalVCVSOutput = normalize(cross(vec3(fdy.y, -fdy.x, 0.0), fdy));}"]).result):(a=vf.substitute(a,"//VTK::Normal::Dec",["uniform int cameraParallel;"]).result,a=vf.substitute(a,"//VTK::UniformFlow::Impl",["  vec3 fdx = dFdx(vertexVC.xyz);","  vec3 fdy = dFdy(vertexVC.xyz);","  //VTK::UniformFlow::Impl"]).result,a=vf.substitute(a,"//VTK::Normal::Impl",["  fdx = normalize(fdx);","  fdy = normalize(fdy);","  vec3 normalVCVSOutput = normalize(cross(fdx,fdy));","  if (cameraParallel == 1 && normalVCVSOutput.z < 0.0) { normalVCVSOutput = -1.0*normalVCVSOutput; }","  if (cameraParallel == 0 && dot(normalVCVSOutput,vertexVC.xyz) > 0.0) { normalVCVSOutput = -1.0*normalVCVSOutput; }"]).result),e.Vertex=t,e.Geometry=o,e.Fragment=a}},n.replaceShaderPositionVC=(e,t,n)=>{r.lastBoundBO.replaceShaderPositionVC(e,t,n);let o=e.Vertex,a=e.Geometry,i=e.Fragment;r.lastBoundBO.getReferenceByName("lastLightComplexity")>0?(o=vf.substitute(o,"//VTK::PositionVC::Dec",["varying vec4 vertexVCVSOutput;"]).result,o=vf.substitute(o,"//VTK::PositionVC::Impl",["vertexVCVSOutput = MCVCMatrix * vertexMC;","  gl_Position = MCPCMatrix * vertexMC;"]).result,o=vf.substitute(o,"//VTK::Camera::Dec",["uniform mat4 MCPCMatrix;","uniform mat4 MCVCMatrix;"]).result,a=vf.substitute(a,"//VTK::PositionVC::Dec",["in vec4 vertexVCVSOutput[];","out vec4 vertexVCGSOutput;"]).result,a=vf.substitute(a,"//VTK::PositionVC::Impl",["vertexVCGSOutput = vertexVCVSOutput[i];"]).result,i=vf.substitute(i,"//VTK::PositionVC::Dec",["varying vec4 vertexVCVSOutput;"]).result,i=vf.substitute(i,"//VTK::PositionVC::Impl",["vec4 vertexVC = vertexVCVSOutput;"]).result):(o=vf.substitute(o,"//VTK::Camera::Dec",["uniform mat4 MCPCMatrix;"]).result,o=vf.substitute(o,"//VTK::PositionVC::Impl",["  gl_Position = MCPCMatrix * vertexMC;"]).result),e.Vertex=o,e.Geometry=a,e.Fragment=i},n.replaceShaderTCoord=(e,t,n)=>{if(r.lastBoundBO.getCABO().getTCoordOffset()){let t=e.Vertex,n=e.Geometry,o=e.Fragment;if(r.drawingEdges)return;t=vf.substitute(t,"//VTK::TCoord::Impl","tcoordVCVSOutput = tcoordMC;").result;const a=r.openGLActor.getActiveTextures();let i=2,s=2;if(a&&a.length>0&&(i=a[0].getComponents(),a[0].getTarget()===r.context.TEXTURE_CUBE_MAP&&(s=3)),r.renderable.getColorTextureMap()&&(i=r.renderable.getColorTextureMap().getPointData().getScalars().getNumberOfComponents(),s=2),2===s){if(t=vf.substitute(t,"//VTK::TCoord::Dec","attribute vec2 tcoordMC; varying vec2 tcoordVCVSOutput;").result,n=vf.substitute(n,"//VTK::TCoord::Dec",["in vec2 tcoordVCVSOutput[];","out vec2 tcoordVCGSOutput;"]).result,n=vf.substitute(n,"//VTK::TCoord::Impl","tcoordVCGSOutput = tcoordVCVSOutput[i];").result,o=vf.substitute(o,"//VTK::TCoord::Dec",["varying vec2 tcoordVCVSOutput;","uniform sampler2D texture1;"]).result,a&&a.length>=1)switch(i){case 1:o=vf.substitute(o,"//VTK::TCoord::Impl",["  vec4 tcolor = texture2D(texture1, tcoordVCVSOutput);","  ambientColor = ambientColor*tcolor.r;","  diffuseColor = diffuseColor*tcolor.r;"]).result;break;case 2:o=vf.substitute(o,"//VTK::TCoord::Impl",["  vec4 tcolor = texture2D(texture1, tcoordVCVSOutput);","  ambientColor = ambientColor*tcolor.r;","  diffuseColor = diffuseColor*tcolor.r;","  opacity = opacity * tcolor.g;"]).result;break;default:o=vf.substitute(o,"//VTK::TCoord::Impl",["  vec4 tcolor = texture2D(texture1, tcoordVCVSOutput);","  ambientColor = ambientColor*tcolor.rgb;","  diffuseColor = diffuseColor*tcolor.rgb;","  opacity = opacity * tcolor.a;"]).result}}else switch(t=vf.substitute(t,"//VTK::TCoord::Dec","attribute vec3 tcoordMC; varying vec3 tcoordVCVSOutput;").result,n=vf.substitute(n,"//VTK::TCoord::Dec",["in vec3 tcoordVCVSOutput[];","out vec3 tcoordVCGSOutput;"]).result,n=vf.substitute(n,"//VTK::TCoord::Impl","tcoordVCGSOutput = tcoordVCVSOutput[i];").result,o=vf.substitute(o,"//VTK::TCoord::Dec",["varying vec3 tcoordVCVSOutput;","uniform samplerCube texture1;"]).result,i){case 1:o=vf.substitute(o,"//VTK::TCoord::Impl",["  vec4 tcolor = textureCube(texture1, tcoordVCVSOutput);","  ambientColor = ambientColor*tcolor.r;","  diffuseColor = diffuseColor*tcolor.r;"]).result;break;case 2:o=vf.substitute(o,"//VTK::TCoord::Impl",["  vec4 tcolor = textureCube(texture1, tcoordVCVSOutput);","  ambientColor = ambientColor*tcolor.r;","  diffuseColor = diffuseColor*tcolor.r;","  opacity = opacity * tcolor.g;"]).result;break;default:o=vf.substitute(o,"//VTK::TCoord::Impl",["  vec4 tcolor = textureCube(texture1, tcoordVCVSOutput);","  ambientColor = ambientColor*tcolor.rgb;","  diffuseColor = diffuseColor*tcolor.rgb;","  opacity = opacity * tcolor.a;"]).result}e.Vertex=t,e.Geometry=n,e.Fragment=o}},n.replaceShaderClip=(e,t,n)=>{let o=e.Vertex,a=e.Fragment;if(r.renderable.getNumberOfClippingPlanes()){const e=r.renderable.getNumberOfClippingPlanes();o=vf.substitute(o,"//VTK::Clip::Dec",["uniform int numClipPlanes;","uniform vec4 clipPlanes[".concat(e,"];"),"varying float clipDistancesVSOutput[".concat(e,"];")]).result,o=vf.substitute(o,"//VTK::Clip::Impl",["for (int planeNum = 0; planeNum < ".concat(e,"; planeNum++)"),"    {","    if (planeNum >= numClipPlanes)","        {","        break;","        }","    clipDistancesVSOutput[planeNum] = dot(clipPlanes[planeNum], vertexMC);","    }"]).result,a=vf.substitute(a,"//VTK::Clip::Dec",["uniform int numClipPlanes;","varying float clipDistancesVSOutput[".concat(e,"];")]).result,a=vf.substitute(a,"//VTK::Clip::Impl",["for (int planeNum = 0; planeNum < ".concat(e,"; planeNum++)"),"    {","    if (planeNum >= numClipPlanes)","        {","        break;","        }","    if (clipDistancesVSOutput[planeNum] < 0.0) discard;","    }"]).result}e.Vertex=o,e.Fragment=a},n.getCoincidentParameters=(e,t)=>{let n={factor:0,offset:0};const o=t.getProperty();if(r.renderable.getResolveCoincidentTopology()==Bu.PolygonOffset||o.getEdgeVisibility()&&o.getRepresentation()===qf.SURFACE){const e=r.lastBoundBO.getPrimitiveType();e===Zf.Points||o.getRepresentation()===qf.POINTS?n=r.renderable.getCoincidentTopologyPointOffsetParameter():e===Zf.Lines||o.getRepresentation()===qf.WIREFRAME?n=r.renderable.getCoincidentTopologyLineOffsetParameters():e!==Zf.Tris&&e!==Zf.TriStrips||(n=r.renderable.getCoincidentTopologyPolygonOffsetParameters()),e!==Zf.TrisEdges&&e!==Zf.TriStripsEdges||(n=r.renderable.getCoincidentTopologyPolygonOffsetParameters(),n.factor/=2,n.offset/=2)}const a=r._openGLRenderer.getSelector();return a&&a.getFieldAssociation()===Kf.FIELD_ASSOCIATION_POINTS&&(n.offset-=2),n},n.replaceShaderPicking=(e,t,n)=>{let o=e.Fragment,a=e.Vertex;if(o=vf.substitute(o,"//VTK::Picking::Dec",["uniform int picking;","//VTK::Picking::Dec"]).result,r._openGLRenderer.getSelector()){switch(r.lastSelectionState!==Ku.ID_LOW24&&r.lastSelectionState!==Ku.ID_HIGH24||(a=vf.substitute(a,"//VTK::Picking::Dec",["flat out int vertexIDVSOutput;\n","uniform int VertexIDOffset;\n"]).result,a=vf.substitute(a,"//VTK::Picking::Impl","  vertexIDVSOutput = gl_VertexID + VertexIDOffset;\n").result,o=vf.substitute(o,"//VTK::Picking::Dec","flat in int vertexIDVSOutput;\n").result,o=vf.substitute(o,"//VTK::Picking::Impl",["  int idx = vertexIDVSOutput;","//VTK::Picking::Impl"]).result),r.lastSelectionState){case Ku.ID_LOW24:o=vf.substitute(o,"//VTK::Picking::Impl","  gl_FragData[0] = vec4(float(idx%256)/255.0, float((idx/256)%256)/255.0, float((idx/65536)%256)/255.0, 1.0);").result;break;case Ku.ID_HIGH24:o=vf.substitute(o,"//VTK::Picking::Impl","  gl_FragData[0] = vec4(float((idx/16777216)%256)/255.0, 0.0, 0.0, 1.0);").result;break;default:o=vf.substitute(o,"//VTK::Picking::Dec","uniform vec3 mapperIndex;").result,o=vf.substitute(o,"//VTK::Picking::Impl","  gl_FragData[0] = picking != 0 ? vec4(mapperIndex,1.0) : gl_FragData[0];").result}e.Fragment=o,e.Vertex=a}},n.replaceShaderValues=(e,t,o)=>{if(n.replaceShaderColor(e,t,o),n.replaceShaderNormal(e,t,o),n.replaceShaderLight(e,t,o),n.replaceShaderTCoord(e,t,o),n.replaceShaderPicking(e,t,o),n.replaceShaderClip(e,t,o),n.replaceShaderCoincidentOffset(e,t,o),n.replaceShaderPositionVC(e,t,o),r.haveSeenDepthRequest){let t=e.Fragment;t=vf.substitute(t,"//VTK::ZBuffer::Dec","uniform int depthRequest;").result,t=vf.substitute(t,"//VTK::ZBuffer::Impl",["if (depthRequest == 1) {","float iz = floor(gl_FragCoord.z*65535.0 + 0.1);","float rf = floor(iz/256.0)/255.0;","float gf = mod(iz,256.0)/255.0;","gl_FragData[0] = vec4(rf, gf, 0.0, 1.0); }"]).result,e.Fragment=t}},n.getNeedToRebuildShaders=(e,t,n)=>{let o=0,a=0;const i=e.getPrimitiveType(),s=r.currentInput;let l=!1;const u=s.getPointData().getNormals(),c=s.getCellData().getNormals(),d=n.getProperty().getInterpolation()===Xf.FLAT,f=n.getProperty().getRepresentation(),p=e.getOpenGLMode(f,i);if(p===r.context.TRIANGLES||c&&!u||!d&&u?l=!0:d||p!==r.context.LINES||(l=!0),n.getProperty().getLighting()&&l){o=0;const e=t.getLightsByReference();for(let t=0;t<e.length;++t){const n=e[t];n.getSwitch()>0&&(a++,0===o&&(o=1)),1===o&&(a>1||1!==n.getIntensity()||!n.lightTypeIsHeadLight())&&(o=2),o<3&&n.getPositional()&&(o=3)}}let h=!1;const m=r.lastBoundBO.getReferenceByName("lastLightComplexity"),g=r.lastBoundBO.getReferenceByName("lastLightCount");return m===o&&g===a||(r.lastBoundBO.set({lastLightComplexity:o},!0),r.lastBoundBO.set({lastLightCount:a},!0),h=!0),(!r.currentRenderPass&&r.lastRenderPassShaderReplacement||r.currentRenderPass&&r.currentRenderPass.getShaderReplacement()!==r.lastRenderPassShaderReplacement)&&(h=!0),!!(r.lastHaveSeenDepthRequest!==r.haveSeenDepthRequest||e.getShaderSourceTime().getMTime()<r.renderable.getMTime()||e.getShaderSourceTime().getMTime()<r.currentInput.getMTime()||e.getShaderSourceTime().getMTime()<r.selectionStateChanged.getMTime()||h)&&(r.lastHaveSeenDepthRequest=r.haveSeenDepthRequest,!0)},n.invokeShaderCallbacks=(e,t,n)=>{const o=r.renderable.getViewSpecificProperties().ShadersCallbacks;o&&o.forEach(r=>{r.callback(r.userData,e,t,n)})},n.setMapperShaderParameters=(e,t,o)=>{if(e.getProgram().isUniformUsed("PrimitiveIDOffset")&&e.getProgram().setUniformi("PrimitiveIDOffset",r.primitiveIDOffset),e.getProgram().isUniformUsed("VertexIDOffset")&&e.getProgram().setUniformi("VertexIDOffset",r.vertexIDOffset),e.getCABO().getElementCount()&&(r.VBOBuildTime.getMTime()>e.getAttributeUpdateTime().getMTime()||e.getShaderSourceTime().getMTime()>e.getAttributeUpdateTime().getMTime())){const t=r.lastBoundBO.getReferenceByName("lastLightComplexity");e.getProgram().isAttributeUsed("vertexMC")&&(e.getVAO().addAttributeArray(e.getProgram(),e.getCABO(),"vertexMC",e.getCABO().getVertexOffset(),e.getCABO().getStride(),r.context.FLOAT,3,!1)||Jf("Error setting vertexMC in shader VAO.")),e.getProgram().isAttributeUsed("normalMC")&&e.getCABO().getNormalOffset()&&t>0?e.getVAO().addAttributeArray(e.getProgram(),e.getCABO(),"normalMC",e.getCABO().getNormalOffset(),e.getCABO().getStride(),r.context.FLOAT,3,!1)||Jf("Error setting normalMC in shader VAO."):e.getVAO().removeAttributeArray("normalMC"),r.renderable.getCustomShaderAttributes().forEach((t,n)=>{e.getProgram().isAttributeUsed("".concat(t,"MC"))&&(e.getVAO().addAttributeArray(e.getProgram(),e.getCABO(),"".concat(t,"MC"),e.getCABO().getCustomData()[n].offset,e.getCABO().getStride(),r.context.FLOAT,e.getCABO().getCustomData()[n].components,!1)||Jf("Error setting ".concat(t,"MC in shader VAO.")))}),e.getProgram().isAttributeUsed("tcoordMC")&&e.getCABO().getTCoordOffset()?e.getVAO().addAttributeArray(e.getProgram(),e.getCABO(),"tcoordMC",e.getCABO().getTCoordOffset(),e.getCABO().getStride(),r.context.FLOAT,e.getCABO().getTCoordComponents(),!1)||Jf("Error setting tcoordMC in shader VAO."):e.getVAO().removeAttributeArray("tcoordMC"),e.getProgram().isAttributeUsed("scalarColor")&&e.getCABO().getColorComponents()?e.getVAO().addAttributeArray(e.getProgram(),e.getCABO().getColorBO(),"scalarColor",e.getCABO().getColorOffset(),e.getCABO().getColorBOStride(),r.context.UNSIGNED_BYTE,4,!0)||Jf("Error setting scalarColor in shader VAO."):e.getVAO().removeAttributeArray("scalarColor"),e.getAttributeUpdateTime().modified()}if(r.renderable.getNumberOfClippingPlanes()){const t=r.renderable.getNumberOfClippingPlanes(),n=[],a=e.getCABO().getCoordShiftAndScaleEnabled()?e.getCABO().getInverseShiftAndScaleMatrix():null,i=a?L(r.tmpMat4,o.getMatrix()):o.getMatrix();a&&(N(i,i),z(i,i,a),N(i,i));for(let e=0;e<t;e++){const t=[];r.renderable.getClippingPlaneInDataCoords(i,e,t);for(let e=0;e<4;e++)n.push(t[e])}e.getProgram().setUniformi("numClipPlanes",t),e.getProgram().setUniform4fv("clipPlanes",n)}r.internalColorTexture&&e.getProgram().isUniformUsed("texture1")&&e.getProgram().setUniformi("texture1",r.internalColorTexture.getTextureUnit());const a=r.openGLActor.getActiveTextures();if(a)for(let n=0;n<a.length;++n){const t=a[n].getTextureUnit(),r="texture".concat(t+1);e.getProgram().isUniformUsed(r)&&e.getProgram().setUniformi(r,t)}if(r.haveSeenDepthRequest&&e.getProgram().setUniformi("depthRequest",r.renderDepth?1:0),e.getProgram().isUniformUsed("coffset")){const r=n.getCoincidentParameters(t,o);e.getProgram().setUniformf("coffset",r.offset),e.getProgram().isUniformUsed("cfactor")&&e.getProgram().setUniformf("cfactor",r.factor)}e.setMapperShaderParameters(t,o,r._openGLRenderer.getTiledSizeAndOrigin());const i=r._openGLRenderer.getSelector();e.getProgram().setUniform3fArray("mapperIndex",i?i.getPropColorValue():[0,0,0]),e.getProgram().setUniformi("picking",i?i.getCurrentPass()+1:0)},n.setLightingShaderParameters=(e,t,n)=>{const o=r.lastBoundBO.getReferenceByName("lastLightComplexity");if(o<2)return;const a=e.getProgram();let i=0;const s=t.getLightsByReference();for(let u=0;u<s.length;++u){const e=s[u];if(e.getSwitch()>0){const n=e.getColorByReference(),o=e.getIntensity();r.lightColor[0]=n[0]*o,r.lightColor[1]=n[1]*o,r.lightColor[2]=n[2]*o;const s=e.getDirection(),l=t.getActiveCamera().getViewMatrix(),u=[...s];e.lightTypeIsSceneLight()&&(u[0]=l[0]*s[0]+l[1]*s[1]+l[2]*s[2],u[1]=l[4]*s[0]+l[5]*s[1]+l[6]*s[2],u[2]=l[8]*s[0]+l[9]*s[1]+l[10]*s[2],Aa(u)),r.lightDirection[0]=u[0],r.lightDirection[1]=u[1],r.lightDirection[2]=u[2],Aa(r.lightDirection),a.setUniform3fArray("lightColor".concat(i),r.lightColor),a.setUniform3fArray("lightDirectionVC".concat(i),r.lightDirection),i++}}if(o<3)return;const l=t.getActiveCamera().getViewMatrix();N(l,l),i=0;for(let r=0;r<s.length;++r){const e=s[r];if(e.getSwitch()>0){const t=e.getTransformedPosition(),n=new Float64Array(3);qn(n,t,l),a.setUniform3fArray("lightAttenuation".concat(i),e.getAttenuationValuesByReference()),a.setUniformi("lightPositional".concat(i),e.getPositional()),a.setUniformf("lightExponent".concat(i),e.getExponent()),a.setUniformf("lightConeAngle".concat(i),e.getConeAngle()),a.setUniform3fArray("lightPositionVC".concat(i),[n[0],n[1],n[2]]),i++}}},n.setCameraShaderParameters=(n,a,i)=>{const s=n.getProgram(),l=r.openGLCamera.getKeyMatrices(a),u=a.getActiveCamera(),c=r.openGLCamera.getKeyMatrixTime().getMTime(),d=s.getLastCameraMTime(),f=n.getCABO().getCoordShiftAndScaleEnabled()?n.getCABO().getInverseShiftAndScaleMatrix():null,p=i.getIsIdentity(),h=p?{mcwc:null,normalMatrix:null}:r.openGLActor.getKeyMatrices();if(i.getCoordinateSystem()===np.DISPLAY){const e=r._openGLRenderer.getTiledSizeAndOrigin();B(r.tmpMat4),r.tmpMat4[0]=2/e.usize,r.tmpMat4[12]=-1,r.tmpMat4[5]=2/e.vsize,r.tmpMat4[13]=-1,z(r.tmpMat4,r.tmpMat4,f),s.setUniformMatrix("MCPCMatrix",r.tmpMat4)}else s.setUniformMatrix("MCPCMatrix",o([l.wcpc,h.mcwc,f],e,r.tmpMat4));s.isUniformUsed("MCVCMatrix")&&s.setUniformMatrix("MCVCMatrix",o([l.wcvc,h.mcwc,f],e,r.tmpMat4)),s.isUniformUsed("normalMatrix")&&s.setUniformMatrix3x3("normalMatrix",o([l.normalMatrix,h.normalMatrix],t,r.tmpMat3)),d!==c&&(s.isUniformUsed("cameraParallel")&&s.setUniformi("cameraParallel",u.getParallelProjection()),s.setLastCameraMTime(c)),p||s.setLastCameraMTime(0)},n.setPropertyShaderParameters=(e,t,n)=>{const o=e.getProgram();let a=n.getProperty(),i=a.getOpacity(),s=r.drawingEdges?a.getEdgeColorByReference():a.getAmbientColorByReference(),l=r.drawingEdges?a.getEdgeColorByReference():a.getDiffuseColorByReference(),u=r.drawingEdges?1:a.getAmbient(),c=r.drawingEdges?0:a.getDiffuse(),d=r.drawingEdges?0:a.getSpecular();const f=a.getSpecularPower();o.setUniformf("opacityUniform",i),o.setUniform3fArray("ambientColorUniform",s),o.setUniform3fArray("diffuseColorUniform",l),o.setUniformf("ambient",u),o.setUniformf("diffuse",c);const p=r.lastBoundBO.getReferenceByName("lastLightComplexity");if(p<1)return;let h=a.getSpecularColorByReference();if(o.setUniform3fArray("specularColorUniform",h),o.setUniformf("specularPowerUniform",f),o.setUniformf("specular",d),o.isUniformUsed("ambientIntensityBF")){if(a=n.getBackfaceProperty(),i=a.getOpacity(),s=a.getAmbientColor(),u=a.getAmbient(),l=a.getDiffuseColor(),c=a.getDiffuse(),h=a.getSpecularColor(),d=a.getSpecular(),o.setUniformf("ambientIntensityBF",u),o.setUniformf("diffuseIntensityBF",c),o.setUniformf("opacityUniformBF",i),o.setUniform3fArray("ambientColorUniformBF",s),o.setUniform3fArray("diffuseColorUniformBF",l),p<1)return;o.setUniformf("specularIntensityBF",d),o.setUniform3fArray("specularColorUniformBF",h),o.setUniformf("specularPowerUniformBF",f)}},n.updateMaximumPointCellIds=(e,t)=>{var n,o;const a=r._openGLRenderer.getSelector();if(!a)return;if(null!==(n=r.selectionWebGLIdsToVTKIds)&&void 0!==n&&null!==(n=n.points)&&void 0!==n&&n.length){const e=r.selectionWebGLIdsToVTKIds.points.length;a.setMaximumPointId(e-1)}if(null!==(o=r.selectionWebGLIdsToVTKIds)&&void 0!==o&&null!==(o=o.cells)&&void 0!==o&&o.length){const e=r.selectionWebGLIdsToVTKIds.cells.length;a.setMaximumCellId(e-1)}a.getFieldAssociation()===Kf.FIELD_ASSOCIATION_POINTS&&(r.pointPicking=!0)},n.renderPieceStart=(e,t)=>{r.primitiveIDOffset=0,r.vertexIDOffset=0;const o=function(e){const t=e.getSelector();return t?t.getCurrentPass():Ku.MIN_KNOWN_PASS-1}(r._openGLRenderer);r.lastSelectionState!==o&&(r.selectionStateChanged.modified(),r.lastSelectionState=o),r._openGLRenderer.getSelector()&&r._openGLRenderer.getSelector().renderProp(t),n.updateBufferObjects(e,t),r.renderable.getColorTextureMap()&&r.internalColorTexture.activate(),r.lastBoundBO=null},n.renderPieceDraw=(e,t)=>{const o=t.getProperty().getRepresentation(),a=t.getProperty().getEdgeVisibility()&&o===qf.SURFACE,i=r._openGLRenderer.getSelector(),s=i&&i.getFieldAssociation()===Kf.FIELD_ASSOCIATION_POINTS&&(r.lastSelectionState===Ku.ID_LOW24||r.lastSelectionState===Ku.ID_HIGH24);for(let l=Zf.Start;l<Zf.End;l++){r.primitives[l].setPointPicking(s);r.primitives[l].getCABO().getElementCount()&&(r.drawingEdges=a&&(l===Zf.TrisEdges||l===Zf.TriStripsEdges),r.drawingEdges&&(r.renderDepth||r.lastSelectionState>=0)||(r.lastBoundBO=r.primitives[l],r.primitiveIDOffset+=r.primitives[l].drawArrays(e,t,o,n),r.vertexIDOffset+=r.primitives[l].getCABO().getElementCount()))}},n.renderPieceFinish=(e,t)=>{r.LastBoundBO&&r.LastBoundBO.getVAO().release(),r.renderable.getColorTextureMap()&&r.internalColorTexture.deactivate()},n.renderPiece=(e,t)=>{if(n.invokeEvent(ep),r.renderable.getStatic()||r.renderable.update(),r.currentInput=r.renderable.getInputData(),n.invokeEvent(tp),!r.currentInput)return void Jf("No input!");if(!r.currentInput.getPoints||!r.currentInput.getPoints().getNumberOfValues())return;const o=r.context,a=t.getProperty().getBackfaceCulling(),i=t.getProperty().getFrontfaceCulling();a||i?i?(r._openGLRenderWindow.enableCullFace(),o.cullFace(o.FRONT)):(r._openGLRenderWindow.enableCullFace(),o.cullFace(o.BACK)):r._openGLRenderWindow.disableCullFace(),n.renderPieceStart(e,t),n.renderPieceDraw(e,t),n.renderPieceFinish(e,t)},n.updateBufferObjects=(e,t)=>{n.getNeedToRebuildBufferObjects(e,t)&&n.buildBufferObjects(e,t),n.updateMaximumPointCellIds()},n.getNeedToRebuildBufferObjects=(e,t)=>{const o=r.VBOBuildTime.getMTime();return o<n.getMTime()||o<r.renderable.getMTime()||o<t.getMTime()||o<r.currentInput.getMTime()},n.buildBufferObjects=(e,t)=>{const n=r.currentInput;if(null===n)return;r.renderable.mapScalars(n,1);const o=r.renderable.getColorMapColors();r.haveCellScalars=!1;const a=r.renderable.getScalarMode();r.renderable.getScalarVisibility()&&(a!==Yf.USE_CELL_DATA&&a!==Yf.USE_CELL_FIELD_DATA&&a!==Yf.USE_FIELD_DATA&&n.getPointData().getScalars()||a===Yf.USE_POINT_FIELD_DATA||!o||(r.haveCellScalars=!0));let i=t.getProperty().getInterpolation()!==Xf.FLAT?n.getPointData().getNormals():null;null===i&&n.getCellData().getNormals()&&(r.haveCellNormals=!0,i=n.getCellData().getNormals());const s=t.getProperty().getRepresentation();let l=n.getPointData().getTCoords();r.openGLActor.getActiveTextures()||(l=null);let c=!1;if(r.renderable.getColorCoordinates()){l=r.renderable.getColorCoordinates(),c=r.renderable.getAreScalarsMappedFromCells(),r.internalColorTexture||(r.internalColorTexture=Hf.newInstance({resizable:!0}));const e=r.internalColorTexture;e.setMinificationFilter(Qf.NEAREST),e.setMagnificationFilter(Qf.NEAREST),e.setWrapS($f.CLAMP_TO_EDGE),e.setWrapT($f.CLAMP_TO_EDGE),e.setOpenGLRenderWindow(r._openGLRenderWindow);const t=r.renderable.getColorTextureMap(),n=t.getExtent(),o=t.getPointData().getScalars();e.create2DFromRaw({width:n[1]-n[0]+1,height:n[3]-n[2]+1,numComps:o.getNumberOfComponents(),dataType:o.getDataType(),data:o.getData()}),e.activate(),e.sendParameters(),e.deactivate()}const d="".concat(n.getMTime(),"A").concat(s,"B").concat(n.getMTime())+"C".concat(i?i.getMTime():1,"D").concat(o?o.getMTime():1)+"E".concat(t.getProperty().getEdgeVisibility())+"F".concat(l?l.getMTime():1);if(r.VBOBuildString!==d){const e={points:n.getPoints(),normals:i,tcoords:l,colors:o,cellOffset:0,vertexOffset:0,useTCoordsPerCell:c,haveCellScalars:r.haveCellScalars,haveCellNormals:r.haveCellNormals,customAttributes:r.renderable.getCustomShaderAttributes().map(e=>n.getPointData().getArrayByName(e))};r.renderable.getPopulateSelectionSettings()&&(r.selectionWebGLIdsToVTKIds={points:null,cells:null});const a=[{inRep:"verts",cells:n.getVerts()},{inRep:"lines",cells:n.getLines()},{inRep:"polys",cells:n.getPolys()},{inRep:"strips",cells:n.getStrips()},{inRep:"polys",cells:n.getPolys()},{inRep:"strips",cells:n.getStrips()}],f=t.getProperty().getEdgeVisibility()&&s===qf.SURFACE;for(let t=Zf.Start;t<Zf.End;t++)t!==Zf.TrisEdges&&t!==Zf.TriStripsEdges?(e.cellOffset+=r.primitives[t].getCABO().createVBO(a[t].cells,a[t].inRep,s,e,r.selectionWebGLIdsToVTKIds),e.vertexOffset+=r.primitives[t].getCABO().getElementCount()):f?r.primitives[t].getCABO().createVBO(a[t].cells,a[t].inRep,qf.WIREFRAME,u(u({},e),{},{tcoords:null,colors:null,haveCellScalars:!1,haveCellNormals:!1})):r.primitives[t].releaseGraphicsResources();r.renderable.getPopulateSelectionSettings()&&r.renderable.setSelectionWebGLIdsToVTKIds(r.selectionWebGLIdsToVTKIds),r.VBOBuildString=d}r.VBOBuildTime.modified()},n.getAllocatedGPUMemoryInBytes=()=>{let e=0;return r.primitives.forEach(t=>{e+=t.getAllocatedGPUMemoryInBytes()}),e}}const op={context:null,VBOBuildTime:0,VBOBuildString:null,primitives:null,primTypes:null,shaderRebuildString:null,tmpMat4:null,ambientColor:[],diffuseColor:[],specularColor:[],lightColor:[],lightDirection:[],lastHaveSeenDepthRequest:!1,haveSeenDepthRequest:!1,lastSelectionState:Ku.MIN_KNOWN_PASS-1,selectionStateChanged:null,selectionWebGLIdsToVTKIds:null,pointPicking:!1};function ap(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,op,n),gn.extend(e,t,n),jf.implementReplaceShaderCoincidentOffset(e,t,n),jf.implementBuildShadersWithReplacements(e,t,n),t.primitives=[],t.primTypes=Zf,t.tmpMat3=ke(new Float64Array(9)),t.tmpMat4=B(new Float64Array(16));for(let r=Zf.Start;r<Zf.End;r++)t.primitives[r]=wf.newInstance(),t.primitives[r].setPrimitiveType(r),t.primitives[r].set({lastLightComplexity:0,lastLightCount:0,lastSelectionPass:!1},!0);Wt(e,t,["context"]),t.VBOBuildTime={},Nt(t.VBOBuildTime,{mtime:0}),t.selectionStateChanged={},Nt(t.selectionStateChanged,{mtime:0}),rp(e,t)}const ip=Qt(ap,"vtkOpenGLPolyDataMapper");Tn("vtkMapper",ip);const sp={BACKGROUND:0,FOREGROUND:1};var lp={DisplayLocation:sp};const{primTypes:up}=wf,{Filter:cp,Wrap:dp}=Hf,{vtkErrorMacro:fp}=fn,pp={type:"StartEvent"},hp={type:"EndEvent"};const mp={context:null,VBOBuildTime:0,VBOBuildString:null,primitives:null,primTypes:null,shaderRebuildString:null};function gp(t,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(n,mp,r),gn.extend(t,n,r),jf.implementReplaceShaderCoincidentOffset(t,n,r),jf.implementBuildShadersWithReplacements(t,n,r),n.primitives=[],n.primTypes=up,n.tmpMat4=B(new Float64Array(16));for(let e=up.Start;e<up.End;e++)n.primitives[e]=wf.newInstance(),n.primitives[e].setPrimitiveType(e),n.primitives[e].set({lastLightComplexity:0,lastLightCount:0,lastSelectionPass:!1},!0);Wt(t,n,["context"]),n.VBOBuildTime={},Nt(n.VBOBuildTime,{mtime:0}),function(t,n){n.classHierarchy.push("vtkOpenGLPolyDataMapper2D"),t.buildPass=e=>{e&&(n.openGLActor2D=t.getFirstAncestorOfType("vtkOpenGLActor2D"),n._openGLRenderer=n.openGLActor2D.getFirstAncestorOfType("vtkOpenGLRenderer"),n._openGLRenderWindow=n._openGLRenderer.getLastAncestorOfType("vtkOpenGLRenderWindow"),n.openGLCamera=n._openGLRenderer.getViewNodeFor(n._openGLRenderer.getRenderable().getActiveCamera()))},t.overlayPass=e=>{e&&t.render()},t.getShaderTemplate=(e,t,n)=>{e.Vertex="//VTK::System::Dec\n\n/*=========================================================================\n\n  Program:   Visualization Toolkit\n  Module:    vtkPolyData2DVS.glsl\n\n  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen\n  All rights reserved.\n  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.\n\n     This software is distributed WITHOUT ANY WARRANTY; without even\n     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR\n     PURPOSE.  See the above copyright notice for more information.\n\n=========================================================================*/\n\n// all variables that represent positions or directions have a suffix\n// indicating the coordinate system they are in. The possible values are\n// MC - Model Coordinates\n// WC - WC world coordinates\n// VC - View Coordinates\n// DC - Display Coordinates\n\nin vec4 vertexWC;\n\n// frag position in VC\n//VTK::PositionVC::Dec\n\n// material property values\n//VTK::Color::Dec\n\n// Texture coordinates\n//VTK::TCoord::Dec\n\n// Apple Bug\n//VTK::PrimID::Dec\n\nuniform mat4 WCVCMatrix;  // World to view matrix\n\nvoid main()\n{\n  // Apple Bug\n  //VTK::PrimID::Impl\n\n  gl_Position = WCVCMatrix*vertexWC;\n\n  //VTK::TCoord::Impl\n\n  //VTK::Color::Impl\n\n  //VTK::PositionVC::Impl\n}\n",e.Fragment="//VTK::System::Dec\n\n/*=========================================================================\n\n  Program:   Visualization Toolkit\n  Module:    vtkPolyData2DFS.glsl\n\n  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen\n  All rights reserved.\n  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.\n\n     This software is distributed WITHOUT ANY WARRANTY; without even\n     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR\n     PURPOSE.  See the above copyright notice for more information.\n\n=========================================================================*/\n\nuniform int PrimitiveIDOffset;\n\n// Texture coordinates\n//VTK::TCoord::Dec\n\n// Scalar coloring\n//VTK::Color::Dec\n\n// Depth Peeling\n//VTK::DepthPeeling::Dec\n\n// picking support\n//VTK::Picking::Dec\n\n// the output of this shader\n//VTK::Output::Dec\n\n// Apple Bug\n//VTK::PrimID::Dec\n\nvoid main()\n{\n  // Apple Bug\n  //VTK::PrimID::Impl\n\n  //VTK::Color::Impl\n  //VTK::TCoord::Impl\n\n  //VTK::DepthPeeling::Impl\n  //VTK::Picking::Impl\n\n  if (gl_FragData[0].a <= 0.0)\n    {\n    discard;\n    }\n}\n",e.Geometry=""},t.render=()=>{const e=n._openGLRenderWindow.getContext();if(n.context!==e){n.context=e;for(let e=up.Start;e<up.End;e++)n.primitives[e].setOpenGLRenderWindow(n._openGLRenderWindow)}const r=n.openGLActor2D.getRenderable(),o=n._openGLRenderer.getRenderable();t.renderPiece(o,r)},t.renderPiece=(e,r)=>{if(t.invokeEvent(pp),n.renderable.getStatic()||n.renderable.update(),n.currentInput=n.renderable.getInputData(),t.invokeEvent(hp),!n.currentInput)return void fp("No input!");if(!n.currentInput.getPoints||!n.currentInput.getPoints().getNumberOfValues())return;const o=n.context;n._openGLRenderWindow.enableCullFace(),o.cullFace(o.BACK),t.renderPieceStart(e,r),t.renderPieceDraw(e,r),t.renderPieceFinish(e,r)},t.renderPieceStart=(e,r)=>{n.primitiveIDOffset=0,n._openGLRenderer.getSelector()&&(n._openGLRenderer.getSelector().getCurrentPass(),n._openGLRenderer.getSelector().renderProp(r)),n.renderable.getColorTextureMap()&&n.internalColorTexture.activate(),t.updateBufferObjects(e,r),n.lastBoundBO=null},t.getNeedToRebuildShaders=(e,t,r)=>e.getShaderSourceTime().getMTime()<n.renderable.getMTime()||e.getShaderSourceTime().getMTime()<n.currentInput.getMTime(),t.updateBufferObjects=(e,n)=>{t.getNeedToRebuildBufferObjects(e,n)&&t.buildBufferObjects(e,n)},t.getNeedToRebuildBufferObjects=(e,r)=>{const o=n.VBOBuildTime.getMTime();return!!(o<t.getMTime()||o<n._openGLRenderWindow.getMTime()||o<n.renderable.getMTime()||o<r.getMTime()||o<n.currentInput.getMTime()||n.renderable.getTransformCoordinate()&&o<e.getMTime())},t.buildBufferObjects=(e,t)=>{const r=n.currentInput;if(null===r)return;n.renderable.mapScalars(r,t.getProperty().getOpacity());const o=n.renderable.getColorMapColors(),a=t.getProperty().getRepresentation();let i=r.getPointData().getTCoords();n.openGLActor2D.getActiveTextures()||(i=null);let s=!1;if(n.renderable.getColorCoordinates()){i=n.renderable.getColorCoordinates(),s=n.renderable.getAreScalarsMappedFromCells(),n.internalColorTexture||(n.internalColorTexture=Hf.newInstance({resizable:!0}));const e=n.internalColorTexture;e.setMinificationFilter(cp.NEAREST),e.setMagnificationFilter(cp.NEAREST),e.setWrapS(dp.CLAMP_TO_EDGE),e.setWrapT(dp.CLAMP_TO_EDGE),e.setOpenGLRenderWindow(n._openGLRenderWindow);const t=n.renderable.getColorTextureMap(),r=t.getExtent(),o=t.getPointData().getScalars();e.create2DFromRaw({width:r[1]-r[0]+1,height:r[3]-r[2]+1,numComps:o.getNumberOfComponents(),dataType:o.getDataType(),data:o.getData()}),e.activate(),e.sendParameters(),e.deactivate()}const l=n.renderable.getTransformCoordinate(),u=e.getRenderWindow().getViews()[0].getViewportSize(e),c="".concat(r.getMTime(),"A").concat(a,"B").concat(r.getMTime())+"C".concat(o?o.getMTime():1)+"D".concat(i?i.getMTime():1)+"E".concat(l?e.getMTime():1)+"F".concat(u);if(n.VBOBuildString!==c){let t=r.getPoints();if(l){const n=_c.newInstance(),r=t.getNumberOfPoints();n.setNumberOfPoints(r);const o=[];for(let a=0;a<r;++a){t.getPoint(a,o),l.setValue(o);const r=l.getComputedDoubleViewportValue(e);n.setPoint(a,r[0],r[1],0)}t=n}const u={points:t,tcoords:i,colors:o,cellOffset:0,useTCoordsPerCell:s,haveCellScalars:n.renderable.getAreScalarsMappedFromCells(),customAttributes:n.renderable.getCustomShaderAttributes().map(e=>r.getPointData().getArrayByName(e))};u.cellOffset+=n.primitives[up.Points].getCABO().createVBO(r.getVerts(),"verts",a,u),u.cellOffset+=n.primitives[up.Lines].getCABO().createVBO(r.getLines(),"lines",a,u),u.cellOffset+=n.primitives[up.Tris].getCABO().createVBO(r.getPolys(),"polys",a,u),u.cellOffset+=n.primitives[up.TriStrips].getCABO().createVBO(r.getStrips(),"strips",a,u),n.VBOBuildTime.modified(),n.VBOBuildString=c}},t.renderPieceDraw=(e,r)=>{const o=r.getProperty().getRepresentation();n.context.depthMask(!0);for(let a=up.Start;a<up.End;a++)n.primitives[a].getCABO().getElementCount()&&(n.lastBoundBO=n.primitives[a],n.primitiveIDOffset+=n.primitives[a].drawArrays(e,r,o,t))},t.renderPieceFinish=(e,t)=>{n.lastBoundBO&&n.lastBoundBO.getVAO().release(),n.renderable.getColorTextureMap()&&n.internalColorTexture.deactivate()},t.replaceShaderValues=(e,n,r)=>{t.replaceShaderColor(e,n,r),t.replaceShaderTCoord(e,n,r),t.replaceShaderPicking(e,n,r),t.replaceShaderPositionVC(e,n,r)},t.replaceShaderColor=(e,t,r)=>{let o=e.Vertex,a=e.Geometry,i=e.Fragment,s=["uniform vec3 diffuseColorUniform;","uniform float opacityUniform;"],l=["vec3 diffuseColor = diffuseColorUniform;","float opacity = opacityUniform;"];0!==n.lastBoundBO.getCABO().getColorComponents()?(s=s.concat(["varying vec4 vertexColorVSOutput;"]),o=vf.substitute(o,"//VTK::Color::Dec",["attribute vec4 scalarColor;","varying vec4 vertexColorVSOutput;"]).result,o=vf.substitute(o,"//VTK::Color::Impl",["vertexColorVSOutput =  scalarColor;"]).result,a=vf.substitute(a,"//VTK::Color::Dec",["in vec4 vertexColorVSOutput[];","out vec4 vertexColorGSOutput;"]).result,a=vf.substitute(a,"//VTK::Color::Impl",["vertexColorGSOutput = vertexColorVSOutput[i];"]).result,i=vf.substitute(i,"//VTK::Color::Impl",l.concat(["  diffuseColor = vertexColorVSOutput.rgb;","  opacity = opacity*vertexColorVSOutput.a;"])).result):n.renderable.getAreScalarsMappedFromCells()&&(l=l.concat(["  vec4 texColor = texture2D(texture1, tcoordVCVSOutput.st);","  diffuseColor = texColor.rgb;","  opacity = opacity*texColor.a;"])),l=l.concat(["gl_FragData[0] = vec4(diffuseColor, opacity);"]),i=vf.substitute(i,"//VTK::Color::Dec",s).result,i=vf.substitute(i,"//VTK::Color::Impl",l).result,e.Vertex=o,e.Geometry=a,e.Fragment=i},t.replaceShaderTCoord=(e,t,r)=>{if(n.lastBoundBO.getCABO().getTCoordOffset()){let t=e.Vertex,r=e.Geometry,o=e.Fragment;const a=n.lastBoundBO.getCABO().getTCoordComponents();1===a?(t=vf.substitute(t,"//VTK::TCoord::Dec",["in float tcoordMC;","out float tcoordVCVSOutput;"]).result,t=vf.substitute(t,"//VTK::TCoord::Impl",["tcoordVCVSOutput = tcoordMC;"]).result,r=vf.substitute(r,"//VTK::TCoord::Dec",["in float tcoordVCVSOutput[];\n","out float tcoordVCGSOutput;"]).result,r=vf.substitute(r,["//VTK::TCoord::Impl","tcoordVCGSOutput = tcoordVCVSOutput[i];"]).result,o=vf.substitute(o,"//VTK::TCoord::Dec",["in float tcoordVCVSOutput;","uniform sampler2D texture1;"]).result,o=vf.substitute(o,"//VTK::TCoord::Impl",["gl_FragData[0] = gl_FragData[0]*texture2D(texture1, vec2(tcoordVCVSOutput,0));"]).result):2===a&&(t=vf.substitute(t,"//VTK::TCoord::Dec",["in vec2 tcoordMC;","out vec2 tcoordVCVSOutput;"]).result,t=vf.substitute(t,"//VTK::TCoord::Impl",["tcoordVCVSOutput = tcoordMC;"]).result,r=vf.substitute(r,"//VTK::TCoord::Dec",["in vec2 tcoordVCVSOutput[];\n","out vec2 tcoordVCGSOutput;"]).result,r=vf.substitute(r,"//VTK::TCoord::Impl",["tcoordVCGSOutput = tcoordVCVSOutput[i];"]).result,o=vf.substitute(o,"//VTK::TCoord::Dec",["in vec2 tcoordVCVSOutput;","uniform sampler2D texture1;"]).result,o=vf.substitute(o,"//VTK::TCoord::Impl",["gl_FragData[0] = gl_FragData[0]*texture2D(texture1, tcoordVCVSOutput.st);"]).result),n.renderable.getAreScalarsMappedFromCells()&&(r=vf.substitute(r,"//VTK::PrimID::Impl",["gl_PrimitiveID = gl_PrimitiveIDIn;"]).result),e.Vertex=t,e.Geometry=r,e.Fragment=o}},t.replaceShaderPicking=(e,t,n)=>{let r=e.Fragment;r=vf.substitute(r,"//VTK::Picking::Dec",["uniform vec3 mapperIndex;","uniform int picking;"]).result,r=vf.substitute(r,"//VTK::Picking::Impl","  gl_FragData[0] = picking != 0 ? vec4(mapperIndex,1.0) : gl_FragData[0];").result,e.Fragment=r},t.replaceShaderPositionVC=(e,t,r)=>{n.lastBoundBO.replaceShaderPositionVC(e,t,r)},t.invokeShaderCallbacks=(e,t,r)=>{const o=n.renderable.getViewSpecificProperties().ShadersCallbacks;o&&o.forEach(n=>{n.callback(n.userData,e,t,r)})},t.setMapperShaderParameters=(e,t,r)=>{if(e.getProgram().isUniformUsed("PrimitiveIDOffset")&&e.getProgram().setUniformi("PrimitiveIDOffset",n.primitiveIDOffset),e.getProgram().isAttributeUsed("vertexWC")&&(e.getVAO().addAttributeArray(e.getProgram(),e.getCABO(),"vertexWC",e.getCABO().getVertexOffset(),e.getCABO().getStride(),n.context.FLOAT,3,!1)||fp("Error setting vertexWC in shader VAO.")),e.getCABO().getElementCount()&&(n.VBOBuildTime.getMTime()>e.getAttributeUpdateTime().getMTime()||e.getShaderSourceTime().getMTime()>e.getAttributeUpdateTime().getMTime())){n.renderable.getCustomShaderAttributes().forEach((t,r)=>{e.getProgram().isAttributeUsed("".concat(t,"MC"))&&(e.getVAO().addAttributeArray(e.getProgram(),e.getCABO(),"".concat(t,"MC"),e.getCABO().getCustomData()[r].offset,e.getCABO().getStride(),n.context.FLOAT,e.getCABO().getCustomData()[r].components,!1)||fp("Error setting ".concat(t,"MC in shader VAO.")))}),e.getProgram().isAttributeUsed("tcoordMC")&&e.getCABO().getTCoordOffset()?e.getVAO().addAttributeArray(e.getProgram(),e.getCABO(),"tcoordMC",e.getCABO().getTCoordOffset(),e.getCABO().getStride(),n.context.FLOAT,e.getCABO().getTCoordComponents(),!1)||fp("Error setting tcoordMC in shader VAO."):e.getVAO().removeAttributeArray("tcoordMC"),e.getProgram().isAttributeUsed("scalarColor")&&e.getCABO().getColorComponents()?e.getVAO().addAttributeArray(e.getProgram(),e.getCABO().getColorBO(),"scalarColor",e.getCABO().getColorOffset(),e.getCABO().getColorBOStride(),n.context.UNSIGNED_BYTE,4,!0)||fp("Error setting scalarColor in shader VAO."):e.getVAO().removeAttributeArray("scalarColor"),n.internalColorTexture&&e.getProgram().isUniformUsed("texture1")&&n.internalColorTexture.getTextureUnit()>-1&&e.getProgram().setUniformi("texture1",n.internalColorTexture.getTextureUnit());const o=n.openGLActor2D.getActiveTextures();if(o)for(let t=0;t<o.length;++t){const n=o[t].getTextureUnit(),r="texture".concat(n+1);e.getProgram().isUniformUsed(r)&&e.getProgram().setUniformi(r,n)}e.setMapperShaderParameters(t,r,n._openGLRenderer.getTiledSizeAndOrigin());const a=n._openGLRenderer.getSelector();e.getProgram().setUniform3fArray("mapperIndex",a?a.getPropColorValue():[0,0,0]),e.getProgram().setUniformi("picking",a?a.getCurrentPass()+1:0)}},t.setPropertyShaderParameters=(e,t,r)=>{const o=n.renderable.getColorMapColors();if(!o||0===o.getNumberOfComponents()){const t=e.getProgram(),n=r.getProperty(),o=n.getOpacity();t.setUniformf("opacityUniform",o);const a=n.getColor();t.setUniform3fArray("diffuseColorUniform",a)}},t.setLightingShaderParameters=(e,t,n)=>{},t.setCameraShaderParameters=(t,r,o)=>{const a=t.getProgram(),i=t.getCABO().getCoordShiftAndScaleEnabled()?t.getCABO().getInverseShiftAndScaleMatrix():null,s=r.getRenderWindow().getViews()[0].getViewportSize(r),l=r.getViewport(),u=o.getActualPositionCoordinate().getComputedDoubleViewportValue(r),c=[0,0,1,1],d=[0,0,1,1];if(d[0]=l[0]>=c[0]?l[0]:c[0],d[1]=l[1]>=c[1]?l[1]:c[1],d[2]=l[2]<=c[2]?l[2]:c[2],d[3]=l[3]<=c[3]?l[3]:c[3],d[0]>=d[2])return;if(d[1]>=d[3])return;s[0]=$o(s[0]*(d[2]-d[0])/(l[2]-l[0])),s[1]=$o(s[1]*(d[3]-d[1])/(l[3]-l[1]));const f=n._openGLRenderer.getParent().getSize(),p=$o(u[0]-(d[0]-l[0])*f[0]),h=$o(u[1]-(d[1]-l[1])*f[1]),m=-p;let g=-p+s[0];const v=-h;let y=-h+s[1];m===g&&(g=m+1),v===y&&(y=v+1);const b=B(new Float64Array(16));var _,T,x;b[0]=2/(g-m),b[5]=2/(y-v),b[3]=-1*(g+m)/(g-m),b[7]=-1*(y+v)/(y-v),b[10]=0,b[11]=o.getProperty().getDisplayLocation()===sp.FOREGROUND?-1:1,b[15]=1,N(b,b),a.setUniformMatrix("WCVCMatrix",(_=[b,i],T=e,x=n.tmpMat4,T.identity(x),_.reduce((e,t,n)=>0===n?t?T.copy(e,t):T.identity(e):t?T.multiply(e,e,t):e,x)))},t.getAllocatedGPUMemoryInBytes=()=>{let e=0;return n.primitives.forEach(t=>{e+=t.getAllocatedGPUMemoryInBytes()}),e}}(t,n)}const vp=Qt(gp,"vtkOpenGLPolyDataMapper2D");Tn("vtkMapper2D",vp);const{VectorMode:yp}=Mu;function bp(e,t){e.strokeStyle=t.strokeColor,e.lineWidth=t.strokeSize,e.fillStyle=t.fontColor,e.font="".concat(t.fontStyle," ").concat(t.fontSize,"px ").concat(t.fontFamily)}function _p(e,t){return e=>{const n=e.getLastSize(),r=(n[0]/700)**.8,o=(n[1]/700)**.8,a=Math.min(r,o),i=e.getAxisTextStyle(),s=e.getTickTextStyle();Object.assign(i,t.axisTextStyle),Object.assign(s,t.tickTextStyle),i.fontSize=Math.max(24*a,12),e.getLastAspectRatio()>1?s.fontSize=Math.max(20*a,10):s.fontSize=Math.max(16*a,10);const l=e.updateTextureAtlas();e.setTopTitle(!1);const u=e.getBoxSizeByReference();if(e.getLastAspectRatio()>1)e.setTickLabelPixelOffset(.3*s.fontSize),l.titleWidth<=l.tickWidth+e.getTickLabelPixelOffset()+.8*s.fontSize?(e.setTopTitle(!0),e.setAxisTitlePixelOffset(.2*s.fontSize),u[0]=2*(l.tickWidth+e.getTickLabelPixelOffset()+.8*s.fontSize)/n[0],e.setBoxPosition([.98-u[0],-.92])):(e.setAxisTitlePixelOffset(.2*s.fontSize),u[0]=2*(l.titleHeight+e.getAxisTitlePixelOffset()+l.tickWidth+e.getTickLabelPixelOffset()+.8*s.fontSize)/n[0],e.setBoxPosition([.99-u[0],-.92])),u[1]=Math.max(1.2,Math.min(1.84/o,1.84));else{e.setAxisTitlePixelOffset(1.2*s.fontSize),e.setTickLabelPixelOffset(.1*s.fontSize);const t=2*(.8*s.fontSize+l.titleHeight+e.getAxisTitlePixelOffset())/n[1],r=2*l.tickWidth/n[0];u[0]=Math.min(1.9,Math.max(1.4,1.4*r*(e.getTicks().length+3))),u[1]=t,e.setBoxPosition([-.5*u[0],-.97])}e.recomputeBarSegments(l)}}function Tp(e,t){return e=>{const t=e.getLastTickBounds(),n=Do().domain([t[0],t[1]]),r=n.ticks(5),o=n.tickFormat(5);e.setTicks(r),e.setTickStrings(r.map(o))}}const xp=dn.newInstance(function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{renderable:null};Object.assign(t,{},n),dn.obj(e,t),dn.setGet(e,t,["axisTitlePixelOffset","tickLabelPixelOffset","renderable","topTitle","ticks","tickStrings","tickPositions"]),dn.get(e,t,["lastSize","lastAspectRatio","lastTickBounds","axisTextStyle","tickTextStyle","barActor","tmActor"]),dn.getArray(e,t,["boxPosition","boxSize"]),dn.setArray(e,t,["boxPosition","boxSize"],2),t.forceUpdate=!1,t.lastRebuildTime={},dn.obj(t.lastRebuildTime,{mtime:0}),t.lastSize=[-1,-1],t.tmCanvas=document.createElement("canvas"),t.tmContext=t.tmCanvas.getContext("2d"),t._tmAtlas=new Map,t.barMapper=cc.newInstance(),t.barMapper.setInterpolateScalarsBeforeMapping(!0),t.barMapper.setUseLookupTableScalarRange(!0),t.polyData=Ad.newInstance(),t.barMapper.setInputData(t.polyData),t.barActor=Ol.newInstance(),t.barActor.setMapper(t.barMapper),t.tmPolyData=Ad.newInstance(),t.tmMapper=cc.newInstance(),t.tmMapper.setInputData(t.tmPolyData),t.tmTexture=Od.newInstance({resizable:!0}),t.tmTexture.setInterpolate(!1),t.tmActor=Ol.newInstance({parentProp:e}),t.tmActor.setMapper(t.tmMapper),t.tmActor.addTexture(t.tmTexture),t.barPosition=[0,0],t.barSize=[0,0],t.boxPosition=[.88,-.92],t.boxSize=[.1,1.1],t.lastTickBounds=[],function(e,t){t.classHierarchy.push("vtkScalarBarActorHelper"),e.setRenderable=n=>{t.renderable!==n&&(t.renderable=n,t.barActor.setProperty(n.getProperty()),t.barActor.setParentProp(n),t.barActor.setCoordinateSystemToDisplay(),t.tmActor.setProperty(n.getProperty()),t.tmActor.setParentProp(n),t.tmActor.setCoordinateSystemToDisplay(),t.generateTicks=n.generateTicks,t.axisTextStyle=u({},n.getAxisTextStyle()),t.tickTextStyle=u({},n.getTickTextStyle()),e.modified())},e.updateAPISpecificData=(n,r,o)=>{t.lastSize[0]===n[0]&&t.lastSize[1]===n[1]||(t.lastSize[0]=n[0],t.lastSize[1]=n[1],t.lastAspectRatio=n[0]/n[1],t.forceUpdate=!0);const a=t.renderable.getScalarsToColors();if(a&&t.renderable.getVisibility()&&(t.barMapper.setLookupTable(a),t.camera=r,t.renderWindow=o,t.forceUpdate||Math.max(a.getMTime(),e.getMTime(),t.renderable.getMTime())>t.lastRebuildTime.getMTime())){const n=a.getMappingRange();if(t.lastTickBounds=[...n],t.renderable.getGenerateTicks()(e),t.renderable.getAutomated())t.renderable.getAutoLayout()(e);else{t.axisTextStyle=u({},t.renderable.getAxisTextStyle()),t.tickTextStyle=u({},t.renderable.getTickTextStyle()),t.barPosition=[...t.renderable.getBarPosition()],t.barSize=[...t.renderable.getBarSize()],t.boxPosition=[...t.renderable.getBoxPosition()],t.boxSize=[...t.renderable.getBoxSize()],t.axisTitlePixelOffset=t.renderable.getAxisTitlePixelOffset(),t.tickLabelPixelOffset=t.renderable.getTickLabelPixelOffset();const n=e.updateTextureAtlas();e.recomputeBarSegments(n)}e.updatePolyDataForLabels(),e.updatePolyDataForBarSegments(),t.lastRebuildTime.modified(),t.forceUpdate=!1}},e.updateTextureAtlas=()=>{t.tmContext.textBaseline="bottom",t.tmContext.textAlign="left";const n={},r=new Map;let o=0,a=1;bp(t.tmContext,t.axisTextStyle);let i=t.tmContext.measureText(t.renderable.getAxisLabel()),s={height:i.actualBoundingBoxAscent+2,startingHeight:a,width:i.width+2,textStyle:t.axisTextStyle};r.set(t.renderable.getAxisLabel(),s),a+=s.height,o=s.width,n.titleWidth=s.width,n.titleHeight=s.height,n.tickWidth=0,n.tickHeight=0,bp(t.tmContext,t.tickTextStyle);const l=[...e.getTickStrings(),"NaN","Below","Above"];for(let e=0;e<l.length;e++)r.has(l[e])||(i=t.tmContext.measureText(l[e]),s={height:i.actualBoundingBoxAscent+2,startingHeight:a,width:i.width+2,textStyle:t.tickTextStyle},r.set(l[e],s),a+=s.height,o<s.width&&(o=s.width),n.tickWidth<s.width&&(n.tickWidth=s.width),n.tickHeight<s.height&&(n.tickHeight=s.height));return o=la(o),a=la(a),r.forEach(e=>{e.tcoords=[0,(a-e.startingHeight-e.height)/a,e.width/o,(a-e.startingHeight-e.height)/a,e.width/o,(a-e.startingHeight)/a,0,(a-e.startingHeight)/a]}),t.tmCanvas.width=o,t.tmCanvas.height=a,t.tmContext.textBaseline="bottom",t.tmContext.textAlign="left",t.tmContext.clearRect(0,0,o,a),r.forEach((e,n)=>{bp(t.tmContext,e.textStyle),t.tmContext.fillText(n,1,e.startingHeight+e.height-1)}),t.tmTexture.setCanvas(t.tmCanvas),t.tmTexture.modified(),t._tmAtlas=r,n},e.computeBarSize=e=>{t.vertical=t.boxSize[1]>t.boxSize[0];const n=2*e.tickHeight/t.lastSize[1],r=[1,1];if(t.vertical){const o=2*(e.tickWidth+t.tickLabelPixelOffset)/t.lastSize[0];if(t.topTitle){const n=2*(e.titleHeight+t.axisTitlePixelOffset)/t.lastSize[1];t.barSize[0]=t.boxSize[0]-o,t.barSize[1]=t.boxSize[1]-n}else{const n=2*(e.titleHeight+t.axisTitlePixelOffset)/t.lastSize[0];t.barSize[0]=t.boxSize[0]-n-o,t.barSize[1]=t.boxSize[1]}t.barPosition[0]=t.boxPosition[0]+o,t.barPosition[1]=t.boxPosition[1],r[1]=n}else{const n=(2*e.tickWidth-8)/t.lastSize[0],o=2*(e.titleHeight+t.axisTitlePixelOffset)/t.lastSize[1];t.barSize[0]=t.boxSize[0],t.barPosition[0]=t.boxPosition[0],t.barSize[1]=t.boxSize[1]-o,t.barPosition[1]=t.boxPosition[1],r[0]=n}return r},e.recomputeBarSegments=n=>{var r,o,a,i;const s=e.computeBarSize(n);t.barSegments=[];const l=[0,0],u=t.vertical?1:0,c=t.vertical?.01:.02;function d(e,n){t.barSegments.push({corners:[[...l],[l[0]+s[0],l[1]],[l[0]+s[0],l[1]+s[1]],[l[0],l[1]+s[1]]],scalars:n,title:e}),l[u]+=s[u]+c}t.renderable.getDrawNanAnnotation()&&t.renderable.getScalarsToColors().getNanColor()&&d("NaN",[NaN,NaN,NaN,NaN]),t.renderable.getDrawBelowRangeSwatch()&&null!==(r=(o=t.renderable.getScalarsToColors()).getUseBelowRangeColor)&&void 0!==r&&r.call(o)&&d("Below",[-.1,-.1,-.1,-.1]);const f=null===(a=(i=t.renderable.getScalarsToColors()).getUseAboveRangeColor)||void 0===a?void 0:a.call(i);l[u]+=c;const p=s[u];s[u]=f?1-2*c-s[u]-l[u]:1-c-l[u],d("ticks",t.vertical?[0,0,.995,.995]:[0,.995,.995,0]),t.renderable.getDrawAboveRangeSwatch()&&f&&(s[u]=p,l[u]+=c,d("Above",[1.1,1.1,1.1,1.1]))};const n=new Float64Array(3);e.createPolyDataForOneLabel=(e,r,o,a,i,s)=>{const l=t._tmAtlas.get(e);if(!l)return;let u=s.ptIdx,c=s.cellIdx;n[0]=(.5*r[0]+.5)*t.lastSize[0],n[1]=(.5*r[1]+.5)*t.lastSize[1],n[2]=r[2],n[0]+=i[0],n[1]+=i[1];const d=[],f="vertical"===a?[1,0]:[0,1];"vertical"===a?(d[0]=l.width,d[1]=-l.height,"middle"===o[0]?n[1]-=l.width/2:"right"===o[0]&&(n[1]-=l.width),"middle"===o[1]?n[0]+=l.height/2:"top"===o[1]&&(n[0]+=l.height)):(d[0]=l.width,d[1]=l.height,"middle"===o[0]?n[0]-=l.width/2:"right"===o[0]&&(n[0]-=l.width),"middle"===o[1]?n[1]-=l.height/2:"top"===o[1]&&(n[1]-=l.height)),s.points[3*u]=n[0],s.points[3*u+1]=n[1],s.points[3*u+2]=n[2],s.tcoords[2*u]=l.tcoords[0],s.tcoords[2*u+1]=l.tcoords[1],u++,n[f[0]]+=d[0],s.points[3*u]=n[0],s.points[3*u+1]=n[1],s.points[3*u+2]=n[2],s.tcoords[2*u]=l.tcoords[2],s.tcoords[2*u+1]=l.tcoords[3],u++,n[f[1]]+=d[1],s.points[3*u]=n[0],s.points[3*u+1]=n[1],s.points[3*u+2]=n[2],s.tcoords[2*u]=l.tcoords[4],s.tcoords[2*u+1]=l.tcoords[5],u++,n[f[0]]-=d[0],s.points[3*u]=n[0],s.points[3*u+1]=n[1],s.points[3*u+2]=n[2],s.tcoords[2*u]=l.tcoords[6],s.tcoords[2*u+1]=l.tcoords[7],u++,s.polys[4*c]=3,s.polys[4*c+1]=u-4,s.polys[4*c+2]=u-3,s.polys[4*c+3]=u-2,c++,s.polys[4*c]=3,s.polys[4*c+1]=u-4,s.polys[4*c+2]=u-2,s.polys[4*c+3]=u-1,s.ptIdx+=4,s.cellIdx+=2};const r=new Float64Array(3);e.updatePolyDataForLabels=()=>{const n=e.getTickStrings().length+t.barSegments.length,o=4*n,a=2*n,i=new Float64Array(3*o),s=new Uint16Array(4*a),l=new Float32Array(2*o),u={ptIdx:0,cellIdx:0,polys:s,points:i,tcoords:l},c=t.vertical?0:1,d=t.vertical?1:0;r[2]=-.99;const f=t.vertical?["right","middle"]:["middle","bottom"];let p=[0,1];const h=[0,0];t.vertical?(h[0]=-t.tickLabelPixelOffset,t.topTitle?(r[0]=t.boxPosition[0]+.5*t.boxSize[0],r[1]=t.barPosition[1]+t.barSize[1],e.createPolyDataForOneLabel(t.renderable.getAxisLabel(),r,["middle","bottom"],"horizontal",[0,t.axisTitlePixelOffset],u)):(r[0]=t.barPosition[0]+t.barSize[0],r[1]=t.barPosition[1]+.5*t.barSize[1],e.createPolyDataForOneLabel(t.renderable.getAxisLabel(),r,["middle","top"],"vertical",[t.axisTitlePixelOffset,0],u)),p=[-1,0]):(h[1]=t.tickLabelPixelOffset,r[0]=t.barPosition[0]+.5*t.barSize[0],r[1]=t.barPosition[1]+t.barSize[1],e.createPolyDataForOneLabel(t.renderable.getAxisLabel(),r,["middle","bottom"],"horizontal",[0,t.axisTitlePixelOffset],u)),r[c]=t.barPosition[c]+(.5*p[c]+.5)*t.barSize[c],r[d]=t.barPosition[d]+.5*t.barSize[d];let m=null;for(let x=0;x<t.barSegments.length;x++){const n=t.barSegments[x];"ticks"===n.title?m=n:(r[d]=t.barPosition[d]+.5*t.barSize[d]*(n.corners[2][d]+n.corners[0][d]),e.createPolyDataForOneLabel(n.title,r,f,"horizontal",h,u))}const g=t.barPosition[d]+t.barSize[d]*m.corners[0][d],v=t.barSize[d]*(m.corners[2][d]-m.corners[0][d]),y=e.getTicks(),b=e.getTickStrings(),_=e.getTickPositions();for(let x=0;x<y.length;x++){const n=_?_[x]:(y[x]-t.lastTickBounds[0])/(t.lastTickBounds[1]-t.lastTickBounds[0]);r[d]=g+v*n,e.createPolyDataForOneLabel(b[x],r,f,"horizontal",h,u)}const T=Wl.newInstance({numberOfComponents:2,values:l,name:"TextureCoordinates"});t.tmPolyData.getPointData().setTCoords(T),t.tmPolyData.getPoints().setData(i,3),t.tmPolyData.getPoints().modified(),t.tmPolyData.getPolys().setData(s,1),t.tmPolyData.getPolys().modified(),t.tmPolyData.modified()},e.updatePolyDataForBarSegments=()=>{var e,n;const o=t.renderable.getScalarsToColors();let a=0;t.renderable.getDrawNanAnnotation()&&o.getNanColor()&&(a+=1),t.renderable.getDrawBelowRangeSwatch()&&null!==(e=o.getUseBelowRangeColor)&&void 0!==e&&e.call(o)&&(a+=1),t.renderable.getDrawAboveRangeSwatch()&&null!==(n=o.getUseAboveRangeColor)&&void 0!==n&&n.call(o)&&(a+=1);const i=4*(1+a),s=i;let l=1;o.getVectorMode()===yp.COMPONENT&&(l=o.getVectorComponent()+1);const u=new Float64Array(3*i),c=new Uint16Array(5*s),d=new Float32Array(i*l);let f=0,p=0;for(let m=0;m<t.barSegments.length;m++){const e=t.barSegments[m];for(let n=0;n<4;n++){r[0]=t.barPosition[0]+e.corners[n][0]*t.barSize[0],r[1]=t.barPosition[1]+e.corners[n][1]*t.barSize[1],u[3*f]=(.5*r[0]+.5)*t.lastSize[0],u[3*f+1]=(.5*r[1]+.5)*t.lastSize[1],u[3*f+2]=r[2];for(let r=0;r<l;r++)d[f*l+r]=t.lastTickBounds[0]+e.scalars[n]*(t.lastTickBounds[1]-t.lastTickBounds[0]);f++}c[5*p]=4,c[5*p+1]=f-4,c[5*p+2]=f-3,c[5*p+3]=f-2,c[5*p+4]=f-1,p++}const h=Wl.newInstance({numberOfComponents:l,values:d,name:"Scalars"});t.polyData.getPointData().setScalars(h),t.polyData.getPoints().setData(u,3),t.polyData.getPoints().modified(),t.polyData.getPolys().setData(c,1),t.polyData.getPolys().modified(),t.polyData.modified()}}(e,t)},"vtkScalarBarActorHelper");function Sp(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,function(e){return u({automated:!0,autoLayout:null,axisLabel:"Scalar Value",barPosition:[0,0],barSize:[0,0],boxPosition:[.88,-.92],boxSize:[.1,1.1],scalarToColors:null,axisTitlePixelOffset:36,axisTextStyle:{fontColor:"white",fontStyle:"normal",fontSize:18,fontFamily:"serif"},tickLabelPixelOffset:14,tickTextStyle:{fontColor:"white",fontStyle:"normal",fontSize:14,fontFamily:"serif"},generateTicks:null,drawNanAnnotation:!0,drawBelowRangeSwatch:!0,drawAboveRangeSwatch:!0},e)}(n)),t.autoLayout||(t.autoLayout=_p(0,t)),t.generateTicks||(t.generateTicks=Tp()),Ol.extend(e,t,n),e.getProperty().setDiffuse(0),e.getProperty().setAmbient(1),dn.setGet(e,t,["automated","autoLayout","axisTitlePixelOffset","axisLabel","scalarsToColors","tickLabelPixelOffset","generateTicks","drawNanAnnotation","drawBelowRangeSwatch","drawAboveRangeSwatch"]),dn.get(e,t,["axisTextStyle","tickTextStyle"]),dn.getArray(e,t,["barPosition","barSize","boxPosition","boxSize"]),dn.setArray(e,t,["barPosition","barSize","boxPosition","boxSize"],2),function(e,t){t.classHierarchy.push("vtkScalarBarActor"),e.setTickTextStyle=n=>{t.tickTextStyle=u(u({},t.tickTextStyle),n),e.modified()},e.setAxisTextStyle=n=>{t.axisTextStyle=u(u({},t.axisTextStyle),n),e.modified()},e.resetAutoLayoutToDefault=()=>{e.setAutoLayout(_p(0,t))},e.resetGenerateTicksToDefault=()=>{e.setGenerateTicks(Tp())}}(e,t)}var wp={newInstance:dn.newInstance(Sp,"vtkScalarBarActor"),extend:Sp,newScalarBarActorHelper:xp};const Cp={};function Pp(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Cp,n),gn.extend(e,t,n),t.scalarBarActorHelper=wp.newScalarBarActorHelper(),function(e,t){t.classHierarchy.push("vtkOpenGLScalarBarActor"),e.buildPass=n=>{n&&(t._openGLRenderer=e.getFirstAncestorOfType("vtkOpenGLRenderer"),t._openGLRenderWindow=t._openGLRenderer.getParent(),t.scalarBarActorHelper.getRenderable()||t.scalarBarActorHelper.setRenderable(t.renderable),e.prepareNodes(),e.addMissingNode(t.scalarBarActorHelper.getBarActor()),e.addMissingNode(t.scalarBarActorHelper.getTmActor()),e.removeUnusedNodes())},e.opaquePass=(e,n)=>{if(e){const e=t._openGLRenderer?t._openGLRenderer.getRenderable().getActiveCamera():null,n=t._openGLRenderer.getTiledSizeAndOrigin();t.scalarBarActorHelper.updateAPISpecificData([n.usize,n.vsize],e,t._openGLRenderWindow.getRenderable())}}}(e,t)}const Ap=Qt(Pp,"vtkOpenGLScalarBarActor");Tn("vtkScalarBarActor",Ap);const{vtkErrorMacro:Ep}=fn;const Ip={context:null};function Op(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Ip,n),gn.extend(e,t,n),t.openGLTexture=Hf.newInstance(),t.tris=wf.newInstance(),t.keyMatrixTime={},Nt(t.keyMatrixTime,{mtime:0}),t.keyMatrices={normalMatrix:ke(new Float64Array(9)),mcwc:B(new Float64Array(16))},Wt(e,t,["context"]),Ft(e,t,["activeTextures"]),function(e,t){t.classHierarchy.push("vtkOpenGLSkybox"),e.buildPass=n=>{if(n){t._openGLRenderer=e.getFirstAncestorOfType("vtkOpenGLRenderer"),t._openGLRenderWindow=t._openGLRenderer.getParent(),t.context=t._openGLRenderWindow.getContext(),t.tris.setOpenGLRenderWindow(t._openGLRenderWindow),t.openGLTexture.setOpenGLRenderWindow(t._openGLRenderWindow);const n=t._openGLRenderer.getRenderable();t.openGLCamera=t._openGLRenderer.getViewNodeFor(n.getActiveCamera())}},e.queryPass=(e,n)=>{if(e){if(!t.renderable||!t.renderable.getVisibility())return;n.incrementOpaqueActorCount()}},e.opaquePass=(n,r)=>{if(n&&!t._openGLRenderer.getSelector()){e.updateBufferObjects(),t.context.depthMask(!0),t._openGLRenderWindow.getShaderCache().readyShaderProgram(t.tris.getProgram()),t.openGLTexture.render(t._openGLRenderWindow);const n=t.openGLTexture.getTextureUnit();t.tris.getProgram().setUniformi("sbtexture",n);const r=t._openGLRenderer.getRenderable(),o=t.openGLCamera.getKeyMatrices(r),a=new Float64Array(16);if(V(a,o.wcpc),t.tris.getProgram().setUniformMatrix("IMCPCMatrix",a),"box"===t.lastFormat){const e=r.getActiveCamera().getPosition();t.tris.getProgram().setUniform3f("camPos",e[0],e[1],e[2])}t.tris.getVAO().bind(),t.context.drawArrays(t.context.TRIANGLES,0,t.tris.getCABO().getElementCount()),t.tris.getVAO().release(),t.openGLTexture.deactivate()}},e.updateBufferObjects=()=>{if(!t.tris.getCABO().getElementCount()){const e=new Float32Array(12);for(let t=0;t<4;t++)e[3*t]=t%2*2-1,e[3*t+1]=t>1?1:-1,e[3*t+2]=1;const n=Wl.newInstance({numberOfComponents:3,values:e});n.setName("points");const r=new Uint16Array(8);r[0]=3,r[1]=0,r[2]=1,r[3]=3,r[4]=3,r[5]=0,r[6]=3,r[7]=2;const o=Wl.newInstance({numberOfComponents:1,values:r});t.tris.getCABO().createVBO(o,"polys",_l.SURFACE,{points:n,cellOffset:0})}t.renderable.getFormat()!==t.lastFormat&&(t.lastFormat=t.renderable.getFormat(),"box"===t.lastFormat&&t.tris.setProgram(t._openGLRenderWindow.getShaderCache().readyShaderProgramArray("//VTK::System::Dec\n             attribute vec3 vertexMC;\n             uniform mat4 IMCPCMatrix;\n             varying vec3 TexCoords;\n             void main () {\n              gl_Position = vec4(vertexMC.xyz, 1.0);\n              vec4 wpos = IMCPCMatrix * gl_Position;\n              TexCoords = wpos.xyz/wpos.w;\n             }","//VTK::System::Dec\n             //VTK::Output::Dec\n             varying vec3 TexCoords;\n             uniform samplerCube sbtexture;\n             uniform vec3 camPos;\n             void main () {\n               // skybox looks from inside out\n               // which means we have to adjust\n               // our tcoords. Otherwise text would\n               // be flipped\n               vec3 tc = normalize(TexCoords - camPos);\n               if (abs(tc.z) < max(abs(tc.x),abs(tc.y)))\n               {\n                 tc = vec3(1.0, 1.0, -1.0) * tc;\n               }\n               else\n               {\n                 tc = vec3(-1.0, 1.0, 1.0) * tc;\n               }\n               gl_FragData[0] = textureCube(sbtexture, tc);\n             }","")),"background"===t.lastFormat&&t.tris.setProgram(t._openGLRenderWindow.getShaderCache().readyShaderProgramArray("//VTK::System::Dec\n             attribute vec3 vertexMC;\n             uniform mat4 IMCPCMatrix;\n             varying vec2 TexCoords;\n             void main () {\n              gl_Position = vec4(vertexMC.xyz, 1.0);\n              vec4 wpos = IMCPCMatrix * gl_Position;\n              TexCoords = vec2(vertexMC.x, vertexMC.y)*0.5 + 0.5;\n             }","//VTK::System::Dec\n             //VTK::Output::Dec\n             varying vec2 TexCoords;\n             uniform sampler2D sbtexture;\n             void main () {\n               gl_FragData[0] = texture2D(sbtexture, TexCoords);\n             }","")),t.tris.getShaderSourceTime().modified(),t.tris.getVAO().bind(),t.tris.getVAO().addAttributeArray(t.tris.getProgram(),t.tris.getCABO(),"vertexMC",t.tris.getCABO().getVertexOffset(),t.tris.getCABO().getStride(),t.context.FLOAT,3,t.context.FALSE)||Ep("Error setting vertexMC in shader VAO."));const e=t.renderable.getTextures();e.length||Ep("vtkSkybox requires a texture map"),t.openGLTexture.getRenderable()!==e[0]&&(t.openGLTexture.releaseGraphicsResources(t._openGLRenderWindow),t.openGLTexture.setRenderable(e[0]))}}(e,t)}const Mp=Qt(Op);Tn("vtkSkybox",Mp);const{vtkDebugMacro:Rp}=fn;const Lp={};function kp(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Lp,n),gn.extend(e,t,n),function(e,t){t.classHierarchy.push("vtkOpenGLPixelSpaceCallbackMapper"),e.opaquePass=(n,r)=>{t._openGLRenderer=e.getFirstAncestorOfType("vtkOpenGLRenderer"),t._openGLRenderWindow=t._openGLRenderer.getLastAncestorOfType("vtkOpenGLRenderWindow");const o=t._openGLRenderer.getAspectRatio(),a=t._openGLRenderer?t._openGLRenderer.getRenderable().getActiveCamera():null,i=t._openGLRenderer.getTiledSizeAndOrigin();let s=null;if(t.renderable.getUseZValues()){const e=r.getZBufferTexture(),n=Math.floor(e.getWidth()),o=Math.floor(e.getHeight()),a=t._openGLRenderWindow.getContext();e.bind();const i=r.getFramebuffer();i?i.saveCurrentBindingsAndBuffers():Rp("No framebuffer to save/restore");const l=a.createFramebuffer();a.bindFramebuffer(a.FRAMEBUFFER,l),a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,e.getHandle(),0),a.checkFramebufferStatus(a.FRAMEBUFFER)===a.FRAMEBUFFER_COMPLETE&&(s=new Uint8Array(n*o*4),a.viewport(0,0,n,o),a.readPixels(0,0,n,o,a.RGBA,a.UNSIGNED_BYTE,s)),i&&i.restorePreviousBindingsAndBuffers(),a.deleteFramebuffer(l)}t.renderable.invokeCallback(t.renderable.getInputData(),a,o,i,s)},e.queryPass=(e,n)=>{e&&t.renderable.getUseZValues()&&n.requestDepth()}}(e,t)}const Dp=Qt(kp,"vtkOpenGLPixelSpaceCallbackMapper");Tn("vtkPixelSpaceCallbackMapper",Dp);const Bp=Object.create(null);function Np(e,t){Bp[e]=t}const Vp={};function Fp(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Vp,n),t.overrides=Bp,bn.extend(e,t,n),function(e,t){t.classHierarchy.push("vtkWebGPUViewNodeFactory")}(0,t)}var Up={newInstance:dn.newInstance(Fp,"vtkWebGPUViewNodeFactory"),extend:Fp};const zp={keyMatrixTime:null,keyMatrices:null};function Gp(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,zp,n),gn.extend(e,t,n),t.keyMatrixTime={},dn.obj(t.keyMatrixTime),t.keyMatrices={normalMatrix:new Float64Array(16),vcpc:new Float64Array(16),pcsc:new Float64Array(16),wcvc:new Float64Array(16),scpc:new Float64Array(16),scvc:new Float64Array(16)},dn.setGet(e,t,["keyMatrixTime"]),function(e,t){t.classHierarchy.push("vtkWebGPUCamera"),e.getProjectionMatrix=(e,n,r,o)=>{if(B(e),t.renderable.getParallelProjection()){const a=t.renderable.getParallelScale(),i=a*n,s=a,l=(o[0]-1)*i,u=(o[0]+1)*i,c=(o[1]-1)*s,d=(o[1]+1)*s,f=1/(u-l),p=1/(d-c);e[0]=2*f,e[5]=2*p,e[10]=1/(r[1]-r[0]),e[12]=(u+l)*f,e[13]=(d+c)*p,e[14]=r[1]/(r[1]-r[0])}else{const a=Math.tan(Math.PI*t.renderable.getViewAngle()/360);let i,s;!0===t.renderable.getUseHorizontalViewAngle()?(i=r[0]*a,s=r[0]*a/n):(i=r[0]*a*n,s=r[0]*a);const l=(o[0]-1)*i,u=(o[0]+1)*i,c=(o[1]-1)*s,d=(o[1]+1)*s;e[0]=2*r[0]/(u-l),e[5]=2*r[0]/(d-c),e[12]=(l+u)/(u-l),e[13]=(c+d)/(d-c),e[10]=0,e[14]=r[0],e[11]=-1,e[15]=0}},e.convertToOpenGLDepth=e=>{if(t.renderable.getParallelProjection())return 1-e;const n=t.renderable.getClippingRangeByReference();let r=-n[0]/e;return r=(n[0]+n[1])/(n[1]-n[0])+2*n[0]*n[1]/(r*(n[1]-n[0])),.5*r+.5},e.getKeyMatrices=n=>{const r=n.getRenderable(),o=n.getParent();if(Math.max(o.getMTime(),e.getMTime(),r.getMTime(),t.renderable.getMTime(),n.getStabilizedTime())>t.keyMatrixTime.getMTime()){const r=t.renderable.getViewMatrix();L(t.keyMatrices.normalMatrix,r),t.keyMatrices.normalMatrix[3]=0,t.keyMatrices.normalMatrix[7]=0,t.keyMatrices.normalMatrix[11]=0,V(t.keyMatrices.normalMatrix,t.keyMatrices.normalMatrix),N(t.keyMatrices.wcvc,r);const o=n.getStabilizedCenterByReference();G(t.keyMatrices.scvc,t.keyMatrices.wcvc,o);const a=n.getAspectRatio(),i=t.renderable.getClippingRangeByReference();e.getProjectionMatrix(t.keyMatrices.vcpc,a,i,t.renderable.getWindowCenterByReference()),z(t.keyMatrices.scpc,t.keyMatrices.vcpc,t.keyMatrices.scvc),V(t.keyMatrices.pcsc,t.keyMatrices.scpc),t.keyMatrixTime.modified()}return t.keyMatrices}}(e,t)}const Wp=dn.newInstance(Gp);Np("vtkCamera",Wp);const Hp={device:null,handle:null,label:null};function jp(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Hp,n),dn.obj(e,t),t.bindables=[],t.bindGroupTime={},dn.obj(t.bindGroupTime,{mtime:0}),dn.get(e,t,["bindGroupTime","handle","sizeInBytes","usage"]),dn.setGet(e,t,["label","device","arrayInformation"]),function(e,t){t.classHierarchy.push("vtkWebGPUBindGroup"),e.setBindables=n=>{if(t.bindables.length===n.length){let e=!0;for(let r=0;r<t.bindables.length;r++)t.bindables[r]!==n[r]&&(e=!1);if(e)return}t.bindables=n,e.modified()},e.getBindGroupLayout=e=>{const n=[];for(let r=0;r<t.bindables.length;r++){const e=t.bindables[r].getBindGroupLayoutEntry();e.binding=r,n.push(e)}return e.getBindGroupLayout({entries:n})},e.getBindGroup=n=>{let r=e.getMTime();for(let e=0;e<t.bindables.length;e++){const n=t.bindables[e].getBindGroupTime().getMTime();r=n>r?n:r}if(r<t.bindGroupTime.getMTime())return t.bindGroup;const o=[];for(let e=0;e<t.bindables.length;e++){const n=t.bindables[e].getBindGroupEntry();n.binding=e,o.push(n)}return t.bindGroup=n.getHandle().createBindGroup({layout:e.getBindGroupLayout(n),entries:o,label:t.label}),t.bindGroupTime.modified(),t.bindGroup},e.getShaderCode=e=>{const n=[],r=e.getBindGroupLayoutCount(t.label);for(let o=0;o<t.bindables.length;o++)n.push(t.bindables[o].getShaderCode(o,r));return n.join("\n")}}(e,t)}var Kp={newInstance:dn.newInstance(jp),extend:jp};const Zp={device:null,handle:null};function qp(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Zp,n),dn.obj(e,t),dn.get(e,t,["lastCameraMTime"]),dn.setGet(e,t,["device","handle"]),function(e,t){t.classHierarchy.push("vtkWebGPUShaderModule"),e.initialize=(e,n)=>{t.device=e,t.handle=t.device.getHandle().createShaderModule({code:n.getCode()})}}(e,t)}var Xp={newInstance:dn.newInstance(qp,"vtkWebGPUShaderModule"),extend:qp};const Yp={shaderModules:null,device:null,window:null};function Qp(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Yp,n),t._shaderModules=new Map,dn.obj(e,t),dn.setGet(e,t,["device","window"]),function(e,t){t.classHierarchy.push("vtkWebGPUShaderCache"),e.getShaderModule=e=>{const n=e.getType(),r=e.getHash(),o=t._shaderModules.keys();for(let i=0;i<o.length;i++){const e=o[i];if(e.getHash()===r&&e.getType()===n)return t._shaderModules.get(e)}const a=Xp.newInstance();return a.initialize(t.device,e),t._shaderModules.set(e,a),a}}(e,t)}var $p={newInstance:dn.newInstance(Qp,"vtkWebGPUShaderCache"),extend:Qp,substitute:function(e,t,n){let r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const o=Array.isArray(n)?n.join("\n"):n;let a=!1;-1!==e.search(t)&&(a=!0);let i="";r&&(i="g");const s=new RegExp(t,i);return{replace:a,result:e.replace(s,o)}}};const Jp={handle:null,layouts:null,renderEncoder:null,shaderDescriptions:null,vertexState:null,topology:null,pipelineDescription:null};function eh(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Jp,n),Nt(e,t),t.layouts=[],t.shaderDescriptions=[],Ft(e,t,["handle","pipelineDescription"]),Wt(e,t,["device","renderEncoder","topology","vertexState"]),function(e,t){t.classHierarchy.push("vtkWebGPUPipeline"),e.getShaderDescriptions=()=>t.shaderDescriptions,e.initialize=(e,n)=>{t.pipelineDescription=t.renderEncoder.getPipelineSettings(),t.pipelineDescription.primitive.topology=t.topology,t.pipelineDescription.vertex=t.vertexState,t.pipelineDescription.label=n;const r=[];for(let o=0;o<t.layouts.length;o++)r.push(t.layouts[o].layout);t.pipelineLayout=e.getHandle().createPipelineLayout({bindGroupLayouts:r}),t.pipelineDescription.layout=t.pipelineLayout;for(let o=0;o<t.shaderDescriptions.length;o++){const n=t.shaderDescriptions[o],r=e.getShaderModule(n);"vertex"===n.getType()&&(t.pipelineDescription.vertex.module=r.getHandle(),t.pipelineDescription.vertex.entryPoint="main"),"fragment"===n.getType()&&(t.pipelineDescription.fragment.module=r.getHandle(),t.pipelineDescription.fragment.entryPoint="main")}t.handle=e.getHandle().createRenderPipeline(t.pipelineDescription)},e.getShaderDescription=e=>{for(let n=0;n<t.shaderDescriptions.length;n++)if(t.shaderDescriptions[n].getType()===e)return t.shaderDescriptions[n];return null},e.addBindGroupLayout=e=>{e&&t.layouts.push({layout:e.getBindGroupLayout(t.device),label:e.getLabel()})},e.getBindGroupLayout=e=>t.layouts[e].layout,e.getBindGroupLayoutCount=e=>{for(let n=0;n<t.layouts.length;n++)if(t.layouts[n].label===e)return n;return 0},e.bindVertexInput=(e,t)=>{t.bindBuffers(e)}}(e,t)}var th={newInstance:Qt(eh,"vtkWebGPUPipeline"),extend:eh};const nh={type:null,hash:null,code:null,outputNames:null,outputTypes:null};function rh(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,nh,n),t.outputNames=[],t.outputTypes=[],t.outputInterpolations=[],t.builtinOutputNames=[],t.builtinOutputTypes=[],t.builtinInputNames=[],t.builtinInputTypes=[],dn.obj(e,t),dn.setGet(e,t,["type","hash","code"]),dn.getArray(e,t,["outputTypes","outputNames","outputInterpolations"]),function(e,t){t.classHierarchy.push("vtkWebGPUShaderDescription"),e.hasOutput=e=>t.outputNames.includes(e),e.addOutput=function(e,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;t.outputTypes.push(e),t.outputNames.push(n),t.outputInterpolations.push(r)},e.addBuiltinOutput=(e,n)=>{t.builtinOutputTypes.push(e),t.builtinOutputNames.push(n)},e.addBuiltinInput=(e,n)=>{t.builtinInputTypes.push(e),t.builtinInputNames.push(n)},e.replaceShaderCode=(e,n)=>{const r=[];let o=[];if(n&&r.push(n.getShaderCode()),e||t.builtinInputNames.length){const n=[];if(n.push("struct ".concat(t.type,"Input\n{")),e){const t=e.getOutputNamesByReference(),r=e.getOutputTypesByReference(),o=e.getOutputInterpolationsByReference();for(let e=0;e<t.length;e++)void 0!==o[e]?n.push("  @location(".concat(e,") @interpolate(").concat(o[e],") ").concat(t[e]," : ").concat(r[e],",")):n.push("  @location(".concat(e,") ").concat(t[e]," : ").concat(r[e],","))}for(let e=0;e<t.builtinInputNames.length;e++)n.push("  ".concat(t.builtinInputNames[e]," : ").concat(t.builtinInputTypes[e],","));n.length>1&&(n.push("};"),o=n,r[r.length-1]+=",",r.push("input: ".concat(t.type,"Input")))}if(r.length&&(t.code=$p.substitute(t.code,"//VTK::IOStructs::Input",r).result),t.outputNames.length+t.builtinOutputNames.length){const e=["struct ".concat(t.type,"Output\n{")];for(let n=0;n<t.outputNames.length;n++)void 0!==t.outputInterpolations[n]?e.push("  @location(".concat(n,") @interpolate(").concat(t.outputInterpolations[n],") ").concat(t.outputNames[n]," : ").concat(t.outputTypes[n],",")):e.push("  @location(".concat(n,") ").concat(t.outputNames[n]," : ").concat(t.outputTypes[n],","));for(let n=0;n<t.builtinOutputNames.length;n++)e.push("  ".concat(t.builtinOutputNames[n]," : ").concat(t.builtinOutputTypes[n],","));e.push("};"),o=o.concat(e),t.code=$p.substitute(t.code,"//VTK::IOStructs::Output",["-> ".concat(t.type,"Output")]).result}t.code=$p.substitute(t.code,"//VTK::IOStructs::Dec",o).result}}(e,t)}var oh={newInstance:dn.newInstance(rh,"vtkWebGPUShaderDescription"),extend:rh};const ah={r8unorm:{numComponents:1,nativeType:Uint8Array,stride:1,elementSize:1,sampleType:"float"},r8snorm:{numComponents:1,nativeType:Int8Array,stride:1,elementSize:1,sampleType:"float"},r8uint:{numComponents:1,nativeType:Uint8Array,stride:1,elementSize:1,sampleType:"uint"},r8sint:{numComponents:1,nativeType:Int8Array,stride:1,elementSize:1,sampleType:"sint"},r16uint:{numComponents:1,nativeType:Uint16Array,stride:2,elementSize:2,sampleType:"uint"},r16sint:{numComponents:1,nativeType:Int16Array,stride:2,elementSize:2,sampleType:"sint"},r16float:{numComponents:1,nativeType:Float32Array,stride:2,elementSize:2,sampleType:"float"},rg8unorm:{numComponents:2,nativeType:Uint8Array,stride:2,elementSize:1,sampleType:"float"},rg8snorm:{numComponents:2,nativeType:Int8Array,stride:2,elementSize:1,sampleType:"float"},rg8uint:{numComponents:2,nativeType:Uint8Array,stride:2,elementSize:1,sampleType:"uint"},rg8sint:{numComponents:2,nativeType:Int8Array,stride:2,elementSize:1,sampleType:"sint"},r32uint:{numComponents:1,nativeType:Uint32Array,stride:4,elementSize:4,sampleType:"uint"},r32sint:{numComponents:1,nativeType:Int32Array,stride:4,elementSize:4,sampleType:"sint"},r32float:{numComponents:1,nativeType:Float32Array,stride:4,elementSize:4,sampleType:"unfilterable-float"},rg16uint:{numComponents:2,nativeType:Uint16Array,stride:4,elementSize:2,sampleType:"uint"},rg16sint:{numComponents:2,nativeType:Int16Array,stride:4,elementSize:2,sampleType:"sint"},rg16float:{numComponents:2,nativeType:Float32Array,stride:4,elementSize:2,sampleType:"float"},rgba8unorm:{numComponents:4,nativeType:Uint8Array,stride:4,elementSize:1,sampleType:"float"},"rgba8unorm-srgb":{numComponents:4,nativeType:Uint8Array,stride:4,elementSize:1,sampleType:"float"},rgba8snorm:{numComponents:4,nativeType:Int8Array,stride:4,elementSize:1,sampleType:"float"},rgba8uint:{numComponents:4,nativeType:Uint8Array,stride:4,elementSize:1,sampleType:"uint"},rgba8sint:{numComponents:4,nativeType:Int8Array,stride:4,elementSize:1,sampleType:"sint"},bgra8unorm:{numComponents:4,nativeType:Uint8Array,stride:4,elementSize:1,sampleType:"float"},"bgra8unorm-srgb":{numComponents:4,nativeType:Uint8Array,stride:4,elementSize:1,sampleType:"float"},rgb9e5ufloat:{numComponents:4,nativeType:Uint32Array,stride:4,sampleType:"float"},rgb10a2unorm:{numComponents:4,nativeType:Uint32Array,stride:4,sampleType:"float"},rg11b10ufloat:{numComponents:4,nativeType:Float32Array,stride:4,sampleType:"float"},rg32uint:{numComponents:2,nativeType:Uint32Array,stride:8,elementSize:4,sampleType:"uint"},rg32sint:{numComponents:2,nativeType:Int32Array,stride:8,elementSize:4,sampleType:"sint"},rg32float:{numComponents:2,nativeType:Float32Array,stride:8,elementSize:4,sampleType:"unfilterable-float"},rgba16uint:{numComponents:4,nativeType:Uint16Array,stride:8,elementSize:2,sampleType:"uint"},rgba16sint:{numComponents:4,nativeType:Int16Array,stride:8,elementSize:2,sampleType:"sint"},rgba16float:{numComponents:4,nativeType:Float32Array,stride:8,elementSize:2,sampleType:"float"},rgba32uint:{numComponents:4,nativeType:Uint32Array,stride:16,elementSize:4,sampleType:"uint"},rgba32sint:{numComponents:4,nativeType:Int32Array,stride:16,elementSize:4,sampleType:"sint"},rgba32float:{numComponents:4,nativeType:Float32Array,stride:16,elementSize:4,sampleType:"unfilterable-float"},stencil8:{numComponents:1,nativeType:Uint8Array,stride:1,elementSize:1,sampleType:"uint"},depth16unorm:{numComponents:1,nativeType:Uint16Array,stride:2,elementSize:2,sampleType:"depth"},depth24plus:{numComponents:1,nativeType:Uint32Array,stride:4,elementSize:3,sampleType:"depth"},"depth24plus-stencil8":{numComponents:2,nativeType:Uint32Array,stride:4,sampleType:"mixed"},depth32float:{numComponents:1,nativeType:Float32Array,stride:4,elementSize:4,sampleType:"depth"}};var ih={getDetailsFromTextureFormat:function(e){return!e||e.length<6?0:e in ah===!0?ah[e]:(Tt("unknown format ".concat(e)),null)},getByteStrideFromBufferFormat:function(e){if(!e||e.length<5)return 0;let t=1;"x"===e[e.length-2]&&(t=Number(e[e.length-1]));const n=1===t?e.length-1:e.length-3,r=Number(e[n]);return Number.isNaN(r)?(Tt("unknown format ".concat(e)),0):t*(5-r/2)},getNumberOfComponentsFromBufferFormat:function(e){if(!e||e.length<5)return 0;let t=1;return"x"===e[e.length-2]&&(t=Number(e[e.length-1])),t},getNativeTypeFromBufferFormat:function(e){if(!e||e.length<5)return 0;let t;if("f"===e[0])t="Float";else if("s"===e[0])t="Int";else{if("u"!==e[0])return void Tt("unknown format ".concat(e));t="Uint"}const n=e.split("x")[0],r=Number(n[n.length-1]);if(!Number.isNaN(r))return t+=8*(5-r/2),t+="Array",t;Tt("unknown format ".concat(e))},getShaderTypeFromBufferFormat:function(e){let t;if("f"===e[0]||"n"===e[1])t="f32";else if("s"===e[0]&&"i"===e[1])t="i32";else{if("u"!==e[0]||"i"!==e[1])return void Tt("unknown format ".concat(e));t="u32"}let n=1;return"x"===e[e.length-2]&&(n=Number(e[e.length-1])),4===n?"vec4<".concat(t,">"):3===n?"vec3<".concat(t,">"):2===n?"vec2<".concat(t,">"):t},getByteStrideFromShaderFormat:function(e){if(!e)return 0;let t=1;return"vec"===e.substring(0,3)?t=Number(e[3]):"mat"===e.substring(0,3)&&(t=e[3]*e[5]),4*t},getNativeTypeFromShaderFormat:function(e){if(e)return e.includes("f32")?"Float32Array":e.includes("i32")?"Int32Array":e.includes("u32")?"Uint32Array":void Tt("unknown format ".concat(e))}};function sh(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!t.includes(e[n]))return!1;return!0}const lh={inputs:null,bindingDescriptions:!1,attributeDescriptions:null,indexBuffer:null};function uh(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,lh,n),Nt(e,t),t.bindingDescriptions=[],t.attributeDescriptions=[],t.inputs=[],Wt(e,t,["created","device","handle","indexBuffer"]),function(e,t){t.classHierarchy.push("vtkWebGPUVertexInput"),e.addBuffer=function(e,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"vertex",o=n;Array.isArray(o)||(o=[o]);for(let a=0;a<t.inputs.length;a++)if(sh(t.inputs[a].names,o)){if(t.inputs[a].buffer===e)return;return void(t.inputs[a].buffer=e)}t.inputs.push({buffer:e,stepMode:r,names:o}),t.inputs=t.inputs.sort((e,t)=>e.names[0]<t.names[0]?-1:e.names[0]>t.names[0]?1:0)},e.removeBufferIfPresent=e=>{for(let n=0;n<t.inputs.length;n++)t.inputs[n].names.includes(e)&&t.inputs.splice(n,1)},e.getBuffer=e=>{for(let n=0;n<t.inputs.length;n++)if(t.inputs[n].names.includes(e))return t.inputs[n].buffer;return null},e.hasAttribute=e=>{for(let n=0;n<t.inputs.length;n++)if(t.inputs[n].names.includes(e))return!0;return!1},e.getAttributeTime=e=>{for(let n=0;n<t.inputs.length;n++)if(t.inputs[n].names.includes(e))return t.inputs[n].buffer.getSourceTime();return 0},e.getShaderCode=()=>{let e="",n=0;for(let r=0;r<t.inputs.length;r++)for(let o=0;o<t.inputs[r].names.length;o++){const a=t.inputs[r].buffer.getArrayInformation()[o],i=ih.getShaderTypeFromBufferFormat(a.format);n>0&&(e+=",\n"),e="".concat(e,"  @location(").concat(n,") ").concat(t.inputs[r].names[o]," : ").concat(i),n++}return e},e.getVertexInputInformation=()=>{const e={};if(t.inputs.length){const n=[];let r=0;for(let e=0;e<t.inputs.length;e++){const o=t.inputs[e].buffer,a={arrayStride:o.getStrideInBytes(),stepMode:t.inputs[e].stepMode,attributes:[]},i=o.getArrayInformation();for(let n=0;n<t.inputs[e].names.length;n++)a.attributes.push({shaderLocation:r,offset:i[n].offset,format:i[n].format}),r++;n.push(a)}e.buffers=n}return e},e.bindBuffers=e=>{for(let n=0;n<t.inputs.length;n++)e.setVertexBuffer(n,t.inputs[n].buffer.getHandle());t.indexBuffer&&e.setIndexBuffer(t.indexBuffer.getHandle(),t.indexBuffer.getArrayInformation()[0].format)},e.getReady=()=>{},e.releaseGraphicsResources=()=>{t.created&&(t.inputs=[],t.bindingDescriptions=[],t.attributeDescriptions=[])}}(e,t)}var ch={newInstance:Qt(uh,"vtkWebGPUVertexInput"),extend:uh};const dh={additionalBindables:void 0,bindGroup:null,device:null,fragmentShaderTemplate:null,numberOfInstances:1,numberOfVertices:0,pipelineHash:null,shaderReplacements:null,SSBO:null,textureViews:null,topology:"triangle-list",UBO:null,vertexShaderTemplate:null,WebGPURenderer:null};function fh(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,dh,n),gn.extend(e,t,n),t.textureViews=[],t.vertexInput=ch.newInstance(),t.bindGroup=Kp.newInstance({label:"mapperBG"}),t.additionalBindables=[],t.fragmentShaderTemplate=t.fragmentShaderTemplate||"\n//VTK::Renderer::Dec\n\n//VTK::Color::Dec\n\n//VTK::Normal::Dec\n\n//VTK::TCoord::Dec\n\n//VTK::Select::Dec\n\n//VTK::RenderEncoder::Dec\n\n//VTK::Mapper::Dec\n\n//VTK::IOStructs::Dec\n\n@fragment\nfn main(\n//VTK::IOStructs::Input\n)\n//VTK::IOStructs::Output\n{\n  var output : fragmentOutput;\n\n  //VTK::Color::Impl\n\n  //VTK::Normal::Impl\n\n  //VTK::Light::Impl\n\n  //VTK::TCoord::Impl\n\n  //VTK::Select::Impl\n\n  // var computedColor:vec4<f32> = vec4<f32>(1.0,0.5,0.5,1.0);\n\n  //VTK::RenderEncoder::Impl\n  return output;\n}\n",t.vertexShaderTemplate=t.vertexShaderTemplate||"\n//VTK::Renderer::Dec\n\n//VTK::Color::Dec\n\n//VTK::Normal::Dec\n\n//VTK::TCoord::Dec\n\n//VTK::Select::Dec\n\n//VTK::Mapper::Dec\n\n//VTK::IOStructs::Dec\n\n@vertex\nfn main(\n//VTK::IOStructs::Input\n)\n//VTK::IOStructs::Output\n{\n  var output : vertexOutput;\n\n  // var vertex: vec4<f32> = vertexBC;\n\n  //VTK::Color::Impl\n\n  //VTK::Normal::Impl\n\n  //VTK::TCoord::Impl\n\n  //VTK::Select::Impl\n\n  //VTK::Position::Impl\n\n  return output;\n}\n",t.shaderReplacements=new Map,dn.get(e,t,["pipeline","vertexInput"]),dn.setGet(e,t,["additionalBindables","device","fragmentShaderTemplate","interpolate","numberOfInstances","numberOfVertices","pipelineHash","shaderReplacements","SSBO","textureViews","topology","UBO","vertexShaderTemplate","WebGPURenderer"]),function(e,t){t.classHierarchy.push("vtkWebGPUSimpleMapper"),e.generateShaderDescriptions=(n,r,o)=>{const a=oh.newInstance({type:"vertex",hash:n,code:t.vertexShaderTemplate}),i=oh.newInstance({type:"fragment",hash:n,code:t.fragmentShaderTemplate}),s=r.getShaderDescriptions();s.push(a),s.push(i);const l=t.vertexShaderTemplate+t.fragmentShaderTemplate,u=new RegExp("//VTK::[^:]*::","g"),c=l.match(u).filter((e,t,n)=>n.indexOf(e)===t),d=c.map(e=>"replaceShader".concat(e.substring(7,e.length-2)));for(let e=0;e<d.length;e++){const a=d[e];"replaceShaderIOStructs"!==a&&t.shaderReplacements.has(a)&&t.shaderReplacements.get(a)(n,r,o)}e.replaceShaderIOStructs(n,r,o)},e.replaceShaderIOStructs=(e,t,n)=>{const r=t.getShaderDescription("vertex");r.replaceShaderCode(null,n),t.getShaderDescription("fragment").replaceShaderCode(r)},e.replaceShaderRenderEncoder=(e,n,r)=>{t.renderEncoder.replaceShaderCode(n)},t.shaderReplacements.set("replaceShaderRenderEncoder",e.replaceShaderRenderEncoder),e.replaceShaderRenderer=(e,n,r)=>{if(!t.WebGPURenderer)return;const o=t.WebGPURenderer.getBindGroup().getShaderCode(n),a=n.getShaderDescription("vertex");let i=a.getCode();i=$p.substitute(i,"//VTK::Renderer::Dec",[o]).result,a.setCode(i);const s=n.getShaderDescription("fragment");i=s.getCode(),i=$p.substitute(i,"//VTK::Renderer::Dec",[o]).result,s.setCode(i)},t.shaderReplacements.set("replaceShaderRenderer",e.replaceShaderRenderer),e.replaceShaderMapper=(e,n,r)=>{const o=t.bindGroup.getShaderCode(n),a=n.getShaderDescription("vertex");let i=a.getCode();i=$p.substitute(i,"//VTK::Mapper::Dec",[o]).result,a.setCode(i);const s=n.getShaderDescription("fragment");s.addBuiltinInput("bool","@builtin(front_facing) frontFacing"),i=s.getCode(),i=$p.substitute(i,"//VTK::Mapper::Dec",[o]).result,s.setCode(i)},t.shaderReplacements.set("replaceShaderMapper",e.replaceShaderMapper),e.replaceShaderPosition=(e,t,n)=>{const r=t.getShaderDescription("vertex");r.addBuiltinOutput("vec4<f32>","@builtin(position) Position");let o=r.getCode();o=$p.substitute(o,"//VTK::Position::Impl",["    output.Position = rendererUBO.SCPCMatrix*vertexBC;"]).result,r.setCode(o)},t.shaderReplacements.set("replaceShaderPosition",e.replaceShaderPosition),e.replaceShaderTCoord=(e,t,n)=>{t.getShaderDescription("vertex").addOutput("vec2<f32>","tcoordVS")},t.shaderReplacements.set("replaceShaderTCoord",e.replaceShaderTCoord),e.addTextureView=e=>{t.textureViews.includes(e)||t.textureViews.push(e)},e.prepareToDraw=n=>{t.renderEncoder=n,e.updateInput(),e.updateBuffers(),e.updateBindings(),e.updatePipeline()},e.updateInput=()=>{},e.updateBuffers=()=>{},e.updateBindings=()=>{t.bindGroup.setBindables(e.getBindables())},e.computePipelineHash=()=>{},e.registerDrawCallback=n=>{n.registerDrawCallback(t.pipeline,e.draw)},e.prepareAndDraw=n=>{e.prepareToDraw(n),n.setPipeline(t.pipeline),e.draw(n)},e.draw=e=>{const n=e.getBoundPipeline();e.activateBindGroup(t.bindGroup),t.WebGPURenderer&&t.WebGPURenderer.bindUBO(e),n.bindVertexInput(e,t.vertexInput);const r=t.vertexInput.getIndexBuffer();r?e.drawIndexed(r.getIndexCount(),t.numberOfInstances,0,0,0):e.draw(t.numberOfVertices,t.numberOfInstances,0,0)},e.getBindables=()=>{const e=[...t.additionalBindables];t.UBO&&e.push(t.UBO),t.SSBO&&e.push(t.SSBO);for(let n=0;n<t.textureViews.length;n++){e.push(t.textureViews[n]);const r=t.textureViews[n].getSampler();r&&e.push(r)}return e},e.updatePipeline=()=>{e.computePipelineHash(),t.pipeline=t.device.getPipeline(t.pipelineHash),t.pipeline||(t.pipeline=th.newInstance(),t.pipeline.setDevice(t.device),t.WebGPURenderer&&t.pipeline.addBindGroupLayout(t.WebGPURenderer.getBindGroup()),t.pipeline.addBindGroupLayout(t.bindGroup),e.generateShaderDescriptions(t.pipelineHash,t.pipeline,t.vertexInput),t.pipeline.setTopology(t.topology),t.pipeline.setRenderEncoder(t.renderEncoder),t.pipeline.setVertexState(t.vertexInput.getVertexInputInformation()),t.device.createPipeline(t.pipelineHash,t.pipeline))}}(e,t)}var ph={newInstance:dn.newInstance(fh,"vtkWebGPUSimpleMapper"),extend:fh};const hh={};function mh(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,hh,n),ph.extend(e,t,n),function(e,t){t.classHierarchy.push("vtkWebGPUFullScreenQuad"),e.replaceShaderPosition=(e,t,n)=>{const r=t.getShaderDescription("vertex");r.addBuiltinOutput("vec4<f32>","@builtin(position) Position"),r.addOutput("vec4<f32>","vertexVC");let o=r.getCode();o=$p.substitute(o,"//VTK::Position::Impl",["output.tcoordVS = vec2<f32>(vertexBC.x * 0.5 + 0.5, 1.0 - vertexBC.y * 0.5 - 0.5);","output.Position = vec4<f32>(vertexBC, 1.0);","output.vertexVC = vec4<f32>(vertexBC, 1);"]).result,r.setCode(o)},t.shaderReplacements.set("replaceShaderPosition",e.replaceShaderPosition),e.updateBuffers=()=>{const e=t.device.getBufferManager().getFullScreenQuadBuffer();t.vertexInput.addBuffer(e,["vertexBC"]),t.numberOfVertices=6}}(e,t)}var gh={newInstance:dn.newInstance(mh,"vtkWebGPUFullScreenQuad"),extend:mh};var vh={BufferUsage:{Verts:0,Lines:1,Triangles:2,Strips:3,LinesFromStrips:4,LinesFromTriangles:5,Points:6,UniformArray:7,PointArray:8,NormalsFromPoints:9,Texture:10,RawVertex:11,Storage:12,Index:13},PrimitiveTypes:{Start:0,Points:0,Lines:1,Triangles:2,TriangleStrips:3,TriangleEdges:4,TriangleStripEdges:5,End:6}};const yh=["getMappedRange","mapAsync","unmap"];function bh(e,t){t.classHierarchy.push("vtkWebGPUBuffer"),e.create=(e,n)=>{t.handle=t.device.getHandle().createBuffer({size:e,usage:n,label:t.label}),t.sizeInBytes=e,t.usage=n},e.write=e=>{!function(e,t,n,r){const o=r.byteLength,a=e.createBuffer({size:o,usage:GPUBufferUsage.COPY_SRC,mappedAtCreation:!0}),i=a.getMappedRange(0,o);new Uint8Array(i).set(new Uint8Array(r)),a.unmap();const s=e.createCommandEncoder();s.copyBufferToBuffer(a,0,t,n,o);const l=s.finish();e.queue.submit([l]),a.destroy()}(t.device.getHandle(),t.handle,0,e.buffer)},e.createAndWrite=(e,n)=>{const r=4*Math.ceil(e.byteLength/4);t.handle=t.device.getHandle().createBuffer({size:r,usage:n,mappedAtCreation:!0,label:t.label}),t.sizeInBytes=r,t.usage=n,new Uint8Array(t.handle.getMappedRange()).set(new Uint8Array(e.buffer)),t.handle.unmap()};for(let n=0;n<yh.length;n++)e[yh[n]]=function(){return t.handle[yh[n]](...arguments)}}const _h={device:null,handle:null,sizeInBytes:0,strideInBytes:0,arrayInformation:null,usage:null,label:null,sourceTime:null};function Th(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,_h,n),dn.obj(e,t),dn.get(e,t,["handle","sizeInBytes","usage"]),dn.setGet(e,t,["strideInBytes","device","arrayInformation","label","sourceTime"]),bh(e,t)}var xh=u({newInstance:dn.newInstance(Th),extend:Th},vh);const{Representation:Sh}=Al,{PrimitiveTypes:wh}=vh;class Ch{constructor(){this.keys=new Uint32Array(10),this.values=new Uint32Array(10),this.count=0}clear(){this.count=0}has(e){for(let t=0;t<this.count;t++)if(this.keys[t]===e)return!0}get(e){for(let t=0;t<this.count;t++)if(this.keys[t]===e)return this.values[t]}set(e,t){this.count<9&&(this.keys[this.count]=e,this.values[this.count++]=t)}}function Ph(e,t,n){let r=e.pointIdToFlatId[t];return r<0&&(r=e.flatId,e.pointIdToFlatId[t]=r,e.flatIdToPointId[e.flatId]=t,e.flatIdToCellId[e.flatId]=n,e.flatId++),r}function Ah(e,t,n){const r=e.length;for(let i=0;i<r;i++){let o=e[i];if(n.cellProvokedMap.has(o)){n.ibo[n.iboId++]=n.cellProvokedMap.get(o);for(let a=i+1;a<i+r;a++){o=e[a%r];const i=Ph(n,o,t);n.ibo[n.iboId++]=i}return}}for(let i=0;i<r;i++){let o=e[i];if(!n.provokedPointIds[o]){let a=Ph(n,o,t);n.provokedPointIds[o]=1,n.cellProvokedMap.set(o,a),n.flatIdToCellId[a]=t,n.ibo[n.iboId++]=a;for(let s=i+1;s<i+r;s++)o=e[s%r],a=Ph(n,o,t),n.ibo[n.iboId++]=a;return}}let o=e[0],a=n.flatId;n.cellProvokedMap.set(o,a),n.flatIdToPointId[n.flatId]=o,n.flatIdToCellId[n.flatId]=t,n.flatId++,n.ibo[n.iboId++]=a;for(let i=1;i<r;i++)o=e[i],a=Ph(n,o,t),n.ibo[n.iboId++]=a}function Eh(e,t,n){const r=e.length;n.iboSize+=r;for(let o=0;o<r;o++){const t=e[o];if(n.cellProvokedMap.has(t))return}for(let o=0;o<r;o++){const t=e[o];if(!n.provokedPointIds[t])return n.provokedPointIds[t]=1,void n.cellProvokedMap.set(t,1)}n.cellProvokedMap.set(e[0],1),n.extraPoints++}let Ih;const Oh=new Uint32Array(1),Mh=new Uint32Array(2),Rh=new Uint32Array(3),Lh={anythingToPoints(e,t,n,r,o){for(let a=0;a<e;++a)Oh[0]=t[n+a],Ih(Oh,r,o)},linesToWireframe(e,t,n,r,o){for(let a=0;a<e-1;++a)Mh[0]=t[n+a],Mh[1]=t[n+a+1],Ih(Mh,r,o)},polysToWireframe(e,t,n,r,o){if(e>2)for(let a=0;a<e;++a)Mh[0]=t[n+a],Mh[1]=t[n+(a+1)%e],Ih(Mh,r,o)},stripsToWireframe(e,t,n,r,o){if(e>2){for(let a=0;a<e-1;++a)Mh[0]=t[n+a],Mh[1]=t[n+a+1],Ih(Mh,r,o);for(let a=0;a<e-2;a++)Mh[0]=t[n+a],Mh[1]=t[n+a+2],Ih(Mh,r,o)}},polysToSurface(e,t,n,r,o){for(let a=0;a<e-2;a++)Rh[0]=t[n],Rh[1]=t[n+a+1],Rh[2]=t[n+a+2],Ih(Rh,r,o)},stripsToSurface(e,t,n,r,o){for(let a=0;a<e-2;a++)Rh[0]=t[n+a],Rh[1]=t[n+a+1+a%2],Rh[2]=t[n+a+1+(a+1)%2],Ih(Rh,r,o)}};function kh(e,t){t.classHierarchy.push("vtkWebGPUIndexBuffer"),e.buildIndexBuffer=e=>{const n=e.cells,r=e.primitiveType,o=e.representation,a=e.cellOffset,i=n.getData(),s=i.length,l=function(e){switch(e){case wh.Points:return"points";case wh.Lines:return"lines";case wh.Triangles:case wh.TriangleEdges:return"polys";case wh.TriangleStripEdges:case wh.TriangleStrips:return"strips";default:return""}}(r),u=e.numberOfPoints,c={provokedPointIds:new Uint8Array(u),extraPoints:0,iboSize:0,flatId:0,iboId:0,cellProvokedMap:new Ch};let d=null;d=o===Sh.POINTS||r===wh.Points?Lh.anythingToPoints:o===Sh.WIREFRAME||r===wh.Lines?Lh["".concat(l,"ToWireframe")]:Lh["".concat(l,"ToSurface")],Ih=Eh;let f=a||0;for(let t=0;t<s;)c.cellProvokedMap.clear(),d(i[t],i,t+1,f,c),t+=i[t]+1,f++;c.flatIdToPointId=u<=65535?new Uint16Array(u+c.extraPoints):new Uint32Array(u+c.extraPoints),u+c.extraPoints<36863?c.pointIdToFlatId=new Int16Array(u):c.pointIdToFlatId=new Int32Array(u),u+c.extraPoints<=65535?(c.ibo=new Uint16Array(c.iboSize),e.format="uint16"):(c.ibo=new Uint32Array(c.iboSize),e.format="uint32"),c.flatIdToCellId=f<=65535?new Uint16Array(u+c.extraPoints):new Uint32Array(u+c.extraPoints),c.pointIdToFlatId.fill(-1),c.provokedPointIds.fill(0),Ih=Ah,f=a||0;for(let t=0;t<s;)c.cellProvokedMap.clear(),d(i[t],i,t+1,f,c),t+=i[t]+1,f++;delete c.provokedPointIds,delete c.pointIdToFlatId,e.nativeArray=c.ibo,t.flatIdToPointId=c.flatIdToPointId,t.flatIdToCellId=c.flatIdToCellId,t.flatSize=c.flatId,t.indexCount=c.iboId}}const Dh={flatIdToPointId:null,flatIdToCellId:null,flatSize:0,indexCount:0};function Bh(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Dh,n),xh.extend(e,t,n),dn.setGet(e,t,["flatIdToPointId","flatIdToCellId","flatSize","indexCount"]),kh(e,t)}var Nh=u({newInstance:dn.newInstance(Bh),extend:Bh},vh);const{BufferUsage:Vh}=vh,{vtkErrorMacro:Fh}=fn,{VtkDataTypes:Uh}=Wl;function zh(e,t,n,r,o){const a={},i=e.getFlatSize();if(!i)return a;let s=[0,0,0,0];o.shift&&(o.shift.length?s=o.shift:s.fill(o.shift));let l=[1,1,1,1];o.scale&&(o.scale.length?l=o.scale:l.fill(o.scale));const u=!!Object.prototype.hasOwnProperty.call(o,"packExtra")&&o.packExtra;let c,d=0;const f=Pt(r,i*(n+(u?1:0)));let p=e.getFlatIdToPointId();o.cellData&&(p=e.getFlatIdToCellId()),1===n?c=function(e){f[d++]=l[0]*t[e]+s[0]}:2===n?c=function(e){f[d++]=l[0]*t[e]+s[0],f[d++]=l[1]*t[e+1]+s[1]}:3!==n||u?3===n&&u?c=function(e){f[d++]=l[0]*t[e]+s[0],f[d++]=l[1]*t[e+1]+s[1],f[d++]=l[2]*t[e+2]+s[2],f[d++]=1*l[3]+s[3]}:4===n&&(c=function(e){f[d++]=l[0]*t[e]+s[0],f[d++]=l[1]*t[e+1]+s[1],f[d++]=l[2]*t[e+2]+s[2],f[d++]=l[3]*t[e+3]+s[3]}):c=function(e){f[d++]=l[0]*t[e]+s[0],f[d++]=l[1]*t[e+1]+s[1],f[d++]=l[2]*t[e+2]+s[2]};for(let h=0;h<i;h++){c(n*p[h])}return a.nativeArray=f,a}function Gh(e,t,n,r){const o=[];return Ca([e[3*r]-e[3*n],e[3*r+1]-e[3*n+1],e[3*r+2]-e[3*n+2]],[e[3*t]-e[3*n],e[3*t+1]-e[3*n+1],e[3*t+2]-e[3*n+2]],o),Aa(o),o}function Wh(e,t){function n(e){let n,r;if(e.dataArray&&!e.nativeArray&&(e.nativeArray=e.dataArray.getData()),e.usage===Vh.Index&&(n=Nh.newInstance({label:e.label}),n.setDevice(t.device),r=GPUBufferUsage.INDEX|GPUBufferUsage.COPY_DST,n.buildIndexBuffer(e),n.createAndWrite(e.nativeArray,r),n.setArrayInformation([{format:e.format}])),n||(n=xh.newInstance({label:e.label}),n.setDevice(t.device)),e.usage===Vh.UniformArray&&(r=GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST,n.createAndWrite(e.nativeArray,r)),e.usage===Vh.Storage&&(r=GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_DST,n.createAndWrite(e.nativeArray,r)),e.usage===Vh.Texture&&(r=GPUBufferUsage.COPY_SRC,n.createAndWrite(e.nativeArray,r)),e.usage===Vh.PointArray){r=GPUBufferUsage.VERTEX;const t=ih.getNativeTypeFromBufferFormat(e.format),o=zh(e.indexBuffer,e.dataArray.getData(),e.dataArray.getNumberOfComponents(),t,{packExtra:e.packExtra,shift:e.shift,scale:e.scale,cellData:e.cellData,cellOffset:e.cellOffset});n.createAndWrite(o.nativeArray,r),n.setStrideInBytes(ih.getByteStrideFromBufferFormat(e.format)),n.setArrayInformation([{offset:0,format:e.format,interpolation:e.cellData?"flat":"perspective"}])}if(e.usage===Vh.NormalsFromPoints){r=GPUBufferUsage.VERTEX;const t=ih.getNativeTypeFromBufferFormat(e.format),o=function(e,t){const n=t.getData(),r=e.getData();if(!r||!n)return null;const o=new Int8Array(4*e.getNumberOfCells()),a=r.length;let i=0;for(let s=0;s<a;){const e=Gh(n,r[s+1],r[s+2],r[s+3]);o[i++]=127*e[0],o[i++]=127*e[1],o[i++]=127*e[2],o[i++]=127,s+=r[s]+1}return o}(e.cells,e.dataArray),a=zh(e.indexBuffer,o,4,t,{cellData:!0});n.createAndWrite(a.nativeArray,r),n.setStrideInBytes(ih.getByteStrideFromBufferFormat(e.format)),n.setArrayInformation([{offset:0,format:e.format,interpolation:"flat"}])}return e.usage===Vh.RawVertex&&(r=GPUBufferUsage.VERTEX,n.createAndWrite(e.nativeArray,r),n.setStrideInBytes(ih.getByteStrideFromBufferFormat(e.format)),n.setArrayInformation([{offset:0,format:e.format}])),n.setSourceTime(e.time),n}t.classHierarchy.push("vtkWebGPUBufferManager"),e.hasBuffer=e=>t.device.hasCachedObject(e),e.getBuffer=e=>e.hash?t.device.getCachedObject(e.hash,n,e):n(e),e.getBufferForPointArray=(t,n)=>{const r=function(e){let t;switch(e.getDataType()){case Uh.UNSIGNED_CHAR:t="uint8";break;case Uh.FLOAT:t="float32";break;case Uh.UNSIGNED_INT:t="uint32";break;case Uh.INT:t="sint32";break;case Uh.DOUBLE:t="float32";break;case Uh.UNSIGNED_SHORT:t="uint16";break;case Uh.SHORT:t="sin16";break;default:t="float32"}switch(e.getNumberOfComponents()){case 2:t+="x2";break;case 3:t.includes("32")||Fh("unsupported x3 type for ".concat(t)),t+="x3";break;case 4:t+="x4"}return t}(t),o={hash:"".concat(t.getMTime(),"I").concat(n.getMTime()).concat(r),usage:Vh.PointArray,format:r,dataArray:t,indexBuffer:n};return e.getBuffer(o)},e.getFullScreenQuadBuffer=()=>{if(t.fullScreenQuadBuffer)return t.fullScreenQuadBuffer;t.fullScreenQuadBuffer=xh.newInstance(),t.fullScreenQuadBuffer.setDevice(t.device);const e=new Float32Array([-1,-1,0,1,-1,0,1,1,0,-1,-1,0,1,1,0,-1,1,0]);return t.fullScreenQuadBuffer.createAndWrite(e,GPUBufferUsage.VERTEX),t.fullScreenQuadBuffer.setStrideInBytes(12),t.fullScreenQuadBuffer.setArrayInformation([{offset:0,format:"float32x3"}]),t.fullScreenQuadBuffer}}const Hh={device:null,fullScreenQuadBuffer:null};function jh(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Hh,n),Nt(e,t),Wt(e,t,["device"]),Wh(e,t)}var Kh=u(u({newInstance:Qt(jh),extend:jh},{}),vh);const{BufferUsage:Zh}=Kh,{vtkErrorMacro:qh}=dn;const Xh={bufferEntries:null,bufferEntryNames:null,sizeInBytes:0,label:null,numberOfInstances:1};function Yh(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Xh,n),dn.obj(e,t),t._bufferEntryNames=new Map,t.bufferEntries=[],t._sendTime={},dn.obj(t._sendTime,{mtime:0}),t.bindGroupTime={},dn.obj(t.bindGroupTime,{mtime:0}),t.bindGroupLayoutEntry=t.bindGroupLayoutEntry||{buffer:{type:"read-only-storage"}},dn.get(e,t,["bindGroupTime"]),dn.setGet(e,t,["device","bindGroupLayoutEntry","label","numberOfInstances","sizeInBytes"]),function(e,t){t.classHierarchy.push("vtkWebGPUStorageBuffer"),e.addEntry=(e,n)=>{if(t._bufferEntryNames.has(e))return void qh("entry named ".concat(e," already exists"));t._bufferEntryNames.set(e,t.bufferEntries.length);const r=ih.getByteStrideFromShaderFormat(n);t.bufferEntries.push({name:e,type:n,sizeInBytes:r,offset:t.sizeInBytes,nativeType:ih.getNativeTypeFromShaderFormat(n)}),t.sizeInBytes+=r},e.send=e=>{if(!t._buffer){const n={nativeArray:t.Float32Array,usage:Zh.Storage,label:t.label};return t._buffer=e.getBufferManager().getBuffer(n),t.bindGroupTime.modified(),void t._sendTime.modified()}e.getHandle().queue.writeBuffer(t._buffer.getHandle(),0,t.arrayBuffer,0,t.sizeInBytes*t.numberOfInstances),t._sendTime.modified()},e.createView=e=>{e in t===!1&&(t.arrayBuffer||(t.arrayBuffer=new ArrayBuffer(t.sizeInBytes*t.numberOfInstances)),t[e]=dn.newTypedArray(e,t.arrayBuffer))},e.setValue=(n,r,o)=>{const a=t._bufferEntryNames.get(n);if(void 0===a)return void qh("entry named ".concat(n," not found in UBO"));const i=t.bufferEntries[a];e.createView(i.nativeType);const s=t[i.nativeType];s[(i.offset+r*t.sizeInBytes)/s.BYTES_PER_ELEMENT]=o},e.setArray=(n,r,o)=>{const a=t._bufferEntryNames.get(n);if(void 0===a)return void qh("entry named ".concat(n," not found in UBO"));const i=t.bufferEntries[a];e.createView(i.nativeType);const s=t[i.nativeType],l=(i.offset+r*t.sizeInBytes)/s.BYTES_PER_ELEMENT;for(let e=0;e<o.length;e++)s[l+e]=o[e]},e.setAllInstancesFromArray=(n,r)=>{const o=t._bufferEntryNames.get(n);if(void 0===o)return void qh("entry named ".concat(n," not found in UBO"));const a=t.bufferEntries[o];e.createView(a.nativeType);const i=t[a.nativeType],s=r.length/t.numberOfInstances;for(let e=0;e<t.numberOfInstances;e++){const n=(a.offset+e*t.sizeInBytes)/i.BYTES_PER_ELEMENT;for(let t=0;t<s;t++)i[n+t]=r[e*s+t]}},e.setAllInstancesFromArrayColorToFloat=(n,r)=>{const o=t._bufferEntryNames.get(n);if(void 0===o)return void qh("entry named ".concat(n," not found in UBO"));const a=t.bufferEntries[o];e.createView(a.nativeType);const i=t[a.nativeType],s=r.length/t.numberOfInstances;for(let e=0;e<t.numberOfInstances;e++){const n=(a.offset+e*t.sizeInBytes)/i.BYTES_PER_ELEMENT;for(let t=0;t<s;t++)i[n+t]=r[e*s+t]/255}},e.setAllInstancesFromArray3x3To4x4=(n,r)=>{const o=t._bufferEntryNames.get(n);if(void 0===o)return void qh("entry named ".concat(n," not found in UBO"));const a=t.bufferEntries[o];e.createView(a.nativeType);const i=t[a.nativeType];for(let e=0;e<t.numberOfInstances;e++){const n=(a.offset+e*t.sizeInBytes)/i.BYTES_PER_ELEMENT;for(let t=0;t<3;t++)for(let o=0;o<3;o++)i[n+4*t+o]=r[9*e+3*t+o]}},e.getSendTime=()=>t._sendTime.getMTime(),e.getShaderCode=(e,n)=>{const r=["struct ".concat(t.label,"StructEntry\n{")];for(let o=0;o<t.bufferEntries.length;o++){const e=t.bufferEntries[o];r.push("  ".concat(e.name,": ").concat(e.type,","))}return r.push("\n};\nstruct ".concat(t.label,"Struct\n{\n  values: array<").concat(t.label,"StructEntry>,\n};\n@binding(").concat(e,") @group(").concat(n,") var<storage, read> ").concat(t.label,": ").concat(t.label,"Struct;\n")),r.join("\n")},e.getBindGroupEntry=()=>({resource:{buffer:t._buffer.getHandle()}}),e.clearData=()=>{t.numberOfInstances=0,t.sizeInBytes=0,t.bufferEntries=[],t._bufferEntryNames=new Map,t._buffer=null,delete t.arrayBuffer,delete t.Float32Array}}(e,t)}var Qh={newInstance:dn.newInstance(Yh,"vtkWebGPUStorageBuffer"),extend:Yh};const{BufferUsage:$h}=Kh,{vtkErrorMacro:Jh}=dn;const em={bufferEntries:null,bufferEntryNames:null,sizeInBytes:0,label:null,bindGroupLayoutEntry:null,bindGroupEntry:null};function tm(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,em,n),dn.obj(e,t),t._bufferEntryNames=new Map,t.bufferEntries=[],t.bindGroupLayoutEntry=t.bindGroupLayoutEntry||{buffer:{type:"uniform"}},t.sendTime={},dn.obj(t.sendTime,{mtime:0}),t.bindGroupTime={},dn.obj(t.bindGroupTime,{mtime:0}),t.sendDirty=!0,t.sortDirty=!0,dn.get(e,t,["binding","bindGroupTime"]),dn.setGet(e,t,["bindGroupLayoutEntry","device","label","sizeInBytes"]),function(e,t){t.classHierarchy.push("vtkWebGPUUniformBuffer"),e.addEntry=(e,n)=>{t._bufferEntryNames.has(e)?Jh("entry named ".concat(e," already exists")):(t.sortDirty=!0,t._bufferEntryNames.set(e,t.bufferEntries.length),t.bufferEntries.push({name:e,type:n,sizeInBytes:ih.getByteStrideFromShaderFormat(n),offset:-1,nativeType:ih.getNativeTypeFromShaderFormat(n),packed:!1}))},e.sortBufferEntries=()=>{if(!t.sortDirty)return;let e=0;const n=[];let r=4;for(let o=0;o<t.bufferEntries.length;o++){const e=t.bufferEntries[o];e.sizeInBytes%16===0&&(r=Math.max(16,r)),e.sizeInBytes%8===0&&(r=Math.max(8,r))}for(let o=0;o<t.bufferEntries.length;o++){const r=t.bufferEntries[o];!1===r.packed&&r.sizeInBytes%16===0&&(r.packed=!0,r.offset=e,n.push(r),e+=r.sizeInBytes)}for(let o=0;o<t.bufferEntries.length;o++){const r=t.bufferEntries[o];if(!1===r.packed&&12===r.sizeInBytes)for(let o=0;o<t.bufferEntries.length;o++){const a=t.bufferEntries[o];if(!1===a.packed&&4===a.sizeInBytes){r.packed=!0,r.offset=e,n.push(r),e+=r.sizeInBytes,a.packed=!0,a.offset=e,n.push(a),e+=a.sizeInBytes;break}}}for(let o=0;o<t.bufferEntries.length;o++){const r=t.bufferEntries[o];if(!r.packed&&r.sizeInBytes%8===0)for(let a=o+1;a<t.bufferEntries.length;a++){const o=t.bufferEntries[a];if(!o.packed&&o.sizeInBytes%8===0){r.packed=!0,r.offset=e,n.push(r),e+=r.sizeInBytes,o.packed=!0,o.offset=e,n.push(o),e+=o.sizeInBytes;break}}}for(let o=0;o<t.bufferEntries.length;o++){const r=t.bufferEntries[o];if(!r.packed&&r.sizeInBytes%8===0){let o=!1;for(let a=0;!o&&a<t.bufferEntries.length;a++){const i=t.bufferEntries[a];if(!i.packed&&4===i.sizeInBytes)for(let s=a+1;s<t.bufferEntries.length;s++){const a=t.bufferEntries[s];if(!a.packed&&4===a.sizeInBytes){r.packed=!0,r.offset=e,n.push(r),e+=r.sizeInBytes,i.packed=!0,i.offset=e,n.push(i),e+=i.sizeInBytes,a.packed=!0,a.offset=e,n.push(a),e+=a.sizeInBytes,o=!0;break}}}}}for(let o=0;o<t.bufferEntries.length;o++){const r=t.bufferEntries[o];!r.packed&&r.sizeInBytes>4&&(r.packed=!0,r.offset=e,n.push(r),e+=r.sizeInBytes)}for(let o=0;o<t.bufferEntries.length;o++){const r=t.bufferEntries[o];r.packed||(r.packed=!0,r.offset=e,n.push(r),e+=r.sizeInBytes)}t.bufferEntries=n,t._bufferEntryNames.clear();for(let o=0;o<t.bufferEntries.length;o++)t._bufferEntryNames.set(t.bufferEntries[o].name,o);t.sizeInBytes=e,t.sizeInBytes=r*Math.ceil(t.sizeInBytes/r),t.sortDirty=!1},e.sendIfNeeded=e=>{if(!t.UBO){const n={nativeArray:t.Float32Array,usage:$h.UniformArray,label:t.label};t.UBO=e.getBufferManager().getBuffer(n),t.bindGroupTime.modified(),t.sendDirty=!1}t.sendDirty&&(e.getHandle().queue.writeBuffer(t.UBO.getHandle(),0,t.arrayBuffer,0,t.sizeInBytes),t.sendDirty=!1),t.sendTime.modified()},e.createView=e=>{e in t===!1&&(t.arrayBuffer||(t.arrayBuffer=new ArrayBuffer(t.sizeInBytes)),t[e]=dn.newTypedArray(e,t.arrayBuffer))},e.setValue=(n,r)=>{e.sortBufferEntries();const o=t._bufferEntryNames.get(n);if(void 0===o)return void Jh("entry named ".concat(n," not found in UBO"));const a=t.bufferEntries[o];e.createView(a.nativeType);const i=t[a.nativeType];a.lastValue!==r&&(i[a.offset/i.BYTES_PER_ELEMENT]=r,t.sendDirty=!0),a.lastValue=r},e.setArray=(n,r)=>{e.sortBufferEntries();const o=t._bufferEntryNames.get(n);if(void 0===o)return void Jh("entry named ".concat(n," not found in UBO"));const a=t.bufferEntries[o];e.createView(a.nativeType);const i=t[a.nativeType];let s=!1;for(let e=0;e<r.length;e++)a.lastValue&&a.lastValue[e]===r[e]||(i[a.offset/i.BYTES_PER_ELEMENT+e]=r[e],s=!0);s&&(t.sendDirty=!0,a.lastValue=[...r])},e.getBindGroupEntry=()=>({resource:{buffer:t.UBO.getHandle()}}),e.getSendTime=()=>t.sendTime.getMTime(),e.getShaderCode=(n,r)=>{e.sortBufferEntries();const o=["struct ".concat(t.label,"Struct\n{")];for(let e=0;e<t.bufferEntries.length;e++){const n=t.bufferEntries[e];o.push("  ".concat(n.name,": ").concat(n.type,","))}return o.push("};\n@binding(".concat(n,") @group(").concat(r,") var<uniform> ").concat(t.label,": ").concat(t.label,"Struct;")),o.join("\n")}}(e,t)}var nm={newInstance:dn.newInstance(tm,"vtkWebGPUUniformBuffer"),extend:tm};const{vtkDebugMacro:rm}=fn,om="\n//VTK::Renderer::Dec\n\n//VTK::Mapper::Dec\n\n//VTK::TCoord::Dec\n\n//VTK::RenderEncoder::Dec\n\n//VTK::IOStructs::Dec\n\n@fragment\nfn main(\n//VTK::IOStructs::Input\n)\n//VTK::IOStructs::Output\n{\n  var output: fragmentOutput;\n\n  var computedColor: vec4<f32> = mapperUBO.BackgroundColor;\n\n  //VTK::RenderEncoder::Impl\n  return output;\n}\n",am=new Float64Array(16),im=new Float64Array(16);function sm(e){return e.getPositional()?e.getConeAngle()>=90?0:2:1}const lm={bindGroup:null,selector:null,renderEncoder:null,recenterThreshold:20,suppressClear:!1,stabilizedCenter:[0,0,0]};function um(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,lm,n),gn.extend(e,t,n),t.UBO=nm.newInstance({label:"rendererUBO"}),t.UBO.addEntry("WCVCMatrix","mat4x4<f32>"),t.UBO.addEntry("SCPCMatrix","mat4x4<f32>"),t.UBO.addEntry("PCSCMatrix","mat4x4<f32>"),t.UBO.addEntry("SCVCMatrix","mat4x4<f32>"),t.UBO.addEntry("VCPCMatrix","mat4x4<f32>"),t.UBO.addEntry("WCVCNormals","mat4x4<f32>"),t.UBO.addEntry("viewportSize","vec2<f32>"),t.UBO.addEntry("LightCount","i32"),t.UBO.addEntry("MaxEnvironmentMipLevel","f32"),t.UBO.addEntry("BackgroundDiffuseStrength","f32"),t.UBO.addEntry("BackgroundSpecularStrength","f32"),t.UBO.addEntry("cameraParallel","u32"),t.SSBO=Qh.newInstance({label:"rendererLightSSBO"}),t.lightTimeString="",t.bindGroup=Kp.newInstance({label:"rendererBG"}),t.bindGroup.setBindables([t.UBO,t.SSBO]),t.tmpMat4=B(new Float64Array(16)),t.stabilizedTime={},Nt(t.stabilizedTime,{mtime:0}),Ft(e,t,["bindGroup","stabilizedTime"]),Ht(e,t,["stabilizedCenter"]),Wt(e,t,["renderEncoder","selector","suppressClear","UBO"]),function(e,t){t.classHierarchy.push("vtkWebGPURenderer"),e.buildPass=n=>{if(n){if(!t.renderable)return;t.camera=t.renderable.getActiveCamera(),e.updateLights(),e.prepareNodes(),e.addMissingNode(t.camera),e.addMissingNodes(t.renderable.getViewPropsWithNestedProps()),e.removeUnusedNodes(),t.webgpuCamera=e.getViewNodeFor(t.camera),e.updateStabilizedMatrix()}},e.updateStabilizedMatrix=()=>{const e=t.camera.getClippingRange(),n=t.camera.getPositionByReference(),r=[],o=[];Hn(o,t.camera.getDirectionOfProjectionByReference(),.5*(e[0]+e[1])),Gn(r,n,o),Qn(o,r,t.stabilizedCenter),Jn(o)/(e[1]-e[0])>t.recenterThreshold&&(t.stabilizedCenter=r,t.stabilizedTime.modified())},e.updateLights=()=>{let e=0;const n=t.renderable.getLightsByReference();for(let t=0;t<n.length;++t)n[t].getSwitch()>0&&e++;return e||(rm("No lights are on, creating one."),t.renderable.createLight()),e},e.updateUBO=()=>{const n=t.UBO.getSendTime();if(t._parent.getMTime()>n||e.getMTime()>n||t.camera.getMTime()>n||t.renderable.getMTime()>n){var r;const n=t.webgpuCamera.getKeyMatrices(e);t.UBO.setArray("WCVCMatrix",n.wcvc),t.UBO.setArray("SCPCMatrix",n.scpc),t.UBO.setArray("PCSCMatrix",n.pcsc),t.UBO.setArray("SCVCMatrix",n.scvc),t.UBO.setArray("VCPCMatrix",n.vcpc),t.UBO.setArray("WCVCNormals",n.normalMatrix),t.UBO.setValue("LightCount",t.renderable.getLights().length),t.UBO.setValue("MaxEnvironmentMipLevel",null===(r=t.renderable.getEnvironmentTexture())||void 0===r?void 0:r.getMipLevel()),t.UBO.setValue("BackgroundDiffuseStrength",t.renderable.getEnvironmentTextureDiffuseStrength()),t.UBO.setValue("BackgroundSpecularStrength",t.renderable.getEnvironmentTextureSpecularStrength());const o=e.getYInvertedTiledSizeAndOrigin();t.UBO.setArray("viewportSize",[o.usize,o.vsize]),t.UBO.setValue("cameraParallel",t.camera.getParallelProjection());const a=t._parent.getDevice();t.UBO.sendIfNeeded(a)}},e.updateSSBO=()=>{const n=t.renderable.getLights(),r=t.webgpuCamera.getKeyMatrices(e);let o="".concat(t.renderable.getMTime());for(let e=0;e<n.length;e++)o+=n[e].getMTime();if(o!==t.lightTimeString){const e=new Float32Array(4*n.length),o=new Float32Array(4*n.length),a=new Float32Array(4*n.length),i=new Float32Array(4*n.length);for(let t=0;t<n.length;t++){const s=4*t,l=n[t].getPosition();qn(l,l,r.wcvc),e[s]=l[0],e[s+1]=l[1],e[s+2]=l[2],e[s+3]=0,o[s]=-n[t].getDirection()[0],o[s+1]=-n[t].getDirection()[1],o[s+2]=-n[t].getDirection()[2],o[s+3]=0,a[s]=n[t].getColor()[0],a[s+1]=n[t].getColor()[1],a[s+2]=n[t].getColor()[2],a[s+3]=5*n[t].getIntensity(),i[s]=sm(n[t]),i[s+1]=Math.cos(Yo(n[t].getConeAngle())),i[s+2]=Math.cos(Yo(n[t].getConeAngle()+n[t].getConeFalloff())),i[s+3]=0}t.SSBO.clearData(),t.SSBO.setNumberOfInstances(n.length),t.SSBO.addEntry("LightPos","vec4<f32>"),t.SSBO.addEntry("LightDir","vec4<f32>"),t.SSBO.addEntry("LightColor","vec4<f32>"),t.SSBO.addEntry("LightData","vec4<f32>"),t.SSBO.setAllInstancesFromArray("LightPos",e),t.SSBO.setAllInstancesFromArray("LightDir",o),t.SSBO.setAllInstancesFromArray("LightColor",a),t.SSBO.setAllInstancesFromArray("LightData",i);const s=t._parent.getDevice();t.SSBO.send(s)}t.lightTimeString=o},e.scissorAndViewport=t=>{const n=e.getYInvertedTiledSizeAndOrigin();t.getHandle().setViewport(n.lowerLeftU,n.lowerLeftV,n.usize,n.vsize,0,1),t.getHandle().setScissorRect(n.lowerLeftU,n.lowerLeftV,n.usize,n.vsize)},e.bindUBO=e=>{e.activateBindGroup(t.bindGroup)},e.opaquePass=n=>{n?(t.renderEncoder.begin(t._parent.getCommandEncoder()),e.updateUBO(),e.updateSSBO()):(e.scissorAndViewport(t.renderEncoder),e.clear(),t.renderEncoder.end())},e.clear=()=>{var n;if(t.renderable.getTransparent()||t.suppressClear)return;const r=t._parent.getDevice();if(!t.clearFSQ){t.clearFSQ=gh.newInstance(),t.clearFSQ.setDevice(r),t.clearFSQ.setPipelineHash("clearfsq"),t.clearFSQ.setFragmentShaderTemplate(om);const e=nm.newInstance({label:"mapperUBO"});e.addEntry("FSQMatrix","mat4x4<f32>"),e.addEntry("BackgroundColor","vec4<f32>"),t.clearFSQ.setUBO(e),t.backgroundTex=t.renderable.getEnvironmentTexture()}if("clearfsqwithtexture"!==t.clearFSQ.getPipelineHash()&&t.renderable.getUseEnvironmentTextureAsBackground()&&null!==(n=t.backgroundTex)&&void 0!==n&&n.getImageLoaded()){t.clearFSQ.setFragmentShaderTemplate("\nfn vecToRectCoord(dir: vec3<f32>) -> vec2<f32> {\n  var tau: f32 = 6.28318530718;\n  var pi: f32 = 3.14159265359;\n  var out: vec2<f32> = vec2<f32>(0.0);\n\n  out.x = atan2(dir.z, dir.x) / tau;\n  out.x += 0.5;\n\n  var phix: f32 = length(vec2(dir.x, dir.z));\n  out.y = atan2(dir.y, phix) / pi + 0.5;\n\n  return out;\n}\n\n//VTK::Renderer::Dec\n\n//VTK::Mapper::Dec\n\n//VTK::TCoord::Dec\n\n//VTK::RenderEncoder::Dec\n\n//VTK::IOStructs::Dec\n\n@fragment\nfn main(\n//VTK::IOStructs::Input\n)\n//VTK::IOStructs::Output\n{\n  var output: fragmentOutput;\n\n  var tcoord: vec4<f32> = vec4<f32>(input.vertexVC.xy, -1, 1);\n  var V: vec4<f32> = normalize(mapperUBO.FSQMatrix * tcoord); // vec2<f32>((input.tcoordVS.x - 0.5) * 2, -(input.tcoordVS.y - 0.5) * 2);\n  // textureSampleLevel gets rid of some ugly artifacts\n  var background = textureSampleLevel(EnvironmentTexture, EnvironmentTextureSampler, vecToRectCoord(V.xyz), 0.0);\n  var computedColor: vec4<f32> = vec4<f32>(background.rgb, 1);\n\n  //VTK::RenderEncoder::Impl\n  return output;\n}\n");const e=nm.newInstance({label:"mapperUBO"});e.addEntry("FSQMatrix","mat4x4<f32>"),e.addEntry("BackgroundColor","vec4<f32>"),t.clearFSQ.setUBO(e);const n=r.getTextureManager().getTextureForVTKTexture(t.backgroundTex,"EnvironmentTexture");if(n.getReady()){const e=n.createView("EnvironmentTexture");t.clearFSQ.setTextureViews([e]),t.backgroundTexLoaded=!0;const o=t.backgroundTex.getInterpolate()?"linear":"nearest";e.addSampler(r,{addressModeU:"repeat",addressModeV:"clamp-to-edge",addressModeW:"repeat",minFilter:o,magFilter:o,mipmapFilter:"linear"})}t.clearFSQ.setPipelineHash("clearfsqwithtexture")}else if("clearfsqwithtexture"===t.clearFSQ.getPipelineHash()&&!t.renderable.getUseEnvironmentTextureAsBackground()){t.clearFSQ=gh.newInstance(),t.clearFSQ.setDevice(r),t.clearFSQ.setPipelineHash("clearfsq"),t.clearFSQ.setFragmentShaderTemplate(om);const e=nm.newInstance({label:"mapperUBO"});e.addEntry("FSQMatrix","mat4x4<f32>"),e.addEntry("BackgroundColor","vec4<f32>"),t.clearFSQ.setUBO(e)}const o=t.webgpuCamera.getKeyMatrices(e),a=t.renderable.getBackgroundByReference();t.clearFSQ.getUBO().setArray("BackgroundColor",a),N(im,o.normalMatrix),Pe(am,o.scvc,o.pcsc),Pe(am,im,am),t.clearFSQ.getUBO().setArray("FSQMatrix",am),t.clearFSQ.getUBO().sendIfNeeded(r),t.clearFSQ.prepareAndDraw(t.renderEncoder)},e.translucentPass=n=>{n?t.renderEncoder.begin(t._parent.getCommandEncoder()):(e.scissorAndViewport(t.renderEncoder),t.renderEncoder.end())},e.volumeDepthRangePass=n=>{n?t.renderEncoder.begin(t._parent.getCommandEncoder()):(e.scissorAndViewport(t.renderEncoder),t.renderEncoder.end())},e.getAspectRatio=()=>{const e=t._parent.getSizeByReference(),n=t.renderable.getViewportByReference();return e[0]*(n[2]-n[0])/((n[3]-n[1])*e[1])},e.convertToOpenGLDepth=e=>t.webgpuCamera.convertToOpenGLDepth(e),e.getYInvertedTiledSizeAndOrigin=()=>{const n=e.getTiledSizeAndOrigin(),r=t._parent.getSizeByReference();return n.lowerLeftV=r[1]-n.vsize-n.lowerLeftV,n},e.getTiledSizeAndOrigin=()=>{const e=t.renderable.getViewportByReference(),n=[0,0,1,1],r=e[0]-n[0],o=e[1]-n[1],a=t._parent.normalizedDisplayToDisplay(r,o),i=Math.round(a[0]),s=Math.round(a[1]),l=e[2]-n[0],u=e[3]-n[1],c=t._parent.normalizedDisplayToDisplay(l,u);let d=Math.round(c[0])-i,f=Math.round(c[1])-s;return d<0&&(d=0),f<0&&(f=0),{usize:d,vsize:f,lowerLeftU:i,lowerLeftV:s}},e.getPropFromID=e=>{for(let n=0;n<t.children.length;n++)if((t.children[n].getPropID?t.children[n].getPropID():-1)===e)return t.children[n];return null},e.getStabilizedTime=()=>t.stabilizedTime.getMTime(),e.releaseGraphicsResources=()=>{null!==t.selector&&t.selector.releaseGraphicsResources()}}(e,t)}const cm=Qt(um,"vtkWebGPURenderer");Np("vtkRenderer",cm);const{CoordinateSystem:dm}=hl;const fm={keyMatricesTime:null,keyMatrices:null,propID:void 0,bufferShift:void 0};function pm(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,fm,n),gn.extend(e,t,n),t.keyMatricesTime={},dn.obj(t.keyMatricesTime,{mtime:0}),t.keyMatrices={normalMatrix:new Float64Array(16),bcwc:new Float64Array(16),bcsc:new Float64Array(16)},dn.get(e,t,["propID","keyMatricesTime"]),t.bufferShift=[0,0,0,0],function(e,t){t.classHierarchy.push("vtkWebGPUActor"),e.buildPass=n=>{n&&(t.WebGPURenderer=e.getFirstAncestorOfType("vtkWebGPURenderer"),t.WebGPURenderWindow=t.WebGPURenderer.getFirstAncestorOfType("vtkWebGPURenderWindow"),void 0===t.propID&&(t.propID=t.WebGPURenderWindow.getUniquePropID()),e.prepareNodes(),e.addMissingNode(t.renderable.getMapper()),e.removeUnusedNodes())},e.traverseOpaquePass=n=>{t.renderable&&t.renderable.getNestedVisibility()&&t.renderable.getIsOpaque()&&(!t.WebGPURenderer.getSelector()||t.renderable.getNestedPickable())&&(e.apply(n,!0),t.children[0]&&t.children[0].traverse(n),e.apply(n,!1))},e.traverseTranslucentPass=n=>{!t.renderable||!t.renderable.getNestedVisibility()||t.renderable.getIsOpaque()||t.WebGPURenderer.getSelector()&&!t.renderable.getNestedPickable()||(e.apply(n,!0),t.children[0]&&t.children[0].traverse(n),e.apply(n,!1))},e.queryPass=(e,n)=>{if(e){if(!t.renderable||!t.renderable.getVisibility())return;t.renderable.getIsOpaque()?n.incrementOpaqueActorCount():n.incrementTranslucentActorCount()}},e.getBufferShift=n=>(e.getKeyMatrices(n),t.bufferShift),e.getKeyMatrices=e=>{if(Math.max(t.renderable.getMTime(),e.getStabilizedTime())>t.keyMatricesTime.getMTime()){t.renderable.computeMatrix();const n=t.renderable.getMatrix();t.bufferShift[0]=n[3],t.bufferShift[1]=n[7],t.bufferShift[2]=n[11];const r=e.getStabilizedCenterByReference();t.renderable.getCoordinateSystem()===dm.WORLD&&(t.bufferShift[0]-=r[0],t.bufferShift[1]-=r[1],t.bufferShift[2]-=r[2]),N(t.keyMatrices.bcwc,n),t.renderable.getIsIdentity()?B(t.keyMatrices.normalMatrix):(L(t.keyMatrices.normalMatrix,t.keyMatrices.bcwc),t.keyMatrices.normalMatrix[3]=0,t.keyMatrices.normalMatrix[7]=0,t.keyMatrices.normalMatrix[11]=0,V(t.keyMatrices.normalMatrix,t.keyMatrices.normalMatrix),N(t.keyMatrices.normalMatrix,t.keyMatrices.normalMatrix)),G(t.keyMatrices.bcwc,t.keyMatrices.bcwc,[-t.bufferShift[0],-t.bufferShift[1],-t.bufferShift[2]]),t.renderable.getCoordinateSystem()===dm.WORLD?G(t.keyMatrices.bcsc,t.keyMatrices.bcwc,[-r[0],-r[1],-r[2]]):L(t.keyMatrices.bcsc,t.keyMatrices.bcwc),t.keyMatricesTime.modified()}return t.keyMatrices}}(e,t)}const hm=dn.newInstance(pm);Np("vtkActor",hm);const{CoordinateSystem:mm}=hl;const gm={keyMatricesTime:null,keyMatrices:null,propID:void 0,bufferShift:void 0};function vm(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,gm,n),gn.extend(e,t,n),t.keyMatricesTime={},dn.obj(t.keyMatricesTime,{mtime:0}),t.keyMatrices={normalMatrix:new Float64Array(16),bcwc:new Float64Array(16),bcsc:new Float64Array(16)},dn.get(e,t,["propID","keyMatricesTime"]),t.bufferShift=[0,0,0,0],function(e,t){t.classHierarchy.push("vtkWebGPUActor2D"),e.buildPass=n=>{n&&(t.WebGPURenderer=e.getFirstAncestorOfType("vtkWebGPURenderer"),t.WebGPURenderWindow=t.WebGPURenderer.getFirstAncestorOfType("vtkWebGPURenderWindow"),void 0===t.propID&&(t.propID=t.WebGPURenderWindow.getUniquePropID()),e.prepareNodes(),e.addMissingNode(t.renderable.getMapper()),e.removeUnusedNodes())},e.traverseOpaquePass=n=>{t.renderable&&t.renderable.getNestedVisibility()&&t.renderable.getIsOpaque()&&(!t.WebGPURenderer.getSelector()||t.renderable.getNestedPickable())&&(e.apply(n,!0),t.children[0]&&t.children[0].traverse(n),e.apply(n,!1))},e.traverseTranslucentPass=n=>{!t.renderable||!t.renderable.getNestedVisibility()||t.renderable.getIsOpaque()||t.WebGPURenderer.getSelector()&&!t.renderable.getNestedPickable()||(e.apply(n,!0),t.children[0]&&t.children[0].traverse(n),e.apply(n,!1))},e.queryPass=(e,n)=>{if(e){if(!t.renderable||!t.renderable.getVisibility())return;t.renderable.getIsOpaque()?n.incrementOpaqueActorCount():n.incrementTranslucentActorCount()}},e.getBufferShift=n=>(e.getKeyMatrices(n),t.bufferShift),e.getKeyMatrices=e=>{if(Math.max(t.renderable.getMTime(),e.getStabilizedTime())>t.keyMatricesTime.getMTime()){t.bufferShift[0]=0,t.bufferShift[1]=0,t.bufferShift[2]=0;const n=e.getStabilizedCenterByReference();t.renderable.getCoordinateSystem()===mm.WORLD&&(t.bufferShift[0]-=n[0],t.bufferShift[1]-=n[1],t.bufferShift[2]-=n[2]),B(t.keyMatrices.bcwc),B(t.keyMatrices.normalMatrix),G(t.keyMatrices.bcwc,t.keyMatrices.bcwc,[-t.bufferShift[0],-t.bufferShift[1],-t.bufferShift[2]]),t.renderable.getCoordinateSystem()===mm.WORLD?G(t.keyMatrices.bcsc,t.keyMatrices.bcwc,[-n[0],-n[1],-n[2]]):L(t.keyMatrices.bcsc,t.keyMatrices.bcwc),t.keyMatricesTime.modified()}return t.keyMatrices}}(e,t)}const ym=dn.newInstance(vm);Np("vtkActor2D",ym);const bm={};function _m(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,bm,n),gn.extend(e,t,n),t.CubeAxesActorHelper=Zd.newCubeAxesActorHelper(),function(e,t){t.classHierarchy.push("vtkWebGPUCubeAxesActor"),e.buildPass=n=>{n&&(t.WebGPURenderer=e.getFirstAncestorOfType("vtkWebGPURenderer"),t.WebGPURenderWindow=t.WebGPURenderer.getParent(),t.CubeAxesActorHelper.getRenderable()||t.CubeAxesActorHelper.setRenderable(t.renderable),e.prepareNodes(),e.addMissingNode(t.CubeAxesActorHelper.getTmActor()),e.addMissingNode(t.renderable.getGridActor()),e.removeUnusedNodes())},e.opaquePass=(e,n)=>{if(e){const e=t.WebGPURenderer?t.WebGPURenderer.getRenderable().getActiveCamera():null,n=t.WebGPURenderer.getTiledSizeAndOrigin();t.CubeAxesActorHelper.updateAPISpecificData([n.usize,n.vsize],e,t.WebGPURenderWindow.getRenderable())}}}(e,t)}const Tm=Qt(_m,"vtkWebGPUCubeAxesActor");Np("vtkCubeAxesActor",Tm);const{DisplayLocation:xm}=lp;const Sm={color:[1,1,1],opacity:1,pointSize:1,lineWidth:1,representation:_l.SURFACE,displayLocation:xm.FOREGROUND};function wm(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Sm,n),dn.obj(e,t),dn.setGet(e,t,["opacity","lineWidth","pointSize","displayLocation","representation"]),dn.setGetArray(e,t,["color"],3),function(e,t){t.classHierarchy.push("vtkProperty2D"),e.setDisplayLocationToBackground=()=>e.setDisplayLocation(xm.BACKGROUND),e.setDisplayLocationToForeground=()=>e.setDisplayLocation(xm.FOREGROUND),e.setRepresentationToWireframe=()=>e.setRepresentation(_l.WIREFRAME),e.setRepresentationToSurface=()=>e.setRepresentation(_l.SURFACE),e.setRepresentationToPoints=()=>e.setRepresentation(_l.POINTS),e.getRepresentationAsString=()=>dn.enumToString(_l,t.representation)}(e,t)}var Cm=u({newInstance:dn.newInstance(wm,"vtkProperty2D"),extend:wm},lp);const{BufferUsage:Pm,PrimitiveTypes:Am}=Kh,{Representation:Em}=Al,{ScalarMode:Im}=cc,{CoordinateSystem:Om}=hl,{DisplayLocation:Mm}=Cm;function Rm(e){return e.indexOf("edge")>=0}const Lm={is2D:!1,cellArray:null,currentInput:null,cellOffset:0,primitiveType:0,colorTexture:null,renderEncoder:null,textures:null};function km(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Lm,n),ph.extend(e,t,n),t.fragmentShaderTemplate='\nstruct PBRData {\n  diffuse: vec3<f32>,\n  specular: vec3<f32>,\n}\n\nstruct Material {\n  ior: f32,\n  roughness: f32,\n  metallic: f32,\n  base: vec3<f32>,\n};\n\nstruct DirectionalLight {\n  direction: vec3<f32>,\n  color: vec3<f32>,\n};\n\nstruct PointLight {\n  position: vec3<f32>,\n  color: vec3<f32>,\n};\n\nstruct SpotLight {\n  position: vec3<f32>,\n  direction: vec3<f32>,\n  cones: vec2<f32>,\n  color: vec3<f32>,\n};\n\nconst pi: f32 = 3.14159265359;\n\n// Dot product with the max already in it\nfn mdot(a: vec3<f32>, b: vec3<f32>) -> f32 {\n  return max(0.0, dot(a, b));\n}\n// Dot product with a max in it that does not allow for negative values\n// Physically based rendering is accurate as long as normals are accurate,\n// however this is pretty often not the case. In order to prevent negative\n// values from ruining light calculations and creating zones of zero light,\n// this remapping is used, which smoothly clamps the dot product between\n// zero and one while still maintaining a good amount of accuracy.\nfn cdot(a: vec3<f32>, b: vec3<f32>) -> f32 {\n  var d: f32 = max(0.0, dot(a, b));\n  d = pow((d + 1.0) / 2.0, 2.6);\n  return d;\n}\n\n// Lambertian diffuse model\nfn lambertDiffuse(base: vec3<f32>, N: vec3<f32>, L: vec3<f32>) -> vec3<f32> {\n  var NdotL: f32 = mdot(N, L);\n  NdotL = pow(NdotL, 1.5);\n  return (base/pi)*NdotL;\n}\n\n// Yasuhiro Fujii improvement on the Oren-Nayar model\n// https://mimosa-pudica.net/improved-oren-nayar.html\n// p is surface color, o is roughness\nfn fujiiOrenNayar(p: vec3<f32>, o: f32, N: vec3<f32>, L: vec3<f32>, V: vec3<f32>) -> vec3<f32> {\n  var invpi: f32 = 0.31830988618; // 1/pi\n\n  var o2 = o*o;\n  var NdotL: f32 = mdot(N, L);\n  NdotL = pow(NdotL, 1.5); // Less physically accurate, but hides the "seams" between lights better\n\n  var NdotV: f32 = mdot(N, V);\n  var LdotV: f32 = mdot(L, V);\n\n  var s: f32 = LdotV - NdotL*NdotV;\n  var t: f32 = mix(1.0, max(NdotL, NdotV), step(0.0, s)); // Mix with step is the equivalent of an if statement\n  var A: vec3<f32> = 0.5*(o2 / (o2 + 0.33)) + 0.17*p*(o2 / (o2 + 0.13));\n  A = invpi*(1 - A);\n  var B: f32 = 0.45*(o2 / (o2 + 0.09));\n  B = invpi*B;\n\n  return p*NdotL*(A + B*(s/t));\n}\n\n// Fresnel portion of BRDF (IOR only, simplified)\nfn schlickFresnelIOR(V: vec3<f32>, N: vec3<f32>, ior: f32, k: f32) -> f32 {\n  var NdotV: f32 = mdot(V, N);\n  var F0: f32 = (pow((ior - 1.0), 2.0) + k*k) / (pow((ior + 1.0), 2.0) + k*k); // This takes into account the roughness, which the other one does not\n  return F0 + (1.0 - F0) * pow((1.0-NdotV), 5.0);\n}\n\n// Fresnel portion of BRDF (Color ior, better)\nfn schlickFresnelRGB(V: vec3<f32>, N: vec3<f32>, F0: vec3<f32>) -> vec3<f32> {\n  var NdotV: f32 = mdot(V, N);\n  return F0 + (1.0 - F0) * pow((1-NdotV), 5.0);\n}\n\n// Normal portion of BRDF\n// https://learnopengl.com/PBR/Theory\n// Trowbridge-Reitz GGX functions: normal, halfway, roughness^2\nfn trGGX(N: vec3<f32>, H: vec3<f32>, a: f32) -> f32 {\n  var a2: f32 = a*a;\n  var NdotH = mdot(N, H);\n  var NdotH2 = NdotH*NdotH;\n\n  var denom: f32 = NdotH2 * (a2 - 1.0) + 1.0;\n\n  return a2 / max((pi*denom*denom), 0.000001);\n}\n\n// A VERY bad approximation of anisotropy. Real anisotropic calculations require tangent and bitangent\nfn anisotrophicTrGGX(N: vec3<f32>, H: vec3<f32>, O: vec3<f32>, s: f32, a: f32) -> f32 {\n  var Op: vec3<f32> = (rendererUBO.WCVCNormals * vec4<f32>(normalize(O) * s, 0.)).xyz;\n\n  var ggx1: f32 = trGGX(N + Op*s, H, a);\n  var ggx2: f32 = trGGX(N - Op*s, H, a);\n  return (0.5 * ggx1 + 0.5 * ggx2);\n}\n\n// Geometry portion of BRDF\nfn schlickGGX(N: vec3<f32>, X: vec3<f32>, k: f32) -> f32 {\n  var NdotX = cdot(N, X);\n  return NdotX / max(0.000001, (NdotX*(1.0-k) + k));\n}\n\nfn smithSurfaceRoughness(N: vec3<f32>, V: vec3<f32>, L: vec3<f32>, k: f32) -> f32 {\n  var ggx1: f32 = min(1.0, schlickGGX(N, V, k));\n  var ggx2: f32 = min(1.0, schlickGGX(N, L, k));\n  return ggx1*ggx2;\n}\n\n// BRDF Combination\nfn cookTorrance(D: f32, F: f32, G: f32, N: vec3<f32>, V: vec3<f32>, L: vec3<f32>) -> f32 {\n  var num: f32 = D*F*G;\n  var denom: f32 = 4*cdot(V, N)*cdot(L, N);\n\n  return num / max(denom, 0.000001);\n}\n\n// Different lighting calculations for different light sources\nfn calcDirectionalLight(N: vec3<f32>, V: vec3<f32>, mat: Material, light: DirectionalLight) -> PBRData {\n  var L: vec3<f32> = normalize(light.direction); // Light Vector\n  var H: vec3<f32> = normalize(L + V); // Halfway Vector\n\n  var alpha = mat.roughness * mat.roughness;\n  var k: f32 = alpha * alpha / 2.0;\n\n  var D: f32 = trGGX(N, H, alpha); // Distribution\n  // var F: f32 = schlickFresnelIOR(V, N, ior, k); // Fresnel\n  var G: f32 = smithSurfaceRoughness(N, V, L, k); // Geometry\n\n  var brdf: f32 = cookTorrance(D, 1.0, G, N, V, L); // Fresnel term is replaced with 1 because it is added later\n  var incoming: vec3<f32> = light.color;\n  var angle: f32 = mdot(L, N);\n  angle = pow(angle, 1.5);\n\n  var specular: vec3<f32> = brdf * incoming * angle;\n  // Oren-Nayar gives a clay-like effect when fully rough which some people may not want, so it might be better to give a separate\n  // control property for the diffuse vs specular roughness\n  var diffuse: vec3<f32> = incoming * fujiiOrenNayar(mat.base, mat.roughness, N, L, V);\n  // Stores the specular and diffuse separately to allow for finer post processing\n  var out = PBRData(diffuse, specular);\n\n  return out; // Returns angle along with color of light so the final color can be multiplied by angle as well (creates black areas)\n}\n\nfn calcPointLight(N: vec3<f32>, V: vec3<f32>, fragPos: vec3<f32>, mat: Material, light: PointLight) -> PBRData {\n  var L: vec3<f32> = normalize(light.position - fragPos);\n  var H: vec3<f32> = normalize(L + V);\n  var dist = distance(light.position, fragPos);\n\n  var alpha = mat.roughness * mat.roughness;\n  var k: f32 = alpha * alpha / 2.0;\n\n  var D: f32 = trGGX(N, H, alpha); // Distribution\n  var F: f32 = schlickFresnelIOR(V, N, mat.ior, k); // Fresnel\n  var G: f32 = smithSurfaceRoughness(N, V, L, k); // Geometry\n\n  var brdf: f32 = cookTorrance(D, 1.0, G, N, V, L);\n  var incoming: vec3<f32> = light.color * (1.0 / (dist * dist));\n  var angle: f32 = mdot(L, N);\n  angle = pow(angle, 1.5); // Smoothing factor makes it less accurate, but reduces ugly "seams" between light sources\n\n  var specular: vec3<f32> = brdf * incoming * angle;\n  var diffuse: vec3<f32> = incoming * fujiiOrenNayar(mat.base, mat.roughness, N, L, V);\n  // Stores the specular and diffuse separately to allow for finer post processing\n  // Could also be done (propably more properly) with a struct\n  var out = PBRData(diffuse, specular);\n\n  return out; // Returns angle along with color of light so the final color can be multiplied by angle as well (creates black areas)\n}\n\n// For a reason unknown to me, spheres dont seem to behave propperly with head-on spot lights\nfn calcSpotLight(N: vec3<f32>, V: vec3<f32>, fragPos: vec3<f32>, mat: Material, light: SpotLight) -> PBRData {\n  var L: vec3<f32> = normalize(light.position - fragPos);\n  var H: vec3<f32> = normalize(L + V); // Halfway Vector\n  var dist = distance(light.position, fragPos);\n\n  var alpha = mat.roughness * mat.roughness;\n  var k: f32 = alpha * alpha / 2.0; // could also be pow(alpha + 1.0, 2) / 8\n\n  var D: f32 = trGGX(N, H, alpha); // Distribution\n  // var F: f32 = schlickFresnelIOR(V, N, ior, k); // Fresnel\n  var G: f32 = smithSurfaceRoughness(N, V, L, k); // Geometry\n\n  var brdf: f32 = cookTorrance(D, 1.0, G, N, V, L);\n\n  var theta: f32 = mdot(normalize(light.direction), L);\n  var epsilon: f32 = light.cones.x - light.cones.y;\n  var intensity: f32 = (theta - light.cones.y) / epsilon;\n  intensity = clamp(intensity, 0.0, 1.0);\n  intensity /= dist * dist;\n\n  var incoming: vec3<f32> = light.color * intensity;\n\n  var angle: f32 = mdot(L, N);\n  angle = pow(angle, 1.5); // Smoothing factor makes it less accurate, but reduces ugly "seams" between light sources\n\n  var specular: vec3<f32> = brdf * incoming * angle;\n  var diffuse: vec3<f32> = incoming * fujiiOrenNayar(mat.base, mat.roughness, N, L, V);\n\n  // Stores the specular and diffuse separately to allow for finer post processing\n  // Could also be done (propably more properly) with a struct\n  var out = PBRData(diffuse, specular);\n\n  return out; // Returns angle along with color of light so the final color can be multiplied by angle as well (creates black areas)\n}\n\n// Environment mapping stuff\n// Takes in a vector and converts it to an equivalent coordinate in a rectilinear texture. Should be replaced with cubemaps at some point\nfn vecToRectCoord(dir: vec3<f32>) -> vec2<f32> {\n  var tau: f32 = 6.28318530718;\n  var out: vec2<f32> = vec2<f32>(0.0);\n\n  out.x = atan2(dir.z, dir.x) / tau;\n  out.x += 0.5;\n\n  var phix: f32 = length(vec2(dir.x, dir.z));\n  out.y = atan2(dir.y, phix) / pi + 0.5;\n\n  return out;\n}\n\n//VTK::Renderer::Dec\n\n//VTK::Color::Dec\n\n//VTK::TCoord::Dec\n\n// optional surface normal declaration\n//VTK::Normal::Dec\n\n//VTK::Select::Dec\n\n//VTK::RenderEncoder::Dec\n\n//VTK::Mapper::Dec\n\n//VTK::IOStructs::Dec\n\n@fragment\nfn main(\n//VTK::IOStructs::Input\n)\n//VTK::IOStructs::Output\n{\n  var output : fragmentOutput;\n\n  // Temporary ambient, diffuse, and opacity\n  var ambientColor: vec4<f32> = mapperUBO.AmbientColor;\n  var diffuseColor: vec4<f32> = mapperUBO.DiffuseColor;\n  var opacity: f32 = mapperUBO.Opacity;\n  var ior: f32 = mapperUBO.BaseIOR;\n\n  // This should be declared somewhere else\n  var _diffuseMap: vec4<f32> = vec4<f32>(1.0);\n  var _roughnessMap: vec4<f32> = vec4<f32>(1.0);\n  var _metallicMap: vec4<f32> = vec4<f32>(1.0);\n  var _normalMap: vec4<f32> = vec4<f32>(0.0, 0.0, 1.0, 0.0); // normal map was setting off the normal vector detection in fragment\n  var _ambientOcclusionMap: vec4<f32> = vec4<f32>(1.);\n  var _emissionMap: vec4<f32> = vec4<f32>(0.);\n\n  //VTK::Color::Impl\n\n  //VTK::TCoord::Impl\n\n  //VTK::Normal::Impl\n\n  var computedColor: vec4<f32> = vec4<f32>(diffuseColor.rgb, 1.0);\n\n  //VTK::Light::Impl\n\n  //VTK::Select::Impl\n\n  // Use texture alpha for transparency\n  computedColor.a = mapperUBO.Opacity * _diffuseMap.a;\n  if (computedColor.a == 0.0) { discard; };\n\n  //VTK::Position::Impl\n\n  //VTK::RenderEncoder::Impl\n\n  return output;\n}\n',t.vertexShaderTemplate="\n//VTK::Renderer::Dec\n\n//VTK::Color::Dec\n\n//VTK::Normal::Dec\n\n//VTK::TCoord::Dec\n\n//VTK::Select::Dec\n\n//VTK::Mapper::Dec\n\n//VTK::IOStructs::Dec\n\n@vertex\nfn main(\n//VTK::IOStructs::Input\n)\n//VTK::IOStructs::Output\n{\n  var output : vertexOutput;\n\n  var vertex: vec4<f32> = vertexBC;\n\n  //VTK::Color::Impl\n\n  //VTK::Normal::Impl\n\n  //VTK::TCoord::Impl\n\n  //VTK::Select::Impl\n\n  //VTK::Position::Impl\n\n  return output;\n}\n",t._tmpMat3=ke(new Float64Array(9)),t._tmpMat4=B(new Float64Array(16)),t.UBO=nm.newInstance({label:"mapperUBO"}),t.UBO.addEntry("BCWCMatrix","mat4x4<f32>"),t.UBO.addEntry("BCSCMatrix","mat4x4<f32>"),t.UBO.addEntry("MCWCNormals","mat4x4<f32>"),t.UBO.addEntry("AmbientColor","vec4<f32>"),t.UBO.addEntry("DiffuseColor","vec4<f32>"),t.UBO.addEntry("EdgeColor","vec4<f32>"),t.UBO.addEntry("SpecularColor","vec4<f32>"),t.UBO.addEntry("AmbientIntensity","f32"),t.UBO.addEntry("DiffuseIntensity","f32"),t.UBO.addEntry("Roughness","f32"),t.UBO.addEntry("Metallic","f32"),t.UBO.addEntry("Ambient","f32"),t.UBO.addEntry("Normal","f32"),t.UBO.addEntry("Emission","f32"),t.UBO.addEntry("NormalStrength","f32"),t.UBO.addEntry("BaseIOR","f32"),t.UBO.addEntry("SpecularIntensity","f32"),t.UBO.addEntry("LineWidth","f32"),t.UBO.addEntry("Opacity","f32"),t.UBO.addEntry("ZValue","f32"),t.UBO.addEntry("PropID","u32"),t.UBO.addEntry("ClipNear","f32"),t.UBO.addEntry("ClipFar","f32"),t.UBO.addEntry("Time","u32"),Wt(e,t,["cellArray","currentInput","cellOffset","is2D","primitiveType","renderEncoder"]),t.textures=[],function(e,t){t.classHierarchy.push("vtkWebGPUCellArrayMapper"),e.buildPass=n=>{n&&(t.is2D?(t.WebGPUActor=e.getFirstAncestorOfType("vtkWebGPUActor2D"),t.forceZValue=!0):(t.WebGPUActor=e.getFirstAncestorOfType("vtkWebGPUActor"),t.forceZValue=!1),t.coordinateSystem=t.WebGPUActor.getRenderable().getCoordinateSystem(),t.useRendererMatrix=t.coordinateSystem!==Om.DISPLAY,t.WebGPURenderer=t.WebGPUActor.getFirstAncestorOfType("vtkWebGPURenderer"),t.WebGPURenderWindow=t.WebGPURenderer.getParent(),t.device=t.WebGPURenderWindow.getDevice())},e.translucentPass=n=>{n&&(e.prepareToDraw(t.WebGPURenderer.getRenderEncoder()),t.renderEncoder.registerDrawCallback(t.pipeline,e.draw))},e.opaquePass=n=>{n&&(e.prepareToDraw(t.WebGPURenderer.getRenderEncoder()),t.renderEncoder.registerDrawCallback(t.pipeline,e.draw))},e.updateUBO=()=>{var n;const r=t.WebGPUActor.getRenderable().getProperty(),o=t.UBO.getSendTime();if(e.getMTime()<=o&&r.getMTime()<=o&&t.renderable.getMTime()<=o)return;const a=t.WebGPUActor.getKeyMatrices(t.WebGPURenderer);if(t.UBO.setArray("BCWCMatrix",a.bcwc),t.UBO.setArray("BCSCMatrix",a.bcsc),t.UBO.setArray("MCWCNormals",a.normalMatrix),t.is2D){var i,s;const e=null!==(i=null===(s=r.getDisplayLocation)||void 0===s?void 0:s.call(r))&&void 0!==i?i:Mm.BACKGROUND;t.UBO.setValue("ZValue",e===Mm.FOREGROUND?1:0);const n=r.getColorByReference();t.UBO.setValue("AmbientIntensity",1),t.UBO.setArray("DiffuseColor",[...n,1]),t.UBO.setValue("DiffuseIntensity",0),t.UBO.setValue("SpecularIntensity",0)}else t.UBO.setValue("AmbientIntensity",r.getAmbient()),t.UBO.setArray("AmbientColor",[...r.getAmbientColorByReference(),1]),t.UBO.setValue("DiffuseIntensity",r.getDiffuse()),t.UBO.setArray("DiffuseColor",[...r.getDiffuseColorByReference(),1]),t.UBO.setValue("Roughness",r.getRoughness()),t.UBO.setValue("BaseIOR",r.getBaseIOR()),t.UBO.setValue("Metallic",r.getMetallic()),t.UBO.setValue("NormalStrength",r.getNormalStrength()),t.UBO.setValue("Emission",r.getEmission()),t.UBO.setValue("SpecularIntensity",r.getSpecular()),r.getSpecularColorByReference()&&t.UBO.setArray("SpecularColor",[...r.getSpecularColorByReference(),1]);const l=null===(n=r.getEdgeColorByReference)||void 0===n?void 0:n.call(r);l&&t.UBO.setArray("EdgeColor",[...l,1]),t.UBO.setValue("LineWidth",r.getLineWidth()),t.UBO.setValue("Opacity",r.getOpacity()),t.UBO.setValue("PropID",t.WebGPUActor.getPropID()),t.UBO.sendIfNeeded(t.WebGPURenderWindow.getDevice())},e.haveWideLines=()=>{const e=t.WebGPUActor.getRenderable(),n=e.getProperty().getRepresentation();return!(e.getProperty().getLineWidth()<=1)&&t.primitiveType!==Am.Verts&&(t.primitiveType!==Am.Triangles&&t.primitiveType!==Am.TriangleStrips||n===Em.WIREFRAME)},e.replaceShaderPosition=(n,r,o)=>{const a=r.getShaderDescription("vertex");a.addBuiltinOutput("vec4<f32>","@builtin(position) Position"),a.hasOutput("vertexVC")||a.addOutput("vec4<f32>","vertexVC");let i=a.getCode();t.useRendererMatrix?(i=$p.substitute(i,"//VTK::Position::Impl",["    var pCoord: vec4<f32> = rendererUBO.SCPCMatrix*mapperUBO.BCSCMatrix*vertexBC;","    output.vertexVC = rendererUBO.SCVCMatrix * mapperUBO.BCSCMatrix * vec4<f32>(vertexBC.xyz, 1.0);","//VTK::Position::Impl"]).result,t.forceZValue&&(i=$p.substitute(i,"//VTK::Position::Impl",["pCoord = vec4<f32>(pCoord.xyz/pCoord.w, 1.0);","pCoord.z = mapperUBO.ZValue;","//VTK::Position::Impl"]).result)):(i=$p.substitute(i,"//VTK::Position::Impl",["    var pCoord: vec4<f32> = mapperUBO.BCSCMatrix*vertexBC;","    pCoord.x = 2.0* pCoord.x / rendererUBO.viewportSize.x - 1.0;","    pCoord.y = 2.0* pCoord.y / rendererUBO.viewportSize.y - 1.0;","    pCoord.z = 0.5 - 0.5 * pCoord.z;","//VTK::Position::Impl"]).result,t.forceZValue&&(i=$p.substitute(i,"//VTK::Position::Impl",["    pCoord.z = mapperUBO.ZValue;","//VTK::Position::Impl"]).result)),e.haveWideLines()&&(a.addBuiltinInput("u32","@builtin(instance_index) instanceIndex"),i=$p.substitute(i,"//VTK::Position::Impl",["    var tmpPos: vec4<f32> = pCoord;","    var numSteps: f32 = ceil(mapperUBO.LineWidth - 1.0);","    var offset: f32 = (mapperUBO.LineWidth - 1.0) * (f32(input.instanceIndex / 2u) - numSteps/2.0) / numSteps;","    var tmpPos2: vec3<f32> = tmpPos.xyz / tmpPos.w;","    tmpPos2.x = tmpPos2.x + 2.0 * (f32(input.instanceIndex) % 2.0) * offset / rendererUBO.viewportSize.x;","    tmpPos2.y = tmpPos2.y + 2.0 * (f32(input.instanceIndex + 1u) % 2.0) * offset / rendererUBO.viewportSize.y;","    tmpPos2.z = min(1.0, tmpPos2.z + 0.00001);","    pCoord = vec4<f32>(tmpPos2.xyz * tmpPos.w, tmpPos.w);","//VTK::Position::Impl"]).result),i=$p.substitute(i,"//VTK::Position::Impl",["    output.Position = pCoord;"]).result,a.setCode(i)},t.shaderReplacements.set("replaceShaderPosition",e.replaceShaderPosition),e.replaceShaderNormal=(e,n,r)=>{const o=r.getBuffer("normalMC"),a=t.WebGPUActor.getRenderable();if(o){const e=n.getShaderDescription("vertex");e.hasOutput("normalVC")||e.addOutput("vec3<f32>","normalVC",o.getArrayInformation()[0].interpolation),e.hasOutput("tangentVC")||e.addOutput("vec3<f32>","tangentVC",o.getArrayInformation()[0].interpolation),e.hasOutput("bitangentVC")||e.addOutput("vec3<f32>","bitangentVC",o.getArrayInformation()[0].interpolation);let t=e.getCode();t=$p.substitute(t,"//VTK::Normal::Impl",["  output.normalVC = normalize((rendererUBO.WCVCNormals * mapperUBO.MCWCNormals * normalMC).xyz);","  var c1: vec3<f32> = cross(output.normalVC, vec3<f32>(0, 0, 1));","  var c2: vec3<f32> = cross(output.normalVC, vec3<f32>(0, 1, 0));","  var tangent: vec3<f32> = mix(c1, c2, distance(c1, c2));","  output.tangentVC = normalize(tangent);","  output.bitangentVC = normalize(cross(output.normalVC, tangent));"]).result,e.setCode(t);const r=n.getShaderDescription("fragment");t=r.getCode(),t=a.getProperty().getNormalTexture()?$p.substitute(t,"//VTK::Normal::Impl",["  var normal: vec3<f32> = input.normalVC;","  if (!input.frontFacing) { normal = -normal; }","  var tangent: vec3<f32> = input.tangentVC;","  var bitangent: vec3<f32> = input.bitangentVC;","  var TCVCMatrix: mat3x3<f32> = mat3x3<f32>(","    tangent.x, bitangent.x, normal.x,","    tangent.y, bitangent.y, normal.y,","    tangent.z, bitangent.z, normal.z,","  );","  var mappedNormal: vec3<f32> = TCVCMatrix * (_normalMap.xyz * 2 - 1);","  normal = mix(normal, mappedNormal, mapperUBO.NormalStrength);","  normal = normalize(normal);"]).result:$p.substitute(t,"//VTK::Normal::Impl",["  var normal: vec3<f32> = input.normalVC;","  if (!input.frontFacing) { normal = -normal; }","  normal = normalize(normal);"]).result,r.setCode(t)}},t.shaderReplacements.set("replaceShaderNormal",e.replaceShaderNormal),e.replaceShaderLight=(e,n,r)=>{if(e.includes("sel"))return;const o=n.getShaderDescription("vertex");o.hasOutput("vertexVC")||o.addOutput("vec4<f32>","vertexVC");const a=t.WebGPURenderer.getRenderable(),i=n.getShaderDescription("fragment");let s=i.getCode();if(!s.includes("var normal:")||!t.useRendererMatrix||Rm(e)||t.is2D||e.includes("sel"))s=$p.substitute(s,"//VTK::Light::Impl",["  let diffuse = diffuseColor.rgb;","  let specular = mapperUBO.SpecularColor.rgb * mapperUBO.SpecularColor.a;","  computedColor = vec4<f32>(diffuse * _diffuseMap.rgb, mapperUBO.Opacity);"]).result,i.setCode(s);else{var l;const e=["  let fragPos = vec3<f32>(input.vertexVC.xyz);","  let V = mix(normalize(-fragPos), vec3<f32>(0, 0, 1), f32(rendererUBO.cameraParallel)); // View Vector","  let baseColor = _diffuseMap.rgb * diffuseColor.rgb;","  let roughness = max(0.000001, mapperUBO.Roughness * _roughnessMap.r);","  let metallic = mapperUBO.Metallic * _metallicMap.r;","  let alpha = roughness * roughness;","  let k = alpha * alpha / 2.0;","  var diffuse = vec3<f32>(0.);","  var specular = vec3<f32>(0.);","  let emission = _emissionMap.rgb * mapperUBO.Emission;","","  // Material struct","  let mat = Material(ior, roughness, metallic, baseColor);","","  {","    var i = 0;","    loop {","      if (!(i < rendererUBO.LightCount)) { break; }","      switch (i32(rendererLightSSBO.values[i].LightData.x)) {","         // Point Light","         case 0 {","           let color = rendererLightSSBO.values[i].LightColor.rgb * rendererLightSSBO.values[i].LightColor.w;","           let pos = (rendererLightSSBO.values[i].LightPos).xyz;","           let pointLight = PointLight(pos, color);","           let result = calcPointLight(normal, V, fragPos, mat, pointLight);","           diffuse += max(vec3<f32>(0), result.diffuse);","           specular += max(vec3<f32>(0), result.specular);","          }","         // Directional light","         case 1 {","           let dir = normalize((rendererUBO.WCVCNormals * vec4<f32>(normalize(rendererLightSSBO.values[i].LightDir.xyz), 0.)).xyz);","           let color = rendererLightSSBO.values[i].LightColor.rgb * rendererLightSSBO.values[i].LightColor.w;","           let dirLight = DirectionalLight(dir, color);","           let result = calcDirectionalLight(normal, V, mat, dirLight); // diffuseColor.rgb needs to be fixed with a more dynamic diffuse color","           diffuse += max(vec3<f32>(0), result.diffuse);","           specular += max(vec3<f32>(0), result.specular);","         }","         // Spot Light","         case 2 {","           let color = rendererLightSSBO.values[i].LightColor.rgb * rendererLightSSBO.values[i].LightColor.w;","           let pos = (rendererLightSSBO.values[i].LightPos).xyz;","           let dir = normalize((rendererUBO.WCVCNormals * vec4<f32>(normalize(rendererLightSSBO.values[i].LightDir.xyz), 0.)).xyz);","           let cones = vec2<f32>(rendererLightSSBO.values[i].LightData.y, rendererLightSSBO.values[i].LightData.z);","           let spotLight = SpotLight(pos, dir, cones, color);","           let result = calcSpotLight(normal, V, fragPos, mat, spotLight);","           diffuse += max(vec3<f32>(0), result.diffuse);","           specular += max(vec3<f32>(0), result.specular);","         }","         default { continue; }","       }","      continuing { i++; }","    }","  }","  let fresnel = min(1.0, schlickFresnelIOR(V, normal, ior, k)); // Fresnel","  // This could be controlled with its own variable (that isnt base color) for better artistic control","  let fresnelMetallic = schlickFresnelRGB(V, normal, baseColor); // Fresnel for metal, takes color into account","  let kS = min(vec3<f32>(1.0), mix(vec3<f32>(fresnel), fresnelMetallic, metallic));","  let kD = (1.0 - kS) * (1.0 - metallic);","  let PBR = mapperUBO.DiffuseIntensity * kD * diffuse + kS * specular;","  computedColor = vec4<f32>(PBR + emission, mapperUBO.Opacity);"];null!==(l=a.getEnvironmentTexture())&&void 0!==l&&l.getImageLoaded()&&e.push("  // To get diffuse IBL, the texture is sampled with normals in worldspace","  let diffuseIBLCoords = (transpose(rendererUBO.WCVCNormals) * vec4<f32>(normal, 1.)).xyz;","  let diffuseCoords = vecToRectCoord(diffuseIBLCoords);","  // To get specular IBL, the texture is sampled as the worldspace reflection between the normal and view vectors","  // Reflections are first calculated in viewspace, then converted to worldspace to sample the environment","  let VreflN = normalize(reflect(-V, normal));","  let reflectionIBLCoords = (transpose(rendererUBO.WCVCNormals) * vec4<f32>(VreflN, 1.)).xyz;","  let specularCoords = vecToRectCoord(reflectionIBLCoords);","  let diffuseIBL = textureSampleLevel(EnvironmentTexture, EnvironmentTextureSampler, diffuseCoords, rendererUBO.MaxEnvironmentMipLevel);","  let level = roughness * rendererUBO.MaxEnvironmentMipLevel;","  let specularIBL = textureSampleLevel(EnvironmentTexture, EnvironmentTextureSampler, specularCoords, level);","  let specularIBLContribution = specularIBL.rgb * rendererUBO.BackgroundSpecularStrength;","  computedColor += vec4<f32>(specularIBLContribution * kS, 0);","  let diffuseIBLContribution = diffuseIBL.rgb * rendererUBO.BackgroundDiffuseStrength;","  computedColor += vec4<f32>(diffuseIBLContribution * baseColor * _ambientOcclusionMap.rgb * kD, 0);"),s=$p.substitute(s,"//VTK::Light::Impl",e).result,i.setCode(s)}},t.shaderReplacements.set("replaceShaderLight",e.replaceShaderLight),e.replaceShaderColor=(e,t,n)=>{if(Rm(e)){const e=t.getShaderDescription("fragment");let n=e.getCode();return n=$p.substitute(n,"//VTK::Color::Impl",["ambientColor = mapperUBO.EdgeColor;","diffuseColor = mapperUBO.EdgeColor;"]).result,void e.setCode(n)}const r=n.getBuffer("colorVI");if(!r)return;const o=t.getShaderDescription("vertex");o.addOutput("vec4<f32>","color",r.getArrayInformation()[0].interpolation);let a=o.getCode();a=$p.substitute(a,"//VTK::Color::Impl",["  output.color = colorVI;"]).result,o.setCode(a);const i=t.getShaderDescription("fragment");a=i.getCode(),a=$p.substitute(a,"//VTK::Color::Impl",["ambientColor = input.color;","diffuseColor = input.color;","opacity = mapperUBO.Opacity * input.color.a;"]).result,i.setCode(a)},t.shaderReplacements.set("replaceShaderColor",e.replaceShaderColor),e.replaceShaderTCoord=(e,n,r)=>{var o,a,i,s,l,u,c,d;if(!r.hasAttribute("tcoord"))return;const f=n.getShaderDescription("vertex"),p=r.getBuffer("tcoord"),h=ih.getNumberOfComponentsFromBufferFormat(p.getArrayInformation()[0].format);let m=f.getCode();f.addOutput("vec".concat(h,"<f32>"),"tcoordVS"),m=$p.substitute(m,"//VTK::TCoord::Impl",["  output.tcoordVS = tcoord;"]).result,f.setCode(m);const g=n.getShaderDescription("fragment");m=g.getCode();const v=t.WebGPUActor.getRenderable(),y=v.getProperty(),b=e=>!!e&&e.getDimensionality()===h,_=[],T=null===(o=y.getDiffuseTexture)||void 0===o?void 0:o.call(y);(null!==T&&void 0!==T&&T.getImageLoaded()||v.getTextures()[0]||t.colorTexture)&&(b(T)||b(v.getTextures()[0])||b(t.colorTexture))&&_.push("_diffuseMap = textureSample(DiffuseTexture, DiffuseTextureSampler, input.tcoordVS);");const x=null===(a=y.getORMTexture)||void 0===a?void 0:a.call(y),S=null===(i=y.getRMTexture)||void 0===i?void 0:i.call(y),w=null===(s=y.getRoughnessTexture)||void 0===s?void 0:s.call(y),C=null===(l=y.getMetallicTexture)||void 0===l?void 0:l.call(y),P=null===(u=y.getAmbientOcclusionTexture)||void 0===u?void 0:u.call(y),A=null===(c=y.getEmissionTexture)||void 0===c?void 0:c.call(y),E=null===(d=y.getNormalTexture)||void 0===d?void 0:d.call(y);null!==x&&void 0!==x&&x.getImageLoaded()?b(x)&&_.push("_ambientOcclusionMap = textureSample(ORMTexture, ORMTextureSampler, input.tcoordVS).rrra;","_roughnessMap = textureSample(ORMTexture, ORMTextureSampler, input.tcoordVS).ggga;","_metallicMap = textureSample(ORMTexture, ORMTextureSampler, input.tcoordVS).bbba;"):null!==S&&void 0!==S&&S.getImageLoaded()?b(S)&&_.push("_roughnessMap = textureSample(RMTexture, RMTextureSampler, input.tcoordVS).ggga;","_metallicMap = textureSample(RMTexture, RMTextureSampler, input.tcoordVS).bbba;"):(null!==w&&void 0!==w&&w.getImageLoaded()&&b(w)&&_.push("_roughnessMap = textureSample(RoughnessTexture, RoughnessTextureSampler, input.tcoordVS).ggga;"),null!==C&&void 0!==C&&C.getImageLoaded()&&b(C)&&_.push("_metallicMap = textureSample(MetallicTexture, MetallicTextureSampler, input.tcoordVS).bbba;"),null!==P&&void 0!==P&&P.getImageLoaded()&&b(P)&&_.push("_ambientOcclusionMap = textureSample(AmbientOcclusionTexture, AmbientOcclusionTextureSampler, input.tcoordVS).rrra;")),null!==A&&void 0!==A&&A.getImageLoaded()&&b(A)&&_.push("_emissionMap = textureSample(EmissionTexture, EmissionTextureSampler, input.tcoordVS);"),null!==E&&void 0!==E&&E.getImageLoaded()&&b(E)&&_.push("_normalMap = textureSample(NormalTexture, NormalTextureSampler, input.tcoordVS);"),m=$p.substitute(m,"//VTK::TCoord::Impl",_).result,g.setCode(m)},t.shaderReplacements.set("replaceShaderTCoord",e.replaceShaderTCoord),e.replaceShaderSelect=(e,t,n)=>{if(e.includes("sel")){const e=t.getShaderDescription("fragment");let n=e.getCode();n=$p.substitute(n,"//VTK::Select::Impl",["  var compositeID: u32 = 0u;"]).result,e.setCode(n)}},t.shaderReplacements.set("replaceShaderSelect",e.replaceShaderSelect),e.getUsage=(e,t)=>e===Em.POINTS||t===Am.Points?Pm.Verts:t===Am.Lines?Pm.Lines:e===Em.WIREFRAME?t===Am.Triangles?Pm.LinesFromTriangles:Pm.LinesFromStrips:t===Am.Triangles?Pm.Triangles:t===Am.TriangleStrips?Pm.Strips:t===Am.TriangleEdges?Pm.LinesFromTriangles:Pm.LinesFromStrips,e.getHashFromUsage=e=>"pt".concat(e),e.getTopologyFromUsage=e=>{switch(e){case Pm.Triangles:return"triangle-list";case Pm.Verts:return"point-list";case Pm.Lines:default:return"line-list"}},e.buildVertexInput=()=>{var n,r;const o=t.currentInput,a=t.cellArray,i=t.primitiveType;let s=t.WebGPUActor.getRenderable().getProperty().getRepresentation();const l=t.WebGPURenderWindow.getDevice();let u=!1;i===Am.TriangleEdges&&(u=!0,s=Em.WIREFRAME);const c=t.vertexInput,d=o.getPoints();let f=null;if(a?(f=l.getBufferManager().getBuffer({hash:"R".concat(s,"P").concat(i).concat(a.getMTime()),usage:Pm.Index,cells:a,numberOfPoints:d.getNumberOfPoints(),primitiveType:i,representation:s}),c.setIndexBuffer(f)):c.setIndexBuffer(null),d){var p,h,m;const e=t.WebGPUActor.getBufferShift(t.WebGPURenderer);c.addBuffer(l.getBufferManager().getBuffer({hash:"".concat(d.getMTime(),"I").concat(null!==(p=null===(h=f)||void 0===h||null===(m=h.getMTime)||void 0===m?void 0:m.call(h))&&void 0!==p?p:0).concat(e.join(),"float32x4"),usage:Pm.PointArray,format:"float32x4",dataArray:d,indexBuffer:f,shift:e,packExtra:!0}),["vertexBC"])}else c.removeBufferIfPresent("vertexBC");const g=e.getUsage(s,i);if(t._usesCellNormals=!1,t.is2D||g!==Pm.Triangles&&g!==Pm.Strips)c.removeBufferIfPresent("normalMC");else{const e=o.getPointData().getNormals(),n={format:"snorm8x4",indexBuffer:f,packExtra:!0,shift:0,scale:127};e?(n.hash="".concat(e.getMTime(),"I").concat(f.getMTime(),"snorm8x4"),n.dataArray=e,n.usage=Pm.PointArray,c.addBuffer(l.getBufferManager().getBuffer(n),["normalMC"])):i===Am.Triangles?(t._usesCellNormals=!0,n.hash="PFN".concat(d.getMTime(),"I").concat(f.getMTime(),"snorm8x4"),n.dataArray=d,n.cells=a,n.usage=Pm.NormalsFromPoints,c.addBuffer(l.getBufferManager().getBuffer(n),["normalMC"])):c.removeBufferIfPresent("normalMC")}let v=!1;if(t.renderable.getScalarVisibility()){const e=t.renderable.getColorMapColors();if(e&&!u){const n=t.renderable.getScalarMode(),r=(n===Im.USE_CELL_DATA||n===Im.USE_CELL_FIELD_DATA||n===Im.USE_FIELD_DATA||!o.getPointData().getScalars())&&n!==Im.USE_POINT_FIELD_DATA&&e;c.addBuffer(l.getBufferManager().getBuffer({usage:Pm.PointArray,format:"unorm8x4",hash:"".concat(r).concat(e.getMTime(),"I").concat(f.getMTime(),"unorm8x4"),dataArray:e,indexBuffer:f,cellData:r,cellOffset:0}),["colorVI"]),v=!0}}v||c.removeBufferIfPresent("colorVI");let y=null;y=null!==(n=(r=t.renderable).getInterpolateScalarsBeforeMapping)&&void 0!==n&&n.call(r)&&t.renderable.getColorCoordinates()?t.renderable.getColorCoordinates():o.getPointData().getTCoords(),y&&!u?c.addBuffer(l.getBufferManager().getBufferForPointArray(y,c.getIndexBuffer()),["tcoord"]):c.removeBufferIfPresent("tcoord")},e.updateTextures=()=>{var e,n,r,o,a,i,s,l,u,c,d,f,p,h,m,g,v,y,b;const _=[],T=[],x=null===(e=(n=t.renderable).getColorTextureMap)||void 0===e?void 0:e.call(n);x&&!t.colorTexture&&(t.colorTexture=Od.newInstance({label:"polyDataColor"})),x&&(t.colorTexture.setInputData(x),T.push(["DiffuseTexture",t.colorTexture]));const S=t.WebGPUActor.getRenderable(),w=t.WebGPURenderer.getRenderable();[["DiffuseTexture",null===(r=(o=S.getProperty()).getDiffuseTexture)||void 0===r?void 0:r.call(o)],["DiffuseTexture",S.getTextures()[0]],["DiffuseTexture",t.colorTexture],["ORMTexture",null===(a=(i=S.getProperty()).getORMTexture)||void 0===a?void 0:a.call(i)],["RMTexture",null===(s=(l=S.getProperty()).getRMTexture)||void 0===s?void 0:s.call(l)],["RoughnessTexture",null===(u=(c=S.getProperty()).getRoughnessTexture)||void 0===u?void 0:u.call(c)],["MetallicTexture",null===(d=(f=S.getProperty()).getMetallicTexture)||void 0===d?void 0:d.call(f)],["NormalTexture",null===(p=(h=S.getProperty()).getNormalTexture)||void 0===p?void 0:p.call(h)],["AmbientOcclusionTexture",null===(m=(g=S.getProperty()).getAmbientOcclusionTexture)||void 0===m?void 0:m.call(g)],["EmissionTexture",null===(v=(y=S.getProperty()).getEmissionTexture)||void 0===v?void 0:v.call(y)],["EnvironmentTexture",null===(b=w.getEnvironmentTexture)||void 0===b?void 0:b.call(w)]].forEach(e=>{let[t,n]=e;n&&((n.getInputData()||n.getJsImageData()||n.getCanvas()||n.getImageBitmap())&&T.push([t,n]),n.getImage()&&n.getImageLoaded()&&T.push([t,n]))}),T.forEach(e=>{let[n,r]=e;const o=t.device.getTextureManager().getTextureForVTKTexture(r,n);if(!o.getReady())return;let a=!1;for(let i=0;i<t.textures.length;++i)if(t.textures[i]===o){a=!0,_[i]=!0;break}if(!a){_[t.textures.length]=!0;const e=o.createView(n);t.textures.push(o),t.textureViews.push(e);const a=r.getInterpolate()?"linear":"nearest";let i=null;r.getEdgeClamp()&&r.getRepeat()?i="mirror-repeat":r.getEdgeClamp()?i="clamp-to-edge":r.getRepeat()&&(i="repeat");let s={addressModeU:i,addressModeV:i,addressModeW:i,minFilter:a,magFilter:a};"EnvironmentTexture"===n&&(s={addressModeU:"repeat",addressModeV:"clamp-to-edge",addressModeW:"repeat",minFilter:a,magFilter:a,mipmapFilter:"linear"}),e.addSampler(t.device,s)}});for(let C=t.textures.length-1;C>=0;C--)_[C]||(t.textures.splice(C,1),t.textureViews.splice(C,1))},e.computePipelineHash=()=>{let n="pd".concat(t.useRendererMatrix?"r":"").concat(t.forceZValue?"z":"");if(t.primitiveType===Am.TriangleEdges||t.primitiveType===Am.TriangleStripEdges)n+="edge";else{if(t.vertexInput.hasAttribute("normalMC")&&(n+="n"),t.vertexInput.hasAttribute("colorVI")&&(n+="c"),t.vertexInput.hasAttribute("tcoord")){const e=t.vertexInput.getBuffer("tcoord"),r=ih.getNumberOfComponentsFromBufferFormat(e.getArrayInformation()[0].format);n+="t".concat(r)}t.textures.length&&(n+="tx".concat(t.textures.length))}t._usesCellNormals&&(n+="cn"),t.SSBO&&(n+="ssbo"),n+=e.getHashFromUsage(t.usage),n+=t.renderEncoder.getPipelineHash(),t.pipelineHash=n},e.updateBuffers=()=>{t.primitiveType!==Am.TriangleEdges&&t.primitiveType!==Am.TriangleStripEdges&&e.updateTextures();const n=t.WebGPUActor.getRenderable(),r=n.getProperty().getRepresentation();t.usage=e.getUsage(r,t.primitiveType),e.buildVertexInput();const o=t.vertexInput.getBuffer("vertexBC");if(e.setNumberOfVertices(o.getSizeInBytes()/o.getStrideInBytes()),e.setTopology(e.getTopologyFromUsage(t.usage)),e.updateUBO(),e.haveWideLines()){const t=n.getProperty();e.setNumberOfInstances(Math.ceil(2*t.getLineWidth()))}else e.setNumberOfInstances(1)}}(e,t)}var Dm={newInstance:Qt(km,"vtkWebGPUCellArrayMapper"),extend:km};const{PrimitiveTypes:Bm}=Kh;const Nm={primitives:null};function Vm(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Nm,n),gn.extend(e,t,n),t.primitives=[],function(e,t){t.classHierarchy.push("vtkWebGPUPolyDataMapper"),e.createCellArrayMapper=()=>Dm.newInstance(),e.buildPass=n=>{if(n){t.WebGPUActor=e.getFirstAncestorOfType("vtkWebGPUActor"),t.renderable.getStatic()||t.renderable.update();const n=t.renderable.getInputData();t.renderable.mapScalars(n,1),e.updateCellArrayMappers(n)}},e.updateCellArrayMappers=n=>{if(!n)return void Tt("No input!");const r=[n.getVerts(),n.getLines(),n.getPolys(),n.getStrips()],o=[];let a=0;for(let i=Bm.Points;i<=Bm.TriangleStrips;i++)if(r[i].getNumberOfValues()>0){t.primitives[i]||(t.primitives[i]=e.createCellArrayMapper());const s=t.primitives[i];s.setCellArray(r[i]),s.setCurrentInput(n),s.setCellOffset(a),s.setPrimitiveType(i),s.setRenderable(t.renderable),a+=r[i].getNumberOfCells(),o.push(s)}else t.primitives[i]=null;if(t.WebGPUActor.getRenderable().getProperty().getEdgeVisibility()){if(r[Bm.Triangles].getNumberOfValues()>0){const a=Bm.TriangleEdges;t.primitives[a]||(t.primitives[a]=e.createCellArrayMapper());const i=t.primitives[a];i.setCellArray(r[Bm.Triangles]),i.setCurrentInput(n),i.setCellOffset(t.primitives[Bm.Triangles].getCellOffset()),i.setPrimitiveType(a),i.setRenderable(t.renderable),o.push(i)}else t.primitives[Bm.TriangleEdges]=null;if(r[Bm.TriangleStrips].getNumberOfValues()>0){const a=Bm.TriangleStripEdges;t.primitives[a]||(t.primitives[a]=e.createCellArrayMapper());const i=t.primitives[a];i.setCellArray(r[Bm.TriangleStrips]),i.setCurrentInput(n),i.setCellOffset(t.primitives[Bm.TriangleStrips].getCellOffset()),i.setPrimitiveType(a),i.setRenderable(t.renderable),o.push(i)}else t.primitives[Bm.TriangleStripEdges]=null}e.prepareNodes(),e.addMissingChildren(o),e.removeUnusedNodes()}}(e,t)}const Fm=Qt(Vm,"vtkWebGPUPolyDataMapper");Np("vtkMapper",Fm);const{PrimitiveTypes:Um}=Kh;function zm(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,function(e){return u({primitives:[]},e)}(n)),gn.extend(e,t,n),t.primitives=[],function(e,t){t.classHierarchy.push("vtkWebGPUPolyDataMapper2D"),e.createCellArrayMapper=()=>Dm.newInstance(),e.buildPass=n=>{if(n){t.WebGPUActor=e.getFirstAncestorOfType("vtkWebGPUActor2D"),t.renderable.getStatic()||t.renderable.update();const n=t.renderable.getInputData();t.renderable.mapScalars(n,1),e.updateCellArrayMappers(n)}},e.updateCellArrayMappers=n=>{const r=[n.getVerts(),n.getLines(),n.getPolys(),n.getStrips()],o=[];let a=0;for(let i=Um.Points;i<=Um.Triangles;i++)if(r[i].getNumberOfValues()>0){t.primitives[i]||(t.primitives[i]=e.createCellArrayMapper());const s=t.primitives[i];s.setCellArray(r[i]),s.setCurrentInput(n),s.setCellOffset(a),s.setPrimitiveType(i),s.setRenderable(t.renderable),s.setIs2D(!0),a+=r[i].getNumberOfCells(),o.push(s)}else t.primitives[i]=null;e.prepareNodes(),e.addMissingChildren(o),e.removeUnusedNodes()}}(e,t)}const Gm=Qt(zm,"vtkWebGPUPolyDataMapper2D");Np("vtkMapper2D",Gm);const Wm={};function Hm(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Wm,n),gn.extend(e,t,n),t.scalarBarActorHelper=wp.newScalarBarActorHelper(),function(e,t){t.classHierarchy.push("vtkWebGPUScalarBarActor"),e.buildPass=n=>{n&&(t.WebGPURenderer=e.getFirstAncestorOfType("vtkWebGPURenderer"),t.WebGPURenderWindow=t.WebGPURenderer.getParent(),t.scalarBarActorHelper.getRenderable()||t.scalarBarActorHelper.setRenderable(t.renderable),e.prepareNodes(),e.addMissingNode(t.scalarBarActorHelper.getBarActor()),e.addMissingNode(t.scalarBarActorHelper.getTmActor()),e.removeUnusedNodes())},e.opaquePass=(e,n)=>{if(e){const e=t.WebGPURenderer?t.WebGPURenderer.getRenderable().getActiveCamera():null,n=t.WebGPURenderer.getTiledSizeAndOrigin();t.scalarBarActorHelper.updateAPISpecificData([n.usize,n.vsize],e,t.WebGPURenderWindow.getRenderable())}}}(e,t)}const jm=Qt(Hm,"vtkWebGPUScalarBarActor");Np("vtkScalarBarActor",jm);const Km={device:null,handle:null,label:null,options:null};function Zm(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Km,n),dn.obj(e,t),t.options={},t.bindGroupLayoutEntry={visibility:GPUShaderStage.VERTEX|GPUShaderStage.FRAGMENT,sampler:{}},t.bindGroupTime={},dn.obj(t.bindGroupTime,{mtime:0}),dn.get(e,t,["bindGroupTime","handle","options"]),dn.setGet(e,t,["bindGroupLayoutEntry","device","label"]),function(e,t){t.classHierarchy.push("vtkWebGPUSampler"),e.create=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.device=e,t.options.addressModeU=n.addressModeU?n.addressModeU:"clamp-to-edge",t.options.addressModeV=n.addressModeV?n.addressModeV:"clamp-to-edge",t.options.addressModeW=n.addressModeW?n.addressModeW:"clamp-to-edge",t.options.magFilter=n.magFilter?n.magFilter:"nearest",t.options.minFilter=n.minFilter?n.minFilter:"nearest",t.options.mipmapFilter=n.mipmapFilter?n.mipmapFilter:"nearest",t.options.label=t.label,t.handle=t.device.getHandle().createSampler(t.options),t.bindGroupTime.modified()},e.getShaderCode=(e,n)=>"@binding(".concat(e,") @group(").concat(n,") var ").concat(t.label,": sampler;"),e.getBindGroupEntry=()=>({resource:t.handle})}(e,t)}var qm={newInstance:dn.newInstance(Zm),extend:Zm};const Xm={texture:null,handle:null,sampler:null,label:null};function Ym(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Xm,n),dn.obj(e,t),t.bindGroupLayoutEntry={visibility:GPUShaderStage.VERTEX|GPUShaderStage.FRAGMENT,texture:{sampleType:"float",viewDimension:"2d"}},t.bindGroupTime={},dn.obj(t.bindGroupTime,{mtime:0}),dn.get(e,t,["bindGroupTime","texture"]),dn.setGet(e,t,["bindGroupLayoutEntry","label","sampler"]),function(e,t){t.classHierarchy.push("vtkWebGPUTextureView"),e.create=(e,n)=>{t.texture=e,t.options=n,t.options.dimension=t.options.dimension||"2d",t.options.label=t.label,t.textureHandle=e.getHandle(),t.handle=t.textureHandle.createView(t.options),t.bindGroupLayoutEntry.texture.viewDimension=t.options.dimension;const r=ih.getDetailsFromTextureFormat(t.texture.getFormat());t.bindGroupLayoutEntry.texture.sampleType=r.sampleType},e.createFromTextureHandle=(e,n)=>{t.texture=null,t.options=n,t.options.dimension=t.options.dimension||"2d",t.options.label=t.label,t.textureHandle=e,t.handle=t.textureHandle.createView(t.options),t.bindGroupLayoutEntry.texture.viewDimension=t.options.dimension;const r=ih.getDetailsFromTextureFormat(n.format);t.bindGroupLayoutEntry.texture.sampleType=r.sampleType,t.bindGroupTime.modified()},e.getBindGroupEntry=()=>({resource:e.getHandle()}),e.getShaderCode=(e,n)=>{let r="f32";"sint"===t.bindGroupLayoutEntry.texture.sampleType?r="i32":"uint"===t.bindGroupLayoutEntry.texture.sampleType&&(r="u32");let o="@binding(".concat(e,") @group(").concat(n,") var ").concat(t.label,": texture_").concat(t.options.dimension,"<").concat(r,">;");return"depth"===t.bindGroupLayoutEntry.texture.sampleType&&(o="@binding(".concat(e,") @group(").concat(n,") var ").concat(t.label,": texture_depth_").concat(t.options.dimension,";")),o},e.addSampler=(n,r)=>{const o=qm.newInstance({label:"".concat(t.label,"Sampler")});o.create(n,r),e.setSampler(o)},e.getBindGroupTime=()=>(t.texture&&t.texture.getHandle()!==t.textureHandle&&(t.textureHandle=t.texture.getHandle(),t.handle=t.textureHandle.createView(t.options),t.bindGroupTime.modified()),t.bindGroupTime),e.getHandle=()=>(t.texture&&t.texture.getHandle()!==t.textureHandle&&(t.textureHandle=t.texture.getHandle(),t.handle=t.textureHandle.createView(t.options),t.bindGroupTime.modified()),t.handle)}(e,t)}var Qm={newInstance:dn.newInstance(Ym),extend:Ym};const $m={device:null,handle:null,buffer:null,ready:!1,label:null};function Jm(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,$m,n),dn.obj(e,t),dn.get(e,t,["handle","ready","width","height","depth","format","usage"]),dn.setGet(e,t,["device","label"]),function(e,t){t.classHierarchy.push("vtkWebGPUTexture"),e.create=(e,n)=>{t.device=e,t.width=n.width,t.height=n.height,t.depth=n.depth?n.depth:1;const r=1===t.depth?"2d":"3d";t.format=n.format?n.format:"rgba8unorm",t.mipLevel=n.mipLevel?n.mipLevel:0,t.usage=n.usage?n.usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST,t.handle=t.device.getHandle().createTexture({size:[t.width,t.height,t.depth],format:t.format,usage:t.usage,label:t.label,dimension:r,mipLevelCount:t.mipLevel+1})},e.assignFromHandle=(e,n,r)=>{t.device=e,t.handle=n,t.width=r.width,t.height=r.height,t.depth=r.depth?r.depth:1,t.format=r.format?r.format:"rgba8unorm",t.usage=r.usage?r.usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST},e.writeImageData=n=>{let r=[];const o=r=>{t.device.getHandle().queue.copyExternalImageToTexture({source:r,flipY:n.flip},{texture:t.handle,premultipliedAlpha:!0,mipLevel:0,origin:{x:0,y:0,z:0}},[r.width,r.height,t.depth]),3!==e.getDimensionality()&&t.mipLevel>0&&Od.generateMipmaps(t.device.getHandle(),t.handle,t.mipLevel+1),t.ready=!0};if(n.canvas)return void o(n.canvas);if(n.imageBitmap)return n.width=n.imageBitmap.width,n.height=n.imageBitmap.height,n.depth=1,n.format="rgba8unorm",n.flip=!0,void o(n.imageBitmap);if(n.jsImageData)return n.width=n.jsImageData.width,n.height=n.jsImageData.height,n.depth=1,n.format="rgba8unorm",n.flip=!0,void o(n.jsImageData);if(n.image)return n.width=n.image.width,n.height=n.image.height,n.depth=1,n.format="rgba8unorm",n.flip=!0,void o(n.image);const a=ih.getDetailsFromTextureFormat(t.format);let i=t.width*a.stride;n.nativeArray&&(r=n.nativeArray);const s=3===e.getDimensionality(),l=((e,t,n)=>{const r=2===a.elementSize&&"float"===a.sampleType,o=e.BYTES_PER_ELEMENT,i=e.length/(t*n)*o;if(!r&&i%256===0)return[e,i];const s=i/o,l=a.elementSize,u=256*Math.floor((s*l+255)/256),c=u/l,d=dn.newTypedArray(r?"Uint16Array":e.constructor.name,c*t*n),f=t*n;if(r)for(let a=0;a<f;a++){const t=a*s,n=a*c;for(let r=0;r<s;r++)d[n+r]=If.toHalf(e[t+r])}else if(c===s)d.set(e);else for(let a=0;a<f;a++)d.set(e.subarray(a*s,(a+1)*s),a*c);return[d,u]})(r,t.height,s?t.depth:1);i=l[1];const u=l[0];t.device.getHandle().queue.writeTexture({texture:t.handle,mipLevel:0,origin:{x:0,y:0,z:0}},u,{offset:0,bytesPerRow:i,rowsPerImage:t.height},{width:t.width,height:t.height,depthOrArrayLayers:s?t.depth:1}),!s&&t.mipLevel>0&&Od.generateMipmaps(t.device.getHandle(),t.handle,t.mipLevel+1),t.ready=!0},e.getScale=()=>{const e=ih.getDetailsFromTextureFormat(t.format);return 2===e.elementSize&&"float"===e.sampleType?1:255},e.getNumberOfComponents=()=>ih.getDetailsFromTextureFormat(t.format).numComponents,e.getDimensionality=()=>{let e=0;return t.width>1&&e++,t.height>1&&e++,t.depth>1&&e++,e},e.resizeToMatch=e=>{e.getWidth()===t.width&&e.getHeight()===t.height&&e.getDepth()===t.depth||(t.width=e.getWidth(),t.height=e.getHeight(),t.depth=e.getDepth(),t.handle=t.device.getHandle().createTexture({size:[t.width,t.height,t.depth],format:t.format,usage:t.usage,label:t.label}))},e.resize=function(e,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;e===t.width&&n===t.height&&r===t.depth||(t.width=e,t.height=n,t.depth=r,t.handle=t.device.getHandle().createTexture({size:[t.width,t.height,t.depth],format:t.format,usage:t.usage,label:t.label}))},e.createView=function(n){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r.dimension||(r.dimension=1===t.depth?"2d":"3d");const o=Qm.newInstance({label:n});return o.create(e,r),o}}(e,t)}var eg={newInstance:dn.newInstance(Jm),extend:Jm};const tg={};function ng(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,tg,n),gn.extend(e,t,n),function(e,t){t.classHierarchy.push("vtkWebGPUPixelSpaceCallbackMapper"),e.opaquePass=(n,r)=>{t.WebGPURenderer=e.getFirstAncestorOfType("vtkWebGPURenderer"),t.WebGPURenderWindow=t.WebGPURenderer.getParent();const o=t.WebGPURenderer.getAspectRatio(),a=t.WebGPURenderer?t.WebGPURenderer.getRenderable().getActiveCamera():null,i=t.WebGPURenderer.getTiledSizeAndOrigin();t.renderable.getUseZValues(),t.renderable.invokeCallback(t.renderable.getInputData(),a,o,i,null)}}(e,t)}const rg=dn.newInstance(ng,"vtkWebGPUPixelSpaceCallbackMapper");Np("vtkPixelSpaceCallbackMapper",rg);const{vtkDebugMacro:og}=dn;const ag={position:[0,0,1],focalPoint:[0,0,0],viewUp:[0,1,0],directionOfProjection:[0,0,-1],parallelProjection:!1,useHorizontalViewAngle:!1,viewAngle:30,parallelScale:1,clippingRange:[.01,1000.01],windowCenter:[0,0],viewPlaneNormal:[0,0,1],useOffAxisProjection:!1,screenBottomLeft:[-.5,-.5,-.5],screenBottomRight:[.5,-.5,-.5],screenTopRight:[.5,.5,-.5],freezeFocalPoint:!1,projectionMatrix:null,viewMatrix:null,modelTransformMatrix:null,cameraLightTransform:M(),physicalTranslation:[0,0,0],physicalScale:1,physicalViewUp:[0,1,0],physicalViewNorth:[0,0,-1]};function ig(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,ag,n),dn.obj(e,t),dn.get(e,t,["distance"]),dn.setGet(e,t,["parallelProjection","useHorizontalViewAngle","viewAngle","parallelScale","useOffAxisProjection","freezeFocalPoint","physicalScale"]),dn.getArray(e,t,["directionOfProjection","viewPlaneNormal","position","focalPoint"]),dn.setGetArray(e,t,["clippingRange","windowCenter"],2),dn.setGetArray(e,t,["viewUp","screenBottomLeft","screenBottomRight","screenTopRight","physicalTranslation","physicalViewUp","physicalViewNorth"],3),function(e,t){t.classHierarchy.push("vtkCamera");const n=new Float64Array(3),r=new Float64Array([0,0,-1]),o=new Float64Array([0,1,0]),a=B(new Float64Array(16)),i=B(new Float64Array(16)),s=new Float64Array(3),l=new Float64Array(3),u=new Float64Array(3),c=B(new Float64Array(16)),d=B(new Float64Array(16)),f=new Float64Array(3),p=new Float64Array(3);function h(){t.viewPlaneNormal[0]=-t.directionOfProjection[0],t.viewPlaneNormal[1]=-t.directionOfProjection[1],t.viewPlaneNormal[2]=-t.directionOfProjection[2]}e.orthogonalizeViewUp=()=>{const n=e.getViewMatrix();t.viewUp[0]=n[4],t.viewUp[1]=n[5],t.viewUp[2]=n[6],e.modified()},e.setPosition=(n,r,o)=>{n===t.position[0]&&r===t.position[1]&&o===t.position[2]||(t.position[0]=n,t.position[1]=r,t.position[2]=o,e.computeDistance(),e.modified())},e.setFocalPoint=(n,r,o)=>{n===t.focalPoint[0]&&r===t.focalPoint[1]&&o===t.focalPoint[2]||(t.focalPoint[0]=n,t.focalPoint[1]=r,t.focalPoint[2]=o,e.computeDistance(),e.modified())},e.setDistance=n=>{if(t.distance===n)return;t.distance=n,t.distance<1e-20&&(t.distance=1e-20,og("Distance is set to minimum."));const r=t.directionOfProjection;t.focalPoint[0]=t.position[0]+r[0]*t.distance,t.focalPoint[1]=t.position[1]+r[1]*t.distance,t.focalPoint[2]=t.position[2]+r[2]*t.distance,e.modified()},e.computeDistance=()=>{const e=t.focalPoint[0]-t.position[0],n=t.focalPoint[1]-t.position[1],r=t.focalPoint[2]-t.position[2];if(t.distance=Math.sqrt(e*e+n*n+r*r),t.distance<1e-20){t.distance=1e-20,og("Distance is set to minimum.");const e=t.directionOfProjection;t.focalPoint[0]=t.position[0]+e[0]*t.distance,t.focalPoint[1]=t.position[1]+e[1]*t.distance,t.focalPoint[2]=t.position[2]+e[2]*t.distance}t.directionOfProjection[0]=e/t.distance,t.directionOfProjection[1]=n/t.distance,t.directionOfProjection[2]=r/t.distance,h()},e.dolly=n=>{if(n<=0)return;const r=t.distance/n;e.setPosition(t.focalPoint[0]-r*t.directionOfProjection[0],t.focalPoint[1]-r*t.directionOfProjection[1],t.focalPoint[2]-r*t.directionOfProjection[2])},e.roll=n=>{const r=t.position,o=t.focalPoint,a=t.viewUp,i=new Float64Array([a[0],a[1],a[2],0]);B(c);const s=new Float64Array([o[0]-r[0],o[1]-r[1],o[2]-r[2]]);H(c,c,Yo(n),s),es(i,i,c),t.viewUp[0]=i[0],t.viewUp[1]=i[1],t.viewUp[2]=i[2],e.modified()},e.azimuth=n=>{const r=t.focalPoint;B(d),G(d,d,r),H(d,d,Yo(n),t.viewUp),G(d,d,[-r[0],-r[1],-r[2]]),qn(f,t.position,d),e.setPosition(f[0],f[1],f[2])},e.yaw=n=>{const r=t.position;B(d),G(d,d,r),H(d,d,Yo(n),t.viewUp),G(d,d,[-r[0],-r[1],-r[2]]),qn(p,t.focalPoint,d),e.setFocalPoint(p[0],p[1],p[2])},e.elevation=n=>{const r=t.focalPoint,o=e.getViewMatrix(),a=[-o[0],-o[1],-o[2]];B(d),G(d,d,r),H(d,d,Yo(n),a),G(d,d,[-r[0],-r[1],-r[2]]),qn(f,t.position,d),e.setPosition(f[0],f[1],f[2])},e.pitch=n=>{const r=t.position,o=e.getViewMatrix(),a=[o[0],o[1],o[2]];B(d),G(d,d,r),H(d,d,Yo(n),a),G(d,d,[-r[0],-r[1],-r[2]]),qn(p,t.focalPoint,d),e.setFocalPoint(...p)},e.zoom=n=>{n<=0||(t.parallelProjection?t.parallelScale/=n:t.viewAngle/=n,e.modified())},e.translate=(n,r,o)=>{const a=[n,r,o];va(t.position,a,t.position),va(t.focalPoint,a,t.focalPoint),e.computeDistance(),e.modified()},e.applyTransform=n=>{const r=[...t.viewUp,1],o=[],a=[],i=[];r[0]+=t.position[0],r[1]+=t.position[1],r[2]+=t.position[2],es(o,[...t.position,1],n),es(a,[...t.focalPoint,1],n),es(i,r,n),i[0]-=o[0],i[1]-=o[1],i[2]-=o[2],e.setPosition(...o.slice(0,3)),e.setFocalPoint(...a.slice(0,3)),e.setViewUp(...i.slice(0,3))},e.getThickness=()=>t.clippingRange[1]-t.clippingRange[0],e.setThickness=n=>{let r=n;r<1e-20&&(r=1e-20,og("Thickness is set to minimum.")),e.setClippingRange(t.clippingRange[0],t.clippingRange[0]+r)},e.setThicknessFromFocalPoint=n=>{let r=n;r<1e-20&&(r=1e-20,og("Thickness is set to minimum.")),e.setClippingRange(t.distance-r/2,t.distance+r/2)},e.setRoll=e=>{},e.getRoll=()=>{},e.setObliqueAngles=(e,t)=>{},e.getOrientation=()=>{},e.getOrientationWXYZ=()=>{},e.getFrustumPlanes=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Float64Array(24);const r=[[1,0,0,1],[-1,0,0,1],[0,1,0,1],[0,-1,0,1],[0,0,1,1],[0,0,-1,1]],o=e.getCompositeProjectionMatrix(t,-1,1);for(let e=0;e<6;e++)es(r[e],r[e],o),Ea(r[e]),n[4*e+0]=r[e][0],n[4*e+1]=r[e][1],n[4*e+2]=r[e][2],n[4*e+3]=r[e][3];return n},e.getCameraLightTransformMatrix=e=>(L(e,t.cameraLightTransform),e),e.computeCameraLightTransform=()=>{L(a,e.getViewMatrix()),V(a,a),X(i,[t.distance,t.distance,t.distance]),z(a,a,i),B(t.cameraLightTransform),G(t.cameraLightTransform,a,[0,0,-1])},e.deepCopy=e=>{},e.physicalOrientationToWorldDirection=e=>{const t=as(e[0],e[1],e[2],e[3]),n=ts(),r=as(0,0,1,0);var o,a;return a=t,(o=n)[0]=-a[0],o[1]=-a[1],o[2]=-a[2],o[3]=a[3],rs(r,t,r),rs(r,r,n),[r[0],r[1],r[2]]},e.getPhysicalToWorldMatrix=t=>{e.getWorldToPhysicalMatrix(t),V(t,t)},e.getWorldToPhysicalMatrix=e=>{B(e);const n=[3];Ca(t.physicalViewNorth,t.physicalViewUp,n),e[0]=n[0],e[1]=n[1],e[2]=n[2],e[4]=t.physicalViewUp[0],e[5]=t.physicalViewUp[1],e[6]=t.physicalViewUp[2],e[8]=-t.physicalViewNorth[0],e[9]=-t.physicalViewNorth[1],e[10]=-t.physicalViewNorth[2],N(e,e),zn(s,1/t.physicalScale,1/t.physicalScale,1/t.physicalScale),W(e,e,s),G(e,e,t.physicalTranslation)},e.computeViewParametersFromViewMatrix=i=>{V(a,i),qn(s,n,a),e.computeDistance();const c=t.distance;e.setPosition(s[0],s[1],s[2]),qn(l,r,a),Wn(l,l,s),jn(l,l),e.setDirectionOfProjection(l[0],l[1],l[2]),qn(u,o,a),Wn(u,u,s),jn(u,u),e.setViewUp(u[0],u[1],u[2]),e.setDistance(c)},e.computeViewParametersFromPhysicalMatrix=t=>{e.getWorldToPhysicalMatrix(a),z(a,t,a),e.computeViewParametersFromViewMatrix(a)},e.setModelTransformMatrix=e=>{t.modelTransformMatrix=e},e.getModelTransformMatrix=()=>t.modelTransformMatrix,e.setViewMatrix=n=>{t.viewMatrix=n,t.viewMatrix&&(L(a,t.viewMatrix),e.computeViewParametersFromViewMatrix(a),N(t.viewMatrix,t.viewMatrix))},e.getViewMatrix=()=>{if(t.viewMatrix)return t.modelTransformMatrix?(z(a,t.viewMatrix,t.modelTransformMatrix),a):t.viewMatrix;ge(a,t.position,t.focalPoint,t.viewUp),N(a,a);const e=new Float64Array(16);return t.modelTransformMatrix?z(e,a,t.modelTransformMatrix):L(e,a),e},e.setProjectionMatrix=e=>{t.projectionMatrix=e},e.getProjectionMatrix=(e,n,r)=>{const o=new Float64Array(16);if(B(o),t.projectionMatrix){const e=1/t.physicalScale;return zn(s,e,e,e),L(o,t.projectionMatrix),W(o,o,s),N(o,o),o}B(a);const i=t.clippingRange[1]-t.clippingRange[0],l=[t.clippingRange[0]+(n+1)*i/2,t.clippingRange[0]+(r+1)*i/2];if(t.parallelProjection){const n=t.parallelScale*e,r=t.parallelScale,o=(t.windowCenter[0]-1)*n,i=(t.windowCenter[0]+1)*n,s=(t.windowCenter[1]-1)*r,u=(t.windowCenter[1]+1)*r;he(a,o,i,s,u,l[0],l[1]),N(a,a)}else{if(t.useOffAxisProjection)throw new Error("Off-Axis projection is not supported at this time");{const n=Math.tan(Yo(t.viewAngle)/2);let r,o;!0===t.useHorizontalViewAngle?(r=t.clippingRange[0]*n,o=t.clippingRange[0]*n/e):(r=t.clippingRange[0]*n*e,o=t.clippingRange[0]*n);const i=(t.windowCenter[0]-1)*r,s=(t.windowCenter[0]+1)*r,u=(t.windowCenter[1]-1)*o,c=(t.windowCenter[1]+1)*o,d=l[0],f=l[1];a[0]=2*d/(s-i),a[5]=2*d/(c-u),a[2]=(i+s)/(s-i),a[6]=(u+c)/(c-u),a[10]=-(d+f)/(f-d),a[14]=-1,a[11]=-2*d*f/(f-d),a[15]=0}}return L(o,a),o},e.getCompositeProjectionMatrix=(t,n,r)=>{const o=e.getViewMatrix(),a=e.getProjectionMatrix(t,n,r);return z(a,o,a),a},e.setDirectionOfProjection=(e,n,r)=>{if(t.directionOfProjection[0]===e&&t.directionOfProjection[1]===n&&t.directionOfProjection[2]===r)return;t.directionOfProjection[0]=e,t.directionOfProjection[1]=n,t.directionOfProjection[2]=r;const o=t.directionOfProjection;t.focalPoint[0]=t.position[0]+o[0]*t.distance,t.focalPoint[1]=t.position[1]+o[1]*t.distance,t.focalPoint[2]=t.position[2]+o[2]*t.distance,h()},e.setDeviceAngles=(n,r,o,a)=>{const i=[3];Ca(t.physicalViewNorth,t.physicalViewUp,i);const s=B(new Float64Array(16));H(s,s,Yo(n),t.physicalViewUp),H(s,s,Yo(r),i),H(s,s,Yo(o),t.physicalViewNorth),H(s,s,Yo(-a),t.physicalViewUp);const l=new Float64Array([-t.physicalViewUp[0],-t.physicalViewUp[1],-t.physicalViewUp[2]]),u=new Float64Array(t.physicalViewNorth);qn(l,l,s),qn(u,u,s),e.setDirectionOfProjection(l[0],l[1],l[2]),e.setViewUp(u[0],u[1],u[2]),e.modified()},e.setOrientationWXYZ=(t,n,r,o)=>{const a=B(new Float64Array(16));if(0!==t&&(0!==n||0!==r||0!==o)){const e=Yo(t),i=ts();ns(i,[n,r,o],e),se(a,i)}const i=new Float64Array(3);qn(i,[0,0,-1],a);const s=new Float64Array(3);qn(s,[0,1,0],a),e.setDirectionOfProjection(...i),e.setViewUp(...s),e.modified()},e.computeClippingRange=e=>{let n=null,r=null;n=t.viewPlaneNormal,r=t.position;const o=-n[0],a=-n[1],i=-n[2],s=-(o*r[0]+a*r[1]+i*r[2]),l=[o*e[0]+a*e[2]+i*e[4]+s,1e-18];for(let t=0;t<2;t++)for(let n=0;n<2;n++)for(let r=0;r<2;r++){const u=o*e[r]+a*e[2+n]+i*e[4+t]+s;l[0]=u<l[0]?u:l[0],l[1]=u>l[1]?u:l[1]}return l}}(e,t)}var sg={newInstance:dn.newInstance(ig,"vtkCamera"),extend:ig};const lg={switch:!0,intensity:1,color:[1,1,1],position:[0,0,1],focalPoint:[0,0,0],positional:!1,exponent:1,coneAngle:30,coneFalloff:5,attenuationValues:[1,0,0],transformMatrix:null,lightType:"SceneLight",shadowAttenuation:1,direction:[0,0,0],directionMTime:0};function ug(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,lg,n),dn.obj(e,t),dn.setGet(e,t,["intensity","switch","positional","exponent","coneAngle","coneFalloff","transformMatrix","lightType","shadowAttenuation","attenuationValues"]),dn.setGetArray(e,t,["color","position","focalPoint","attenuationValues"],3),function(e,t){t.classHierarchy.push("vtkLight");const n=new Float64Array(3);e.getTransformedPosition=()=>(t.transformMatrix?qn(n,t.position,t.transformMatrix):zn(n,t.position[0],t.position[1],t.position[2]),n),e.getTransformedFocalPoint=()=>(t.transformMatrix?qn(n,t.focalPoint,t.transformMatrix):zn(n,t.focalPoint[0],t.focalPoint[1],t.focalPoint[2]),n),e.getDirection=()=>(t.directionMTime<t.mtime&&(Qn(t.direction,t.focalPoint,t.position),Aa(t.direction),t.directionMTime=t.mtime),t.direction),e.setDirection=e=>{const n=new Float64Array(3);Qn(n,t.position,e),t.focalPoint=n},e.setDirectionAngle=(t,n)=>{const r=Yo(t),o=Yo(n);e.setPosition(Math.cos(r)*Math.sin(o),Math.sin(r),Math.cos(r)*Math.cos(o)),e.setFocalPoint(0,0,0),e.setPositional(0)},e.setLightTypeToHeadLight=()=>{e.setLightType("HeadLight")},e.setLightTypeToCameraLight=()=>{e.setLightType("CameraLight")},e.setLightTypeToSceneLight=()=>{e.setTransformMatrix(null),e.setLightType("SceneLight")},e.lightTypeIsHeadLight=()=>"HeadLight"===t.lightType,e.lightTypeIsSceneLight=()=>"SceneLight"===t.lightType,e.lightTypeIsCameraLight=()=>"CameraLight"===t.lightType}(e,t)}var cg={newInstance:dn.newInstance(ug,"vtkLight"),extend:ug,LIGHT_TYPES:["HeadLight","CameraLight","SceneLight"]};const{vtkErrorMacro:dg}=dn;function fg(e,t){function n(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];t.push(e);const r=e.getNestedProps();if(r&&r.length)for(let o=0;o<r.length;o++)n(r[o],t);return t}var r;t.classHierarchy.push("vtkViewport"),e.getViewProps=()=>t.props,e.hasViewProp=e=>t.props.includes(e),e.addViewProp=n=>{n&&!e.hasViewProp(n)&&t.props.push(n)},e.removeViewProp=e=>{const n=t.props.filter(t=>t!==e);t.props.length!==n.length&&(t.props=n)},e.removeAllViewProps=()=>{t.props=[]},e.getViewPropsWithNestedProps=()=>{let r=[];const o=e.getActors2D();o.sort((e,t)=>e.getLayerNumber()-t.getLayerNumber());const a=t.props.filter(e=>!o.includes(e));for(let e=0;e<a.length;e++)n(a[e],r);return r=r.concat(o),r},e.addActor2D=e.addViewProp,e.removeActor2D=t=>{e.removeViewProp(t)},e.getActors2D=()=>(t.actors2D=[],t.props.forEach(e=>{t.actors2D=t.actors2D.concat(e.getActors2D())}),t.actors2D),e.displayToView=()=>dg("call displayToView on your view instead"),e.viewToDisplay=()=>dg("callviewtodisplay on your view instead"),e.getSize=()=>dg("call getSize on your View instead"),e.normalizedDisplayToProjection=(t,n,r)=>{const o=e.normalizedDisplayToNormalizedViewport(t,n,r);return e.normalizedViewportToProjection(o[0],o[1],o[2])},e.normalizedDisplayToNormalizedViewport=(e,n,r)=>{const o=[t.viewport[2]-t.viewport[0],t.viewport[3]-t.viewport[1]];return[(e-t.viewport[0])/o[0],(n-t.viewport[1])/o[1],r]},e.normalizedViewportToProjection=(e,t,n)=>[2*e-1,2*t-1,2*n-1],e.projectionToNormalizedDisplay=(t,n,r)=>{const o=e.projectionToNormalizedViewport(t,n,r);return e.normalizedViewportToNormalizedDisplay(o[0],o[1],o[2])},e.normalizedViewportToNormalizedDisplay=(e,n,r)=>{const o=[t.viewport[2]-t.viewport[0],t.viewport[3]-t.viewport[1]];return[e*o[0]+t.viewport[0],n*o[1]+t.viewport[1],r]},e.projectionToNormalizedViewport=(e,t,n)=>[.5*(e+1),.5*(t+1),.5*(n+1)],e.PickPropFrom=(r="PickPropFrom",()=>dg("vtkViewport::".concat(r," - NOT IMPLEMENTED")))}const pg={background:[0,0,0],background2:[.2,.2,.2],gradientBackground:!1,viewport:[0,0,1,1],aspect:[1,1],pixelAspect:[1,1],props:[],actors2D:[]};function hg(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,pg,n),dn.obj(e,t),dn.event(e,t,"event"),dn.setGetArray(e,t,["viewport"],4),dn.setGetArray(e,t,["background","background2"],3),fg(e,t)}var mg={newInstance:dn.newInstance(hg,"vtkViewport"),extend:hg};const{vtkDebugMacro:gg,vtkErrorMacro:vg,vtkWarningMacro:yg}=fn;function bg(e){return()=>vg("vtkRenderer::".concat(e," - NOT IMPLEMENTED"))}const _g={pickedProp:null,activeCamera:null,allBounds:[],ambient:[1,1,1],allocatedRenderTime:100,timeFactor:1,automaticLightCreation:!0,twoSidedLighting:!0,lastRenderTimeInSeconds:-1,renderWindow:null,lights:[],actors:[],volumes:[],lightFollowCamera:!0,numberOfPropsRendered:0,propArray:null,pathArray:null,layer:0,preserveColorBuffer:!1,preserveDepthBuffer:!1,computeVisiblePropBounds:Ki(),interactive:!0,nearClippingPlaneTolerance:0,clippingRangeExpansion:.05,erase:!0,draw:!0,useShadows:!1,useDepthPeeling:!1,occlusionRatio:0,maximumNumberOfPeels:4,selector:null,delegate:null,texturedBackground:!1,backgroundTexture:null,environmentTexture:null,environmentTextureDiffuseStrength:1,environmentTextureSpecularStrength:1,useEnvironmentTextureAsBackground:!1,pass:0};function Tg(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};for(Object.assign(t,_g,n),mg.extend(e,t,n),t.background||(t.background=[0,0,0,1]);t.background.length<3;)t.background.push(0);3===t.background.length&&t.background.push(1),Ft(e,t,["_renderWindow","allocatedRenderTime","timeFactor","lastRenderTimeInSeconds","numberOfPropsRendered","lastRenderingUsedDepthPeeling","selector"]),Wt(e,t,["twoSidedLighting","lightFollowCamera","automaticLightCreation","erase","draw","nearClippingPlaneTolerance","clippingRangeExpansion","backingStore","interactive","layer","preserveColorBuffer","preserveDepthBuffer","useDepthPeeling","occlusionRatio","maximumNumberOfPeels","delegate","backgroundTexture","texturedBackground","environmentTexture","environmentTextureDiffuseStrength","environmentTextureSpecularStrength","useEnvironmentTextureAsBackground","useShadows","pass"]),Ht(e,t,["actors","volumes","lights"]),Kt(e,t,["background"],4,1),Zt(0,t,["renderWindow"]),function(e,t){t.classHierarchy.push("vtkRenderer");const n={type:"ComputeVisiblePropBoundsEvent",renderer:e},r={type:"ResetCameraClippingRangeEvent",renderer:e},o={type:"ResetCameraEvent",renderer:e};e.updateCamera=()=>(t.activeCamera||(gg("No cameras are on, creating one."),e.getActiveCameraAndResetIfCreated()),t.activeCamera.render(e),!0),e.updateLightsGeometryToFollowCamera=()=>{const n=e.getActiveCameraAndResetIfCreated();t.lights.forEach(e=>{e.lightTypeIsSceneLight()||(e.lightTypeIsHeadLight()?(e.setPositionFrom(n.getPositionByReference()),e.setFocalPointFrom(n.getFocalPointByReference()),e.modified(n.getMTime())):e.lightTypeIsCameraLight()?e.setTransformMatrix(n.getCameraLightTransformMatrix(M())):vg("light has unknown light type",e.get()))})},e.updateLightGeometry=()=>!t.lightFollowCamera||e.updateLightsGeometryToFollowCamera(),e.allocateTime=bg("allocateTime"),e.updateGeometry=bg("updateGeometry"),e.getVTKWindow=()=>t._renderWindow,e.setLayer=n=>{gg(e.getClassName(),e,"setting Layer to ",n),t.layer!==n&&(t.layer=n,e.modified()),e.setPreserveColorBuffer(!!n)},e.setActiveCamera=n=>t.activeCamera!==n&&(t.activeCamera=n,e.modified(),e.invokeEvent({type:"ActiveCameraEvent",camera:n}),!0),e.makeCamera=()=>{const t=sg.newInstance();return e.invokeEvent({type:"CreateCameraEvent",camera:t}),t},e.getActiveCamera=()=>(t.activeCamera||(t.activeCamera=e.makeCamera()),t.activeCamera),e.getActiveCameraAndResetIfCreated=()=>(t.activeCamera||(e.getActiveCamera(),e.resetCamera()),t.activeCamera),e.getActors=()=>(t.actors=[],t.props.forEach(e=>{t.actors=t.actors.concat(e.getActors())}),t.actors),e.addActor=e.addViewProp,e.removeActor=n=>{t.actors=t.actors.filter(e=>e!==n),e.removeViewProp(n),e.modified()},e.removeAllActors=()=>{e.getActors().forEach(t=>{e.removeViewProp(t)}),t.actors=[],e.modified()},e.getVolumes=()=>(t.volumes=[],t.props.forEach(e=>{t.volumes=t.volumes.concat(e.getVolumes())}),t.volumes),e.addVolume=e.addViewProp,e.removeVolume=n=>{t.volumes=t.volumes.filter(e=>e!==n),e.removeViewProp(n),e.modified()},e.removeAllVolumes=()=>{e.getVolumes().forEach(t=>{e.removeViewProp(t)}),t.volumes=[],e.modified()},e.hasLight=e=>t.lights.includes(e),e.addLight=n=>{n&&!e.hasLight(n)&&(t.lights.push(n),e.modified())},e.removeLight=n=>{t.lights=t.lights.filter(e=>e!==n),e.modified()},e.removeAllLights=()=>{t.lights=[],e.modified()},e.setLightCollection=n=>{t.lights=n,e.modified()},e.makeLight=cg.newInstance,e.createLight=()=>{t.automaticLightCreation&&(t._createdLight&&(e.removeLight(t._createdLight),t._createdLight.delete(),t._createdLight=null),t._createdLight=e.makeLight(),e.addLight(t._createdLight),t._createdLight.setLightTypeToHeadLight(),t._createdLight.setPosition(e.getActiveCamera().getPosition()),t._createdLight.setFocalPoint(e.getActiveCamera().getFocalPoint()))},e.normalizedDisplayToWorld=(t,n,r,o)=>{let a=e.normalizedDisplayToProjection(t,n,r);return a=e.projectionToView(a[0],a[1],a[2],o),e.viewToWorld(a[0],a[1],a[2])},e.worldToNormalizedDisplay=(t,n,r,o)=>{let a=e.worldToView(t,n,r);return a=e.viewToProjection(a[0],a[1],a[2],o),e.projectionToNormalizedDisplay(a[0],a[1],a[2])},e.viewToWorld=(e,n,r)=>{if(null===t.activeCamera)return vg("ViewToWorld: no active camera, cannot compute view to world, returning 0,0,0"),[0,0,0];const o=t.activeCamera.getViewMatrix();V(o,o),N(o,o);const a=new Float64Array([e,n,r]);return qn(a,a,o),a},e.projectionToView=(e,n,r,o)=>{if(null===t.activeCamera)return vg("ProjectionToView: no active camera, cannot compute projection to view, returning 0,0,0"),[0,0,0];const a=t.activeCamera.getProjectionMatrix(o,-1,1);V(a,a),N(a,a);const i=new Float64Array([e,n,r]);return qn(i,i,a),i},e.worldToView=(e,n,r)=>{if(null===t.activeCamera)return vg("WorldToView: no active camera, cannot compute view to world, returning 0,0,0"),[0,0,0];const o=t.activeCamera.getViewMatrix();N(o,o);const a=new Float64Array([e,n,r]);return qn(a,a,o),a},e.viewToProjection=(e,n,r,o)=>{if(null===t.activeCamera)return vg("ViewToProjection: no active camera, cannot compute view to projection, returning 0,0,0"),[0,0,0];const a=t.activeCamera.getProjectionMatrix(o,-1,1);N(a,a);const i=new Float64Array([e,n,r]);return qn(i,i,a),i},e.computeVisiblePropBounds=()=>{t.allBounds[0]=ll.INIT_BOUNDS[0],t.allBounds[1]=ll.INIT_BOUNDS[1],t.allBounds[2]=ll.INIT_BOUNDS[2],t.allBounds[3]=ll.INIT_BOUNDS[3],t.allBounds[4]=ll.INIT_BOUNDS[4],t.allBounds[5]=ll.INIT_BOUNDS[5];let r=!0;e.invokeEvent(n);for(let e=0;e<t.props.length;++e){const n=t.props[e];if(n.getVisibility()&&n.getUseBounds()){const e=n.getBounds();e&&Ii(e)&&(r=!1,e[0]<t.allBounds[0]&&(t.allBounds[0]=e[0]),e[1]>t.allBounds[1]&&(t.allBounds[1]=e[1]),e[2]<t.allBounds[2]&&(t.allBounds[2]=e[2]),e[3]>t.allBounds[3]&&(t.allBounds[3]=e[3]),e[4]<t.allBounds[4]&&(t.allBounds[4]=e[4]),e[5]>t.allBounds[5]&&(t.allBounds[5]=e[5]))}}return r&&(Ei(t.allBounds),gg("Can't compute bounds, no 3D props are visible")),t.allBounds},e.resetCamera=function(){const n=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null)||e.computeVisiblePropBounds(),r=[0,0,0];if(!Ii(n))return gg("Cannot reset camera!"),!1;let a=null;if(!e.getActiveCamera())return vg("Trying to reset non-existent camera"),!1;a=t.activeCamera.getViewPlaneNormal(),t.activeCamera.setViewAngle(30),r[0]=(n[0]+n[1])/2,r[1]=(n[2]+n[3])/2,r[2]=(n[4]+n[5])/2;let i=n[1]-n[0],s=n[3]-n[2],l=n[5]-n[4];i*=i,s*=s,l*=l;let u=i+s+l;u=0===u?1:u,u=.5*Math.sqrt(u);const c=Yo(t.activeCamera.getViewAngle()),d=u,f=u/Math.sin(.5*c),p=t.activeCamera.getViewUp();return Math.abs(Sa(p,a))>.999&&(yg("Resetting view-up since view plane normal is parallel"),t.activeCamera.setViewUp(-p[2],p[0],p[1])),t.activeCamera.setFocalPoint(r[0],r[1],r[2]),t.activeCamera.setPosition(r[0]+f*a[0],r[1]+f*a[1],r[2]+f*a[2]),e.resetCameraClippingRange(n),t.activeCamera.setParallelScale(d),t.activeCamera.setPhysicalScale(u),t.activeCamera.setPhysicalTranslation(-r[0],-r[1],-r[2]),e.invokeEvent(o),!0},e.resetCameraClippingRange=function(){const n=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null)||e.computeVisiblePropBounds();if(!Ii(n))return gg("Cannot reset camera clipping range!"),!1;if(e.getActiveCameraAndResetIfCreated(),!t.activeCamera)return vg("Trying to reset clipping range of non-existent camera"),!1;const o=t.activeCamera.computeClippingRange(n);let a=0;if(t.activeCamera.getParallelProjection())a=.2*t.activeCamera.getParallelScale();else{const e=Yo(t.activeCamera.getViewAngle());a=.2*Math.tan(e/2)*o[1]}return o[1]-o[0]<a&&(a=a-o[1]+o[0],o[1]+=a/2,o[0]-=a/2),o[0]<0&&(o[0]=0),o[0]=.99*o[0]-(o[1]-o[0])*t.clippingRangeExpansion,o[1]=1.01*o[1]+(o[1]-o[0])*t.clippingRangeExpansion,o[0]=o[0]>=o[1]?.01*o[1]:o[0],t.nearClippingPlaneTolerance||(t.nearClippingPlaneTolerance=.01),o[0]<t.nearClippingPlaneTolerance*o[1]&&(o[0]=t.nearClippingPlaneTolerance*o[1]),t.activeCamera.setClippingRange(o[0],o[1]),e.invokeEvent(r),!1},e.setRenderWindow=e=>{e!==t._renderWindow&&(t._vtkWindow=e,t._renderWindow=e)},e.visibleActorCount=()=>t.props.filter(e=>e.getVisibility()).length,e.visibleVolumeCount=e.visibleActorCount,e.getMTime=()=>{let e=t.mtime;const n=t.activeCamera?t.activeCamera.getMTime():0;n>e&&(e=n);const r=t._createdLight?t._createdLight.getMTime():0;return r>e&&(e=r),e},e.getTransparent=()=>!!t.preserveColorBuffer,e.isActiveCameraCreated=()=>!!t.activeCamera}(e,t)}var xg={newInstance:Qt(Tg,"vtkRenderer"),extend:Tg};const Sg=Object.create(null);function wg(e,t){Sg[e]=t}function Cg(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Sg[e]&&Sg[e](t)}const Pg={defaultViewAPI:"WebGL",renderers:[],views:[],interactor:null,neverRendered:!0,numberOfLayers:1,childRenderWindows:[]};function Ag(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Pg,n),dn.obj(e,t),dn.setGet(e,t,["interactor","numberOfLayers","_views","defaultViewAPI"]),dn.get(e,t,["neverRendered"]),dn.getArray(e,t,["renderers","childRenderWindows"]),dn.moveToProtected(e,t,["views"]),dn.event(e,t,"completion"),function(e,t){t.classHierarchy.push("vtkRenderWindow"),e.addRenderer=n=>{e.hasRenderer(n)||(n.setRenderWindow(e),t.renderers.push(n),e.modified())},e.removeRenderer=n=>{t.renderers=t.renderers.filter(e=>e!==n),e.modified()},e.hasRenderer=e=>-1!==t.renderers.indexOf(e),e.newAPISpecificView=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Cg(e||t.defaultViewAPI,n)},e.addView=n=>{e.hasView(n)||(n.setRenderable(e),t._views.push(n),e.modified())},e.removeView=n=>{t._views=t._views.filter(e=>e!==n),e.modified()},e.hasView=e=>-1!==t._views.indexOf(e),e.preRender=()=>{t.renderers.forEach(e=>{e.isActiveCameraCreated()||e.resetCamera()})},e.render=()=>{e.preRender(),t.interactor?t.interactor.render():t._views.forEach(e=>e.traverseAllPasses())},e.getStatistics=()=>{const e={propCount:0,invisiblePropCount:0,gpuMemoryMB:0};return t._views.forEach(t=>{t.getGraphicsMemoryInfo&&(e.gpuMemoryMB+=t.getGraphicsMemoryInfo()/1e6)}),t.renderers.forEach(n=>{const r=n.getViewProps(),o=t._views[0].getViewNodeFor(n);r.forEach(t=>{if(t.getVisibility()){e.propCount+=1;const n=t.getMapper&&t.getMapper();if(n&&n.getPrimitiveCount){const t=o.getViewNodeFor(n);if(t){t.getAllocatedGPUMemoryInBytes&&(e.gpuMemoryMB+=t.getAllocatedGPUMemoryInBytes()/1e6);const r=n.getPrimitiveCount();Object.keys(r).forEach(t=>{e[t]||(e[t]=0),e[t]+=r[t]})}}}else e.invisiblePropCount+=1})}),e.str=Object.keys(e).map(t=>"".concat(t,": ").concat(e[t])).join("\n"),e},e.captureImages=function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"image/png",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return dn.setImmediate(e.render),t._views.map(e=>e.captureNextImage?e.captureNextImage(n,r):void 0).filter(e=>!!e)},e.addRenderWindow=n=>!t.childRenderWindows.includes(n)&&(t.childRenderWindows.push(n),e.modified(),!0),e.removeRenderWindow=n=>{const r=t.childRenderWindows.findIndex(e=>e===n);return!(r<0)&&(t.childRenderWindows.splice(r,1),e.modified(),!0)}}(e,t)}var Eg={newInstance:dn.newInstance(Ag,"vtkRenderWindow"),extend:Ag,registerViewConstructor:wg,listViewAPIs:function(){return Object.keys(Sg)},newAPISpecificView:Cg};const Ig={Unknown:0,LeftController:1,RightController:2},Og={Unknown:0,Trigger:1,TrackPad:2,Grip:3,Thumbstick:4,A:5,B:6,ApplicationMenu:7};var Mg={Device:Ig,Input:Og,Axis:{Unknown:0,TouchpadX:1,TouchpadY:2,ThumbstickX:3,ThumbstickY:4},MouseButton:{LeftButton:1,MiddleButton:2,RightButton:3}};const{Device:Rg,Input:Lg}=Mg,{vtkWarningMacro:kg,vtkErrorMacro:Dg,normalizeWheel:Bg,vtkOnceErrorMacro:Ng}=dn,Vg={ctrlKey:!1,altKey:!1,shiftKey:!1},Fg={"xr-standard":[Lg.Trigger,Lg.Grip,Lg.TrackPad,Lg.Thumbstick,Lg.A,Lg.B]},Ug=["StartAnimation","Animation","EndAnimation","PointerEnter","PointerLeave","MouseEnter","MouseLeave","StartMouseMove","MouseMove","EndMouseMove","LeftButtonPress","LeftButtonRelease","MiddleButtonPress","MiddleButtonRelease","RightButtonPress","RightButtonRelease","KeyPress","KeyDown","KeyUp","StartMouseWheel","MouseWheel","EndMouseWheel","StartPinch","Pinch","EndPinch","StartPan","Pan","EndPan","StartRotate","Rotate","EndRotate","Button3D","Move3D","StartPointerLock","EndPointerLock","StartInteraction","Interaction","EndInteraction","AnimationFrameRateUpdate"];function zg(e){e.cancelable&&e.preventDefault()}function Gg(e){const t=Object.create(null);return e.forEach(e=>{let{pointerId:n,position:r}=e;t[n]=r}),t}const Wg={renderWindow:null,interactorStyle:null,picker:null,pickingManager:null,initialized:!1,enabled:!1,enableRender:!0,currentRenderer:null,lightFollowCamera:!0,desiredUpdateRate:30,stillUpdateRate:2,container:null,recognizeGestures:!0,currentGesture:"Start",animationRequest:null,lastFrameTime:.1,recentAnimationFrameRate:10,wheelTimeoutID:0,moveTimeoutID:0,lastGamepadValues:{},preventDefaultOnPointerDown:!1,preventDefaultOnPointerUp:!1,mouseScrollDebounceByPass:!1};function Hg(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Wg,n),dn.obj(e,t),t._animationExtendedEnd=0,dn.event(e,t,"RenderEvent"),Ug.forEach(n=>dn.event(e,t,n)),dn.get(e,t,["initialized","interactorStyle","lastFrameTime","recentAnimationFrameRate","_view"]),dn.setGet(e,t,["container","lightFollowCamera","enabled","enableRender","recognizeGestures","desiredUpdateRate","stillUpdateRate","picker","preventDefaultOnPointerDown","preventDefaultOnPointerUp","mouseScrollDebounceByPass"]),dn.moveToProtected(e,t,["view"]),function(e,t){t.classHierarchy.push("vtkRenderWindowInteractor");const n=u({},e),r=new Set,o=new Map;let a=1;function i(n,r){t._forcedRenderer||(t.currentRenderer=e.findPokedRenderer(n,r))}e.start=()=>{(t.initialized||(e.initialize(),t.initialized))&&e.startEventLoop()},e.setRenderWindow=e=>{Dg("you want to call setView(view) instead of setRenderWindow on a vtk.js interactor")},e.setInteractorStyle=n=>{t.interactorStyle!==n&&(null!=t.interactorStyle&&t.interactorStyle.setInteractor(null),t.interactorStyle=n,null!=t.interactorStyle&&t.interactorStyle.getInteractor()!==e&&t.interactorStyle.setInteractor(e))},e.initialize=()=>{t.initialized=!0,e.enable(),e.render()},e.enable=()=>e.setEnabled(!0),e.disable=()=>e.setEnabled(!1),e.startEventLoop=()=>kg("empty event loop"),e.getCurrentRenderer=()=>(t.currentRenderer||i(0,0),t.currentRenderer);const s=t._getScreenEventPositionFor||function(e){const n=t._view.getCanvas(),r=n.getBoundingClientRect(),a=n.width/r.width,s=n.height/r.height,l={x:a*(e.clientX-r.left),y:s*(r.height-e.clientY+r.top),z:0,movementX:a*e.movementX,movementY:s*e.movementY};return(o.size<=1||!t.currentRenderer)&&i(l.x,l.y),l};function l(e){return{controlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey}}function c(e){const t=l(e);return u({key:e.key,keyCode:e.charCode},t)}function d(e){return e.pointerType||""}const f=()=>{if(null===t.container)return;const{container:n}=t;n.addEventListener("contextmenu",zg),n.addEventListener("wheel",e.handleWheel),n.addEventListener("DOMMouseScroll",e.handleWheel),n.addEventListener("pointerenter",e.handlePointerEnter),n.addEventListener("pointerleave",e.handlePointerLeave),n.addEventListener("pointermove",e.handlePointerMove,{passive:!1}),n.addEventListener("pointerdown",e.handlePointerDown,{passive:!1}),n.addEventListener("pointerup",e.handlePointerUp),n.addEventListener("pointercancel",e.handlePointerCancel),n.addEventListener("keypress",e.handleKeyPress),n.addEventListener("keydown",e.handleKeyDown),document.addEventListener("keyup",e.handleKeyUp),document.addEventListener("pointerlockchange",e.handlePointerLockChange),n.tabIndex=0,n.style.touchAction="none",n.style.userSelect="none",n.style.webkitTapHighlightColor="rgba(0,0,0,0)"};e.bindEvents=e=>{null!==e&&n.setContainer(e)&&f()};const p=()=>{clearTimeout(t.moveTimeoutID),clearTimeout(t.wheelTimeoutID),t.moveTimeoutID=0,t.wheelTimeoutID=0,a=1;const{container:n}=t;n&&(n.removeEventListener("contextmenu",zg),n.removeEventListener("wheel",e.handleWheel),n.removeEventListener("DOMMouseScroll",e.handleWheel),n.removeEventListener("pointerenter",e.handlePointerEnter),n.removeEventListener("pointerleave",e.handlePointerLeave),n.removeEventListener("pointermove",e.handlePointerMove,{passive:!1}),n.removeEventListener("pointerdown",e.handlePointerDown,{passive:!1}),n.removeEventListener("pointerup",e.handlePointerUp),n.removeEventListener("pointercancel",e.handlePointerCancel),n.removeEventListener("keypress",e.handleKeyPress),n.removeEventListener("keydown",e.handleKeyDown)),document.removeEventListener("keyup",e.handleKeyUp),document.removeEventListener("pointerlockchange",e.handlePointerLockChange),o.clear()};function h(){t._view&&t.enabled&&t.enableRender&&(t.inRender=!0,t._view.traverseAllPasses(),t.inRender=!1),e.invokeRenderEvent()}e.unbindEvents=()=>{p(),n.setContainer(null)},e.handleKeyPress=t=>{const n=c(t);e.keyPressEvent(n)},e.handleKeyDown=t=>{const n=c(t);e.keyDownEvent(n)},e.handleKeyUp=t=>{const n=c(t);e.keyUpEvent(n)},e.handlePointerEnter=t=>{const n=u(u({},l(t)),{},{position:s(t),deviceType:d(t)});e.pointerEnterEvent(n),"mouse"===n.deviceType&&e.mouseEnterEvent(n)},e.handlePointerLeave=t=>{const n=u(u({},l(t)),{},{position:s(t),deviceType:d(t)});e.pointerLeaveEvent(n),"mouse"===n.deviceType&&e.mouseLeaveEvent(n)},e.handlePointerDown=n=>{if(!(n.button>2||e.isPointerLocked()))switch(t.preventDefaultOnPointerDown&&zg(n),n.target.hasPointerCapture(n.pointerId)&&n.target.releasePointerCapture(n.pointerId),t.container.setPointerCapture(n.pointerId),o.has(n.pointerId)&&kg("[RenderWindowInteractor] duplicate pointerId detected"),o.set(n.pointerId,{pointerId:n.pointerId,position:s(n)}),n.pointerType){case"pen":case"touch":e.handleTouchStart(n);break;default:e.handleMouseDown(n)}},e.handlePointerUp=n=>{if(o.has(n.pointerId))switch(t.preventDefaultOnPointerUp&&zg(n),o.delete(n.pointerId),t.container.releasePointerCapture(n.pointerId),n.pointerType){case"pen":case"touch":e.handleTouchEnd(n);break;default:e.handleMouseUp(n)}},e.handlePointerCancel=t=>{if(o.has(t.pointerId))switch(o.delete(t.pointerId),t.pointerType){case"pen":case"touch":e.handleTouchEnd(t);break;default:e.handleMouseUp(t)}},e.handlePointerMove=t=>{switch(o.has(t.pointerId)&&(o.get(t.pointerId).position=s(t)),t.pointerType){case"pen":case"touch":e.handleTouchMove(t);break;default:e.handleMouseMove(t)}},e.handleMouseDown=t=>{const n=u(u({},l(t)),{},{position:s(t),deviceType:d(t)});switch(t.button){case 0:e.leftButtonPressEvent(n);break;case 1:e.middleButtonPressEvent(n);break;case 2:e.rightButtonPressEvent(n);break;default:Dg("Unknown mouse button pressed: ".concat(t.button))}},e.requestPointerLock=()=>{t.container&&t.container.requestPointerLock()},e.exitPointerLock=()=>{var e,t;return null===(e=(t=document).exitPointerLock)||void 0===e?void 0:e.call(t)},e.isPointerLocked=()=>!!t.container&&document.pointerLockElement===t.container,e.handlePointerLockChange=()=>{e.isPointerLocked()?e.startPointerLockEvent():e.endPointerLockEvent()},e.requestAnimation=n=>{void 0!==n?r.has(n)?kg("requester is already registered for animating"):(r.add(n),t.animationRequest||1!==r.size||t.xrAnimation||(t._animationStartTime=Date.now(),t._animationFrameCount=0,t.animationRequest=requestAnimationFrame(e.handleAnimation),e.startAnimationEvent())):Dg("undefined requester, can not start animating")},e.extendAnimation=n=>{const o=Date.now()+n;t._animationExtendedEnd=Math.max(t._animationExtendedEnd,o),t.animationRequest||0!==r.size||t.xrAnimation||(t._animationStartTime=Date.now(),t._animationFrameCount=0,t.animationRequest=requestAnimationFrame(e.handleAnimation),e.startAnimationEvent())},e.isAnimating=()=>t.xrAnimation||null!==t.animationRequest,e.cancelAnimation=function(n){let o=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(r.has(n))r.delete(n),t.animationRequest&&0===r.size&&Date.now()>t._animationExtendedEnd&&(cancelAnimationFrame(t.animationRequest),t.animationRequest=null,e.endAnimationEvent(),e.render());else if(!o){const e=n&&n.getClassName?n.getClassName():n;kg("".concat(e," did not request an animation"))}},e.switchToXRAnimation=()=>{t.animationRequest&&(cancelAnimationFrame(t.animationRequest),t.animationRequest=null),t.xrAnimation=!0},e.returnFromXRAnimation=()=>{t.xrAnimation=!1,0!==r.size&&(t.recentAnimationFrameRate=10,t.animationRequest=requestAnimationFrame(e.handleAnimation))},e.updateXRGamepads=(n,r,o)=>{n.inputSources.forEach(n=>{const a=null==n.gripSpace?null:r.getPose(n.gripSpace,o),i=null==n.gripSpace?null:r.getPose(n.targetRaySpace,o),s=n.gamepad,l=n.handedness;if(s){s.index in t.lastGamepadValues||(t.lastGamepadValues[s.index]={left:{buttons:{}},right:{buttons:{}},none:{buttons:{}}});for(let r=0;r<s.buttons.length;++r)r in t.lastGamepadValues[s.index][l].buttons||(t.lastGamepadValues[s.index][l].buttons[r]=!1),t.lastGamepadValues[s.index][l].buttons[r]!==s.buttons[r].pressed&&null!=a&&(e.button3DEvent({gamepad:s,position:a.transform.position,orientation:a.transform.orientation,targetPosition:i.transform.position,targetOrientation:i.transform.orientation,pressed:s.buttons[r].pressed,device:"left"===n.handedness?Rg.LeftController:Rg.RightController,input:Fg[s.mapping]&&Fg[s.mapping][r]?Fg[s.mapping][r]:Lg.Trigger}),t.lastGamepadValues[s.index][l].buttons[r]=s.buttons[r].pressed),t.lastGamepadValues[s.index][l].buttons[r]&&null!=a&&e.move3DEvent({gamepad:s,position:a.transform.position,orientation:a.transform.orientation,targetPosition:i.transform.position,targetOrientation:i.transform.orientation,device:"left"===n.handedness?Rg.LeftController:Rg.RightController})}})},e.handleMouseMove=n=>{const r=u(u({},l(n)),{},{position:s(n),deviceType:d(n)});0===t.moveTimeoutID?e.startMouseMoveEvent(r):(e.mouseMoveEvent(r),clearTimeout(t.moveTimeoutID)),t.moveTimeoutID=setTimeout(()=>{e.endMouseMoveEvent(),t.moveTimeoutID=0},200)},e.handleAnimation=()=>{const n=Date.now();t._animationFrameCount++,n-t._animationStartTime>1e3&&t._animationFrameCount>1&&(t.recentAnimationFrameRate=1e3*(t._animationFrameCount-1)/(n-t._animationStartTime),t.lastFrameTime=1/t.recentAnimationFrameRate,e.animationFrameRateUpdateEvent(),t._animationStartTime=n,t._animationFrameCount=1),e.animationEvent(),h(),r.size>0||Date.now()<t._animationExtendedEnd?t.animationRequest=requestAnimationFrame(e.handleAnimation):(cancelAnimationFrame(t.animationRequest),t.animationRequest=null,e.endAnimationEvent(),e.render())},e.handleWheel=n=>{zg(n);const r=u(u(u({},Bg(n)),l(n)),{},{position:s(n),deviceType:d(n)});0===t.wheelTimeoutID&&(a=Math.abs(r.spinY)>=.3?Math.abs(r.spinY):1),r.spinY/=a,0===t.wheelTimeoutID?(e.startMouseWheelEvent(r),e.mouseWheelEvent(r)):(e.mouseWheelEvent(r),clearTimeout(t.wheelTimeoutID)),t.mouseScrollDebounceByPass?(e.extendAnimation(600),e.endMouseWheelEvent(),t.wheelTimeoutID=0):t.wheelTimeoutID=setTimeout(()=>{e.extendAnimation(600),e.endMouseWheelEvent(),t.wheelTimeoutID=0},200)},e.handleMouseUp=t=>{const n=u(u({},l(t)),{},{position:s(t),deviceType:d(t)});switch(t.button){case 0:e.leftButtonReleaseEvent(n);break;case 1:e.middleButtonReleaseEvent(n);break;case 2:e.rightButtonReleaseEvent(n);break;default:Dg("Unknown mouse button released: ".concat(t.button))}},e.handleTouchStart=n=>{const r=[...o.values()];if(t.recognizeGestures&&r.length>1){const t=Gg(o);if(2===r.length){const t=u(u({},l(Vg)),{},{position:r[0].position,deviceType:d(n)});e.leftButtonReleaseEvent(t)}e.recognizeGesture("TouchStart",t)}else if(1===r.length){const t=u(u({},l(Vg)),{},{position:s(n),deviceType:d(n)});e.leftButtonPressEvent(t)}},e.handleTouchMove=n=>{const r=[...o.values()];if(t.recognizeGestures&&r.length>1){const t=Gg(o);e.recognizeGesture("TouchMove",t)}else if(1===r.length){const t=u(u({},l(Vg)),{},{position:r[0].position,deviceType:d(n)});e.mouseMoveEvent(t)}},e.handleTouchEnd=n=>{const r=[...o.values()];if(t.recognizeGestures)if(0===r.length){const t=u(u({},l(Vg)),{},{position:s(n),deviceType:d(n)});e.leftButtonReleaseEvent(t)}else if(1===r.length){const t=Gg(o);e.recognizeGesture("TouchEnd",t);const a=u(u({},l(Vg)),{},{position:r[0].position,deviceType:d(n)});e.leftButtonPressEvent(a)}else{const t=Gg(o);e.recognizeGesture("TouchMove",t)}else if(1===r.length){const t=u(u({},l(Vg)),{},{position:r[0].position,deviceType:d(n)});e.leftButtonReleaseEvent(t)}},e.setView=n=>{t._view!==n&&(t._view=n,t._view.getRenderable().setInteractor(e),e.modified())},e.getFirstRenderer=()=>{var e;return null===(e=t._view)||void 0===e||null===(e=e.getRenderable())||void 0===e||null===(e=e.getRenderersByReference())||void 0===e?void 0:e[0]},e.findPokedRenderer=function(){var e;let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!t._view)return null;const o=null===(e=t._view)||void 0===e||null===(e=e.getRenderable())||void 0===e?void 0:e.getRenderers();if(!o||0===o.length)return null;o.sort((e,t)=>e.getLayer()-t.getLayer());let a=null,i=null,s=null,l=o.length;for(;l--;){const e=o[l];if(t._view.isInViewport(n,r,e)&&e.getInteractive()){s=e;break}null===a&&e.getInteractive()&&(a=e),null===i&&t._view.isInViewport(n,r,e)&&(i=e)}return null===s&&(s=a),null===s&&(s=i),null==s&&(s=o[0]),s},e.render=()=>{e.isAnimating()||t.inRender||h()},Ug.forEach(n=>{const r=n.charAt(0).toLowerCase()+n.slice(1);e["".concat(r,"Event")]=r=>{if(!t.enabled)return;if(!e.getCurrentRenderer())return void Ng("\n          Can not forward events without a current renderer on the interactor.\n        ");const o=u({type:n,pokedRenderer:t.currentRenderer,firstRenderer:e.getFirstRenderer()},r);e["invoke".concat(n)](o)}}),e.recognizeGesture=(n,r)=>{if(Object.keys(r).length>2)return;if(t.startingEventPositions||(t.startingEventPositions={}),"TouchStart"===n)return Object.keys(r).forEach(e=>{t.startingEventPositions[e]=r[e]}),void(t.currentGesture="Start");if("TouchEnd"===n)return"Pinch"===t.currentGesture&&(e.render(),e.endPinchEvent()),"Rotate"===t.currentGesture&&(e.render(),e.endRotateEvent()),"Pan"===t.currentGesture&&(e.render(),e.endPanEvent()),t.currentGesture="Start",void(t.startingEventPositions={});let o=0;const a=[],i=[];Object.keys(r).forEach(e=>{a[o]=r[e],i[o]=t.startingEventPositions[e],o++});const s=Math.sqrt((i[0].x-i[1].x)*(i[0].x-i[1].x)+(i[0].y-i[1].y)*(i[0].y-i[1].y)),l=Math.sqrt((a[0].x-a[1].x)*(a[0].x-a[1].x)+(a[0].y-a[1].y)*(a[0].y-a[1].y));let u=Qo(Math.atan2(i[1].y-i[0].y,i[1].x-i[0].x)),c=Qo(Math.atan2(a[1].y-a[0].y,a[1].x-a[0].x)),d=c-u;c=c+180>=360?c-180:c+180,u=u+180>=360?u-180:u+180,Math.abs(c-u)<Math.abs(d)&&(d=c-u);const f=[];if(f[0]=(a[0].x-i[0].x+a[1].x-i[1].x)/2,f[1]=(a[0].y-i[0].y+a[1].y-i[1].y)/2,"TouchMove"===n)if("Start"===t.currentGesture){let n=.01*Math.sqrt(t.container.clientWidth*t.container.clientWidth+t.container.clientHeight*t.container.clientHeight);n<15&&(n=15);const o=Math.abs(l-s),a=3.1415926*l*Math.abs(d)/360,i=Math.sqrt(f[0]*f[0]+f[1]*f[1]);if(o>n&&o>a&&o>i){t.currentGesture="Pinch";const n={scale:1,touches:r};e.startPinchEvent(n)}else if(a>n&&a>i){t.currentGesture="Rotate";const n={rotation:0,touches:r};e.startRotateEvent(n)}else if(i>n){t.currentGesture="Pan";const n={translation:[0,0],touches:r};e.startPanEvent(n)}}else{if("Rotate"===t.currentGesture){const t={rotation:d,touches:r};e.rotateEvent(t)}if("Pinch"===t.currentGesture){const t={scale:l/s,touches:r};e.pinchEvent(t)}if("Pan"===t.currentGesture){const t={translation:f,touches:r};e.panEvent(t)}}},e.handleVisibilityChange=()=>{t._animationStartTime=Date.now(),t._animationFrameCount=0},e.setCurrentRenderer=e=>{t._forcedRenderer=!!e,t.currentRenderer=e},e.setContainer=e=>{p();const t=n.setContainer(null!==e&&void 0!==e?e:null);return t&&f(),t},e.delete=()=>{for(;r.size;)e.cancelAnimation(r.values().next().value);"undefined"!==typeof document.hidden&&document.removeEventListener("visibilitychange",e.handleVisibilityChange),t.container&&e.setContainer(null),n.delete()},"undefined"!==typeof document.hidden&&document.addEventListener("visibilitychange",e.handleVisibilityChange,!1)}(e,t)}var jg=u({newInstance:dn.newInstance(Hg,"vtkRenderWindowInteractor"),extend:Hg,handledEvents:Ug},Mg);const{vtkErrorMacro:Kg,VOID:Zg}=dn;const qg={computeWorldToDisplay:function(e,t,n,r){return e.getRenderWindow().getViews()[0].worldToDisplay(t,n,r,e)},computeDisplayToWorld:function(e,t,n,r){return e.getRenderWindow().getViews()[0].displayToWorld(t,n,r,e)}};const Xg={enabled:!0,priority:0,processEvents:!0,subscribedEvents:[]};function Yg(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Xg,n),dn.obj(e,t),dn.event(e,t,"InteractionEvent"),dn.event(e,t,"StartInteractionEvent"),dn.event(e,t,"EndInteractionEvent"),dn.get(e,t,["_interactor","enabled"]),dn.setGet(e,t,["priority","processEvents"]),dn.moveToProtected(e,t,["interactor"]),function(e,t){t.classHierarchy.push("vtkInteractorObserver");const n=u({},e);function r(){for(;t.subscribedEvents.length;)t.subscribedEvents.pop().unsubscribe()}function o(){jg.handledEvents.forEach(n=>{e["handle".concat(n)]&&t.subscribedEvents.push(t._interactor["on".concat(n)](r=>t.processEvents?e["handle".concat(n)](r):Zg,t.priority))})}e.setInteractor=n=>{n!==t._interactor&&(r(),t._interactor=n,n&&t.enabled&&o(),e.modified())},e.setEnabled=n=>{n!==t.enabled&&(r(),n&&(t._interactor?o():Kg("\n          The interactor must be set before subscribing to events\n        ")),t.enabled=n,e.modified())},e.computeDisplayToWorld=(e,n,r,o)=>e?t._interactor.getView().displayToWorld(n,r,o,e):null,e.computeWorldToDisplay=(e,n,r,o)=>e?t._interactor.getView().worldToDisplay(n,r,o,e):null,e.setPriority=e=>{n.setPriority(e)&&t._interactor&&(r(),o())}}(e,t)}var Qg=u({newInstance:dn.newInstance(Yg,"vtkInteractorObserver"),extend:Yg},qg);var $g={States:{IS_START:0,IS_NONE:0,IS_ROTATE:1,IS_PAN:2,IS_SPIN:3,IS_DOLLY:4,IS_CAMERA_POSE:11,IS_WINDOW_LEVEL:1024,IS_SLICE:1025}};const{States:Jg}=$g,ev={Rotate:Jg.IS_ROTATE,Pan:Jg.IS_PAN,Spin:Jg.IS_SPIN,Dolly:Jg.IS_DOLLY,CameraPose:Jg.IS_CAMERA_POSE,WindowLevel:Jg.IS_WINDOW_LEVEL,Slice:Jg.IS_SLICE};const tv={state:Jg.IS_NONE,handleObservers:1,autoAdjustCameraClippingRange:1};function nv(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,tv,n),Qg.extend(e,t,n),dn.setGet(e,t,["focusedRenderer"]),function(e,t){t.classHierarchy.push("vtkInteractorStyle"),Object.keys(ev).forEach(n=>{dn.event(e,t,"Start".concat(n,"Event")),e["start".concat(n)]=()=>{t.state===Jg.IS_NONE&&(t.state=ev[n],t._interactor.requestAnimation(e),e.invokeStartInteractionEvent({type:"StartInteractionEvent"}),e["invokeStart".concat(n,"Event")]({type:"Start".concat(n,"Event")}))},dn.event(e,t,"End".concat(n,"Event")),e["end".concat(n)]=()=>{t.state===ev[n]&&(t.state=Jg.IS_NONE,t._interactor.cancelAnimation(e),e.invokeEndInteractionEvent({type:"EndInteractionEvent"}),e["invokeEnd".concat(n,"Event")]({type:"End".concat(n,"Event")}),t._interactor.render())}}),t.getRenderer=e=>t.focusedRenderer||e.pokedRenderer,e.handleKeyPress=e=>{const n=t._interactor;let r=null;switch(e.key){case"r":case"R":t.getRenderer(e).resetCamera(),n.render();break;case"w":case"W":r=t.getRenderer(e).getActors(),r.forEach(e=>{const t=e.getProperty();t.setRepresentationToWireframe&&t.setRepresentationToWireframe()}),n.render();break;case"s":case"S":r=t.getRenderer(e).getActors(),r.forEach(e=>{const t=e.getProperty();t.setRepresentationToSurface&&t.setRepresentationToSurface()}),n.render();break;case"v":case"V":r=t.getRenderer(e).getActors(),r.forEach(e=>{const t=e.getProperty();t.setRepresentationToPoints&&t.setRepresentationToPoints()}),n.render()}}}(e,t)}var rv=u({newInstance:dn.newInstance(nv,"vtkInteractorStyle"),extend:nv},$g);const{States:ov}=$g;const av={motionFactor:10,zoomFactor:10};function iv(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,av,n),rv.extend(e,t,n),dn.setGet(e,t,["motionFactor","zoomFactor"]),function(e,t){t.classHierarchy.push("vtkInteractorStyleTrackballCamera"),e.handleMouseMove=n=>{const r=n.position,o=t.getRenderer(n);switch(t.state){case ov.IS_ROTATE:e.handleMouseRotate(o,r),e.invokeInteractionEvent({type:"InteractionEvent"});break;case ov.IS_PAN:e.handleMousePan(o,r),e.invokeInteractionEvent({type:"InteractionEvent"});break;case ov.IS_DOLLY:e.handleMouseDolly(o,r),e.invokeInteractionEvent({type:"InteractionEvent"});break;case ov.IS_SPIN:e.handleMouseSpin(o,r),e.invokeInteractionEvent({type:"InteractionEvent"})}t.previousPosition=r},e.handleButton3D=n=>{!n||!n.pressed||n.device!==Ig.RightController||n.input!==Og.Trigger&&n.input!==Og.TrackPad?!n||n.pressed||n.device!==Ig.RightController||n.input!==Og.Trigger&&n.input!==Og.TrackPad||t.state!==ov.IS_CAMERA_POSE||e.endCameraPose():e.startCameraPose()},e.handleMove3D=n=>{t.state===ov.IS_CAMERA_POSE&&e.updateCameraPose(n)},e.updateCameraPose=e=>{const n=t.getRenderer(e).getActiveCamera(),r=n.getPhysicalTranslation(),o=.025*n.getPhysicalScale(),a=n.physicalOrientationToWorldDirection([e.orientation.x,e.orientation.y,e.orientation.z,e.orientation.w]);n.setPhysicalTranslation(r[0]+a[0]*o,r[1]+a[1]*o,r[2]+a[2]*o)},e.handleLeftButtonPress=n=>{const r=n.position;t.previousPosition=r,n.shiftKey?n.controlKey||n.altKey?e.startDolly():e.startPan():n.controlKey||n.altKey?e.startSpin():e.startRotate()},e.handleLeftButtonRelease=()=>{switch(t.state){case ov.IS_DOLLY:e.endDolly();break;case ov.IS_PAN:e.endPan();break;case ov.IS_SPIN:e.endSpin();break;case ov.IS_ROTATE:e.endRotate()}},e.handleStartMouseWheel=()=>{e.startDolly()},e.handleEndMouseWheel=()=>{e.endDolly()},e.handleStartPinch=n=>{t.previousScale=n.scale,e.startDolly()},e.handleEndPinch=()=>{e.endDolly()},e.handleStartRotate=n=>{t.previousRotation=n.rotation,e.startRotate()},e.handleEndRotate=()=>{e.endRotate()},e.handleStartPan=n=>{t.previousTranslation=n.translation,e.startPan()},e.handleEndPan=()=>{e.endPan()},e.handlePinch=n=>{e.dollyByFactor(t.getRenderer(n),n.scale/t.previousScale),t.previousScale=n.scale},e.handlePan=n=>{const r=t.getRenderer(n).getActiveCamera();let o=r.getFocalPoint();o=e.computeWorldToDisplay(t.getRenderer(n),o[0],o[1],o[2]);const a=o[2],i=n.translation,s=t.previousTranslation,l=e.computeDisplayToWorld(t.getRenderer(n),o[0]+i[0]-s[0],o[1]+i[1]-s[1],a),u=e.computeDisplayToWorld(t.getRenderer(n),o[0],o[1],a),c=[];c[0]=u[0]-l[0],c[1]=u[1]-l[1],c[2]=u[2]-l[2],o=r.getFocalPoint();const d=r.getPosition();r.setFocalPoint(c[0]+o[0],c[1]+o[1],c[2]+o[2]),r.setPosition(c[0]+d[0],c[1]+d[1],c[2]+d[2]),t._interactor.getLightFollowCamera()&&t.getRenderer(n).updateLightsGeometryToFollowCamera(),r.orthogonalizeViewUp(),t.previousTranslation=n.translation},e.handleRotate=e=>{const n=t.getRenderer(e).getActiveCamera();n.roll(e.rotation-t.previousRotation),n.orthogonalizeViewUp(),t.previousRotation=e.rotation},e.handleMouseRotate=(e,n)=>{if(!t.previousPosition)return;const r=t._interactor,o=n.x-t.previousPosition.x,a=n.y-t.previousPosition.y,i=r.getView().getViewportSize(e);let s=-.1,l=-.1;i[0]&&i[1]&&(s=-20/i[1],l=-20/i[0]);const u=o*l*t.motionFactor,c=a*s*t.motionFactor,d=e.getActiveCamera();Number.isNaN(u)||Number.isNaN(c)||(d.azimuth(u),d.elevation(c),d.orthogonalizeViewUp()),t.autoAdjustCameraClippingRange&&e.resetCameraClippingRange(),r.getLightFollowCamera()&&e.updateLightsGeometryToFollowCamera()},e.handleMouseSpin=(e,n)=>{if(!t.previousPosition)return;const r=t._interactor,o=e.getActiveCamera(),a=r.getView().getViewportCenter(e),i=Qo(Math.atan2(t.previousPosition.y-a[1],t.previousPosition.x-a[0])),s=Qo(Math.atan2(n.y-a[1],n.x-a[0]))-i;Number.isNaN(s)||(o.roll(s),o.orthogonalizeViewUp())},e.handleMousePan=(n,r)=>{if(!t.previousPosition)return;const o=n.getActiveCamera();let a=o.getFocalPoint();a=e.computeWorldToDisplay(n,a[0],a[1],a[2]);const i=a[2],s=e.computeDisplayToWorld(n,r.x,r.y,i),l=e.computeDisplayToWorld(n,t.previousPosition.x,t.previousPosition.y,i),u=[];u[0]=l[0]-s[0],u[1]=l[1]-s[1],u[2]=l[2]-s[2],a=o.getFocalPoint();const c=o.getPosition();o.setFocalPoint(u[0]+a[0],u[1]+a[1],u[2]+a[2]),o.setPosition(u[0]+c[0],u[1]+c[1],u[2]+c[2]),t._interactor.getLightFollowCamera()&&n.updateLightsGeometryToFollowCamera()},e.handleMouseDolly=(n,r)=>{if(!t.previousPosition)return;const o=r.y-t.previousPosition.y,a=t._interactor.getView().getViewportCenter(n),i=t.motionFactor*o/a[1];e.dollyByFactor(n,1.1**i)},e.handleMouseWheel=n=>{const r=1-n.spinY/t.zoomFactor;e.dollyByFactor(t.getRenderer(n),r)},e.dollyByFactor=(e,n)=>{if(Number.isNaN(n))return;const r=e.getActiveCamera();r.getParallelProjection()?r.setParallelScale(r.getParallelScale()/n):(r.dolly(n),t.autoAdjustCameraClippingRange&&e.resetCameraClippingRange()),t._interactor.getLightFollowCamera()&&e.updateLightsGeometryToFollowCamera()}}(e,t)}var sv={newInstance:dn.newInstance(iv,"vtkInteractorStyleTrackballCamera"),extend:iv};function lv(e){return e}function uv(e){return null===e||"null"===e?null:"true"===e||"false"!==e&&(void 0!==e&&"undefined"!==e?"["===e[0]&&"]"===e[e.length-1]?e.substring(1,e.length-1).split(",").map(e=>uv(e.trim())):""===e||Number.isNaN(Number(e))?e:Number(e):void 0)}var cv={toNativeType:uv,extractURLParameters:function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location.search;const n={},r=e?uv:lv;return new URLSearchParams(t).forEach((e,t)=>{t&&(n[t]=!e||r(e))}),n}};const dv={glFramebuffer:null,colorBuffers:null,depthTexture:null,previousDrawBinding:0,previousReadBinding:0,previousDrawBuffer:0,previousReadBuffer:0,previousActiveFramebuffer:null};function fv(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,dv,n),Nt(e,t),t.colorBuffers&&Tt("you cannot initialize colorBuffers through the constructor. You should call setColorBuffer() instead."),t.colorBuffers=[],Ht(e,t,["colorBuffers"]),function(e,t){t.classHierarchy.push("vtkFramebuffer"),e.getBothMode=()=>t.context.FRAMEBUFFER,e.saveCurrentBindingsAndBuffers=t=>{const n="undefined"!==typeof t?t:e.getBothMode();e.saveCurrentBindings(n),e.saveCurrentBuffers(n)},e.saveCurrentBindings=e=>{if(!t.context)return void Tt("you must set the OpenGLRenderWindow before calling saveCurrentBindings");const n=t.context;t.previousDrawBinding=n.getParameter(t.context.FRAMEBUFFER_BINDING),t.previousActiveFramebuffer=t._openGLRenderWindow.getActiveFramebuffer()},e.saveCurrentBuffers=e=>{},e.restorePreviousBindingsAndBuffers=t=>{const n="undefined"!==typeof t?t:e.getBothMode();e.restorePreviousBindings(n),e.restorePreviousBuffers(n)},e.restorePreviousBindings=e=>{if(!t.context)return void Tt("you must set the OpenGLRenderWindow before calling restorePreviousBindings");const n=t.context;n.bindFramebuffer(n.FRAMEBUFFER,t.previousDrawBinding),t._openGLRenderWindow.setActiveFramebuffer(t.previousActiveFramebuffer)},e.restorePreviousBuffers=e=>{},e.bind=function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;null===n&&(n=t.context.FRAMEBUFFER),t.context.bindFramebuffer(n,t.glFramebuffer);for(let e=0;e<t.colorBuffers.length;e++)t.colorBuffers[e].bind();t._openGLRenderWindow.setActiveFramebuffer(e)},e.create=(e,n)=>{t.context?(t.glFramebuffer=t.context.createFramebuffer(),t.glFramebuffer.width=e,t.glFramebuffer.height=n):Tt("you must set the OpenGLRenderWindow before calling create")},e.setColorBuffer=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const r=t.context;if(!r)return void Tt("you must set the OpenGLRenderWindow before calling setColorBuffer");let o=r.COLOR_ATTACHMENT0;if(n>0){if(!t._openGLRenderWindow.getWebgl2())return void Tt("Using multiple framebuffer attachments requires WebGL 2");o+=n}t.colorBuffers[n]=e,r.framebufferTexture2D(r.FRAMEBUFFER,o,r.TEXTURE_2D,e.getHandle(),0)},e.removeColorBuffer=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const n=t.context;if(!n)return void Tt("you must set the OpenGLRenderWindow before calling removeColorBuffer");let r=n.COLOR_ATTACHMENT0;if(e>0){if(!t._openGLRenderWindow.getWebgl2())return void Tt("Using multiple framebuffer attachments requires WebGL 2");r+=e}n.framebufferTexture2D(n.FRAMEBUFFER,r,n.TEXTURE_2D,null,0),t.colorBuffers=t.colorBuffers.splice(e,1)},e.setDepthBuffer=e=>{if(t.context)if(t._openGLRenderWindow.getWebgl2()){const n=t.context;n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,e.getHandle(),0)}else Tt("Attaching depth buffer textures to fbo requires WebGL 2");else Tt("you must set the OpenGLRenderWindow before calling setDepthBuffer")},e.removeDepthBuffer=()=>{if(t.context)if(t._openGLRenderWindow.getWebgl2()){const e=t.context;e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,null,0)}else Tt("Attaching depth buffer textures to framebuffers requires WebGL 2");else Tt("you must set the OpenGLRenderWindow before calling removeDepthBuffer")},e.getGLFramebuffer=()=>t.glFramebuffer,e.setOpenGLRenderWindow=n=>{t._openGLRenderWindow!==n&&(e.releaseGraphicsResources(),t._openGLRenderWindow=n,t.context=null,n&&(t.context=t._openGLRenderWindow.getContext()))},e.releaseGraphicsResources=()=>{t.glFramebuffer&&t.context.deleteFramebuffer(t.glFramebuffer)},e.getSize=()=>null==t.glFramebuffer?null:[t.glFramebuffer.width,t.glFramebuffer.height],e.populateFramebuffer=()=>{if(!t.context)return void Tt("you must set the OpenGLRenderWindow before calling populateFrameBuffer");e.bind();const n=t.context,r=Hf.newInstance();r.setOpenGLRenderWindow(t._openGLRenderWindow),r.setMinificationFilter(Cf.LINEAR),r.setMagnificationFilter(Cf.LINEAR),r.create2DFromRaw({width:t.glFramebuffer.width,height:t.glFramebuffer.height,numComps:4,dataType:Ml.UNSIGNED_CHAR,data:null}),e.setColorBuffer(r),t.depthTexture=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,t.depthTexture),n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_COMPONENT16,t.glFramebuffer.width,t.glFramebuffer.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,t.depthTexture)},e.getColorTexture=()=>t.colorBuffers[0]}(e,t)}var pv={newInstance:Qt(fv,"vtkFramebuffer"),extend:fv};const hv={delegates:[],currentOperation:null,preDelegateOperations:[],postDelegateOperations:[],currentParent:null};function mv(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,hv,n),dn.obj(e,t),dn.get(e,t,["currentOperation"]),dn.setGet(e,t,["delegates","_currentParent","preDelegateOperations","postDelegateOperations"]),dn.moveToProtected(e,t,["currentParent"]),function(e,t){t.classHierarchy.push("vtkRenderPass"),e.getOperation=()=>t.currentOperation,e.setCurrentOperation=e=>{t.currentOperation=e,t.currentTraverseOperation="traverse".concat(dn.capitalize(t.currentOperation))},e.getTraverseOperation=()=>t.currentTraverseOperation,e.traverse=function(n){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;t.deleted||(t._currentParent=r,t.preDelegateOperations.forEach(t=>{e.setCurrentOperation(t),n.traverse(e)}),t.delegates.forEach(t=>{t.traverse(n,e)}),t.postDelegateOperations.forEach(t=>{e.setCurrentOperation(t),n.traverse(e)}))}}(e,t)}var gv={newInstance:dn.newInstance(mv,"vtkRenderPass"),extend:mv};const{Representation:vv}=Al,{vtkErrorMacro:yv}=dn;function bv(e){const t=vf.substitute(e.Fragment,"//VTK::RenderPassFragmentShader::Impl","\n      float weight = gl_FragData[0].a * pow(max(1.1 - gl_FragCoord.z, 0.0), 2.0);\n      gl_FragData[0] = vec4(gl_FragData[0].rgb*weight, gl_FragData[0].a);\n      gl_FragData[1].r = weight;\n    ",!1);e.Fragment=t.result}const _v={framebuffer:null,copyShader:null,tris:null};function Tv(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,_v,n),gv.extend(e,t,n),t.VBOBuildTime={},dn.obj(t.VBOBuildTime,{mtime:0}),t.tris=wf.newInstance(),dn.get(e,t,["framebuffer"]),function(e,t){t.classHierarchy.push("vtkOpenGLOrderIndependentTranslucentPass"),e.createVertexBuffer=()=>{const e=new Float32Array([-1,-1,-1,1,-1,-1,-1,1,-1,1,1,-1]),n=new Float32Array([0,0,1,0,0,1,1,1]),r=new Uint16Array([4,0,1,3,2]),o=Wl.newInstance({numberOfComponents:3,values:e});o.setName("points");const a=Wl.newInstance({numberOfComponents:2,values:n});a.setName("tcoords");const i=Wl.newInstance({numberOfComponents:1,values:r});t.tris.getCABO().createVBO(i,"polys",vv.SURFACE,{points:o,tcoords:a,cellOffset:0}),t.VBOBuildTime.modified()},e.createFramebuffer=e=>{const n=e.getSize(),r=e.getContext();t.framebuffer=pv.newInstance(),t.framebuffer.setOpenGLRenderWindow(e),t.framebuffer.create(...n),t.framebuffer.saveCurrentBindingsAndBuffers(),t.framebuffer.bind(),t.translucentRGBATexture=Hf.newInstance(),t.translucentRGBATexture.setInternalFormat(r.RGBA16F),t.translucentRGBATexture.setFormat(r.RGBA),t.translucentRGBATexture.setOpenGLDataType(r.HALF_FLOAT),t.translucentRGBATexture.setOpenGLRenderWindow(e),t.translucentRGBATexture.create2DFromRaw({width:n[0],height:n[1],numComps:4,dataType:"Float32Array",data:null}),t.translucentRTexture=Hf.newInstance(),t.translucentRTexture.setInternalFormat(r.R16F),t.translucentRTexture.setFormat(r.RED),t.translucentRTexture.setOpenGLDataType(r.HALF_FLOAT),t.translucentRTexture.setOpenGLRenderWindow(e),t.translucentRTexture.create2DFromRaw({width:n[0],height:n[1],numComps:1,dataType:"Float32Array",data:null}),t.translucentZTexture=Hf.newInstance(),t.translucentZTexture.setOpenGLRenderWindow(e),t.translucentZTexture.createDepthFromRaw({width:n[0],height:n[1],dataType:"Float32Array",data:null}),t.framebuffer.setColorBuffer(t.translucentRGBATexture,0),t.framebuffer.setColorBuffer(t.translucentRTexture,1),t.framebuffer.setDepthBuffer(t.translucentZTexture)},e.createCopyShader=e=>{t.copyShader=e.getShaderCache().readyShaderProgramArray(["//VTK::System::Dec","attribute vec4 vertexDC;","attribute vec2 tcoordTC;","varying vec2 tcoord;","void main() { tcoord = tcoordTC; gl_Position = vertexDC; }"].join("\n"),"//VTK::System::Dec\n\nin vec2 tcoord;\n\nuniform sampler2D translucentRTexture;\nuniform sampler2D translucentRGBATexture;\n\n// the output of this shader\n//VTK::Output::Dec\n\nvoid main()\n{\n  vec4 t1Color = texture(translucentRGBATexture, tcoord);\n  float t2Color = texture(translucentRTexture, tcoord).r;\n  gl_FragData[0] = vec4(t1Color.rgb/max(t2Color,0.01), 1.0 - t1Color.a);\n}\n","")},e.createVBO=n=>{const r=n.getContext();t.tris.setOpenGLRenderWindow(n),e.createVertexBuffer();const o=t.copyShader;t.tris.getCABO().bind(),t.copyVAO.addAttributeArray(o,t.tris.getCABO(),"vertexDC",t.tris.getCABO().getVertexOffset(),t.tris.getCABO().getStride(),r.FLOAT,3,r.FALSE)||yv("Error setting vertexDC in copy shader VAO."),t.copyVAO.addAttributeArray(o,t.tris.getCABO(),"tcoordTC",t.tris.getCABO().getTCoordOffset(),t.tris.getCABO().getStride(),r.FLOAT,2,r.FALSE)||yv("Error setting vertexDC in copy shader VAO.")},e.traverse=(n,r,o)=>{if(t.deleted)return;const a=n.getSize(),i=n.getContext();if(t._supported=!1,r.getSelector()||!i||!n.getWebgl2()||!i.getExtension("EXT_color_buffer_half_float")&&!i.getExtension("EXT_color_buffer_float"))return e.setCurrentOperation("translucentPass"),void r.traverse(e);if(t._supported=!0,null===t.framebuffer)e.createFramebuffer(n);else{const r=t.framebuffer.getSize();null===r||r[0]!==a[0]||r[1]!==a[1]?(t.framebuffer.releaseGraphicsResources(),t.translucentRGBATexture.releaseGraphicsResources(n),t.translucentRTexture.releaseGraphicsResources(n),t.translucentZTexture.releaseGraphicsResources(n),e.createFramebuffer(n)):(t.framebuffer.saveCurrentBindingsAndBuffers(),t.framebuffer.bind())}i.drawBuffers([i.COLOR_ATTACHMENT0]),i.clearBufferfv(i.COLOR,0,[0,0,0,0]),i.clearBufferfv(i.DEPTH,0,[1]),i.colorMask(!1,!1,!1,!1),o.getOpaqueActorCount()>0&&(o.setCurrentOperation("opaqueZBufferPass"),r.traverse(o)),i.colorMask(!0,!0,!0,!0),i.drawBuffers([i.COLOR_ATTACHMENT0,i.COLOR_ATTACHMENT1]),i.viewport(0,0,a[0],a[1]),i.scissor(0,0,a[0],a[1]),i.clearBufferfv(i.COLOR,0,[0,0,0,1]),i.clearBufferfv(i.COLOR,1,[0,0,0,0]),i.enable(i.DEPTH_TEST),i.enable(i.BLEND),i.blendFuncSeparate(i.ONE,i.ONE,i.ZERO,i.ONE_MINUS_SRC_ALPHA),e.setCurrentOperation("translucentPass"),r.traverse(e),i.drawBuffers([i.NONE]),t.framebuffer.restorePreviousBindingsAndBuffers(),null===t.copyShader?e.createCopyShader(n):n.getShaderCache().readyShaderProgram(t.copyShader),t.copyVAO||(t.copyVAO=_f.newInstance(),t.copyVAO.setOpenGLRenderWindow(n)),t.copyVAO.bind(),t.VBOBuildTime.getMTime()<e.getMTime()&&e.createVBO(n),i.blendFuncSeparate(i.SRC_ALPHA,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA),i.depthMask(!1),i.depthFunc(i.ALWAYS),i.viewport(0,0,a[0],a[1]),i.scissor(0,0,a[0],a[1]),t.translucentRGBATexture.activate(),t.copyShader.setUniformi("translucentRGBATexture",t.translucentRGBATexture.getTextureUnit()),t.translucentRTexture.activate(),t.copyShader.setUniformi("translucentRTexture",t.translucentRTexture.getTextureUnit()),i.drawArrays(i.TRIANGLES,0,t.tris.getCABO().getElementCount()),i.depthMask(!0),i.depthFunc(i.LEQUAL),t.translucentRGBATexture.deactivate(),t.translucentRTexture.deactivate();const s=r.getTiledSizeAndOrigin();i.scissor(s.lowerLeftU,s.lowerLeftV,s.usize,s.vsize),i.viewport(s.lowerLeftU,s.lowerLeftV,s.usize,s.vsize)},e.getShaderReplacement=()=>t._supported?bv:null,e.releaseGraphicsResources=n=>{t.framebuffer&&(t.framebuffer.releaseGraphicsResources(n),t.framebuffer=null),t.translucentRGBATexture&&(t.translucentRGBATexture.releaseGraphicsResources(n),t.translucentRGBATexture=null),t.translucentRTexture&&(t.translucentRTexture.releaseGraphicsResources(n),t.translucentRTexture=null),t.translucentZTexture&&(t.translucentZTexture.releaseGraphicsResources(n),t.translucentZTexture=null),t.copyVAO&&(t.copyVAO.releaseGraphicsResources(n),t.copyVAO=null),t.copyShader&&(t.copyShader.releaseGraphicsResources(n),t.copyShader=null),t.tris&&(t.tris.releaseGraphicsResources(n),t.tris=null),e.modified()}}(e,t)}var xv={newInstance:dn.newInstance(Tv,"vtkOpenGLOrderIndependentTranslucentPass"),extend:Tv};const Sv={opaqueActorCount:0,translucentActorCount:0,volumeCount:0,overlayActorCount:0,framebuffer:null,depthRequested:!1};function wv(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Sv,n),gv.extend(e,t,n),dn.get(e,t,["framebuffer","opaqueActorCount","translucentActorCount","volumeCount"]),function(e,t){t.classHierarchy.push("vtkForwardPass"),e.traverse=function(n){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(t.deleted)return;t._currentParent=r,e.setCurrentOperation("buildPass"),n.traverse(e);const o=n.getRenderable().getNumberOfLayers(),a=n.getRenderable().getRenderersByReference();for(let i=0;i<o;i++)for(let r=0;r<a.length;r++){const o=a[r],s=n.getViewNodeFor(o);if(o.getDraw()&&o.getLayer()===i){if(t.opaqueActorCount=0,t.translucentActorCount=0,t.volumeCount=0,t.overlayActorCount=0,e.setCurrentOperation("queryPass"),s.traverse(e),(t.opaqueActorCount>0||t.translucentActorCount>0)&&t.volumeCount>0||t.depthRequested){const r=n.getFramebufferSize();null===t.framebuffer&&(t.framebuffer=pv.newInstance()),t.framebuffer.setOpenGLRenderWindow(n),t.framebuffer.saveCurrentBindingsAndBuffers();const o=t.framebuffer.getSize();null!==o&&o[0]===r[0]&&o[1]===r[1]||(t.framebuffer.create(r[0],r[1]),t.framebuffer.populateFramebuffer()),t.framebuffer.bind(),e.setCurrentOperation("zBufferPass"),s.traverse(e),t.framebuffer.restorePreviousBindingsAndBuffers(),t.depthRequested=!1}e.setCurrentOperation("cameraPass"),s.traverse(e),t.opaqueActorCount>0&&(e.setCurrentOperation("opaquePass"),s.traverse(e)),t.translucentActorCount>0&&(t.translucentPass||(t.translucentPass=xv.newInstance()),t.translucentPass.traverse(n,s,e)),t.volumeCount>0&&(e.setCurrentOperation("volumePass"),s.traverse(e)),t.overlayActorCount>0&&(e.setCurrentOperation("overlayPass"),s.traverse(e))}}},e.getZBufferTexture=()=>t.framebuffer?t.framebuffer.getColorTexture():null,e.requestDepth=()=>{t.depthRequested=!0},e.incrementOpaqueActorCount=()=>t.opaqueActorCount++,e.incrementTranslucentActorCount=()=>t.translucentActorCount++,e.incrementVolumeCount=()=>t.volumeCount++,e.incrementOverlayActorCount=()=>t.overlayActorCount++}(e,t)}var Cv={newInstance:dn.newInstance(wv,"vtkForwardPass"),extend:wv};const{FieldAssociations:Pv}=uu;const Av={fieldAssociation:Pv.FIELD_ASSOCIATION_CELLS,captureZValues:!1};function Ev(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Av,n),dn.obj(e,t),dn.setGet(e,t,["fieldAssociation","captureZValues"]),function(e,t){t.classHierarchy.push("vtkHardwareSelector"),e.getSourceDataAsync=async(e,t,n,r,o)=>{},e.selectAsync=async(t,n,r,o,a)=>{const i=await e.getSourceDataAsync(t,n,r,o,a);return i?i.generateSelection(n,r,o,a):[]}}(e,t)}var Iv={newInstance:dn.newInstance(Ev,"vtkHardwareSelector"),extend:Ev};var Ov={SelectionContent:{GLOBALIDS:0,PEDIGREEIDS:1,VALUES:2,INDICES:3,FRUSTUM:4,LOCATIONS:5,THRESHOLDS:6,BLOCKS:7,QUERY:8},SelectionField:{CELL:0,POINT:1,FIELD:2,VERTEX:3,EDGE:4,ROW:5}};const Mv={contentType:-1,fieldType:-1,properties:null,selectionList:[]};function Rv(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Mv,n),dn.obj(e,t),t.properties={},dn.setGet(e,t,["contentType","fieldType","properties","selectionList"]),function(e,t){t.classHierarchy.push("vtkSelectionNode"),e.getBounds=()=>t.points.getBounds()}(e,t)}var Lv=u({newInstance:dn.newInstance(Rv,"vtkSelectionNode"),extend:Rv},Ov);const{PassTypes:kv}=Zu,{SelectionContent:Dv,SelectionField:Bv}=Lv,{FieldAssociations:Nv}=uu,{vtkErrorMacro:Vv}=dn;function Fv(e){return"".concat(e.propID," ").concat(e.compositeID)}function Uv(e,t,n,r){if(!n)return 0;return n[4*(t*(r[2]-r[0]+1)+e)+3]}function zv(e,t,n,r){if(!n)return 0;const o=4*(t*(r[2]-r[0]+1)+e),a=n[o],i=n[o+1];return 256*(256*n[o+2]+i)+a}function Gv(e,t){let n=t;return n<<=24,n|=e,n}function Wv(e,t,n,r){const o=n<0?0:n;if(0===o){if(r[0]=t[0],r[1]=t[1],t[0]<e.area[0]||t[0]>e.area[2]||t[1]<e.area[1]||t[1]>e.area[3])return null;const n=[t[0]-e.area[0],t[1]-e.area[1]],o=zv(n[0],n[1],e.pixBuffer[kv.ACTOR_PASS],e.area);if(o<=0||o-1>=e.props.length)return null;const a={valid:!0};a.propID=o-1,a.prop=e.props[a.propID];let i=zv(n[0],n[1],e.pixBuffer[kv.COMPOSITE_INDEX_PASS],e.area);if((i<0||i>16777215)&&(i=0),a.compositeID=i-1,e.captureZValues){const r=4*(n[1]*(e.area[2]-e.area[0]+1)+n[0]);a.zValue=(256*e.zBuffer[r]+e.zBuffer[r+1])/65535,a.displayPosition=t}if(e.pixBuffer[kv.ID_LOW24]&&0===Uv(n[0],n[1],e.pixBuffer[kv.ID_LOW24],e.area))return a;const s=zv(n[0],n[1],e.pixBuffer[kv.ID_LOW24],e.area),l=zv(n[0],n[1],e.pixBuffer[kv.ID_HIGH24],e.area);return a.attributeID=Gv(s,l),a}const a=[t[0],t[1]],i=[0,0];let s=Wv(e,t,0,r);if(s&&s.valid)return s;for(let l=1;l<o;++l){for(let t=a[1]>l?a[1]-l:0;t<=a[1]+l;++t){if(i[1]=t,a[0]>=l&&(i[0]=a[0]-l,s=Wv(e,i,0,r),s&&s.valid))return s;if(i[0]=a[0]+l,s=Wv(e,i,0,r),s&&s.valid)return s}for(let t=a[0]>=l?a[0]-(l-1):0;t<=a[0]+(l-1);++t){if(i[0]=t,a[1]>=l&&(i[1]=a[1]-l,s=Wv(e,i,0,r),s&&s.valid))return s;if(i[1]=a[1]+l,s=Wv(e,i,0,r),s&&s.valid)return s}}return r[0]=t[0],r[1]=t[1],null}function Hv(e,t,n,r,o){const a=[];let i=0;return t.forEach((t,s)=>{const l=Lv.newInstance();switch(l.setContentType(Dv.INDICES),e){case Nv.FIELD_ASSOCIATION_CELLS:l.setFieldType(Bv.CELL);break;case Nv.FIELD_ASSOCIATION_POINTS:l.setFieldType(Bv.POINT);break;default:Vv("Unknown field association")}l.getProperties().propID=t.info.propID,l.getProperties().prop=t.info.prop,l.getProperties().compositeID=t.info.compositeID,l.getProperties().attributeID=t.info.attributeID,l.getProperties().pixelCount=t.pixelCount,n&&(l.getProperties().displayPosition=[t.info.displayPosition[0],t.info.displayPosition[1],t.info.zValue],l.getProperties().worldPosition=o.displayToWorld(t.info.displayPosition[0],t.info.displayPosition[1],t.info.zValue,r)),l.setSelectionList(t.attributeIDs),a[i]=l,i++}),a}function jv(e,t){t.classHierarchy.push("vtkOpenGLHardwareSelector"),e.releasePixBuffers=()=>{t.rawPixBuffer=[],t.pixBuffer=[],t.zBuffer=null},e.beginSelection=()=>{t._openGLRenderer=t._openGLRenderWindow.getViewNodeFor(t._renderer),t.maxAttributeId=0;const n=t._openGLRenderWindow.getSize();if(t.framebuffer){t.framebuffer.setOpenGLRenderWindow(t._openGLRenderWindow),t.framebuffer.saveCurrentBindingsAndBuffers();const e=t.framebuffer.getSize();e&&e[0]===n[0]&&e[1]===n[1]?t.framebuffer.bind():(t.framebuffer.create(n[0],n[1]),t.framebuffer.populateFramebuffer())}else t.framebuffer=pv.newInstance(),t.framebuffer.setOpenGLRenderWindow(t._openGLRenderWindow),t.framebuffer.saveCurrentBindingsAndBuffers(),t.framebuffer.create(n[0],n[1]),t.framebuffer.populateFramebuffer();if(t._openGLRenderer.clear(),t._openGLRenderer.setSelector(e),t.hitProps={},t.propPixels={},t.props=[],e.releasePixBuffers(),t.fieldAssociation===Nv.FIELD_ASSOCIATION_POINTS){const e=t._openGLRenderWindow.getContext(),n=e.isEnabled(e.BLEND);e.disable(e.BLEND),t._openGLRenderWindow.traverseAllPasses(),n&&e.enable(e.BLEND)}},e.endSelection=()=>{t.hitProps={},t._openGLRenderer.setSelector(null),t.framebuffer.restorePreviousBindingsAndBuffers()},e.preCapturePass=()=>{const e=t._openGLRenderWindow.getContext();t.originalBlending=e.isEnabled(e.BLEND),e.disable(e.BLEND)},e.postCapturePass=()=>{const e=t._openGLRenderWindow.getContext();t.originalBlending&&e.enable(e.BLEND)},e.select=()=>{let n=null;return e.captureBuffers()&&(n=e.generateSelection(t.area[0],t.area[1],t.area[2],t.area[3]),e.releasePixBuffers()),n},e.getSourceDataAsync=async(n,r,o,a,i)=>{if(t._renderer=n,void 0===r){const n=t._openGLRenderWindow.getSize();e.setArea(0,0,n[0]-1,n[1]-1)}else e.setArea(r,o,a,i);if(!e.captureBuffers())return!1;const s={area:[...t.area],pixBuffer:[...t.pixBuffer],captureZValues:t.captureZValues,zBuffer:t.zBuffer,props:[...t.props],fieldAssociation:t.fieldAssociation,renderer:n,openGLRenderWindow:t._openGLRenderWindow};return s.generateSelection=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e,t,n,r,o){const a=Math.floor(t),i=Math.floor(n),s=Math.floor(r),l=Math.floor(o),u=new Map,c=[0,0];for(let d=i;d<=l;d++)for(let t=a;t<=s;t++){const n=Wv(e,[t,d],0,c);if(n&&n.valid){const t=Fv(n);if(u.has(t)){const r=u.get(t);r.pixelCount++,e.captureZValues&&n.zValue<r.info.zValue&&(r.info=n),-1===r.attributeIDs.indexOf(n.attributeID)&&r.attributeIDs.push(n.attributeID)}else u.set(t,{info:n,pixelCount:1,attributeIDs:[n.attributeID]})}}return Hv(e.fieldAssociation,u,e.captureZValues,e.renderer,e.openGLRenderWindow)}(s,...t)},s},e.captureBuffers=()=>{if(!t._renderer||!t._openGLRenderWindow)return Vv("Renderer and view must be set before calling Select."),!1;t._openGLRenderer=t._openGLRenderWindow.getViewNodeFor(t._renderer),t._openGLRenderWindow.getRenderable().preRender(),e.invokeEvent({type:"StartEvent"}),t.originalBackground=t._renderer.getBackgroundByReference(),t._renderer.setBackground(0,0,0,0);const n=t._openGLRenderWindow.getRenderPasses();e.beginSelection();const r=[];for(t.currentPass=kv.MIN_KNOWN_PASS;t.currentPass<=kv.MAX_KNOWN_PASS;t.currentPass++)e.passRequired(t.currentPass)&&(e.preCapturePass(t.currentPass),t.captureZValues&&t.currentPass===kv.ACTOR_PASS&&"function"===typeof n[0].requestDepth&&"function"===typeof n[0].getFramebuffer?(n[0].requestDepth(),t._openGLRenderWindow.traverseAllPasses()):t._openGLRenderWindow.traverseAllPasses(),e.postCapturePass(t.currentPass),e.savePixelBuffer(t.currentPass),r.push(t.currentPass));return r.forEach(n=>{t.currentPass=n,e.processPixelBuffers()}),t.currentPass=kv.MAX_KNOWN_PASS,e.endSelection(),t._renderer.setBackground(t.originalBackground),e.invokeEvent({type:"EndEvent"}),!0},e.processPixelBuffers=()=>{t.props.forEach((n,r)=>{e.isPropHit(r)&&n.processSelectorPixelBuffers(e,t.propPixels[r])})},e.passRequired=e=>{if(e===kv.ID_HIGH24){if(t.fieldAssociation===Nv.FIELD_ASSOCIATION_POINTS)return t.maximumPointId>16777215;if(t.fieldAssociation===Nv.FIELD_ASSOCIATION_CELLS)return t.maximumCellId>16777215}return!0},e.savePixelBuffer=n=>{if(t.pixBuffer[n]=t._openGLRenderWindow.getPixelData(t.area[0],t.area[1],t.area[2],t.area[3]),!t.rawPixBuffer[n]){const e=(t.area[2]-t.area[0]+1)*(t.area[3]-t.area[1]+1)*4;t.rawPixBuffer[n]=new Uint8Array(e),t.rawPixBuffer[n].set(t.pixBuffer[n])}if(n===kv.ACTOR_PASS){if(t.captureZValues){const e=t._openGLRenderWindow.getRenderPasses();if("function"===typeof e[0].requestDepth&&"function"===typeof e[0].getFramebuffer){const n=e[0].getFramebuffer();n.saveCurrentBindingsAndBuffers(),n.bind(),t.zBuffer=t._openGLRenderWindow.getPixelData(t.area[0],t.area[1],t.area[2],t.area[3]),n.restorePreviousBindingsAndBuffers()}}e.buildPropHitList(t.rawPixBuffer[n])}},e.buildPropHitList=e=>{let n=0;for(let r=0;r<=t.area[3]-t.area[1];r++)for(let o=0;o<=t.area[2]-t.area[0];o++){let a=zv(o,r,e,t.area);a>0&&(a--,a in t.hitProps||(t.hitProps[a]=!0,t.propPixels[a]=[]),t.propPixels[a].push(4*n)),++n}},e.renderProp=n=>{t.currentPass===kv.ACTOR_PASS&&(e.setPropColorValueFromInt(t.props.length+1),t.props.push(n))},e.renderCompositeIndex=n=>{t.currentPass===kv.COMPOSITE_INDEX_PASS&&e.setPropColorValueFromInt(n+1)},e.renderAttributeId=e=>{e<0||(t.maxAttributeId=e>t.maxAttributeId?e:t.maxAttributeId)},e.passTypeToString=e=>dn.enumToString(kv,e),e.isPropHit=e=>Boolean(t.hitProps[e]),e.setPropColorValueFromInt=e=>{t.propColorValue[0]=e%256/255,t.propColorValue[1]=Math.floor(e/256)%256/255,t.propColorValue[2]=Math.floor(e/65536)%256/255},e.getPixelInformation=(n,r,o)=>{const a=r<0?0:r;if(0===a){if(o[0]=n[0],o[1]=n[1],n[0]<t.area[0]||n[0]>t.area[2]||n[1]<t.area[1]||n[1]>t.area[3])return null;const e=[n[0]-t.area[0],n[1]-t.area[1]],r=zv(e[0],e[1],t.pixBuffer[kv.ACTOR_PASS],t.area);if(r<=0||r-1>=t.props.length)return null;const a={valid:!0};a.propID=r-1,a.prop=t.props[a.propID];let i=zv(e[0],e[1],t.pixBuffer[kv.COMPOSITE_INDEX_PASS],t.area);if((i<0||i>16777215)&&(i=0),a.compositeID=i-1,t.captureZValues){const r=4*(e[1]*(t.area[2]-t.area[0]+1)+e[0]);a.zValue=(256*t.zBuffer[r]+t.zBuffer[r+1])/65535,a.displayPosition=n}if(t.pixBuffer[kv.ID_LOW24]&&0===Uv(e[0],e[1],t.pixBuffer[kv.ID_LOW24],t.area))return a;const s=zv(e[0],e[1],t.pixBuffer[kv.ID_LOW24],t.area),l=zv(e[0],e[1],t.pixBuffer[kv.ID_HIGH24],t.area);return a.attributeID=Gv(s,l),a}const i=[n[0],n[1]],s=[0,0];let l=e.getPixelInformation(n,0,o);if(l&&l.valid)return l;for(let t=1;t<a;++t){for(let n=i[1]>t?i[1]-t:0;n<=i[1]+t;++n){if(s[1]=n,i[0]>=t&&(s[0]=i[0]-t,l=e.getPixelInformation(s,0,o),l&&l.valid))return l;if(s[0]=i[0]+t,l=e.getPixelInformation(s,0,o),l&&l.valid)return l}for(let n=i[0]>=t?i[0]-(t-1):0;n<=i[0]+(t-1);++n){if(s[0]=n,i[1]>=t&&(s[1]=i[1]-t,l=e.getPixelInformation(s,0,o),l&&l.valid))return l;if(s[1]=i[1]+t,l=e.getPixelInformation(s,0,o),l&&l.valid)return l}}return o[0]=n[0],o[1]=n[1],null},e.generateSelection=(n,r,o,a)=>{const i=Math.floor(n),s=Math.floor(r),l=Math.floor(o),u=Math.floor(a),c=new Map,d=[0,0];for(let f=s;f<=u;f++)for(let n=i;n<=l;n++){const r=[n,f],o=e.getPixelInformation(r,0,d);if(o&&o.valid){const e=Fv(o);if(c.has(e)){const n=c.get(e);n.pixelCount++,t.captureZValues&&o.zValue<n.info.zValue&&(n.info=o),-1===n.attributeIDs.indexOf(o.attributeID)&&n.attributeIDs.push(o.attributeID)}else c.set(e,{info:o,pixelCount:1,attributeIDs:[o.attributeID]})}}return Hv(t.fieldAssociation,c,t.captureZValues,t._renderer,t._openGLRenderWindow)},e.getRawPixelBuffer=e=>t.rawPixBuffer[e],e.getPixelBuffer=e=>t.pixBuffer[e],e.attach=(e,n)=>{t._openGLRenderWindow=e,t._renderer=n};const n=e.setArea;e.setArea=function(){return!!n(...arguments)&&(t.area[0]=Math.floor(t.area[0]),t.area[1]=Math.floor(t.area[1]),t.area[2]=Math.floor(t.area[2]),t.area[3]=Math.floor(t.area[3]),!0)}}const Kv={area:void 0,currentPass:-1,propColorValue:null,props:null,maximumPointId:0,maximumCellId:0,idOffset:1};function Zv(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Kv,n),Iv.extend(e,t,n),t.propColorValue=[0,0,0],t.props=[],t.area||(t.area=[0,0,0,0]),dn.setGetArray(e,t,["area"],4),dn.setGet(e,t,["_renderer","currentPass","_openGLRenderWindow","maximumPointId","maximumCellId"]),dn.setGetArray(e,t,["propColorValue"],3),dn.moveToProtected(e,t,["renderer","openGLRenderWindow"]),dn.event(e,t,"event"),jv(e,t)}var qv=u({newInstance:dn.newInstance(Zv,"vtkOpenGLHardwareSelector"),extend:Zv},Zu),Xv=n(908);const Yv=["lastShaderProgramBound","context","_openGLRenderWindow"];const Qv={lastShaderProgramBound:null,shaderPrograms:null,context:null};function $v(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Qv,n),t.shaderPrograms={},dn.obj(e,t),dn.setGet(e,t,Yv),dn.moveToProtected(e,t,["openGLRenderWindow"]),function(e,t){t.classHierarchy.push("vtkShaderCache"),e.replaceShaderValues=(e,n,r)=>{let o=n;r.length>0&&(o=vf.substitute(o,"VSOut","GSOut").result);const a=t._openGLRenderWindow.getWebgl2();let i="\n",s="#version 100\n";a?s="#version 300 es\n#define attribute in\n#define textureCube texture\n#define texture2D texture\n#define textureCubeLod textureLod\n#define texture2DLod textureLod\n":(t.context.getExtension("OES_standard_derivatives"),t.context.getExtension("EXT_frag_depth")&&(i="#extension GL_EXT_frag_depth : enable\n"),t.context.getExtension("EXT_shader_texture_lod")&&(i+="#extension GL_EXT_shader_texture_lod : enable\n#define textureCubeLod textureCubeLodEXT\n#define texture2DLod texture2DLodEXT")),o=vf.substitute(o,"//VTK::System::Dec",["".concat(s,"\n"),a?"":"#extension GL_OES_standard_derivatives : enable\n",i,"#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","precision highp int;","#else","precision mediump float;","precision mediump int;","#endif"]).result;let l=vf.substitute(e,"//VTK::System::Dec",["".concat(s,"\n"),"#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","precision highp int;","#else","precision mediump float;","precision mediump int;","#endif"]).result;if(a){l=vf.substitute(l,"varying","out").result,o=vf.substitute(o,"varying","in").result;let e="",t=0;for(;o.includes("gl_FragData[".concat(t,"]"));)o=vf.substitute(o,"gl_FragData\\[".concat(t,"\\]"),"fragOutput".concat(t)).result,e+="layout(location = ".concat(t,") out vec4 fragOutput").concat(t,";\n"),t++;o=vf.substitute(o,"//VTK::Output::Dec",e).result}return{VSSource:l,FSSource:o,GSSource:vf.substitute(r,"//VTK::System::Dec",s).result}},e.readyShaderProgramArray=(t,n,r)=>{const o=e.replaceShaderValues(t,n,r),a=e.getShaderProgram(o.VSSource,o.FSSource,o.GSSource);return e.readyShaderProgram(a)},e.readyShaderProgram=t=>t&&(t.getCompiled()||t.compileShader())&&e.bindShaderProgram(t)?t:null,e.getShaderProgram=(e,n,r)=>{const o="".concat(e).concat(n).concat(r),a=Xv.hash(o);if(!(a in t.shaderPrograms)){const o=vf.newInstance();return o.setContext(t.context),o.getVertexShader().setSource(e),o.getFragmentShader().setSource(n),r&&o.getGeometryShader().setSource(r),o.setMd5Hash(a),t.shaderPrograms[a]=o,o}return t.shaderPrograms[a]},e.releaseGraphicsResources=n=>{e.releaseCurrentShaderProgram(),Object.keys(t.shaderPrograms).map(e=>t.shaderPrograms[e]).forEach(e=>e.cleanup()),t.shaderPrograms={}},e.releaseCurrentShaderProgram=()=>{t.lastShaderProgramBound&&(t.lastShaderProgramBound.cleanup(),t.lastShaderProgramBound=null)},e.bindShaderProgram=e=>(t.lastShaderProgramBound===e||(t.lastShaderProgramBound&&t.lastShaderProgramBound.release(),e.bind(),t.lastShaderProgramBound=e),1)}(e,t)}var Jv={newInstance:dn.newInstance($v,"vtkShaderCache"),extend:$v};const{vtkErrorMacro:ey}=dn;const ty={context:null,numberOfTextureUnits:0,textureUnits:0};function ny(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,ty,n),dn.obj(e,t),t.textureUnits=[],dn.get(e,t,["numberOfTextureUnits"]),dn.setGet(e,t,["context"]),function(e,t){t.classHierarchy.push("vtkOpenGLTextureUnitManager"),e.deleteTable=()=>{for(let e=0;e<t.numberOfTextureUnits;++e)!0===t.textureUnits[e]&&ey("some texture units  were not properly released");t.textureUnits=[],t.numberOfTextureUnits=0},e.setContext=n=>{if(t.context!==n){if(0!==t.context&&e.deleteTable(),t.context=n,t.context){t.numberOfTextureUnits=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS);for(let e=0;e<t.numberOfTextureUnits;++e)t.textureUnits[e]=!1}e.modified()}},e.allocate=()=>{for(let n=0;n<t.numberOfTextureUnits;n++)if(!e.isAllocated(n))return t.textureUnits[n]=!0,n;return-1},e.allocateUnit=n=>e.isAllocated(n)?-1:(t.textureUnits[n]=!0,n),e.isAllocated=e=>t.textureUnits[e],e.free=e=>{t.textureUnits[e]=!1},e.freeAll=()=>{for(let e=0;e<t.numberOfTextureUnits;++e)t.textureUnits[e]=!1}}(e,t)}var ry={newInstance:dn.newInstance(ny,"vtkOpenGLTextureUnitManager"),extend:ny};const oy={size:void 0,selector:void 0};function ay(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,oy,n),t.size||(t.size=[300,300]),dn.getArray(e,t,["size"],2),dn.get(e,t,["selector"]),gn.extend(e,t,n),function(e,t){t.classHierarchy.push("vtkRenderWindowViewNode"),e.getViewNodeFactory=()=>null,e.getAspectRatio=()=>t.size[0]/t.size[1],e.getAspectRatioForRenderer=e=>{const n=e.getViewportByReference();return t.size[0]*(n[2]-n[0])/((n[3]-n[1])*t.size[1])},e.isInViewport=(t,n,r)=>{const o=r.getViewportByReference(),a=e.getFramebufferSize();return o[0]*a[0]<=t&&o[2]*a[0]>=t&&o[1]*a[1]<=n&&o[3]*a[1]>=n},e.getViewportSize=t=>{const n=t.getViewportByReference(),r=e.getFramebufferSize();return[(n[2]-n[0])*r[0],(n[3]-n[1])*r[1]]},e.getViewportCenter=t=>{const n=e.getViewportSize(t);return[.5*n[0],.5*n[1]]},e.displayToNormalizedDisplay=(t,n,r)=>{const o=e.getFramebufferSize();return[t/o[0],n/o[1],r]},e.normalizedDisplayToDisplay=(t,n,r)=>{const o=e.getFramebufferSize();return[t*o[0],n*o[1],r]},e.worldToView=(e,t,n,r)=>r.worldToView(e,t,n),e.viewToWorld=(e,t,n,r)=>r.viewToWorld(e,t,n),e.worldToDisplay=(t,n,r,o)=>{const a=o.worldToView(t,n,r),i=e.getViewportSize(o),s=o.viewToProjection(a[0],a[1],a[2],i[0]/i[1]),l=o.projectionToNormalizedDisplay(s[0],s[1],s[2]);return e.normalizedDisplayToDisplay(l[0],l[1],l[2])},e.displayToWorld=(t,n,r,o)=>{const a=e.displayToNormalizedDisplay(t,n,r),i=o.normalizedDisplayToProjection(a[0],a[1],a[2]),s=e.getViewportSize(o),l=o.projectionToView(i[0],i[1],i[2],s[0]/s[1]);return o.viewToWorld(l[0],l[1],l[2])},e.normalizedDisplayToViewport=(t,n,r,o)=>{let a=o.getViewportByReference();a=e.normalizedDisplayToDisplay(a[0],a[1],0);const i=e.normalizedDisplayToDisplay(t,n,r);return[i[0]-a[0]-.5,i[1]-a[1]-.5,r]},e.viewportToNormalizedViewport=(t,n,r,o)=>{const a=e.getViewportSize(o);return a&&0!==a[0]&&0!==a[1]?[t/(a[0]-1),n/(a[1]-1),r]:[t,n,r]},e.normalizedViewportToViewport=(t,n,r,o)=>{const a=e.getViewportSize(o);return[t*(a[0]-1),n*(a[1]-1),r]},e.displayToLocalDisplay=(t,n,r)=>[t,e.getFramebufferSize()[1]-n-1,r],e.viewportToNormalizedDisplay=(t,n,r,o)=>{let a=o.getViewportByReference();a=e.normalizedDisplayToDisplay(a[0],a[1],0);const i=t+a[0]+.5,s=n+a[1]+.5;return e.displayToNormalizedDisplay(i,s,r)},e.getComputedDevicePixelRatio=()=>t.size[0]/e.getContainerSize()[0],e.getContainerSize=()=>{dn.vtkErrorMacro("not implemented")},e.getPixelData=(e,t,n,r)=>{dn.vtkErrorMacro("not implemented")},e.createSelector=()=>{dn.vtkErrorMacro("not implemented")}}(e,t)}var iy={newInstance:dn.newInstance(ay,"vtkRenderWindowViewNode"),extend:ay};function sy(){const e=new Map,t={apply:(t,n,r)=>e.has(r[0])?e.get(r[0]):t.apply(n,r)};const n=Object.create(null);return n.getParameter=(e,n,r,o)=>new Proxy(o.bind(e),t),n.depthMask=(t,n,r,o)=>{return new Proxy(o.bind(t),(a=t.DEPTH_WRITEMASK,{apply:(t,n,r)=>(e.set(a,r[0]),t.apply(n,r))}));var a},{get(e,t,r){if("__getUnderlyingContext"===t)return()=>e;let o=Reflect.get(e,t,e);o instanceof Function&&(o=o.bind(e));const a=n[t];return a?a(e,t,r,o):o}}}const{vtkDebugMacro:ly,vtkErrorMacro:uy}=dn,cy={position:"absolute",top:0,left:0,width:"100%",height:"100%"},dy=["activateTexture","deactivateTexture","disableCullFace","enableCullFace","get3DContext","getActiveFramebuffer","getContext","getDefaultTextureByteSize","getDefaultTextureInternalFormat","getDefaultToWebgl2","getGLInformations","getGraphicsMemoryInfo","getGraphicsResourceForObject","getHardwareMaximumLineWidth","getPixelData","getShaderCache","getTextureUnitForTexture","getTextureUnitManager","getWebgl2","makeCurrent","releaseGraphicsResources","registerGraphicsResourceUser","unregisterGraphicsResourceUser","restoreContext","setActiveFramebuffer","setContext","setDefaultToWebgl2","setGraphicsResourceForObject"];function fy(e,t,n){const r=e.createFramebuffer(),o=e.createTexture();e.bindTexture(e.TEXTURE_2D,o),e.texImage2D(e.TEXTURE_2D,0,t,2,2,0,t,n,null),e.bindFramebuffer(e.FRAMEBUFFER,r),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,o,0);const a=e.checkFramebufferStatus(e.FRAMEBUFFER);return e.bindFramebuffer(e.FRAMEBUFFER,null),e.bindTexture(e.TEXTURE_2D,null),a===e.FRAMEBUFFER_COMPLETE}let py=0;const hy=[];function my(e){e.preventDefault()}function gy(e,t){let n;t.classHierarchy.push("vtkOpenGLRenderWindow"),e.getViewNodeFactory=()=>t.myFactory,t.canvas.addEventListener("webglcontextlost",my,!1),t.canvas.addEventListener("webglcontextrestored",e.restoreContext,!1);const r=[0,0];let o;e.onModified(function(){t.renderable&&(t.size[0]===r[0]&&t.size[1]===r[1]||(r[0]=t.size[0],r[1]=t.size[1],t.canvas.setAttribute("width",t.size[0]),t.canvas.setAttribute("height",t.size[1]))),t.viewStream&&t.viewStream.setSize(t.size[0],t.size[1]),t.canvas.style.display=t.useOffScreen?"none":"block",t.el&&(t.el.style.cursor=t.cursorVisibility?t.cursor:"none"),t.containerSize=null}),e.buildPass=n=>{if(n){if(!t.renderable)return;e.prepareNodes(),e.addMissingNodes(t.renderable.getRenderersByReference()),e.addMissingNodes(t.renderable.getChildRenderWindowsByReference()),e.removeUnusedNodes(),e.initialize(),t.children.forEach(t=>{var n;null===(n=t.setOpenGLRenderWindow)||void 0===n||n.call(t,e)})}},e.initialize=()=>{if(!t.initialized){if(t.rootOpenGLRenderWindow=e.getLastAncestorOfType("vtkOpenGLRenderWindow"),t.rootOpenGLRenderWindow)t.context2D=e.get2DContext();else{t.context=e.get3DContext(),e.resizeFromChildRenderWindows(),t.context&&(py++,hy.forEach(e=>e(py))),t.textureUnitManager=ry.newInstance(),t.textureUnitManager.setContext(t.context),t.shaderCache.setContext(t.context);const n=t.context;n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA),n.depthFunc(n.LEQUAL),n.enable(n.BLEND)}t.initialized=!0}},e.makeCurrent=()=>{t.context.makeCurrent()},e.setContainer=n=>{t.el&&t.el!==n&&(t.canvas.parentNode!==t.el&&uy("Error: canvas parent node does not match container"),t.el.removeChild(t.canvas),t.el.contains(t.bgImage)&&t.el.removeChild(t.bgImage)),t.el!==n&&(t.el=n,t.el&&(t.el.appendChild(t.canvas),t.useBackgroundImage&&t.el.appendChild(t.bgImage)),e.modified())},e.getContainer=()=>t.el,e.getContainerSize=()=>{if(!t.containerSize&&t.el){const{width:e,height:n}=t.el.getBoundingClientRect();t.containerSize=[e,n]}return t.containerSize||t.size},e.getFramebufferSize=()=>{var e;return(null===(e=t.activeFramebuffer)||void 0===e?void 0:e.getSize())||t.size},e.getPixelData=(e,n,r,o)=>{const a=new Uint8Array((r-e+1)*(o-n+1)*4);return t.context.readPixels(e,n,r-e+1,o-n+1,t.context.RGBA,t.context.UNSIGNED_BYTE,a),a},e.get3DContext=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{preserveDrawingBuffer:!1,depth:!0,alpha:!0,powerPreference:"high-performance"},r=null;const o="undefined"!==typeof WebGL2RenderingContext;return t.webgl2=!1,t.defaultToWebgl2&&o&&(r=t.canvas.getContext("webgl2",e),r&&(t.webgl2=!0,ly("using webgl2"))),r||(ly("using webgl1"),r=t.canvas.getContext("webgl",e)||t.canvas.getContext("experimental-webgl",e)),new Proxy(r,(n||(n=sy()),n))},e.get2DContext=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.canvas.getContext("2d",e)},e.restoreContext=()=>{const t=gv.newInstance();t.setCurrentOperation("Release"),t.traverse(e,null)},e.activateTexture=n=>{const r=t._textureResourceIds.get(n);if(void 0!==r)return void t.context.activeTexture(t.context.TEXTURE0+r);const o=e.getTextureUnitManager().allocate();o<0?uy("Hardware does not support the number of textures defined."):(t._textureResourceIds.set(n,o),t.context.activeTexture(t.context.TEXTURE0+o))},e.deactivateTexture=n=>{const r=t._textureResourceIds.get(n);void 0!==r&&(e.getTextureUnitManager().free(r),t._textureResourceIds.delete(n))},e.getTextureUnitForTexture=e=>{const n=t._textureResourceIds.get(e);return void 0!==n?n:-1},e.getDefaultTextureByteSize=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(t.webgl2)switch(e){case Ml.CHAR:case Ml.SIGNED_CHAR:case Ml.UNSIGNED_CHAR:return 1;case n:case r:case Ml.UNSIGNED_SHORT:case Ml.SHORT:case Ml.VOID:return 2;default:return 4}return 1},e.getDefaultTextureInternalFormat=function(e,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(t.webgl2)switch(e){case Ml.UNSIGNED_CHAR:switch(n){case 1:return t.context.R8;case 2:return t.context.RG8;case 3:return t.context.RGB8;default:return t.context.RGBA8}case r&&!o&&Ml.UNSIGNED_SHORT:switch(n){case 1:return r.R16_EXT;case 2:return r.RG16_EXT;case 3:return r.RGB16_EXT;default:return r.RGBA16_EXT}case r&&!o&&Ml.SHORT:switch(n){case 1:return r.R16_SNORM_EXT;case 2:return r.RG16_SNORM_EXT;case 3:return r.RGB16_SNORM_EXT;default:return r.RGBA16_SNORM_EXT}default:switch(n){case 1:return o?t.context.R16F:t.context.R32F;case 2:return o?t.context.RG16F:t.context.RG32F;case 3:return o?t.context.RGB16F:t.context.RGB32F;default:return o?t.context.RGBA16F:t.context.RGBA32F}}switch(n){case 1:return t.context.LUMINANCE;case 2:return t.context.LUMINANCE_ALPHA;case 3:return t.context.RGB;default:return t.context.RGBA}},e.setBackgroundImage=e=>{t.bgImage.src=e.src},e.setUseBackgroundImage=e=>{t.useBackgroundImage=e,t.useBackgroundImage&&!t.el.contains(t.bgImage)?t.el.appendChild(t.bgImage):!t.useBackgroundImage&&t.el.contains(t.bgImage)&&t.el.removeChild(t.bgImage)},e.captureNextImage=function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"image/png",{resetCamera:r=!1,size:o=null,scale:a=1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t.deleted)return null;t.imageFormat=n;const i=t.notifyStartCaptureImage;return t.notifyStartCaptureImage=!0,t._screenshot={size:o||1!==a?o||t.size.map(e=>e*a):null},new Promise((n,o)=>{const a=e.onImageReady(o=>{if(null===t._screenshot.size)t.notifyStartCaptureImage=i,a.unsubscribe(),t._screenshot.placeHolder&&(t.size=t._screenshot.originalSize,e.modified(),t._screenshot.cameras&&t._screenshot.cameras.forEach(e=>{let{restoreParamsFn:t,arg:n}=e;return t(n)}),e.traverseAllPasses(),t.el.removeChild(t._screenshot.placeHolder),t._screenshot.placeHolder.remove(),t._screenshot=null),n(o);else{var s;const n=document.createElement("img");if(n.style=cy,n.src=o,t._screenshot.placeHolder=t.el.appendChild(n),t.canvas.style.display="none",t._screenshot.originalSize=t.size,t.size=t._screenshot.size,null===(s=t.rootOpenGLRenderWindow)||void 0===s||s.resizeFromChildRenderWindows(),t._screenshot.size=null,e.modified(),r){const e=!0!==r;t._screenshot.cameras=t.renderable.getRenderers().map(t=>{const n=t.getActiveCamera(),o=n.get("focalPoint","position","parallelScale");return{resetCameraArgs:e?{renderer:t}:void 0,resetCameraFn:e?r:t.resetCamera,restoreParamsFn:n.set,arg:JSON.parse(JSON.stringify(o))}}),t._screenshot.cameras.forEach(e=>{let{resetCameraFn:t,resetCameraArgs:n}=e;return t(n)})}e.traverseAllPasses()}})})},e.getHardwareMaximumLineWidth=()=>{if(null!=o)return o;const t=e.get3DContext(),n=t.getParameter(t.ALIASED_LINE_WIDTH_RANGE);return o=n[1],n[1]},e.getGLInformations=()=>{if(t._glInformation)return t._glInformation;const n=e.get3DContext(),r=n.getExtension("OES_texture_float"),o=n.getExtension("OES_texture_half_float"),a=n.getExtension("WEBGL_debug_renderer_info"),i=n.getExtension("WEBGL_draw_buffers"),s=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),l=[["Max Vertex Attributes","MAX_VERTEX_ATTRIBS",n.getParameter(n.MAX_VERTEX_ATTRIBS)],["Max Varying Vectors","MAX_VARYING_VECTORS",n.getParameter(n.MAX_VARYING_VECTORS)],["Max Vertex Uniform Vectors","MAX_VERTEX_UNIFORM_VECTORS",n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS)],["Max Fragment Uniform Vectors","MAX_FRAGMENT_UNIFORM_VECTORS",n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS)],["Max Fragment Texture Image Units","MAX_TEXTURE_IMAGE_UNITS",n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS)],["Max Vertex Texture Image Units","MAX_VERTEX_TEXTURE_IMAGE_UNITS",n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS)],["Max Combined Texture Image Units","MAX_COMBINED_TEXTURE_IMAGE_UNITS",n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS)],["Max 2D Texture Size","MAX_TEXTURE_SIZE",n.getParameter(n.MAX_TEXTURE_SIZE)],["Max Cube Texture Size","MAX_CUBE_MAP_TEXTURE_SIZE",n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE)],["Max Texture Anisotropy","MAX_TEXTURE_MAX_ANISOTROPY_EXT",s&&n.getParameter(s.MAX_TEXTURE_MAX_ANISOTROPY_EXT)],["Point Size Range","ALIASED_POINT_SIZE_RANGE",n.getParameter(n.ALIASED_POINT_SIZE_RANGE).join(" - ")],["Line Width Range","ALIASED_LINE_WIDTH_RANGE",n.getParameter(n.ALIASED_LINE_WIDTH_RANGE).join(" - ")],["Max Viewport Dimensions","MAX_VIEWPORT_DIMS",n.getParameter(n.MAX_VIEWPORT_DIMS).join(" - ")],["Max Renderbuffer Size","MAX_RENDERBUFFER_SIZE",n.getParameter(n.MAX_RENDERBUFFER_SIZE)],["Framebuffer Red Bits","RED_BITS",n.getParameter(n.RED_BITS)],["Framebuffer Green Bits","GREEN_BITS",n.getParameter(n.GREEN_BITS)],["Framebuffer Blue Bits","BLUE_BITS",n.getParameter(n.BLUE_BITS)],["Framebuffer Alpha Bits","ALPHA_BITS",n.getParameter(n.ALPHA_BITS)],["Framebuffer Depth Bits","DEPTH_BITS",n.getParameter(n.DEPTH_BITS)],["Framebuffer Stencil Bits","STENCIL_BITS",n.getParameter(n.STENCIL_BITS)],["Framebuffer Subpixel Bits","SUBPIXEL_BITS",n.getParameter(n.SUBPIXEL_BITS)],["MSAA Samples","SAMPLES",n.getParameter(n.SAMPLES)],["MSAA Sample Buffers","SAMPLE_BUFFERS",n.getParameter(n.SAMPLE_BUFFERS)],["Supported Formats for UByte Render Targets     ","UNSIGNED_BYTE RENDER TARGET FORMATS",[r&&fy(n,n.RGBA,n.UNSIGNED_BYTE)?"RGBA":"",r&&fy(n,n.RGB,n.UNSIGNED_BYTE)?"RGB":"",r&&fy(n,n.LUMINANCE,n.UNSIGNED_BYTE)?"LUMINANCE":"",r&&fy(n,n.ALPHA,n.UNSIGNED_BYTE)?"ALPHA":"",r&&fy(n,n.LUMINANCE_ALPHA,n.UNSIGNED_BYTE)?"LUMINANCE_ALPHA":""].join(" ")],["Supported Formats for Half Float Render Targets","HALF FLOAT RENDER TARGET FORMATS",[o&&fy(n,n.RGBA,o.HALF_FLOAT_OES)?"RGBA":"",o&&fy(n,n.RGB,o.HALF_FLOAT_OES)?"RGB":"",o&&fy(n,n.LUMINANCE,o.HALF_FLOAT_OES)?"LUMINANCE":"",o&&fy(n,n.ALPHA,o.HALF_FLOAT_OES)?"ALPHA":"",o&&fy(n,n.LUMINANCE_ALPHA,o.HALF_FLOAT_OES)?"LUMINANCE_ALPHA":""].join(" ")],["Supported Formats for Full Float Render Targets","FLOAT RENDER TARGET FORMATS",[r&&fy(n,n.RGBA,n.FLOAT)?"RGBA":"",r&&fy(n,n.RGB,n.FLOAT)?"RGB":"",r&&fy(n,n.LUMINANCE,n.FLOAT)?"LUMINANCE":"",r&&fy(n,n.ALPHA,n.FLOAT)?"ALPHA":"",r&&fy(n,n.LUMINANCE_ALPHA,n.FLOAT)?"LUMINANCE_ALPHA":""].join(" ")],["Max Multiple Render Targets Buffers","MAX_DRAW_BUFFERS_WEBGL",i?n.getParameter(i.MAX_DRAW_BUFFERS_WEBGL):0],["High Float Precision in Vertex Shader","HIGH_FLOAT VERTEX_SHADER",[n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision," (-2<sup>",n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).rangeMin,"</sup> - 2<sup>",n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).rangeMax,"</sup>)"].join("")],["Medium Float Precision in Vertex Shader","MEDIUM_FLOAT VERTEX_SHADER",[n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision," (-2<sup>",n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).rangeMin,"</sup> - 2<sup>",n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).rangeMax,"</sup>)"].join("")],["Low Float Precision in Vertex Shader","LOW_FLOAT VERTEX_SHADER",[n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.LOW_FLOAT).precision," (-2<sup>",n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.LOW_FLOAT).rangeMin,"</sup> - 2<sup>",n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.LOW_FLOAT).rangeMax,"</sup>)"].join("")],["High Float Precision in Fragment Shader","HIGH_FLOAT FRAGMENT_SHADER",[n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision," (-2<sup>",n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).rangeMin,"</sup> - 2<sup>",n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).rangeMax,"</sup>)"].join("")],["Medium Float Precision in Fragment Shader","MEDIUM_FLOAT FRAGMENT_SHADER",[n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision," (-2<sup>",n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).rangeMin,"</sup> - 2<sup>",n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).rangeMax,"</sup>)"].join("")],["Low Float Precision in Fragment Shader","LOW_FLOAT FRAGMENT_SHADER",[n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.LOW_FLOAT).precision," (-2<sup>",n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.LOW_FLOAT).rangeMin,"</sup> - 2<sup>",n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.LOW_FLOAT).rangeMax,"</sup>)"].join("")],["High Int Precision in Vertex Shader","HIGH_INT VERTEX_SHADER",[n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_INT).precision," (-2<sup>",n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_INT).rangeMin,"</sup> - 2<sup>",n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_INT).rangeMax,"</sup>)"].join("")],["Medium Int Precision in Vertex Shader","MEDIUM_INT VERTEX_SHADER",[n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_INT).precision," (-2<sup>",n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_INT).rangeMin,"</sup> - 2<sup>",n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_INT).rangeMax,"</sup>)"].join("")],["Low Int Precision in Vertex Shader","LOW_INT VERTEX_SHADER",[n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.LOW_INT).precision," (-2<sup>",n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.LOW_INT).rangeMin,"</sup> - 2<sup>",n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.LOW_INT).rangeMax,"</sup>)"].join("")],["High Int Precision in Fragment Shader","HIGH_INT FRAGMENT_SHADER",[n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_INT).precision," (-2<sup>",n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_INT).rangeMin,"</sup> - 2<sup>",n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_INT).rangeMax,"</sup>)"].join("")],["Medium Int Precision in Fragment Shader","MEDIUM_INT FRAGMENT_SHADER",[n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_INT).precision," (-2<sup>",n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_INT).rangeMin,"</sup> - 2<sup>",n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_INT).rangeMax,"</sup>)"].join("")],["Low Int Precision in Fragment Shader","LOW_INT FRAGMENT_SHADER",[n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.LOW_INT).precision," (-2<sup>",n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.LOW_INT).rangeMin,"</sup> - 2<sup>",n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.LOW_INT).rangeMax,"</sup>)"].join("")],["Supported Extensions","EXTENSIONS",n.getSupportedExtensions().join("<br/>\t\t\t\t\t    ")],["WebGL Renderer","RENDERER",n.getParameter(n.RENDERER)],["WebGL Vendor","VENDOR",n.getParameter(n.VENDOR)],["WebGL Version","VERSION",n.getParameter(n.VERSION)],["Shading Language Version","SHADING_LANGUAGE_VERSION",n.getParameter(n.SHADING_LANGUAGE_VERSION)],["Unmasked Renderer","UNMASKED_RENDERER",a&&n.getParameter(a.UNMASKED_RENDERER_WEBGL)],["Unmasked Vendor","UNMASKED_VENDOR",a&&n.getParameter(a.UNMASKED_VENDOR_WEBGL)],["WebGL Version","WEBGL_VERSION",t.webgl2?2:1]],u={};for(;l.length;){const[e,t,n]=l.pop();t&&(u[t]={label:e,value:n})}return t._glInformation=u,u},e.traverseAllPasses=()=>{if(t.renderPasses)for(let o=0;o<t.renderPasses.length;++o)t.renderPasses[o].traverse(e,null);e.copyParentContent(),t.notifyStartCaptureImage&&function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.imageFormat;const r=document.createElement("canvas"),o=r.getContext("2d");r.width=t.canvas.width,r.height=t.canvas.height,o.drawImage(t.canvas,0,0);const a=t.canvas.getBoundingClientRect();t.renderable.getRenderers().forEach(e=>{e.getViewProps().forEach(e=>{if(e.getContainer){const t=e.getContainer().getElementsByTagName("canvas");for(let e=0;e<t.length;e++){const n=t[e],r=n.getBoundingClientRect(),i=r.x-a.x,s=r.y-a.y;o.drawImage(n,i,s)}}})});const i=r.toDataURL(n);r.remove(),e.invokeImageReady(i)}();const n=t.renderable.getChildRenderWindowsByReference();for(let t=0;t<n.length;++t){var r;null===(r=e.getViewNodeFor(n[t]))||void 0===r||r.traverseAllPasses()}},e.copyParentContent=()=>{const e=t.rootOpenGLRenderWindow;if(!e||!t.context2D||t.children.some(e=>{var t;return!(null===(t=e.getSelector)||void 0===t||!t.call(e))}))return;const n=e.getCanvas(),r=t.canvas;t.context2D.drawImage(n,0,n.height-r.height,r.width,r.height,0,0,r.width,r.height)},e.resizeFromChildRenderWindows=()=>{const n=t.renderable.getChildRenderWindowsByReference();if(n.length>0){const t=[0,0];for(let o=0;o<n.length;++o){var r;const a=null===(r=e.getViewNodeFor(n[o]))||void 0===r?void 0:r.getSize();a&&(t[0]=a[0]>t[0]?a[0]:t[0],t[1]=a[1]>t[1]?a[1]:t[1])}e.setSize(...t)}},e.disableCullFace=()=>{t.cullFaceEnabled&&(t.context.disable(t.context.CULL_FACE),t.cullFaceEnabled=!1)},e.enableCullFace=()=>{t.cullFaceEnabled||(t.context.enable(t.context.CULL_FACE),t.cullFaceEnabled=!0)},e.setViewStream=n=>{if(t.viewStream===n)return!1;if(t.subscription&&(t.subscription.unsubscribe(),t.subscription=null),t.viewStream=n,t.viewStream){t.renderable.getRenderers()[0].getBackgroundByReference()[3]=0,e.setUseBackgroundImage(!0),t.subscription=t.viewStream.onImageReady(t=>e.setBackgroundImage(t.image)),t.viewStream.setSize(t.size[0],t.size[1]),t.viewStream.invalidateCache(),t.viewStream.render(),e.modified()}return!0},e.createSelector=()=>{const t=qv.newInstance();return t.setOpenGLRenderWindow(e),t},e.delete=dn.chain(()=>{t.context&&(py--,hy.forEach(e=>e(py))),e.setContainer(),e.setViewStream()},function(){t.canvas.removeEventListener("webglcontextlost",my),t.canvas.removeEventListener("webglcontextrestored",e.restoreContext)},e.delete),e.setActiveFramebuffer=e=>{t.activeFramebuffer=e};const a=e.setSize;e.setSize=(t,n)=>{const r=a(t,n);return r&&e.invokeWindowResizeEvent({width:t,height:n}),r},e.registerGraphicsResourceUser=(n,r)=>{t._graphicsResources.has(n)||e.setGraphicsResourceForObject(n,null,null);const o=t._graphicsResources.get(n);null===o||void 0===o||o.users.add(r)},e.unregisterGraphicsResourceUser=(n,r)=>{const o=t._graphicsResources.get(n);var a;o&&(o.users.delete(r),o.users.size||(null===(a=o.oglObject)||void 0===a||a.releaseGraphicsResources(e),t._graphicsResources.delete(n)))},e.getGraphicsResourceForObject=e=>t._graphicsResources.get(e),e.setGraphicsResourceForObject=(n,r,o)=>{var a,i;if(!n)return;const s=t._graphicsResources.get(n);null===s||void 0===s||null===(a=s.oglObject)||void 0===a||a.releaseGraphicsResources(e),t._graphicsResources.set(n,{coreObject:n,oglObject:r,hash:o,users:null!==(i=null===s||void 0===s?void 0:s.users)&&void 0!==i?i:new Set})},e.getGraphicsMemoryInfo=()=>{let e=0;return t._graphicsResources.forEach(t=>{let{oglObject:n}=t;e+=n.getAllocatedGPUMemoryInBytes()}),e},e.releaseGraphicsResources=()=>{null!==t.shaderCache&&t.shaderCache.releaseGraphicsResources(e),t._graphicsResources.forEach(t=>{let{oglObject:n}=t;n.releaseGraphicsResources(e)}),t._graphicsResources.clear(),null!==t.textureUnitManager&&t.textureUnitManager.freeAll(),t.renderable.getRenderersByReference().forEach(t=>{const n=e.getViewNodeFor(t);null===n||void 0===n||n.releaseGraphicsResources()})};const i=u({},e);dy.forEach(n=>{e[n]=function(){return t.rootOpenGLRenderWindow?t.rootOpenGLRenderWindow[n](...arguments):i[n](...arguments)}})}const vy={cullFaceEnabled:!1,shaderCache:null,initialized:!1,context:null,context2D:null,canvas:null,cursorVisibility:!0,cursor:"pointer",textureUnitManager:null,textureResourceIds:null,containerSize:null,renderPasses:[],notifyStartCaptureImage:!1,webgl2:!1,defaultToWebgl2:!0,activeFramebuffer:null,imageFormat:"image/png",useOffScreen:!1,useBackgroundImage:!1};function yy(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,vy,n),iy.extend(e,t,n),t.canvas||(t.canvas=document.createElement("canvas"),t.canvas.style.width="100%"),t.selector||(t.selector=qv.newInstance(),t.selector.setOpenGLRenderWindow(e)),t.bgImage=new Image,t.bgImage.style.position="absolute",t.bgImage.style.left="0",t.bgImage.style.top="0",t.bgImage.style.width="100%",t.bgImage.style.height="100%",t.bgImage.style.zIndex="-1",t._textureResourceIds=new Map,t._graphicsResources=new Map,t._glInformation=null,t.myFactory=wn.newInstance(),t.shaderCache=Jv.newInstance(),t.shaderCache.setOpenGLRenderWindow(e),t.renderPasses[0]=Cv.newInstance(),dn.get(e,t,["shaderCache","textureUnitManager","webgl2","useBackgroundImage","activeFramebuffer","rootOpenGLRenderWindow"]),dn.setGet(e,t,["initialized","context","context2D","canvas","renderPasses","notifyStartCaptureImage","defaultToWebgl2","cursor","useOffScreen"]),dn.setGetArray(e,t,["size"],2),dn.event(e,t,"imageReady"),dn.event(e,t,"windowResizeEvent"),gy(e,t)}const by=dn.newInstance(yy,"vtkOpenGLRenderWindow");wg("WebGL",by);Tn("vtkRenderWindow",by);const _y=["setBindGroup","setIndexBuffer","setVertexBuffer","draw","drawIndexed"];const Ty={description:null,handle:null,boundPipeline:null,pipelineHash:null,pipelineSettings:null,replaceShaderCodeFunction:null,depthTextureView:null,label:null};function xy(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Ty,n),Nt(e,t),t.description={colorAttachments:[{view:void 0,loadOp:"load",storeOp:"store"}],depthStencilAttachment:{view:void 0,depthLoadOp:"clear",depthClearValue:0,depthStoreOp:"store"}},t.replaceShaderCodeFunction=e=>{const t=e.getShaderDescription("fragment");t.addOutput("vec4<f32>","outColor");let n=t.getCode();n=$p.substitute(n,"//VTK::RenderEncoder::Impl",["output.outColor = computedColor;"]).result,t.setCode(n)},t.pipelineSettings={primitive:{cullMode:"none"},depthStencil:{depthWriteEnabled:!0,depthCompare:"greater-equal",format:"depth32float"},fragment:{targets:[{format:"rgba16float",blend:{color:{srcFactor:"src-alpha",dstFactor:"one-minus-src-alpha"},alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha"}}}]}},t.colorTextureViews=[],Ft(e,t,["boundPipeline","colorTextureViews"]),Wt(e,t,["depthTextureView","description","handle","label","pipelineHash","pipelineSettings","replaceShaderCodeFunction"]),function(e,t){t.classHierarchy.push("vtkWebGPURenderEncoder"),e.begin=e=>{t.drawCallbacks=[],t.handle=e.beginRenderPass(t.description),t.label&&t.handle.pushDebugGroup(t.label)},e.end=()=>{for(let n=0;n<t.drawCallbacks.length;n++){const r=t.drawCallbacks[n],o=r.pipeline;e.setPipeline(o);for(let t=0;t<r.callbacks.length;t++)r.callbacks[t](e)}t.label&&t.handle.popDebugGroup(),t.handle.end(),t.boundPipeline=null},e.setPipeline=e=>{if(t.boundPipeline===e)return;t.handle.setPipeline(e.getHandle());const n=e.getPipelineDescription();if(t.colorTextureViews.length!==n.fragment.targets.length)console.log("mismatched attachment counts on pipeline ".concat(n.fragment.targets.length," while encoder has ").concat(t.colorTextureViews.length)),console.trace();else for(let a=0;a<t.colorTextureViews.length;a++){var r;const e=null===(r=t.colorTextureViews[a].getTexture())||void 0===r?void 0:r.getFormat();e&&e!==n.fragment.targets[a].format&&(console.log("mismatched attachments for attachment ".concat(a," on pipeline ").concat(n.fragment.targets[a].format," while encoder has ").concat(e)),console.trace())}if(!t.depthTextureView!==!("depthStencil"in n))console.log("mismatched depth attachments"),console.trace();else if(t.depthTextureView){var o;const e=null===(o=t.depthTextureView.getTexture())||void 0===o?void 0:o.getFormat();e&&e!==n.depthStencil.format&&(console.log("mismatched depth attachments on pipeline ".concat(n.depthStencil.format," while encoder has ").concat(e)),console.trace())}t.boundPipeline=e},e.replaceShaderCode=e=>{t.replaceShaderCodeFunction(e)},e.setColorTextureView=(e,n)=>{t.colorTextureViews[e]!==n&&(t.colorTextureViews[e]=n)},e.activateBindGroup=e=>{const n=t.boundPipeline.getDevice(),r=t.boundPipeline.getBindGroupLayoutCount(e.getLabel());t.handle.setBindGroup(r,e.getBindGroup(n));const o=n.getBindGroupLayoutDescription(e.getBindGroupLayout(n)),a=n.getBindGroupLayoutDescription(t.boundPipeline.getBindGroupLayout(r));o!==a&&(console.log("renderEncoder ".concat(t.pipelineHash," mismatched bind group layouts bind group has\n").concat(o,"\n versus pipeline\n").concat(a,"\n")),console.trace())},e.attachTextureViews=()=>{for(let e=0;e<t.colorTextureViews.length;e++)t.description.colorAttachments[e]?t.description.colorAttachments[e].view=t.colorTextureViews[e].getHandle():t.description.colorAttachments[e]={view:t.colorTextureViews[e].getHandle()};t.depthTextureView&&(t.description.depthStencilAttachment.view=t.depthTextureView.getHandle())},e.registerDrawCallback=(e,n)=>{for(let r=0;r<t.drawCallbacks.length;r++)if(t.drawCallbacks[r].pipeline===e)return void t.drawCallbacks[r].callbacks.push(n);t.drawCallbacks.push({pipeline:e,callbacks:[n]})};for(let n=0;n<_y.length;n++)e[_y[n]]=function(){return t.handle[_y[n]](...arguments)}}(e,t)}var Sy={newInstance:Qt(xy,"vtkWebGPURenderEncoder"),extend:xy};const wy={renderEncoder:null,colorTexture:null,depthTexture:null};function Cy(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,wy,n),gv.extend(e,t,n),dn.get(e,t,["colorTexture","depthTexture"]),function(e,t){t.classHierarchy.push("vtkWebGPUOpaquePass"),e.traverse=(n,r)=>{if(t.deleted)return;t._currentParent=r;const o=r.getDevice();if(t.renderEncoder)t.colorTexture.resize(r.getCanvas().width,r.getCanvas().height),t.depthTexture.resize(r.getCanvas().width,r.getCanvas().height);else{e.createRenderEncoder(),t.colorTexture=eg.newInstance({label:"opaquePassColor"}),t.colorTexture.create(o,{width:r.getCanvas().width,height:r.getCanvas().height,format:"rgba16float",usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_SRC});const n=t.colorTexture.createView("opaquePassColorTexture");t.renderEncoder.setColorTextureView(0,n),t.depthFormat="depth32float",t.depthTexture=eg.newInstance({label:"opaquePassDepth"}),t.depthTexture.create(o,{width:r.getCanvas().width,height:r.getCanvas().height,format:t.depthFormat,usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_SRC});const a=t.depthTexture.createView("opaquePassDepthTexture");t.renderEncoder.setDepthTextureView(a)}t.renderEncoder.attachTextureViews(),e.setCurrentOperation("opaquePass"),n.setRenderEncoder(t.renderEncoder),n.traverse(e)},e.getColorTextureView=()=>t.renderEncoder.getColorTextureViews()[0],e.getDepthTextureView=()=>t.renderEncoder.getDepthTextureView(),e.createRenderEncoder=()=>{t.renderEncoder=Sy.newInstance({label:"OpaquePass"}),t.renderEncoder.setPipelineHash("op")}}(e,t)}var Py={newInstance:dn.newInstance(Cy,"vtkWebGPUOpaquePass"),extend:Cy};const Ay={colorTextureView:null,depthTextureView:null};function Ey(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Ay,n),gv.extend(e,t,n),dn.setGet(e,t,["colorTextureView","depthTextureView"]),function(e,t){t.classHierarchy.push("vtkWebGPUOrderIndependentTranslucentPass"),e.traverse=(n,r)=>{if(t.deleted)return;t._currentParent=r;const o=r.getDevice();if(t.translucentRenderEncoder)t.translucentColorTexture.resizeToMatch(t.colorTextureView.getTexture()),t.translucentAccumulateTexture.resizeToMatch(t.colorTextureView.getTexture());else{e.createRenderEncoder(),e.createFinalEncoder(),t.translucentColorTexture=eg.newInstance({label:"translucentPassColor"}),t.translucentColorTexture.create(o,{width:r.getCanvas().width,height:r.getCanvas().height,format:"rgba16float",usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.TEXTURE_BINDING});const n=t.translucentColorTexture.createView("oitpColorTexture");t.translucentRenderEncoder.setColorTextureView(0,n),t.translucentAccumulateTexture=eg.newInstance({label:"translucentPassAccumulate"}),t.translucentAccumulateTexture.create(o,{width:r.getCanvas().width,height:r.getCanvas().height,format:"r16float",usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.TEXTURE_BINDING});const a=t.translucentAccumulateTexture.createView("oitpAccumTexture");t.translucentRenderEncoder.setColorTextureView(1,a),t.fullScreenQuad=gh.newInstance(),t.fullScreenQuad.setDevice(r.getDevice()),t.fullScreenQuad.setPipelineHash("oitpfsq"),t.fullScreenQuad.setTextureViews(t.translucentRenderEncoder.getColorTextureViews()),t.fullScreenQuad.setFragmentShaderTemplate("\n//VTK::Mapper::Dec\n\n//VTK::TCoord::Dec\n\n//VTK::RenderEncoder::Dec\n\n//VTK::IOStructs::Dec\n\n@fragment\nfn main(\n//VTK::IOStructs::Input\n)\n//VTK::IOStructs::Output\n{\n  var output: fragmentOutput;\n\n  var tcoord: vec2<i32> = vec2<i32>(i32(input.fragPos.x), i32(input.fragPos.y));\n  var reveal: f32 = textureLoad(oitpAccumTexture, tcoord, 0).r;\n  if (reveal == 1.0) { discard; }\n  var tcolor: vec4<f32> = textureLoad(oitpColorTexture, tcoord, 0);\n  var total: f32 = max(tcolor.a, 0.01);\n  var computedColor: vec4<f32> = vec4<f32>(tcolor.r/total, tcolor.g/total, tcolor.b/total, 1.0 - reveal);\n\n  //VTK::RenderEncoder::Impl\n  return output;\n}\n")}t.translucentRenderEncoder.setDepthTextureView(t.depthTextureView),t.translucentRenderEncoder.attachTextureViews(),e.setCurrentOperation("translucentPass"),n.setRenderEncoder(t.translucentRenderEncoder),n.traverse(e),e.finalPass(r,n)},e.finalPass=(e,n)=>{t.translucentFinalEncoder.setColorTextureView(0,t.colorTextureView),t.translucentFinalEncoder.attachTextureViews(),t.translucentFinalEncoder.begin(e.getCommandEncoder()),n.scissorAndViewport(t.translucentFinalEncoder),t.fullScreenQuad.prepareAndDraw(t.translucentFinalEncoder),t.translucentFinalEncoder.end()},e.getTextures=()=>[t.translucentColorTexture,t.translucentAccumulateTexture],e.createRenderEncoder=()=>{t.translucentRenderEncoder=Sy.newInstance({label:"translucentRender"});const e=t.translucentRenderEncoder.getDescription();e.colorAttachments=[{view:void 0,clearValue:[0,0,0,0],loadOp:"clear",storeOp:"store"},{view:void 0,clearValue:[1,0,0,0],loadOp:"clear",storeOp:"store"}],e.depthStencilAttachment={view:void 0,depthLoadOp:"load",depthStoreOp:"store"},t.translucentRenderEncoder.setReplaceShaderCodeFunction(e=>{const t=e.getShaderDescription("fragment");t.addOutput("vec4<f32>","outColor"),t.addOutput("f32","outAccum"),t.addBuiltinInput("vec4<f32>","@builtin(position) fragPos");let n=t.getCode();n=$p.substitute(n,"//VTK::RenderEncoder::Impl",["var w: f32 = computedColor.a * pow(0.1 + input.fragPos.z, 2.0);","output.outColor = vec4<f32>(computedColor.rgb*w, w);","output.outAccum = computedColor.a;"]).result,t.setCode(n)}),t.translucentRenderEncoder.setPipelineHash("oitpr"),t.translucentRenderEncoder.setPipelineSettings({primitive:{cullMode:"none"},depthStencil:{depthWriteEnabled:!1,depthCompare:"greater",format:"depth32float"},fragment:{targets:[{format:"rgba16float",blend:{color:{srcFactor:"one",dstFactor:"one"},alpha:{srcFactor:"one",dstFactor:"one"}}},{format:"r16float",blend:{color:{srcFactor:"zero",dstFactor:"one-minus-src"},alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha"}}}]}})},e.createFinalEncoder=()=>{t.translucentFinalEncoder=Sy.newInstance({label:"translucentFinal"}),t.translucentFinalEncoder.setDescription({colorAttachments:[{view:null,loadOp:"load",storeOp:"store"}]}),t.translucentFinalEncoder.setReplaceShaderCodeFunction(e=>{const t=e.getShaderDescription("fragment");t.addOutput("vec4<f32>","outColor"),t.addBuiltinInput("vec4<f32>","@builtin(position) fragPos");let n=t.getCode();n=$p.substitute(n,"//VTK::RenderEncoder::Impl",["output.outColor = vec4<f32>(computedColor.rgb, computedColor.a);"]).result,t.setCode(n)}),t.translucentFinalEncoder.setPipelineHash("oitpf"),t.translucentFinalEncoder.setPipelineSettings({primitive:{cullMode:"none"},fragment:{targets:[{format:"rgba16float",blend:{color:{srcFactor:"src-alpha",dstFactor:"one-minus-src-alpha"},alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha"}}}]}})}}(e,t)}var Iy={newInstance:dn.newInstance(Ey,"vtkWebGPUOrderIndependentTranslucentPass"),extend:Ey};const Oy={COMPOSITE_BLEND:0,MAXIMUM_INTENSITY_BLEND:1,MINIMUM_INTENSITY_BLEND:2,AVERAGE_INTENSITY_BLEND:3,ADDITIVE_INTENSITY_BLEND:4,RADON_TRANSFORM_BLEND:5,LABELMAP_EDGE_PROJECTION_BLEND:6};const My=new Float64Array(16),Ry=new Float64Array(16);const Ly={volumes:null,rowLength:1024,lastVolumeLength:0};function ky(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Ly,n),gh.extend(e,t,n),t.fragmentShaderTemplate="\n//VTK::Renderer::Dec\n\n//VTK::Mapper::Dec\n\n//VTK::TCoord::Dec\n\n//VTK::Volume::TraverseDec\n\n//VTK::RenderEncoder::Dec\n\n//VTK::IOStructs::Dec\n\nfn getTextureValue(vTex: texture_3d<f32>, tpos: vec4<f32>) -> f32\n{\n  // todo multicomponent support\n  return textureSampleLevel(vTex, clampSampler, tpos.xyz, 0.0).r;\n}\n\nfn getGradient(vTex: texture_3d<f32>, tpos: vec4<f32>, vNum: i32, scalar: f32) -> vec4<f32>\n{\n  var result: vec4<f32>;\n\n  var tstep: vec4<f32> = volumeSSBO.values[vNum].tstep;\n  result.x = getTextureValue(vTex, tpos + vec4<f32>(tstep.x, 0.0, 0.0, 1.0)) - scalar;\n  result.y = getTextureValue(vTex, tpos + vec4<f32>(0.0, tstep.y, 0.0, 1.0)) - scalar;\n  result.z = getTextureValue(vTex, tpos + vec4<f32>(0.0, 0.0, tstep.z, 1.0)) - scalar;\n  result.w = 0.0;\n\n  // divide by spacing as that is our delta\n  result = result / volumeSSBO.values[vNum].spacing;\n  // now we have a gradient in unit tcoords\n\n  var grad: f32 = length(result.xyz);\n  if (grad > 0.0)\n  {\n    // rotate to View Coords, needed for lighting and shading\n    var nMat: mat4x4<f32> = rendererUBO.SCVCMatrix * volumeSSBO.values[vNum].planeNormals;\n    result = nMat * result;\n    result = result / length(result);\n  }\n\n  // store gradient magnitude in .w\n  result.w = grad;\n\n  return result;\n}\n\nfn processVolume(vTex: texture_3d<f32>, vNum: i32, cNum: i32, posSC: vec4<f32>, tfunRows: f32) -> vec4<f32>\n{\n  var outColor: vec4<f32> = vec4<f32>(0.0, 0.0, 0.0, 0.0);\n\n  // convert to tcoords and reject if outside the volume\n  var tpos: vec4<f32> = volumeSSBO.values[vNum].SCTCMatrix*posSC;\n  if (tpos.x < 0.0 || tpos.y < 0.0 || tpos.z < 0.0 ||\n      tpos.x > 1.0 || tpos.y > 1.0 || tpos.z > 1.0) { return outColor; }\n\n  var scalar: f32 = getTextureValue(vTex, tpos);\n\n  var coord: vec2<f32> =\n    vec2<f32>(scalar * componentSSBO.values[cNum].cScale + componentSSBO.values[cNum].cShift,\n      (0.5 + 2.0 * f32(vNum)) / tfunRows);\n  var color: vec4<f32> = textureSampleLevel(tfunTexture, clampSampler, coord, 0.0);\n\n  var gofactor: f32 = 1.0;\n  var normal: vec4<f32> = vec4<f32>(0.0,0.0,0.0,0.0);\n  if (componentSSBO.values[cNum].gomin <  1.0 || volumeSSBO.values[vNum].shade[0] > 0.0)\n  {\n    normal = getGradient(vTex, tpos, vNum, scalar);\n    if (componentSSBO.values[cNum].gomin <  1.0)\n    {\n      gofactor = clamp(normal.a*componentSSBO.values[cNum].goScale + componentSSBO.values[cNum].goShift,\n      componentSSBO.values[cNum].gomin, componentSSBO.values[cNum].gomax);\n    }\n  }\n\n  coord.x = (scalar * componentSSBO.values[cNum].oScale + componentSSBO.values[cNum].oShift);\n  var opacity: f32 = textureSampleLevel(ofunTexture, clampSampler, coord, 0.0).r;\n\n  if (volumeSSBO.values[vNum].shade[0] > 0.0)\n  {\n    color = color*abs(normal.z);\n  }\n\n  outColor = vec4<f32>(color.rgb, gofactor * opacity);\n\n  return outColor;\n}\n\n// adjust the start and end point of a raycast such that it intersects the unit cube.\n// This function is used to take a raycast starting point and step vector\n// and numSteps and return the startijng and ending steps for intersecting the\n// unit cube. Recall for a 3D texture, the unit cube is the range of texture coordsinates\n// that have valid values. So this funtion can be used to take a ray in texture coordinates\n// and bound it to intersecting the texture.\n//\nfn adjustBounds(tpos: vec4<f32>, tstep: vec4<f32>, numSteps: f32) -> vec2<f32>\n{\n  var result: vec2<f32> = vec2<f32>(0.0, numSteps);\n  var tpos2: vec4<f32> = tpos + tstep*numSteps;\n\n  // move tpos to the start of the volume\n  var adjust: f32 =\n    min(\n      max(tpos.x/tstep.x, (tpos.x - 1.0)/tstep.x),\n      min(\n        max((tpos.y - 1.0)/tstep.y, tpos.y/tstep.y),\n        max((tpos.z - 1.0)/tstep.z, tpos.z/tstep.z)));\n  if (adjust < 0.0)\n  {\n    result.x = result.x - adjust;\n  }\n\n  // adjust length to the end\n  adjust =\n    max(\n      min(tpos2.x/tstep.x, (tpos2.x - 1.0)/tstep.x),\n      max(\n        min((tpos2.y - 1.0)/tstep.y, tpos2.y/tstep.y),\n        min((tpos2.z - 1.0)/tstep.z, tpos2.z/tstep.z)));\n  if (adjust > 0.0)\n  {\n    result.y = result.y - adjust;\n  }\n\n  return result;\n}\n\nfn getSimpleColor(scalar: f32, vNum: i32, cNum: i32) -> vec4<f32>\n{\n  // how many rows (tfuns) do we have in our tfunTexture\n  var tfunRows: f32 = f32(textureDimensions(tfunTexture).y);\n\n  var coord: vec2<f32> =\n    vec2<f32>(scalar * componentSSBO.values[cNum].cScale + componentSSBO.values[cNum].cShift,\n      (0.5 + 2.0 * f32(vNum)) / tfunRows);\n  var color: vec4<f32> = textureSampleLevel(tfunTexture, clampSampler, coord, 0.0);\n  coord.x = (scalar * componentSSBO.values[cNum].oScale + componentSSBO.values[cNum].oShift);\n  var opacity: f32 = textureSampleLevel(ofunTexture, clampSampler, coord, 0.0).r;\n  return vec4<f32>(color.rgb, opacity);\n}\n\nfn traverseMax(vTex: texture_3d<f32>, vNum: i32, cNum: i32, rayLengthSC: f32, minPosSC: vec4<f32>, rayStepSC: vec4<f32>)\n{\n  // convert to tcoords and reject if outside the volume\n  var numSteps: f32 = rayLengthSC/mapperUBO.SampleDistance;\n  var tpos: vec4<f32> = volumeSSBO.values[vNum].SCTCMatrix*minPosSC;\n  var tpos2: vec4<f32> = volumeSSBO.values[vNum].SCTCMatrix*(minPosSC + rayStepSC);\n  var tstep: vec4<f32> = tpos2 - tpos;\n\n  var rayBounds: vec2<f32> = adjustBounds(tpos, tstep, numSteps);\n\n  // did we hit anything\n  if (rayBounds.x >= rayBounds.y)\n  {\n    traverseVals[vNum] = vec4<f32>(0.0,0.0,0.0,0.0);\n    return;\n  }\n\n  tpos = tpos + tstep*rayBounds.x;\n  var curDist: f32 = rayBounds.x;\n  var maxVal: f32 = -1.0e37;\n  loop\n  {\n    var scalar: f32 = getTextureValue(vTex, tpos);\n    if (scalar > maxVal)\n    {\n      maxVal = scalar;\n    }\n\n    // increment position\n    curDist = curDist + 1.0;\n    tpos = tpos + tstep;\n\n    // check if we have reached a terminating condition\n    if (curDist > rayBounds.y) { break; }\n  }\n\n  // process to get the color and opacity\n  traverseVals[vNum] = getSimpleColor(maxVal, vNum, cNum);\n}\n\nfn traverseMin(vTex: texture_3d<f32>, vNum: i32, cNum: i32, rayLengthSC: f32, minPosSC: vec4<f32>, rayStepSC: vec4<f32>)\n{\n  // convert to tcoords and reject if outside the volume\n  var numSteps: f32 = rayLengthSC/mapperUBO.SampleDistance;\n  var tpos: vec4<f32> = volumeSSBO.values[vNum].SCTCMatrix*minPosSC;\n  var tpos2: vec4<f32> = volumeSSBO.values[vNum].SCTCMatrix*(minPosSC + rayStepSC);\n  var tstep: vec4<f32> = tpos2 - tpos;\n\n  var rayBounds: vec2<f32> = adjustBounds(tpos, tstep, numSteps);\n\n  // did we hit anything\n  if (rayBounds.x >= rayBounds.y)\n  {\n    traverseVals[vNum] = vec4<f32>(0.0,0.0,0.0,0.0);\n    return;\n  }\n\n  tpos = tpos + tstep*rayBounds.x;\n  var curDist: f32 = rayBounds.x;\n  var minVal: f32 = 1.0e37;\n  loop\n  {\n    var scalar: f32 = getTextureValue(vTex, tpos);\n    if (scalar < minVal)\n    {\n      minVal = scalar;\n    }\n\n    // increment position\n    curDist = curDist + 1.0;\n    tpos = tpos + tstep;\n\n    // check if we have reached a terminating condition\n    if (curDist > rayBounds.y) { break; }\n  }\n\n  // process to get the color and opacity\n  traverseVals[vNum] = getSimpleColor(minVal, vNum, cNum);\n}\n\nfn traverseAverage(vTex: texture_3d<f32>, vNum: i32, cNum: i32, rayLengthSC: f32, minPosSC: vec4<f32>, rayStepSC: vec4<f32>)\n{\n  // convert to tcoords and reject if outside the volume\n  var numSteps: f32 = rayLengthSC/mapperUBO.SampleDistance;\n  var tpos: vec4<f32> = volumeSSBO.values[vNum].SCTCMatrix*minPosSC;\n  var tpos2: vec4<f32> = volumeSSBO.values[vNum].SCTCMatrix*(minPosSC + rayStepSC);\n  var tstep: vec4<f32> = tpos2 - tpos;\n\n  var rayBounds: vec2<f32> = adjustBounds(tpos, tstep, numSteps);\n\n  // did we hit anything\n  if (rayBounds.x >= rayBounds.y)\n  {\n    traverseVals[vNum] = vec4<f32>(0.0,0.0,0.0,0.0);\n    return;\n  }\n\n  let ipRange: vec4<f32> = volumeSSBO.values[vNum].ipScalarRange;\n  tpos = tpos + tstep*rayBounds.x;\n  var curDist: f32 = rayBounds.x;\n  var avgVal: f32 = 0.0;\n  var sampleCount: f32 = 0.0;\n  loop\n  {\n    var sample: f32 = getTextureValue(vTex, tpos);\n    // right now leave filtering off until WebGL changes get merged\n    // if (ipRange.z == 0.0 || sample >= ipRange.x && sample <= ipRange.y)\n    // {\n      avgVal = avgVal + sample;\n      sampleCount = sampleCount + 1.0;\n    // }\n\n    // increment position\n    curDist = curDist + 1.0;\n    tpos = tpos + tstep;\n\n    // check if we have reached a terminating condition\n    if (curDist > rayBounds.y) { break; }\n  }\n\n  if (sampleCount <= 0.0)\n  {\n    traverseVals[vNum] = vec4<f32>(0.0,0.0,0.0,0.0);\n  }\n\n  // process to get the color and opacity\n  traverseVals[vNum] = getSimpleColor(avgVal/sampleCount, vNum, cNum);\n}\n\nfn traverseAdditive(vTex: texture_3d<f32>, vNum: i32, cNum: i32, rayLengthSC: f32, minPosSC: vec4<f32>, rayStepSC: vec4<f32>)\n{\n  // convert to tcoords and reject if outside the volume\n  var numSteps: f32 = rayLengthSC/mapperUBO.SampleDistance;\n  var tpos: vec4<f32> = volumeSSBO.values[vNum].SCTCMatrix*minPosSC;\n  var tpos2: vec4<f32> = volumeSSBO.values[vNum].SCTCMatrix*(minPosSC + rayStepSC);\n  var tstep: vec4<f32> = tpos2 - tpos;\n\n  var rayBounds: vec2<f32> = adjustBounds(tpos, tstep, numSteps);\n\n  // did we hit anything\n  if (rayBounds.x >= rayBounds.y)\n  {\n    traverseVals[vNum] = vec4<f32>(0.0,0.0,0.0,0.0);\n    return;\n  }\n\n  let ipRange: vec4<f32> = volumeSSBO.values[vNum].ipScalarRange;\n  tpos = tpos + tstep*rayBounds.x;\n  var curDist: f32 = rayBounds.x;\n  var sumVal: f32 = 0.0;\n  loop\n  {\n    var sample: f32 = getTextureValue(vTex, tpos);\n    // right now leave filtering off until WebGL changes get merged\n    // if (ipRange.z == 0.0 || sample >= ipRange.x && sample <= ipRange.y)\n    // {\n      sumVal = sumVal + sample;\n    // }\n\n    // increment position\n    curDist = curDist + 1.0;\n    tpos = tpos + tstep;\n\n    // check if we have reached a terminating condition\n    if (curDist > rayBounds.y) { break; }\n  }\n\n  // process to get the color and opacity\n  traverseVals[vNum] = getSimpleColor(sumVal, vNum, cNum);\n}\n\nfn composite(rayLengthSC: f32, minPosSC: vec4<f32>, rayStepSC: vec4<f32>) -> vec4<f32>\n{\n  // initial ray position is at the beginning\n  var rayPosSC: vec4<f32> = minPosSC;\n\n  // how many rows (tfuns) do we have in our tfunTexture\n  var tfunRows: f32 = f32(textureDimensions(tfunTexture).y);\n\n  var curDist: f32 = 0.0;\n  var computedColor: vec4<f32> = vec4<f32>(0.0, 0.0, 0.0, 0.0);\n  var sampleColor: vec4<f32>;\n//VTK::Volume::TraverseCalls\n\n  loop\n  {\n    // for each volume, sample and accumulate color\n//VTK::Volume::CompositeCalls\n\n    // increment position\n    curDist = curDist + mapperUBO.SampleDistance;\n    rayPosSC = rayPosSC + rayStepSC;\n\n    // check if we have reached a terminating condition\n    if (curDist > rayLengthSC) { break; }\n    if (computedColor.a > 0.98) { break; }\n  }\n  return computedColor;\n}\n\n@fragment\nfn main(\n//VTK::IOStructs::Input\n)\n//VTK::IOStructs::Output\n{\n  var output: fragmentOutput;\n\n  var rayMax: f32 = textureSampleLevel(maxTexture, clampSampler, input.tcoordVS, 0.0).r;\n  var rayMin: f32 = textureSampleLevel(minTexture, clampSampler, input.tcoordVS, 0.0).r;\n\n  // discard empty rays\n  if (rayMax <= rayMin) { discard; }\n  else\n  {\n    // compute start and end ray positions in view coordinates\n    var minPosSC: vec4<f32> = rendererUBO.PCSCMatrix*vec4<f32>(2.0 * input.tcoordVS.x - 1.0, 1.0 - 2.0 * input.tcoordVS.y, rayMax, 1.0);\n    minPosSC = minPosSC * (1.0 / minPosSC.w);\n    var maxPosSC: vec4<f32> = rendererUBO.PCSCMatrix*vec4<f32>(2.0 * input.tcoordVS.x - 1.0, 1.0 - 2.0 * input.tcoordVS.y, rayMin, 1.0);\n    maxPosSC = maxPosSC * (1.0 / maxPosSC.w);\n\n    var rayLengthSC: f32 = distance(minPosSC.xyz, maxPosSC.xyz);\n    var rayStepSC: vec4<f32> = (maxPosSC - minPosSC)*(mapperUBO.SampleDistance/rayLengthSC);\n    rayStepSC.w = 0.0;\n\n    var computedColor: vec4<f32>;\n\n//VTK::Volume::Loop\n\n//VTK::RenderEncoder::Impl\n  }\n\n  return output;\n}\n",t.UBO=nm.newInstance({label:"mapperUBO"}),t.UBO.addEntry("SampleDistance","f32"),t.SSBO=Qh.newInstance({label:"volumeSSBO"}),t.componentSSBO=Qh.newInstance({label:"componentSSBO"}),t.lutBuildTime={},dn.obj(t.lutBuildTime,{mtime:0}),function(e,t){t.classHierarchy.push("vtkWebGPUVolumePassFSQ"),e.replaceShaderPosition=(e,t,n)=>{const r=t.getShaderDescription("vertex");r.addBuiltinOutput("vec4<f32>","@builtin(position) Position");let o=r.getCode();o=$p.substitute(o,"//VTK::Position::Impl",["output.tcoordVS = vec2<f32>(vertexBC.x * 0.5 + 0.5, 1.0 - vertexBC.y * 0.5 - 0.5);","output.Position = vec4<f32>(vertexBC, 1.0);"]).result,r.setCode(o),t.getShaderDescription("fragment").addBuiltinInput("vec4<f32>","@builtin(position) fragPos")},t.shaderReplacements.set("replaceShaderPosition",e.replaceShaderPosition),e.replaceShaderVolume=(e,n,r)=>{const o=n.getShaderDescription("fragment");let a=o.getCode();const i=[],s=[];for(let u=0;u<t.volumes.length;u++)t.volumes[u].getRenderable().getMapper().getBlendMode()===Oy.COMPOSITE_BLEND?(i.push("    sampleColor = processVolume(volTexture".concat(u,", ").concat(u,", ").concat(t.rowStarts[u],", rayPosSC, tfunRows);")),i.push("    computedColor = vec4<f32>(\n          sampleColor.a * sampleColor.rgb * (1.0 - computedColor.a) + computedColor.rgb,\n          (1.0 - computedColor.a)*sampleColor.a + computedColor.a);")):(s.push("  sampleColor = traverseVals[".concat(u,"];")),s.push("  computedColor = vec4<f32>(\n          sampleColor.a * sampleColor.rgb * (1.0 - computedColor.a) + computedColor.rgb,\n          (1.0 - computedColor.a)*sampleColor.a + computedColor.a);"));a=$p.substitute(a,"//VTK::Volume::CompositeCalls",i).result,a=$p.substitute(a,"//VTK::Volume::TraverseCalls",s).result,a=$p.substitute(a,"//VTK::Volume::TraverseDec",["var<private> traverseVals: array<vec4<f32>,".concat(t.volumes.length,">;")]).result;let l=!1;for(let u=0;u<t.volumes.length;u++){const e=t.volumes[u].getRenderable().getMapper().getBlendMode();e===Oy.COMPOSITE_BLEND?l=!0:e===Oy.MAXIMUM_INTENSITY_BLEND?a=$p.substitute(a,"//VTK::Volume::Loop",["    traverseMax(volTexture".concat(u,", ").concat(u,", ").concat(u,", rayLengthSC, minPosSC, rayStepSC);"),"    computedColor = traverseVals[".concat(u,"];"),"//VTK::Volume::Loop"]).result:e===Oy.MINIMUM_INTENSITY_BLEND?a=$p.substitute(a,"//VTK::Volume::Loop",["    traverseMin(volTexture".concat(u,", ").concat(u,", ").concat(u,", rayLengthSC, minPosSC, rayStepSC);"),"    computedColor = traverseVals[".concat(u,"];"),"//VTK::Volume::Loop"]).result:e===Oy.AVERAGE_INTENSITY_BLEND?a=$p.substitute(a,"//VTK::Volume::Loop",["    traverseAverage(volTexture".concat(u,", ").concat(u,", ").concat(u,", rayLengthSC, minPosSC, rayStepSC);"),"    computedColor = traverseVals[".concat(u,"];"),"//VTK::Volume::Loop"]).result:e===Oy.ADDITIVE_INTENSITY_BLEND&&(a=$p.substitute(a,"//VTK::Volume::Loop",["    traverseAdditive(volTexture".concat(u,", ").concat(u,", ").concat(u,", rayLengthSC, minPosSC, rayStepSC);"),"    computedColor = traverseVals[".concat(u,"];"),"//VTK::Volume::Loop"]).result)}l&&(a=$p.substitute(a,"//VTK::Volume::Loop",["    computedColor = composite(rayLengthSC, minPosSC, rayStepSC);"]).result),o.setCode(a)},t.shaderReplacements.set("replaceShaderVolume",e.replaceShaderVolume),e.updateLUTImage=n=>{let r=e.getMTime();for(let e=0;e<t.volumes.length;e++){const n=t.volumes[e].getRenderable(),o=n.getMapper().getInputData();r=Math.max(r,n.getMTime(),o.getMTime())}if(r<t.lutBuildTime.getMTime())return;t.numRows=0,t.rowStarts=[];for(let e=0;e<t.volumes.length;e++){t.rowStarts.push(t.numRows);const n=t.volumes[e].getRenderable(),r=n.getMapper(),o=n.getProperty(),a=r.getInputData(),i=(a.getPointData()&&a.getPointData().getScalars()).getNumberOfComponents(),s=o.getIndependentComponents()?i:1;t.numRows+=s}const o=new Uint8ClampedArray(2*t.numRows*t.rowLength*4),a=new Float32Array(2*t.numRows*t.rowLength);let i=0;const s=new Float32Array(3*t.rowLength),l=t.rowLength;for(let e=0;e<t.volumes.length;e++){const n=t.volumes[e].getRenderable(),r=n.getMapper(),u=n.getProperty(),c=r.getInputData(),d=(c.getPointData()&&c.getPointData().getScalars()).getNumberOfComponents(),f=u.getIndependentComponents()?d:1;for(let e=0;e<f;++e){const n=u.getRGBTransferFunction(e),r=n.getRange();n.getTable(r[0],r[1],l,s,1);let c=i*l*4;for(let e=0;e<l;++e){o[c+4*e]=255*s[3*e],o[c+4*e+1]=255*s[3*e+1],o[c+4*e+2]=255*s[3*e+2],o[c+4*e+3]=255;for(let t=0;t<4;t++)o[c+4*(l+e)+t]=o[c+4*e+t]}const d=u.getScalarOpacity(e),f=t.sampleDist/u.getScalarOpacityUnitDistance(e),p=d.getRange();d.getTable(p[0],p[1],l,s,1),c=i*l;for(let e=0;e<l;++e)a[c+e]=1-(1-s[e])**f,a[c+e+l]=a[c+e];i+=2}}{const e={nativeArray:o,width:t.rowLength,height:2*t.numRows,depth:1,format:"rgba8unorm"},r=n.getTextureManager().getTexture(e).createView("tfunTexture");t.textureViews[2]=r}{const e={nativeArray:a,width:t.rowLength,height:2*t.numRows,depth:1,format:"r16float"},r=n.getTextureManager().getTexture(e).createView("ofunTexture");t.textureViews[3]=r}t.lutBuildTime.modified()},e.updateSSBO=n=>{let r=Math.max(e.getMTime(),t.WebGPURenderer.getStabilizedTime());for(let e=0;e<t.volumes.length;e++){const n=t.volumes[e].getRenderable(),o=n.getMapper(),a=o.getInputData();r=Math.max(r,n.getMTime(),a.getMTime(),o.getMTime())}if(r<t.SSBO.getSendTime())return;const o=t.WebGPURenderer.getStabilizedCenterByReference();t.SSBO.clearData(),t.SSBO.setNumberOfInstances(t.volumes.length);const a=new Float64Array(16*t.volumes.length),i=new Float64Array(16*t.volumes.length),s=new Float64Array(4*t.volumes.length),l=new Float64Array(4*t.volumes.length),u=new Float64Array(4*t.volumes.length),c=new Float64Array(4*t.volumes.length);for(let e=0;e<t.volumes.length;e++){const n=t.volumes[e].getRenderable(),r=n.getMapper().getInputData();B(My),G(My,My,o);const d=n.getMatrix();N(Ry,d),V(Ry,Ry),z(My,Ry,My);const f=r.getWorldToIndex();z(My,f,My);const p=r.getDimensions();B(Ry),W(Ry,Ry,[1/p[0],1/p[1],1/p[2]]),z(My,Ry,My);for(let t=0;t<16;t++)a[16*e+t]=My[t];V(My,My);for(let t=0;t<4;t++)i[16*e+4*t]=My[4*t],i[16*e+4*t+1]=My[4*t+1],i[16*e+4*t+2]=My[4*t+2],i[16*e+4*t+3]=0;s[4*e]=1/p[0],s[4*e+1]=1/p[1],s[4*e+2]=1/p[2],s[4*e+3]=1,l[4*e]=n.getProperty().getShade()?1:0;const h=r.getSpacing();u[4*e]=h[0],u[4*e+1]=h[1],u[4*e+2]=h[2],u[4*e+3]=1;const m=t.textureViews[e+4].getTexture().getScale(),g=n.getProperty().getIpScalarRange();c[4*e]=g[0]/m,c[4*e+1]=g[1]/m,c[4*e+2]=n.getProperty().getFilterMode()}t.SSBO.addEntry("SCTCMatrix","mat4x4<f32>"),t.SSBO.addEntry("planeNormals","mat4x4<f32>"),t.SSBO.addEntry("shade","vec4<f32>"),t.SSBO.addEntry("tstep","vec4<f32>"),t.SSBO.addEntry("spacing","vec4<f32>"),t.SSBO.addEntry("ipScalarRange","vec4<f32>"),t.SSBO.setAllInstancesFromArray("SCTCMatrix",a),t.SSBO.setAllInstancesFromArray("planeNormals",i),t.SSBO.setAllInstancesFromArray("shade",l),t.SSBO.setAllInstancesFromArray("tstep",s),t.SSBO.setAllInstancesFromArray("spacing",u),t.SSBO.setAllInstancesFromArray("ipScalarRange",c),t.SSBO.send(n),t.componentSSBO.clearData(),t.componentSSBO.setNumberOfInstances(t.numRows);const d=new Float64Array(t.numRows),f=new Float64Array(t.numRows),p=new Float64Array(t.numRows),h=new Float64Array(t.numRows),m=new Float64Array(t.numRows),g=new Float64Array(t.numRows),v=new Float64Array(t.numRows),y=new Float64Array(t.numRows);let b=0;for(let e=0;e<t.volumes.length;e++){const n=t.volumes[e].getRenderable(),r=n.getMapper(),o=n.getProperty(),a=r.getInputData(),i=(a.getPointData()&&a.getPointData().getScalars()).getNumberOfComponents(),s=o.getIndependentComponents(),l=t.textureViews[e+4].getTexture().getFormat(),u=ih.getDetailsFromTextureFormat(l),c={scale:[255],offset:[0]};2===u.elementSize&&"float"===u.sampleType&&(c.scale[0]=1);for(let e=0;e<i;e++){const t=s?e:0,n=c.scale[e],r=o.getScalarOpacity(t).getRange(),a=n/(r[1]-r[0]),i=(c.offset[e]-r[0])/(r[1]-r[0]);h[b]=i,p[b]=a;const l=o.getRGBTransferFunction(t).getRange();if(f[b]=(c.offset[e]-l[0])/(l[1]-l[0]),d[b]=n/(l[1]-l[0]),o.getUseGradientOpacity(t)){const e=o.getGradientOpacityMinimumOpacity(t),r=o.getGradientOpacityMaximumOpacity(t);m[b]=e,g[b]=r;const a=[o.getGradientOpacityMinimumValue(t),o.getGradientOpacityMaximumValue(t)];y[b]=n*(r-e)/(a[1]-a[0]),v[b]=-a[0]*(r-e)/(a[1]-a[0])+e}else m[b]=1,g[b]=1,y[b]=0,v[b]=1;b++}}t.componentSSBO.addEntry("cScale","f32"),t.componentSSBO.addEntry("cShift","f32"),t.componentSSBO.addEntry("oScale","f32"),t.componentSSBO.addEntry("oShift","f32"),t.componentSSBO.addEntry("goShift","f32"),t.componentSSBO.addEntry("goScale","f32"),t.componentSSBO.addEntry("gomin","f32"),t.componentSSBO.addEntry("gomax","f32"),t.componentSSBO.setAllInstancesFromArray("cScale",d),t.componentSSBO.setAllInstancesFromArray("cShift",f),t.componentSSBO.setAllInstancesFromArray("oScale",p),t.componentSSBO.setAllInstancesFromArray("oShift",h),t.componentSSBO.setAllInstancesFromArray("goScale",y),t.componentSSBO.setAllInstancesFromArray("goShift",v),t.componentSSBO.setAllInstancesFromArray("gomin",m),t.componentSSBO.setAllInstancesFromArray("gomax",g),t.componentSSBO.send(n)};const n=e.updateBuffers;e.updateBuffers=()=>{n();let r=t.volumes[0].getRenderable().getMapper().getSampleDistance();for(let e=0;e<t.volumes.length;e++){const n=t.volumes[e].getRenderable().getMapper().getSampleDistance();n<r&&(r=n)}t.sampleDist!==r&&(t.sampleDist=r,t.UBO.setValue("SampleDistance",r),t.UBO.sendIfNeeded(t.device));for(let e=0;e<t.volumes.length;e++){const n=t.volumes[e].getRenderable().getMapper().getInputData(),r=t.device.getTextureManager().getTextureForImageData(n);if(!t.textureViews[e+4]||t.textureViews[e+4].getTexture()!==r){const n=r.createView("volTexture".concat(e));t.textureViews[e+4]=n}}if(t.volumes.length<t.lastVolumeLength)for(let e=t.volumes.length;e<t.lastVolumeLength;e++)t.textureViews.pop();t.lastVolumeLength=t.volumes.length,e.updateLUTImage(t.device),e.updateSSBO(t.device),t.clampSampler||(t.clampSampler=qm.newInstance({label:"clampSampler"}),t.clampSampler.create(t.device,{minFilter:"linear",magFilter:"linear"}))},e.computePipelineHash=()=>{t.pipelineHash="volfsq";for(let e=0;e<t.volumes.length;e++){const n=t.volumes[e].getRenderable().getMapper().getBlendMode();t.pipelineHash+="".concat(n)}},e.setVolumes=n=>{if(!t.volumes||t.volumes.length!==n.length)return t.volumes=[...n],void e.modified();for(let r=0;r<n.length;r++)if(n[r]!==t.volumes[r])return t.volumes=[...n],void e.modified()};const r=e.getBindables;e.getBindables=()=>{const e=r();return e.push(t.componentSSBO),e.push(t.clampSampler),e}}(e,t)}var Dy={newInstance:dn.newInstance(ky,"vtkWebGPUVolumePassFSQ"),extend:ky};const{Representation:By}=Al,{BufferUsage:Ny,PrimitiveTypes:Vy}=Kh,Fy=[[0,4,6],[0,6,2],[1,3,7],[1,7,5],[0,5,4],[0,1,5],[2,6,7],[2,7,3],[0,3,1],[0,2,3],[4,5,7],[4,7,6]];const Uy={colorTextureView:null,depthTextureView:null,volumes:null};function zy(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Uy,n),gv.extend(e,t,n),t._mapper=ph.newInstance(),t._mapper.setFragmentShaderTemplate("\n//VTK::Renderer::Dec\n\n//VTK::Select::Dec\n\n//VTK::VolumePass::Dec\n\n//VTK::TCoord::Dec\n\n//VTK::RenderEncoder::Dec\n\n//VTK::Mapper::Dec\n\n//VTK::IOStructs::Dec\n\n@fragment\nfn main(\n//VTK::IOStructs::Input\n)\n//VTK::IOStructs::Output\n{\n  var output : fragmentOutput;\n\n  //VTK::Select::Impl\n\n  //VTK::TCoord::Impl\n\n  //VTK::VolumePass::Impl\n\n  // use the maximum (closest) of the current value and the zbuffer\n  // the blend func will then take the min to find the farthest stop value\n  var stopval: f32 = max(input.fragPos.z, textureLoad(opaquePassDepthTexture, vec2<i32>(i32(input.fragPos.x), i32(input.fragPos.y)), 0));\n\n  //VTK::RenderEncoder::Impl\n  return output;\n}\n"),t._mapper.getShaderReplacements().set("replaceShaderVolumePass",(e,t,n)=>{t.getShaderDescription("fragment").addBuiltinInput("vec4<f32>","@builtin(position) fragPos")}),t._boundsPoly=Ad.newInstance(),t._lastMTimes=[],dn.setGet(e,t,["colorTextureView","depthTextureView"]),function(e,t){t.classHierarchy.push("vtkWebGPUVolumePass"),e.initialize=n=>{t._clearEncoder||e.createClearEncoder(n),t._mergeEncoder||e.createMergeEncoder(n),t._copyEncoder||e.createCopyEncoder(n),t._depthRangeEncoder||e.createDepthRangeEncoder(n),t.fullScreenQuad||(t.fullScreenQuad=Dy.newInstance(),t.fullScreenQuad.setDevice(n.getDevice()),t.fullScreenQuad.setTextureViews([...t._depthRangeEncoder.getColorTextureViews()])),t._volumeCopyQuad||(t._volumeCopyQuad=gh.newInstance(),t._volumeCopyQuad.setPipelineHash("volpassfsq"),t._volumeCopyQuad.setDevice(n.getDevice()),t._volumeCopyQuad.setFragmentShaderTemplate("\n//VTK::Renderer::Dec\n\n//VTK::Mapper::Dec\n\n//VTK::TCoord::Dec\n\n//VTK::RenderEncoder::Dec\n\n//VTK::IOStructs::Dec\n\n@fragment\nfn main(\n//VTK::IOStructs::Input\n)\n//VTK::IOStructs::Output\n{\n  var output: fragmentOutput;\n\n  var computedColor: vec4<f32> = textureSample(volumePassColorTexture,\n    volumePassColorTextureSampler, mapperUBO.tscale*input.tcoordVS);\n\n  //VTK::RenderEncoder::Impl\n  return output;\n}\n"),t._copyUBO=nm.newInstance({label:"mapperUBO"}),t._copyUBO.addEntry("tscale","vec2<f32>"),t._volumeCopyQuad.setUBO(t._copyUBO),t._volumeCopyQuad.setTextureViews([t._colorTextureView]))},e.traverse=(n,r)=>{if(t.deleted)return;t._currentParent=r,e.initialize(r),e.computeTiming(r),e.renderDepthBounds(n,r),t._firstGroup=!0;const o=r.getDevice(),a=o.getHandle().limits.maxSampledTexturesPerShaderStage-4;if(t.volumes.length>a){const o=n.getRenderable().getActiveCamera().getPosition(),i=[];for(let e=0;e<t.volumes.length;e++){const n=t.volumes[e].getRenderable().getBounds(),r=[.5*(n[1]+n[0]),.5*(n[3]+n[2]),.5*(n[5]+n[4])];i[e]=La(r,o)}const s=[...Array(t.volumes.length).keys()];s.sort((e,t)=>i[t]-i[e]);let l=[],u=s.length%a;for(let c=0;c<s.length;c++)l.push(t.volumes[s[c]]),l.length>=u&&(e.rayCastPass(r,n,l),l=[],u=a,t._firstGroup=!1)}else e.rayCastPass(r,n,t.volumes);if(t._volumeCopyQuad.setWebGPURenderer(n),t._useSmallViewport){const e=t._colorTextureView.getTexture().getWidth(),n=t._colorTextureView.getTexture().getHeight();t._copyUBO.setArray("tscale",[t._smallViewportWidth/e,t._smallViewportHeight/n])}else t._copyUBO.setArray("tscale",[1,1]);t._copyUBO.sendIfNeeded(o),t._copyEncoder.setColorTextureView(0,t.colorTextureView),t._copyEncoder.attachTextureViews(),t._copyEncoder.begin(r.getCommandEncoder()),n.scissorAndViewport(t._copyEncoder),t._volumeCopyQuad.prepareAndDraw(t._copyEncoder),t._copyEncoder.end()},e.delete=dn.chain(()=>{t._animationRateSubscription&&(t._animationRateSubscription.unsubscribe(),t._animationRateSubscription=null)},e.delete),e.computeTiming=e=>{const n=e.getRenderable().getInteractor();if(null==t._lastScale){const e=t.volumes[0].getRenderable().getMapper();t._lastScale=e.getInitialInteractionScale()||1}t._useSmallViewport=!1,n.isAnimating()&&t._lastScale>1.5&&(t._useSmallViewport=!0),t._colorTexture.resize(e.getCanvas().width,e.getCanvas().height),t._animationRateSubscription||(t._animationRateSubscription=n.onAnimationFrameRateUpdate(()=>{const e=t.volumes[0].getRenderable().getMapper();if(e.getAutoAdjustSampleDistances()){const e=n.getRecentAnimationFrameRate(),r=t._lastScale*n.getDesiredUpdateRate()/e;t._lastScale=r,t._lastScale>400&&(t._lastScale=400)}else t._lastScale=e.getImageSampleDistance()*e.getImageSampleDistance();t._lastScale<1.5&&(t._lastScale=1.5)}))},e.rayCastPass=(e,n,r)=>{const o=t._firstGroup?t._clearEncoder:t._mergeEncoder;o.attachTextureViews(),o.begin(e.getCommandEncoder());let a=t._colorTextureView.getTexture().getWidth(),i=t._colorTextureView.getTexture().getHeight();if(t._useSmallViewport){const n=e.getCanvas(),r=1/Math.sqrt(t._lastScale);t._smallViewportWidth=Math.ceil(r*n.width),t._smallViewportHeight=Math.ceil(r*n.height),a=t._smallViewportWidth,i=t._smallViewportHeight}o.getHandle().setViewport(0,0,a,i,0,1),o.getHandle().setScissorRect(0,0,a,i),t.fullScreenQuad.setWebGPURenderer(n),t.fullScreenQuad.setVolumes(r),t.fullScreenQuad.prepareAndDraw(o),o.end()},e.renderDepthBounds=(n,r)=>{e.updateDepthPolyData(n);const o=t._boundsPoly,a=o.getPoints(),i=o.getPolys();let s={hash:"vp".concat(i.getMTime()),usage:Ny.Index,cells:i,numberOfPoints:a.getNumberOfPoints(),primitiveType:Vy.Triangles,representation:By.SURFACE};const l=r.getDevice().getBufferManager().getBuffer(s);t._mapper.getVertexInput().setIndexBuffer(l),s={usage:Ny.PointArray,format:"float32x4",hash:"vp".concat(a.getMTime()).concat(i.getMTime()),dataArray:a,indexBuffer:l,packExtra:!0};const u=r.getDevice().getBufferManager().getBuffer(s);t._mapper.getVertexInput().addBuffer(u,["vertexBC"]),t._mapper.setNumberOfVertices(u.getSizeInBytes()/u.getStrideInBytes()),e.drawDepthRange(n,r)},e.updateDepthPolyData=e=>{let n=!1;for(let u=0;u<t.volumes.length;u++){const e=t.volumes[u].getMTime();t._lastMTimes[u]&&e===t._lastMTimes[u]||(n=!0,t._lastMTimes[u]=e)}const r=e.getStabilizedTime();if((t._lastMTimes.length<=t.volumes.length||r!==t._lastMTimes[t.volumes.length])&&(n=!0,t._lastMTimes[t.volumes.length]=r),!n)return;const o=e.getStabilizedCenterByReference(),a=8*t.volumes.length,i=new Float64Array(3*a),s=12*t.volumes.length,l=new Uint16Array(4*s);for(let u=0;u<t.volumes.length;u++){t.volumes[u].getBoundingCubePoints(i,24*u);let e=12*u*4;const n=8*u;for(let t=0;t<12;t++)l[e++]=3,l[e++]=n+Fy[t][0],l[e++]=n+Fy[t][1],l[e++]=n+Fy[t][2]}for(let t=0;t<i.length;t+=3)i[t]-=o[0],i[t+1]-=o[1],i[t+2]-=o[2];t._boundsPoly.getPoints().setData(i,3),t._boundsPoly.getPoints().modified(),t._boundsPoly.getPolys().setData(l,1),t._boundsPoly.getPolys().modified(),t._boundsPoly.modified()},e.drawDepthRange=(n,r)=>{t._depthRangeTexture.resizeToMatch(t.colorTextureView.getTexture()),t._depthRangeTexture2.resizeToMatch(t.colorTextureView.getTexture()),t._depthRangeEncoder.attachTextureViews(),e.setCurrentOperation("volumeDepthRangePass"),n.setRenderEncoder(t._depthRangeEncoder),n.volumeDepthRangePass(!0),t._mapper.setWebGPURenderer(n),t._mapper.prepareToDraw(t._depthRangeEncoder),t._mapper.registerDrawCallback(t._depthRangeEncoder),n.volumeDepthRangePass(!1)},e.createDepthRangeEncoder=e=>{const n=e.getDevice();t._depthRangeEncoder=Sy.newInstance({label:"VolumePass DepthRange"}),t._depthRangeEncoder.setPipelineHash("volr"),t._depthRangeEncoder.setReplaceShaderCodeFunction(e=>{const t=e.getShaderDescription("fragment");t.addOutput("vec4<f32>","outColor1"),t.addOutput("vec4<f32>","outColor2");let n=t.getCode();n=$p.substitute(n,"//VTK::RenderEncoder::Impl",["output.outColor1 = vec4<f32>(input.fragPos.z, 0.0, 0.0, 0.0);","output.outColor2 = vec4<f32>(stopval, 0.0, 0.0, 0.0);"]).result,t.setCode(n)}),t._depthRangeEncoder.setDescription({colorAttachments:[{view:null,clearValue:[0,0,0,0],loadOp:"clear",storeOp:"store"},{view:null,clearValue:[1,1,1,1],loadOp:"clear",storeOp:"store"}]}),t._depthRangeEncoder.setPipelineSettings({primitive:{cullMode:"none"},fragment:{targets:[{format:"r16float",blend:{color:{srcFactor:"one",dstFactor:"one",operation:"max"},alpha:{srcFactor:"one",dstFactor:"one",operation:"max"}}},{format:"r16float",blend:{color:{srcFactor:"one",dstFactor:"one",operation:"min"},alpha:{srcFactor:"one",dstFactor:"one",operation:"min"}}}]}}),t._depthRangeTexture=eg.newInstance({label:"volumePassMaxDepth"}),t._depthRangeTexture.create(n,{width:e.getCanvas().width,height:e.getCanvas().height,format:"r16float",usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.TEXTURE_BINDING});const r=t._depthRangeTexture.createView("maxTexture");t._depthRangeEncoder.setColorTextureView(0,r),t._depthRangeTexture2=eg.newInstance({label:"volumePassDepthMin"}),t._depthRangeTexture2.create(n,{width:e.getCanvas().width,height:e.getCanvas().height,format:"r16float",usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.TEXTURE_BINDING});const o=t._depthRangeTexture2.createView("minTexture");t._depthRangeEncoder.setColorTextureView(1,o),t._mapper.setDevice(e.getDevice()),t._mapper.setTextureViews([t.depthTextureView])},e.createClearEncoder=e=>{t._colorTexture=eg.newInstance({label:"volumePassColor"}),t._colorTexture.create(e.getDevice(),{width:e.getCanvas().width,height:e.getCanvas().height,format:"bgra8unorm",usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_SRC}),t._colorTextureView=t._colorTexture.createView("volumePassColorTexture"),t._colorTextureView.addSampler(e.getDevice(),{minFilter:"linear",magFilter:"linear"}),t._clearEncoder=Sy.newInstance({label:"VolumePass Clear"}),t._clearEncoder.setColorTextureView(0,t._colorTextureView),t._clearEncoder.setDescription({colorAttachments:[{view:null,clearValue:[0,0,0,0],loadOp:"clear",storeOp:"store"}]}),t._clearEncoder.setPipelineHash("volpf"),t._clearEncoder.setPipelineSettings({primitive:{cullMode:"none"},fragment:{targets:[{format:"bgra8unorm",blend:{color:{srcFactor:"src-alpha",dstFactor:"one-minus-src-alpha"},alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha"}}}]}})},e.createCopyEncoder=e=>{t._copyEncoder=Sy.newInstance({label:"volumePassCopy"}),t._copyEncoder.setDescription({colorAttachments:[{view:null,loadOp:"load",storeOp:"store"}]}),t._copyEncoder.setPipelineHash("volcopypf"),t._copyEncoder.setPipelineSettings({primitive:{cullMode:"none"},fragment:{targets:[{format:"rgba16float",blend:{color:{srcFactor:"one",dstFactor:"one-minus-src-alpha"},alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha"}}}]}})},e.createMergeEncoder=e=>{t._mergeEncoder=Sy.newInstance({label:"volumePassMerge"}),t._mergeEncoder.setColorTextureView(0,t._colorTextureView),t._mergeEncoder.setDescription({colorAttachments:[{view:null,loadOp:"load",storeOp:"store"}]}),t._mergeEncoder.setReplaceShaderCodeFunction(e=>{const t=e.getShaderDescription("fragment");t.addOutput("vec4<f32>","outColor");let n=t.getCode();n=$p.substitute(n,"//VTK::RenderEncoder::Impl",["output.outColor = vec4<f32>(computedColor.rgb, computedColor.a);"]).result,t.setCode(n)}),t._mergeEncoder.setPipelineHash("volpf"),t._mergeEncoder.setPipelineSettings({primitive:{cullMode:"none"},fragment:{targets:[{format:"bgra8unorm",blend:{color:{srcFactor:"src-alpha",dstFactor:"one-minus-src-alpha"},alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha"}}}]}})},e.setVolumes=n=>{if(!t.volumes||t.volumes.length!==n.length)return t.volumes=[...n],void e.modified();for(let r=0;r<n.length;r++)if(n[r]!==t.volumes[r])return t.volumes=[...n],void e.modified()}}(e,t)}var Gy={newInstance:dn.newInstance(zy,"vtkWebGPUVolumePass"),extend:zy};const Wy={opaqueActorCount:0,translucentActorCount:0,volumes:null,opaqueRenderEncoder:null,translucentPass:null,volumePass:null};function Hy(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Wy,n),gv.extend(e,t,n),dn.setGet(e,t,["opaquePass","translucentPass","volumePass"]),function(e,t){t.classHierarchy.push("vtkForwardPass"),e.traverse=function(n){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(t.deleted)return;t._currentParent=r,e.setCurrentOperation("buildPass"),n.traverse(e),t.opaquePass||(t.opaquePass=Py.newInstance());const o=n.getRenderable().getNumberOfLayers(),a=n.getChildren();for(let i=0;i<o;i++)for(let r=0;r<a.length;r++){const o=a[r],s=n.getRenderable().getRenderers()[r];s.getDraw()&&s.getLayer()===i&&(t.opaqueActorCount=0,t.translucentActorCount=0,t.volumes=[],e.setCurrentOperation("queryPass"),o.traverse(e),e.setCurrentOperation("cameraPass"),o.traverse(e),t.opaquePass.traverse(o,n),t.translucentActorCount>0&&(t.translucentPass||(t.translucentPass=Iy.newInstance()),t.translucentPass.setColorTextureView(t.opaquePass.getColorTextureView()),t.translucentPass.setDepthTextureView(t.opaquePass.getDepthTextureView()),t.translucentPass.traverse(o,n)),t.volumes.length>0&&(t.volumePass||(t.volumePass=Gy.newInstance()),t.volumePass.setColorTextureView(t.opaquePass.getColorTextureView()),t.volumePass.setDepthTextureView(t.opaquePass.getDepthTextureView()),t.volumePass.setVolumes(t.volumes),t.volumePass.traverse(o,n)),e.finalPass(n,o))}},e.finalPass=(n,r)=>{t._finalBlitEncoder||e.createFinalBlitEncoder(n),t._finalBlitOutputTextureView.createFromTextureHandle(n.getCurrentTexture(),{depth:1,format:n.getPresentationFormat()}),t._finalBlitEncoder.attachTextureViews(),t._finalBlitEncoder.begin(n.getCommandEncoder()),r.scissorAndViewport(t._finalBlitEncoder),t._fullScreenQuad.prepareAndDraw(t._finalBlitEncoder),t._finalBlitEncoder.end()},e.createFinalBlitEncoder=e=>{t._finalBlitEncoder=Sy.newInstance({label:"forwardPassBlit"}),t._finalBlitEncoder.setDescription({colorAttachments:[{view:null,loadOp:"load",storeOp:"store"}]}),t._finalBlitEncoder.setPipelineHash("fpf"),t._finalBlitEncoder.setPipelineSettings({primitive:{cullMode:"none"},fragment:{targets:[{format:e.getPresentationFormat(),blend:{color:{srcFactor:"src-alpha",dstFactor:"one-minus-src-alpha"},alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha"}}}]}}),t._fsqSampler=qm.newInstance({label:"finalPassSampler"}),t._fsqSampler.create(e.getDevice(),{minFilter:"linear",magFilter:"linear"}),t._fullScreenQuad=gh.newInstance(),t._fullScreenQuad.setDevice(e.getDevice()),t._fullScreenQuad.setPipelineHash("fpfsq"),t._fullScreenQuad.setTextureViews([t.opaquePass.getColorTextureView()]),t._fullScreenQuad.setAdditionalBindables([t._fsqSampler]),t._fullScreenQuad.setFragmentShaderTemplate("\n//VTK::Mapper::Dec\n\n//VTK::TCoord::Dec\n\n//VTK::RenderEncoder::Dec\n\n//VTK::IOStructs::Dec\n\n@fragment\nfn main(\n//VTK::IOStructs::Input\n)\n//VTK::IOStructs::Output\n{\n  var output: fragmentOutput;\n\n  var computedColor: vec4<f32> = clamp(textureSampleLevel(opaquePassColorTexture, finalPassSampler, input.tcoordVS, 0.0),vec4<f32>(0.0),vec4<f32>(1.0));\n\n  //VTK::RenderEncoder::Impl\n  return output;\n}\n"),t._finalBlitOutputTextureView=Qm.newInstance(),t._finalBlitEncoder.setColorTextureView(0,t._finalBlitOutputTextureView)},e.incrementOpaqueActorCount=()=>t.opaqueActorCount++,e.incrementTranslucentActorCount=()=>t.translucentActorCount++,e.addVolume=e=>{t.volumes.push(e)}}(e,t)}var jy={newInstance:dn.newInstance(Hy,"vtkForwardPass"),extend:Hy};const{VtkDataTypes:Ky}=Wl;const Zy={handle:null,device:null};function qy(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Zy,n),dn.obj(e,t),dn.setGet(e,t,["device"]),function(e,t){function n(e){if(e.imageData){e.dataArray=e.imageData.getPointData().getScalars(),e.time=e.dataArray.getMTime(),e.nativeArray=e.dataArray.getData();const t=e.imageData.getDimensions();switch(e.width=t[0],e.height=t[1],e.depth=t[2],e.dataArray.getNumberOfComponents()){case 1:e.format="r";break;case 2:e.format="rg";break;default:e.format="rgba"}switch(e.dataArray.getDataType()){case Ky.UNSIGNED_CHAR:e.format+="8unorm";break;case Ky.FLOAT:case Ky.UNSIGNED_INT:case Ky.INT:case Ky.DOUBLE:case Ky.UNSIGNED_SHORT:case Ky.SHORT:default:e.format+="16float"}}e.image&&(e.width=e.image.width,e.height=e.image.height,e.depth=1,e.format="rgba8unorm",e.flip=!0,e.usage=GPUTextureUsage.STORAGE_BINDING|GPUTextureUsage.COPY_DST|GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.RENDER_ATTACHMENT),e.jsImageData&&(e.width=e.jsImageData.width,e.height=e.jsImageData.height,e.depth=1,e.format="rgba8unorm",e.flip=!0,e.nativeArray=e.jsImageData.data,e.usage=GPUTextureUsage.STORAGE_BINDING|GPUTextureUsage.COPY_DST|GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.RENDER_ATTACHMENT),e.imageBitmap&&(e.width=e.imageBitmap.width,e.height=e.imageBitmap.height,e.depth=1,e.format="rgba8unorm",e.flip=!0,e.usage=GPUTextureUsage.STORAGE_BINDING|GPUTextureUsage.COPY_DST|GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.RENDER_ATTACHMENT),e.canvas&&(e.width=e.canvas.width,e.height=e.canvas.height,e.depth=1,e.format="rgba8unorm",e.flip=!0,e.usage=GPUTextureUsage.STORAGE_BINDING|GPUTextureUsage.COPY_DST|GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.RENDER_ATTACHMENT)}function r(e){const n=eg.newInstance({label:e.label});return n.create(t.device,{width:e.width,height:e.height,depth:e.depth,format:e.format,usage:e.usage,mipLevel:e.mipLevel}),(e.nativeArray||e.image||e.canvas||e.imageBitmap)&&n.writeImageData(e),n}t.classHierarchy.push("vtkWebGPUTextureManager"),e.getTexture=e=>e.hash?t.device.getCachedObject(e.hash,r,e):r(e),e.getTextureForImageData=e=>{const r={time:e.getMTime()};return r.imageData=e,n(r),r.hash=r.time+r.format+r.mipLevel,t.device.getTextureManager().getTexture(r)},e.getTextureForVTKTexture=function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;const o={time:e.getMTime(),label:r};return e.getInputData()?o.imageData=e.getInputData():e.getImage()?o.image=e.getImage():e.getJsImageData()?o.jsImageData=e.getJsImageData():e.getImageBitmap()?o.imageBitmap=e.getImageBitmap():e.getCanvas()&&(o.canvas=e.getCanvas()),n(o),o.mipLevel=e.getMipLevel(),o.hash=o.time+o.format+o.mipLevel,t.device.getTextureManager().getTexture(o)}}(e,t)}var Xy={newInstance:dn.newInstance(qy),extend:qy};class Yy extends Map{constructor(){super(),this.registry=new FinalizationRegistry(e=>{const t=super.get(e);t&&t.deref&&void 0===t.deref()&&super.delete(e)})}getValue(e){const t=super.get(e);if(t){const n=t.deref();if(void 0!==n)return n;super.delete(e)}}setValue(e,t){let n;return t&&"object"===typeof t&&(n=new WeakRef(t),this.registry.register(t,e),super.set(e,n)),n}}const Qy={handle:null,pipelines:null,shaderCache:null,bindGroupLayouts:null,bufferManager:null,textureManager:null};function $y(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Qy,n),Nt(e,t),Wt(e,t,["handle"]),Ft(e,t,["bufferManager","shaderCache","textureManager"]),t.objectCache=new Yy,t.shaderCache=$p.newInstance(),t.shaderCache.setDevice(e),t.bindGroupLayouts=[],t.bufferManager=Kh.newInstance(),t.bufferManager.setDevice(e),t.textureManager=Xy.newInstance(),t.textureManager.setDevice(e),t.pipelines={},function(e,t){t.classHierarchy.push("vtkWebGPUDevice"),e.initialize=e=>{t.handle=e},e.createCommandEncoder=()=>t.handle.createCommandEncoder(),e.submitCommandEncoder=e=>{t.handle.queue.submit([e.finish()])},e.getShaderModule=e=>t.shaderCache.getShaderModule(e),e.getBindGroupLayout=e=>{if(!e.entries)return null;for(let t=0;t<e.entries.length;t++){const n=e.entries[t];n.binding=n.binding||0,n.visibility=n.visibility||GPUShaderStage.VERTEX|GPUShaderStage.FRAGMENT}const n=JSON.stringify(e);for(let o=0;o<t.bindGroupLayouts.length;o++)if(t.bindGroupLayouts[o].sval===n)return t.bindGroupLayouts[o].layout;const r=t.handle.createBindGroupLayout(e);return t.bindGroupLayouts.push({sval:n,layout:r}),r},e.getBindGroupLayoutDescription=e=>{for(let n=0;n<t.bindGroupLayouts.length;n++)if(t.bindGroupLayouts[n].layout===e)return t.bindGroupLayouts[n].sval;return vtkErrorMacro("layout not found"),console.trace(),null},e.getPipeline=e=>e in t.pipelines?t.pipelines[e]:null,e.createPipeline=(n,r)=>{r.initialize(e,n),t.pipelines[n]=r},e.onSubmittedWorkDone=()=>t.handle.queue.onSubmittedWorkDone(),e.hasCachedObject=e=>t.objectCache.getValue(e),e.getCachedObject=function(e,n){if(!e)return vtkErrorMacro("attempt to cache an object without a hash"),null;const r=t.objectCache.getValue(e);if(r)return r;for(var o=arguments.length,a=new Array(o>2?o-2:0),i=2;i<o;i++)a[i-2]=arguments[i];const s=n(...a);return t.objectCache.setValue(e,s),s}}(e,t)}var Jy={newInstance:Qt($y,"vtkWebGPUDevice"),extend:$y};const eb={selectionRenderEncoder:null,colorTexture:null,depthTexture:null};function tb(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,eb,n),gv.extend(e,t,n),dn.get(e,t,["colorTexture","depthTexture"]),function(e,t){t.classHierarchy.push("vtkWebGPUHardwareSelectionPass"),e.traverse=(n,r)=>{if(t.deleted)return;t._currentParent=null,e.setCurrentOperation("buildPass"),n.traverse(e);const o=n.getDevice();if(t.selectionRenderEncoder)t.colorTexture.resize(n.getCanvas().width,n.getCanvas().height),t.depthTexture.resizeToMatch(t.colorTexture);else{e.createRenderEncoder(),t.colorTexture=eg.newInstance({label:"hardwareSelectorColor"}),t.colorTexture.create(o,{width:n.getCanvas().width,height:n.getCanvas().height,format:"rgba32uint",usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.COPY_SRC});const r=t.colorTexture.createView("hardwareSelectColorTexture");t.selectionRenderEncoder.setColorTextureView(0,r),t.depthTexture=eg.newInstance({label:"hardwareSelectorDepth"}),t.depthTexture.create(o,{width:n.getCanvas().width,height:n.getCanvas().height,format:"depth32float",usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.COPY_SRC});const a=t.depthTexture.createView("hardwareSelectDepthTexture");t.selectionRenderEncoder.setDepthTextureView(a)}t.selectionRenderEncoder.attachTextureViews(),r.setRenderEncoder(t.selectionRenderEncoder),e.setCurrentOperation("cameraPass"),r.traverse(e),e.setCurrentOperation("opaquePass"),r.traverse(e)},e.createRenderEncoder=()=>{t.selectionRenderEncoder=Sy.newInstance({label:"HardwareSelectionPass"}),t.selectionRenderEncoder.setPipelineHash("sel"),t.selectionRenderEncoder.setReplaceShaderCodeFunction(e=>{const t=e.getShaderDescription("fragment");t.addOutput("vec4<u32>","outColor");let n=t.getCode();n=$p.substitute(n,"//VTK::RenderEncoder::Impl",["output.outColor = vec4<u32>(mapperUBO.PropID, compositeID, 0u, 0u);"]).result,t.setCode(n)}),t.selectionRenderEncoder.getDescription().colorAttachments[0].clearValue=[0,0,0,0],t.selectionRenderEncoder.setPipelineSettings({primitive:{cullMode:"none"},depthStencil:{depthWriteEnabled:!0,depthCompare:"greater",format:"depth32float"},fragment:{targets:[{format:"rgba32uint",blend:void 0}]}})}}(e,t)}var nb={newInstance:dn.newInstance(tb,"vtkWebGPUHardwareSelectionPass"),extend:tb};const{SelectionContent:rb,SelectionField:ob}=Lv,{FieldAssociations:ab}=uu,{vtkErrorMacro:ib}=dn;function sb(e){return"".concat(e.propID," ").concat(e.compositeID)}function lb(e,t,n,r){const o=4*((n.height-t-1)*n.colorBufferWidth+e)+r;return n.colorValues[o]}function ub(e,t,n,r){const o=n<0?0:n;if(0===o){if(r[0]=t[0],r[1]=t[1],t[0]<0||t[0]>=e.width||t[1]<0||t[1]>=e.height)return null;const n=lb(t[0],t[1],e,0);if(n<=0)return null;const o={};o.propID=n;let a=lb(t[0],t[1],e,1);if((a<0||a>16777215)&&(a=0),o.compositeID=a,e.captureZValues){const n=(e.height-t[1]-1)*e.zbufferBufferWidth+t[0];o.zValue=e.depthValues[n],o.zValue=e.webGPURenderer.convertToOpenGLDepth(o.zValue),o.displayPosition=t}return o}const a=[t[0],t[1]],i=[0,0];let s=ub(e,t,0,r);if(s)return s;for(let l=1;l<o;++l){for(let t=a[1]>l?a[1]-l:0;t<=a[1]+l;++t){if(i[1]=t,a[0]>=l&&(i[0]=a[0]-l,s=ub(e,i,0,r),s))return s;if(i[0]=a[0]+l,s=ub(e,i,0,r),s)return s}for(let t=a[0]>=l?a[0]-(l-1):0;t<=a[0]+(l-1);++t){if(i[0]=t,a[1]>=l&&(i[1]=a[1]-l,s=ub(e,i,0,r),s))return s;if(i[1]=a[1]+l,s=ub(e,i,0,r),s)return s}}return r[0]=t[0],r[1]=t[1],null}function cb(e,t,n,r,o){const a=Math.floor(t),i=Math.floor(n),s=Math.floor(r),l=Math.floor(o),u=new Map,c=[0,0];for(let d=i;d<=l;d++)for(let t=a;t<=s;t++){const n=ub(e,[t,d],0,c);if(n){const t=sb(n);if(u.has(t)){const r=u.get(t);r.pixelCount++,e.captureZValues&&n.zValue<r.info.zValue&&(r.info=n),-1===r.attributeIDs.indexOf(n.attributeID)&&r.attributeIDs.push(n.attributeID)}else u.set(t,{info:n,pixelCount:1,attributeIDs:[n.attributeID]})}}return function(e,t,n){const r=[];let o=0;return t.forEach((t,a)=>{const i=Lv.newInstance();switch(i.setContentType(rb.INDICES),e){case ab.FIELD_ASSOCIATION_CELLS:i.setFieldType(ob.CELL);break;case ab.FIELD_ASSOCIATION_POINTS:i.setFieldType(ob.POINT);break;default:ib("Unknown field association")}i.getProperties().propID=t.info.propID;const s=n.webGPURenderer.getPropFromID(t.info.propID);i.getProperties().prop=s.getRenderable(),i.getProperties().compositeID=t.info.compositeID,i.getProperties().pixelCount=t.pixelCount,n.captureZValues&&(i.getProperties().displayPosition=[t.info.displayPosition[0],t.info.displayPosition[1],t.info.zValue],i.getProperties().worldPosition=n.webGPURenderWindow.displayToWorld(t.info.displayPosition[0],t.info.displayPosition[1],t.info.zValue,n.renderer)),i.setSelectionList(t.attributeIDs),r[o]=i,o++}),r}(e.fieldAssociation,u,e)}const db={};function fb(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,db,n),Iv.extend(e,t,n),t._selectionPass=nb.newInstance(),dn.setGet(e,t,["_WebGPURenderWindow"]),dn.moveToProtected(e,t,["WebGPURenderWindow"]),function(e,t){t.classHierarchy.push("vtkWebGPUHardwareSelector"),e.endSelection=()=>{t.WebGPURenderer.setSelector(null)},e.getSourceDataAsync=async e=>{if(!e||!t._WebGPURenderWindow)return ib("Renderer and view must be set before calling Select."),!1;t._WebGPURenderWindow.getRenderable().preRender(),t._WebGPURenderWindow.getInitialized()||(t._WebGPURenderWindow.initialize(),await new Promise(e=>{t._WebGPURenderWindow.onInitialized(e)}));const n=t._WebGPURenderWindow.getViewNodeFor(e);if(!n)return!1;const r=n.getSuppressClear();n.setSuppressClear(!0),t._selectionPass.traverse(t._WebGPURenderWindow,n),n.setSuppressClear(r);const o=t._WebGPURenderWindow.getDevice(),a=t._selectionPass.getColorTexture(),i=t._selectionPass.getDepthTexture(),s={area:[0,0,a.getWidth()-1,a.getHeight()-1],captureZValues:t.captureZValues,fieldAssociation:t.fieldAssociation,renderer:e,webGPURenderer:n,webGPURenderWindow:t._WebGPURenderWindow,width:a.getWidth(),height:a.getHeight()};s.colorBufferWidth=16*Math.floor((s.width+15)/16),s.colorBufferSizeInBytes=s.colorBufferWidth*s.height*4*4;const l=xh.newInstance({label:"hardwareSelectColorBuffer"});l.setDevice(o),l.create(s.colorBufferSizeInBytes,GPUBufferUsage.MAP_READ|GPUBufferUsage.COPY_DST);const u=t._WebGPURenderWindow.getCommandEncoder();let c;u.copyTextureToBuffer({texture:a.getHandle()},{buffer:l.getHandle(),bytesPerRow:16*s.colorBufferWidth,rowsPerImage:s.height},{width:s.width,height:s.height,depthOrArrayLayers:1}),t.captureZValues&&(s.zbufferBufferWidth=64*Math.floor((s.width+63)/64),c=xh.newInstance({label:"hardwareSelectDepthBuffer"}),c.setDevice(o),s.zbufferSizeInBytes=s.height*s.zbufferBufferWidth*4,c.create(s.zbufferSizeInBytes,GPUBufferUsage.MAP_READ|GPUBufferUsage.COPY_DST),u.copyTextureToBuffer({texture:i.getHandle(),aspect:"depth-only"},{buffer:c.getHandle(),bytesPerRow:4*s.zbufferBufferWidth,rowsPerImage:s.height},{width:s.width,height:s.height,depthOrArrayLayers:1})),o.submitCommandEncoder(u);const d=l.mapAsync(GPUMapMode.READ);if(t.captureZValues){const e=c.mapAsync(GPUMapMode.READ);await Promise.all([d,e]),s.depthValues=new Float32Array(c.getMappedRange().slice()),c.unmap()}else await d;return s.colorValues=new Uint32Array(l.getMappedRange().slice()),l.unmap(),s.generateSelection=(e,t,n,r)=>cb(s,e,t,n,r),s}}(e,t)}var pb={newInstance:dn.newInstance(fb,"vtkWebGPUHardwareSelector"),extend:fb};const{vtkErrorMacro:hb}=dn,mb={position:"absolute",top:0,left:0,width:"100%",height:"100%"};function gb(e,t){t.classHierarchy.push("vtkWebGPURenderWindow"),e.getViewNodeFactory=()=>t.myFactory;const n=[0,0];e.onModified(function(){t.renderable&&(t.size[0]===n[0]&&t.size[1]===n[1]||(n[0]=t.size[0],n[1]=t.size[1],t.canvas.setAttribute("width",t.size[0]),t.canvas.setAttribute("height",t.size[1]),e.recreateSwapChain())),t.viewStream&&t.viewStream.setSize(t.size[0],t.size[1]),t.canvas.style.display=t.useOffScreen?"none":"block",t.el&&(t.el.style.cursor=t.cursorVisibility?t.cursor:"none"),t.containerSize=null}),e.recreateSwapChain=()=>{t.context&&(t.context.unconfigure(),t.presentationFormat=navigator.gpu.getPreferredCanvasFormat(t.adapter),t.context.configure({device:t.device.getHandle(),format:t.presentationFormat,alphaMode:"premultiplied",usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.COPY_DST,width:t.size[0],height:t.size[1]}),t._configured=!0)},e.getCurrentTexture=()=>t.context.getCurrentTexture(),e.buildPass=n=>{if(n){if(!t.renderable)return;e.prepareNodes(),e.addMissingNodes(t.renderable.getRenderersByReference()),e.removeUnusedNodes(),e.initialize()}else t.initialized&&(t._configured||e.recreateSwapChain(),t.commandEncoder=t.device.createCommandEncoder())},e.initialize=()=>{if(!t.initializing){if(t.initializing=!0,!navigator.gpu)return void hb("WebGPU is not enabled.");e.create3DContextAsync().then(()=>{t.initialized=!0,t.deleted||e.invokeInitialized()})}},e.setContainer=n=>{t.el&&t.el!==n&&(t.canvas.parentNode!==t.el&&hb("Error: canvas parent node does not match container"),t.el.removeChild(t.canvas),t.el.contains(t.bgImage)&&t.el.removeChild(t.bgImage)),t.el!==n&&(t.el=n,t.el&&(t.el.appendChild(t.canvas),t.useBackgroundImage&&t.el.appendChild(t.bgImage)),e.modified())},e.getContainer=()=>t.el,e.getContainerSize=()=>{if(!t.containerSize&&t.el){const{width:e,height:n}=t.el.getBoundingClientRect();t.containerSize=[e,n]}return t.containerSize||t.size},e.getFramebufferSize=()=>t.size,e.create3DContextAsync=async()=>{t.adapter=await navigator.gpu.requestAdapter({powerPreference:"high-performance"}),t.deleted||(t.device=Jy.newInstance(),t.device.initialize(await t.adapter.requestDevice()),t.deleted?t.device=null:t.context=t.canvas.getContext("webgpu"))},e.releaseGraphicsResources=()=>{const n=gv.newInstance();n.setCurrentOperation("Release"),n.traverse(e,null),t.adapter=null,t.device=null,t.context=null,t.initialized=!1,t.initializing=!1},e.setBackgroundImage=e=>{t.bgImage.src=e.src},e.setUseBackgroundImage=e=>{t.useBackgroundImage=e,t.useBackgroundImage&&!t.el.contains(t.bgImage)?t.el.appendChild(t.bgImage):!t.useBackgroundImage&&t.el.contains(t.bgImage)&&t.el.removeChild(t.bgImage)},e.captureNextImage=function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"image/png",{resetCamera:r=!1,size:o=null,scale:a=1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t.deleted)return null;t.imageFormat=n;const i=t.notifyStartCaptureImage;return t.notifyStartCaptureImage=!0,t._screenshot={size:o||1!==a?o||t.size.map(e=>e*a):null},new Promise((n,o)=>{const a=e.onImageReady(o=>{if(null===t._screenshot.size)t.notifyStartCaptureImage=i,a.unsubscribe(),t._screenshot.placeHolder&&(t.size=t._screenshot.originalSize,e.modified(),t._screenshot.cameras&&t._screenshot.cameras.forEach(e=>{let{restoreParamsFn:t,arg:n}=e;return t(n)}),e.traverseAllPasses(),t.el.removeChild(t._screenshot.placeHolder),t._screenshot.placeHolder.remove(),t._screenshot=null),n(o);else{const n=document.createElement("img");if(n.style=mb,n.src=o,t._screenshot.placeHolder=t.el.appendChild(n),t.canvas.style.display="none",t._screenshot.originalSize=t.size,t.size=t._screenshot.size,t._screenshot.size=null,e.modified(),r){const e=!0!==r;t._screenshot.cameras=t.renderable.getRenderers().map(t=>{const n=t.getActiveCamera(),o=n.get("focalPoint","position","parallelScale");return{resetCameraArgs:e?{renderer:t}:void 0,resetCameraFn:e?r:t.resetCamera,restoreParamsFn:n.set,arg:JSON.parse(JSON.stringify(o))}}),t._screenshot.cameras.forEach(e=>{let{resetCameraFn:t,resetCameraArgs:n}=e;return t(n)})}e.traverseAllPasses()}})})},e.traverseAllPasses=()=>{if(!t.deleted)if(t.initialized){if(t.renderPasses)for(let n=0;n<t.renderPasses.length;++n)t.renderPasses[n].traverse(e,null);t.commandEncoder&&(t.device.submitCommandEncoder(t.commandEncoder),t.commandEncoder=null,t.notifyStartCaptureImage&&t.device.onSubmittedWorkDone().then(()=>{!async function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.imageFormat;const r=document.createElement("canvas"),o=r.getContext("2d");r.width=t.canvas.width,r.height=t.canvas.height;const a=await e.getPixelsAsync(),i=new ImageData(a.colorValues,a.width,a.height);o.putImageData(i,0,0);const s=t.canvas.getBoundingClientRect();t.renderable.getRenderers().forEach(e=>{e.getViewProps().forEach(e=>{if(e.getContainer){const t=e.getContainer().getElementsByTagName("canvas");for(let e=0;e<t.length;e++){const n=t[e],r=n.getBoundingClientRect(),a=r.x-s.x,i=r.y-s.y;o.drawImage(n,a,i)}}})});const l=r.toDataURL(n);r.remove(),e.invokeImageReady(l)}()}))}else{e.initialize();const t=e.onInitialized(()=>{t.unsubscribe(),e.traverseAllPasses()})}},e.setViewStream=n=>{if(t.viewStream===n)return!1;if(t.subscription&&(t.subscription.unsubscribe(),t.subscription=null),t.viewStream=n,t.viewStream){t.renderable.getRenderers()[0].getBackgroundByReference()[3]=0,e.setUseBackgroundImage(!0),t.subscription=t.viewStream.onImageReady(t=>e.setBackgroundImage(t.image)),t.viewStream.setSize(t.size[0],t.size[1]),t.viewStream.invalidateCache(),t.viewStream.render(),e.modified()}return!0},e.getUniquePropID=()=>t.nextPropID++,e.getPropFromID=e=>{for(let n=0;n<t.children.length;n++){const r=t.children[n].getPropFromID(e);if(null!==r)return r}return null},e.getPixelsAsync=async()=>{const e=t.device,n=t.renderPasses[0].getOpaquePass().getColorTexture(),r={width:n.getWidth(),height:n.getHeight()};r.colorBufferWidth=32*Math.floor((r.width+31)/32),r.colorBufferSizeInBytes=r.colorBufferWidth*r.height*8;const o=xh.newInstance();o.setDevice(e),o.create(r.colorBufferSizeInBytes,GPUBufferUsage.MAP_READ|GPUBufferUsage.COPY_DST);const a=t.device.createCommandEncoder();a.copyTextureToBuffer({texture:n.getHandle()},{buffer:o.getHandle(),bytesPerRow:8*r.colorBufferWidth,rowsPerImage:r.height},{width:r.width,height:r.height,depthOrArrayLayers:1}),e.submitCommandEncoder(a);const i=o.mapAsync(GPUMapMode.READ);await i,r.colorValues=new Uint16Array(o.getMappedRange().slice()),o.unmap();const s=new Uint8ClampedArray(r.height*r.width*4);for(let t=0;t<r.height;t++)for(let e=0;e<r.width;e++){const n=4*(t*r.width+e),o=4*(t*r.colorBufferWidth+e);s[n]=255*If.fromHalf(r.colorValues[o]),s[n+1]=255*If.fromHalf(r.colorValues[o+1]),s[n+2]=255*If.fromHalf(r.colorValues[o+2]),s[n+3]=255*If.fromHalf(r.colorValues[o+3])}return r.colorValues=s,r},e.createSelector=()=>{const t=pb.newInstance();return t.setWebGPURenderWindow(e),t};const r=e.setSize;e.setSize=(t,n)=>{const o=r(t,n);return o&&e.invokeWindowResizeEvent({width:t,height:n}),o},e.delete=dn.chain(e.delete,e.setViewStream)}const vb={initialized:!1,context:null,adapter:null,device:null,canvas:null,cursorVisibility:!0,cursor:"pointer",containerSize:null,renderPasses:[],notifyStartCaptureImage:!1,imageFormat:"image/png",useOffScreen:!1,useBackgroundImage:!1,nextPropID:1,xrSupported:!1,presentationFormat:null};function yb(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,vb,n),t.canvas=document.createElement("canvas"),t.canvas.style.width="100%",t.bgImage=new Image,t.bgImage.style.position="absolute",t.bgImage.style.left="0",t.bgImage.style.top="0",t.bgImage.style.width="100%",t.bgImage.style.height="100%",t.bgImage.style.zIndex="-1",iy.extend(e,t,n),t.myFactory=Up.newInstance(),t.renderPasses[0]=jy.newInstance(),t.selector||(t.selector=pb.newInstance(),t.selector.setWebGPURenderWindow(e)),dn.event(e,t,"imageReady"),dn.event(e,t,"initialized"),dn.get(e,t,["commandEncoder","device","presentationFormat","useBackgroundImage","xrSupported"]),dn.setGet(e,t,["initialized","context","canvas","device","renderPasses","notifyStartCaptureImage","cursor","useOffScreen"]),dn.setGetArray(e,t,["size"],2),dn.event(e,t,"windowResizeEvent"),gb(e,t)}const bb=dn.newInstance(yb,"vtkWebGPURenderWindow");wg("WebGPU",bb);Np("vtkRenderWindow",bb);const _b=cv.extractURLParameters(),Tb={margin:"0",padding:"0",position:"absolute",top:"0",left:"0",width:"100%",height:"100%",overflow:"hidden"},xb={position:"absolute",left:"25px",top:"25px",backgroundColor:"white",borderRadius:"5px",listStyle:"none",padding:"5px 10px",margin:"0",display:"block",border:"solid 1px black",maxWidth:"calc(100% - 70px)",maxHeight:"calc(100% - 60px)",overflow:"auto"};function Sb(e,t){Object.keys(t).forEach(n=>{e.style[n]=t[n]})}const wb={background:[.32,.34,.43],containerStyle:null,controlPanelStyle:null,listenWindowResize:!0,resizeCallback:null,controllerVisibility:!0};function Cb(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,wb,n),dn.obj(e,t),dn.get(e,t,["renderWindow","renderer","apiSpecificRenderWindow","interactor","rootContainer","container","controlContainer"]),function(e,t){var n;t.classHierarchy.push("vtkFullScreenRenderWindow");const r=document.querySelector("body");function o(t){"c"===String.fromCharCode(t.charCode)&&e.toggleControllerVisibility()}t.rootContainer||(t.rootContainer=r),t.container||(t.container=document.createElement("div"),Sb(t.container,t.containerStyle||Tb),t.rootContainer.appendChild(t.container)),t.rootContainer===r&&(document.documentElement.style.height="100%",r.style.height="100%",r.style.padding="0",r.style.margin="0"),t.renderWindow=Eg.newInstance(),t.renderer=xg.newInstance(),t.renderWindow.addRenderer(t.renderer),t.apiSpecificRenderWindow=t.renderWindow.newAPISpecificView(null!==(n=_b.viewAPI)&&void 0!==n?n:t.defaultViewAPI),t.apiSpecificRenderWindow.setContainer(t.container),t.renderWindow.addView(t.apiSpecificRenderWindow),t.interactor=jg.newInstance(),t.interactor.setInteractorStyle(sv.newInstance()),t.interactor.setView(t.apiSpecificRenderWindow),t.interactor.initialize(),t.interactor.bindEvents(t.container),e.setBackground=t.renderer.setBackground,e.removeController=()=>{const e=t.controlContainer;e&&e.parentNode.removeChild(e)},e.setControllerVisibility=e=>{t.controllerVisibility=e,t.controlContainer&&(t.controlContainer.style.display=e?"block":"none")},e.toggleControllerVisibility=()=>{e.setControllerVisibility(!t.controllerVisibility)},e.addController=n=>{t.controlContainer=document.createElement("div"),Sb(t.controlContainer,t.controlPanelStyle||xb),t.rootContainer.appendChild(t.controlContainer),t.controlContainer.innerHTML=n,e.setControllerVisibility(t.controllerVisibility),t.rootContainer.addEventListener("keypress",o)},e.setBackground(...t.background),e.addRepresentation=e=>{e.getActors().forEach(e=>{t.renderer.addActor(e)})},e.removeRepresentation=e=>{e.getActors().forEach(e=>t.renderer.removeActor(e))},e.delete=dn.chain(e.setContainer,t.apiSpecificRenderWindow.delete,()=>{var n;null===(n=t.rootContainer)||void 0===n||n.removeEventListener("keypress",o),window.removeEventListener("resize",e.resize)},e.delete),e.resize=()=>{const e=t.container.getBoundingClientRect(),n=window.devicePixelRatio||1;t.apiSpecificRenderWindow.setSize(Math.floor(e.width*n),Math.floor(e.height*n)),t.resizeCallback&&t.resizeCallback(e),t.renderWindow.render()},e.setResizeCallback=n=>{t.resizeCallback=n,e.resize()},t.listenWindowResize&&window.addEventListener("resize",e.resize),e.resize()}(e,t)}var Pb={newInstance:dn.newInstance(Cb),extend:Cb};var Ab={ColorSpace:{RGB:0,HSV:1,LAB:2,DIVERGING:3},Scale:{LINEAR:0,LOG10:1}};const{ColorSpace:Eb,Scale:Ib}=Ab,{ScalarMappingTarget:Ob}=Mu,{vtkDebugMacro:Mb,vtkErrorMacro:Rb,vtkWarningMacro:Lb}=dn;function kb(e,t){const n=e[0],r=e[1],o=e[2],a=Math.sqrt(n*n+r*r+o*o),i=a>.001?Math.acos(n/a):0,s=i>.001?Math.atan2(o,r):0;t[0]=a,t[1]=i,t[2]=s}function Db(e,t){if(e[0]>=t-.1)return e[2];const n=e[1]*Math.sqrt(t*t-e[0]*e[0])/(e[0]*Math.sin(e[1]));return e[2]>-.3*Math.PI?e[2]+n:e[2]-n}function Bb(e,t,n,r){const o=[],a=[];Pi(t,o),Pi(n,a);const i=[],s=[];kb(o,i),kb(a,s);let l=e;if(i[1]>.05&&s[1]>.05&&function(e,t){let n=e-t;for(n<0&&(n=-n);n>=2*Math.PI;)n-=2*Math.PI;return n>Math.PI&&(n=2*Math.PI-n),n}(i[2],s[2])>.33*Math.PI){let t=Math.max(i[0],s[0]);t=Math.max(88,t),e<.5?(s[0]=t,s[1]=0,s[2]=0,l*=2):(i[0]=t,i[1]=0,i[2]=0,l=2*l-1)}i[1]<.05&&s[1]>.05?i[2]=Db(s,i[0]):s[1]<.05&&i[1]>.05&&(s[2]=Db(i,s[0]));const u=[];u[0]=(1-l)*i[0]+l*s[0],u[1]=(1-l)*i[1]+l*s[1],u[2]=(1-l)*i[2]+l*s[2];const c=[];!function(e,t){const n=e[0],r=e[1],o=e[2];t[0]=n*Math.cos(r),t[1]=n*Math.sin(r)*Math.cos(o),t[2]=n*Math.sin(r)*Math.sin(o)}(u,c),Ai(c,r)}const Nb={clamping:!0,colorSpace:Eb.RGB,hSVWrap:!0,scale:Ib.LINEAR,nanColor:null,belowRangeColor:null,aboveRangeColor:null,useAboveRangeColor:!1,useBelowRangeColor:!1,allowDuplicateScalars:!1,table:null,tableSize:0,buildTime:null,nodes:null,discretize:!1,numberOfValues:256};function Vb(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Nb,n),Mu.extend(e,t,n),t.table=[],t.nodes=[],t.nanColor=[.5,0,0,1],t.belowRangeColor=[0,0,0,1],t.aboveRangeColor=[1,1,1,1],t.buildTime={},dn.obj(t.buildTime),dn.get(e,t,["buildTime","mappingRange"]),dn.setGet(e,t,["useAboveRangeColor","useBelowRangeColor","discretize","numberOfValues",{type:"enum",name:"colorSpace",enum:Eb},{type:"enum",name:"scale",enum:Ib}]),dn.setArray(e,t,["nanColor","belowRangeColor","aboveRangeColor"],4),dn.getArray(e,t,["nanColor","belowRangeColor","aboveRangeColor"]),function(e,t){t.classHierarchy.push("vtkColorTransferFunction"),e.getSize=()=>t.nodes.length,e.addRGBPoint=(t,n,r,o)=>e.addRGBPointLong(t,n,r,o,.5,0),e.addRGBPointLong=function(n,r,o,a){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.5,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;if(i<0||i>1)return Rb("Midpoint outside range [0.0, 1.0]"),-1;if(s<0||s>1)return Rb("Sharpness outside range [0.0, 1.0]"),-1;t.allowDuplicateScalars||e.removePoint(n);const l={x:n,r:r,g:o,b:a,midpoint:i,sharpness:s};t.nodes.push(l),e.sortAndUpdateRange();let u=0;for(;u<t.nodes.length&&t.nodes[u].x!==n;u++);return u<t.nodes.length?u:-1},e.addHSVPoint=(t,n,r,o)=>e.addHSVPointLong(t,n,r,o,.5,0),e.addHSVPointLong=function(t,n,r,o){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.5,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;const s=[];return Ti([n,r,o],s),e.addRGBPoint(t,s[0],s[1],s[2],a,i)},e.setNodes=n=>{if(t.nodes!==n){const r=JSON.stringify(t.nodes);t.nodes=n;const o=JSON.stringify(t.nodes);if(e.sortAndUpdateRange()||r!==o)return e.modified(),!0}return!1},e.sortAndUpdateRange=()=>{const n=JSON.stringify(t.nodes);t.nodes.sort((e,t)=>e.x-t.x);const r=JSON.stringify(t.nodes),o=e.updateRange();return o||n===r?o:(e.modified(),!0)},e.updateRange=()=>{const n=[2];n[0]=t.mappingRange[0],n[1]=t.mappingRange[1];const r=t.nodes.length;return r?(t.mappingRange[0]=t.nodes[0].x,t.mappingRange[1]=t.nodes[r-1].x):(t.mappingRange[0]=0,t.mappingRange[1]=0),(n[0]!==t.mappingRange[0]||n[1]!==t.mappingRange[1])&&(e.modified(),!0)},e.removePoint=n=>{let r=0;for(;r<t.nodes.length&&t.nodes[r].x!==n;r++);const o=r;if(r>=t.nodes.length)return-1;let a=!1;return t.nodes.splice(r,1),0!==r&&r!==t.nodes.length||(a=e.updateRange()),a||e.modified(),o},e.movePoint=(n,r)=>{if(n!==r){e.removePoint(r);for(let o=0;o<t.nodes.length;o++)if(t.nodes[o].x===n){t.nodes[o].x=r,e.sortAndUpdateRange();break}}},e.removeAllPoints=()=>{t.nodes=[],e.sortAndUpdateRange()},e.addRGBSegment=(n,r,o,a,i,s,l,u)=>{e.sortAndUpdateRange();for(let e=0;e<t.nodes.length;)t.nodes[e].x>=n&&t.nodes[e].x<=i?t.nodes.splice(e,1):e++;e.addRGBPointLong(n,r,o,a,.5,0),e.addRGBPointLong(i,s,l,u,.5,0),e.modified()},e.addHSVSegment=(t,n,r,o,a,i,s,l)=>{const u=[i,s,l],c=[],d=[];Ti([n,r,o],c),Ti(u,d),e.addRGBSegment(t,c[0],c[1],c[2],a,d[0],d[1],d[2])},e.mapValue=t=>{const n=[];return e.getColor(t,n),[Math.floor(255*n[0]+.5),Math.floor(255*n[1]+.5),Math.floor(255*n[2]+.5),255]},e.getColor=(n,r)=>{if(t.indexedLookup){const t=e.getSize(),o=e.getAnnotatedValueIndexInternal(n);if(o<0||0===t){const t=e.getNanColorByReference();r[0]=t[0],r[1]=t[1],r[2]=t[2]}else{const n=[];e.getNodeValue(o%t,n),r[0]=n[1],r[1]=n[2],r[2]=n[3]}return}e.getTable(n,n,1,r)},e.getRedValue=t=>{const n=[];return e.getColor(t,n),n[0]},e.getGreenValue=t=>{const n=[];return e.getColor(t,n),n[1]},e.getBlueValue=t=>{const n=[];return e.getColor(t,n),n[2]},e.logScaleEnabled=()=>t.scale===Ib.LOG10,e.usingLogScale=()=>e.logScaleEnabled()&&t.mappingRange[0]>0,e.getTable=(n,r,o,a)=>{const i=e.usingLogScale(),s=i?Math.log10(Number(n)):Number(n),l=i?Math.log10(Number(r)):Number(r);if(ji(s)||ji(l)){for(let e=0;e<o;e++)a[3*e+0]=t.nanColor[0],a[3*e+1]=t.nanColor[1],a[3*e+2]=t.nanColor[2];return}let u=0;const c=t.nodes.length;let d=0,f=0,p=0;0!==c&&(d=t.nodes[c-1].r,f=t.nodes[c-1].g,p=t.nodes[c-1].b);let h=0,m=0,g=0;const v=[0,0,0],y=[0,0,0];let b=0,_=0;const T=[];let x=t.mappingRange;i&&(x=[Math.log10(t.mappingRange[0]),Math.log10(t.mappingRange[1])]);for(let S=0;S<o;S++){const n=3*S;if(h=o>1?s+S/(o-1)*(l-s):.5*(s+l),t.discretize){const e=x;if(h>=e[0]&&h<=e[1]){const n=t.numberOfValues,r=e[1]-e[0];if(n<=1)h=e[0]+r/2;else{const t=(h-e[0])/r,o=Jo(n*t);h=e[0]+o/(n-1)*r}}}for(;u<c&&h>t.nodes[u].x;)u++,u<c&&(m=t.nodes[u-1].x,g=t.nodes[u].x,v[0]=t.nodes[u-1].r,y[0]=t.nodes[u].r,v[1]=t.nodes[u-1].g,y[1]=t.nodes[u].g,v[2]=t.nodes[u-1].b,y[2]=t.nodes[u].b,b=t.nodes[u-1].midpoint,_=t.nodes[u-1].sharpness,b<1e-5&&(b=1e-5),b>.99999&&(b=.99999));if(h>x[1])a[n]=0,a[n+1]=0,a[n+2]=0,t.clamping&&(e.getUseAboveRangeColor()?(a[n]=t.aboveRangeColor[0],a[n+1]=t.aboveRangeColor[1],a[n+2]=t.aboveRangeColor[2]):(a[n]=d,a[n+1]=f,a[n+2]=p));else if(h<x[0]||Gi(h)&&h<0)a[n]=0,a[n+1]=0,a[n+2]=0,t.clamping&&(e.getUseBelowRangeColor()?(a[n]=t.belowRangeColor[0],a[n+1]=t.belowRangeColor[1],a[n+2]=t.belowRangeColor[2]):c>0&&(a[n]=t.nodes[0].r,a[n+1]=t.nodes[0].g,a[n+2]=t.nodes[0].b));else if(0===u&&(Math.abs(h-s)<1e-6||t.discretize))c>0?(a[n]=t.nodes[0].r,a[n+1]=t.nodes[0].g,a[n+2]=t.nodes[0].b):(a[n]=0,a[n+1]=0,a[n+2]=0);else{let e=0;if(e=(h-m)/(g-m),e=e<b?.5*e/b:.5+.5*(e-b)/(1-b),_>.99){if(e<.5){a[n]=v[0],a[n+1]=v[1],a[n+2]=v[2];continue}a[n]=y[0],a[n+1]=y[1],a[n+2]=y[2];continue}if(_<.01){if(t.colorSpace===Eb.RGB)a[n]=(1-e)*v[0]+e*y[0],a[n+1]=(1-e)*v[1]+e*y[1],a[n+2]=(1-e)*v[2]+e*y[2];else if(t.colorSpace===Eb.HSV){const r=[],o=[];_i(v,r),_i(y,o),t.hSVWrap&&(r[0]-o[0]>.5||o[0]-r[0]>.5)&&(r[0]>o[0]?r[0]-=1:o[0]-=1);const i=[];i[0]=(1-e)*r[0]+e*o[0],i[0]<0&&(i[0]+=1),i[1]=(1-e)*r[1]+e*o[1],i[2]=(1-e)*r[2]+e*o[2],Ti(i,T),a[n]=T[0],a[n+1]=T[1],a[n+2]=T[2]}else if(t.colorSpace===Eb.LAB){const t=[],r=[];Pi(v,t),Pi(y,r);const o=[];o[0]=(1-e)*t[0]+e*r[0],o[1]=(1-e)*t[1]+e*r[1],o[2]=(1-e)*t[2]+e*r[2],Ai(o,T),a[n]=T[0],a[n+1]=T[1],a[n+2]=T[2]}else t.colorSpace===Eb.DIVERGING?(Bb(e,v,y,T),a[n]=T[0],a[n+1]=T[1],a[n+2]=T[2]):Rb("ColorSpace set to invalid value.",t.colorSpace);continue}e<.5?e=.5*(2*e)**(1+10*_):e>.5&&(e=1-.5*(2*(1-e))**(1+10*_));const r=e*e,o=r*e,i=2*o-3*r+1,s=-2*o+3*r,l=o-2*r+e,u=o-r;let c,d;if(t.colorSpace===Eb.RGB)for(let t=0;t<3;t++)c=y[t]-v[t],d=(1-_)*c,a[n+t]=i*v[t]+s*y[t]+l*d+u*d;else if(t.colorSpace===Eb.HSV){const e=[],r=[];_i(v,e),_i(y,r),t.hSVWrap&&(e[0]-r[0]>.5||r[0]-e[0]>.5)&&(e[0]>r[0]?e[0]-=1:r[0]-=1);const o=[];for(let t=0;t<3;t++)c=r[t]-e[t],d=(1-_)*c,o[t]=i*e[t]+s*r[t]+l*d+u*d,0===t&&o[t]<0&&(o[t]+=1);Ti(o,T),a[n]=T[0],a[n+1]=T[1],a[n+2]=T[2]}else if(t.colorSpace===Eb.LAB){const e=[],t=[];Pi(v,e),Pi(y,t);const r=[];for(let n=0;n<3;n++)c=t[n]-e[n],d=(1-_)*c,r[n]=i*e[n]+s*t[n]+l*d+u*d;Ai(r,T),a[n]=T[0],a[n+1]=T[1],a[n+2]=T[2]}else t.colorSpace===Eb.DIVERGING?(Bb(e,v,y,T),a[n]=T[0],a[n+1]=T[1],a[n+2]=T[2]):Rb("ColorSpace set to invalid value.");for(let t=0;t<3;t++)a[n+t]=a[n+t]<0?0:a[n+t],a[n+t]=a[n+t]>1?1:a[n+t]}}},e.getUint8Table=function(n,r,o){let a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(e.getMTime()<=t.buildTime&&t.tableSize===o&&t.tableWithAlpha!==a)return t.table;if(0===t.nodes.length)return Rb("Attempting to lookup a value with no points in the function"),t.table;const i=a?4:3;t.tableSize===o&&t.tableWithAlpha===a||(t.table=new Uint8Array(o*i),t.tableSize=o,t.tableWithAlpha=a);const s=[];e.getTable(n,r,o,s);for(let e=0;e<o;e++)t.table[e*i+0]=Math.floor(255*s[3*e+0]+.5),t.table[e*i+1]=Math.floor(255*s[3*e+1]+.5),t.table[e*i+2]=Math.floor(255*s[3*e+2]+.5),a&&(t.table[e*i+3]=255);return t.buildTime.modified(),t.table},e.buildFunctionFromArray=n=>{e.removeAllPoints();const r=n.getNumberOfComponents();for(let e=0;e<n.getNumberOfTuples();e++)switch(r){case 3:t.nodes.push({x:e,r:n.getComponent(e,0),g:n.getComponent(e,1),b:n.getComponent(e,2),midpoint:.5,sharpness:0});break;case 4:t.nodes.push({x:n.getComponent(e,0),r:n.getComponent(e,1),g:n.getComponent(e,2),b:n.getComponent(e,3),midpoint:.5,sharpness:0});break;case 5:t.nodes.push({x:e,r:n.getComponent(e,0),g:n.getComponent(e,1),b:n.getComponent(e,2),midpoint:n.getComponent(e,4),sharpness:n.getComponent(e,5)});break;case 6:t.nodes.push({x:n.getComponent(e,0),r:n.getComponent(e,1),g:n.getComponent(e,2),b:n.getComponent(e,3),midpoint:n.getComponent(e,4),sharpness:n.getComponent(e,5)})}e.sortAndUpdateRange()},e.buildFunctionFromTable=(n,r,o,a)=>{let i=0;e.removeAllPoints(),o>1&&(i=(r-n)/(o-1));for(let e=0;e<o;e++){const r={x:n+i*e,r:a[3*e],g:a[3*e+1],b:a[3*e+2],sharpness:0,midpoint:.5};t.nodes.push(r)}e.sortAndUpdateRange()},e.getNodeValue=(e,n)=>e<0||e>=t.nodes.length?(Rb("Index out of range!"),-1):(n[0]=t.nodes[e].x,n[1]=t.nodes[e].r,n[2]=t.nodes[e].g,n[3]=t.nodes[e].b,n[4]=t.nodes[e].midpoint,n[5]=t.nodes[e].sharpness,1),e.setNodeValue=(n,r)=>{if(n<0||n>=t.nodes.length)return Rb("Index out of range!"),-1;const o=t.nodes[n].x;return t.nodes[n].x=r[0],t.nodes[n].r=r[1],t.nodes[n].g=r[2],t.nodes[n].b=r[3],t.nodes[n].midpoint=r[4],t.nodes[n].sharpness=r[5],o!==r[0]?e.sortAndUpdateRange():e.modified(),1},e.getNumberOfAvailableColors=()=>{var n,r;if(t.indexedLookup&&e.getSize())return e.getSize();if(t.tableSize)return t.tableSize;const o=null!==(n=null===(r=t.nodes)||void 0===r?void 0:r.length)&&void 0!==n?n:0;return Math.max(4094,o)},e.getIndexedColor=(t,n)=>{const r=e.getSize();if(r>0&&t>=0){const o=[];e.getNodeValue(t%r,o);for(let e=0;e<3;++e)n[e]=o[e+1];return void(n[3]=1)}const o=e.getNanColorByReference();n[0]=o[0],n[1]=o[1],n[2]=o[2],n[3]=1},e.fillFromDataPointer=(t,n)=>{if(!(t<=0)&&n){e.removeAllPoints();for(let r=0;r<t;r++)e.addRGBPoint(n[4*r],n[4*r+1],n[4*r+2],n[4*r+3])}},e.setMappingRange=(n,r)=>{const o=[n,r],a=[n,r],i=e.getRange(),s=e.logScaleEnabled();if(i[1]===o[1]&&i[0]===o[0])return;if(o[1]===o[0])return void Rb("attempt to set zero width color range");s&&(o[0]<=0?console.warn("attempt to set log scale color range with non-positive minimum"):(a[0]=Math.log10(o[0]),a[1]=Math.log10(o[1])));const l=(a[1]-a[0])/(i[1]-i[0]),u=a[0]-i[0]*l;for(let e=0;e<t.nodes.length;++e)t.nodes[e].x=t.nodes[e].x*l+u;t.mappingRange[0]=o[0],t.mappingRange[1]=o[1],e.modified()},e.adjustRange=n=>{const r=e.getRange(),o=[];r[0]<n[0]?(e.getColor(n[0],o),e.addRGBPoint(n[0],o[0],o[1],o[2])):(e.getColor(r[0],o),e.addRGBPoint(n[0],o[0],o[1],o[2])),r[1]>n[1]?(e.getColor(n[1],o),e.addRGBPoint(n[1],o[0],o[1],o[2])):(e.getColor(r[1],o),e.addRGBPoint(n[1],o[0],o[1],o[2])),e.sortAndUpdateRange();for(let e=0;e<t.nodes.length;)t.nodes[e].x>=n[0]&&t.nodes[e].x<=n[1]?t.nodes.splice(e,1):++e;return 1},e.estimateMinNumberOfSamples=(t,n)=>{const r=e.findMinimumXDistance();return Math.ceil((n-t)/r)},e.findMinimumXDistance=()=>{if(t.nodes.length<2)return-1;let e=Number.MAX_VALUE;for(let n=0;n<t.nodes.length-1;n++){const r=t.nodes[n+1].x-t.nodes[n].x;r<e&&(e=r)}return e},e.mapScalarsThroughTable=(n,r,o,a)=>{0!==e.getSize()?t.indexedLookup?e.mapDataIndexed(n,r,o,a):e.mapData(n,r,o,a):Mb("Transfer Function Has No Points!")},e.mapData=(t,n,r,o)=>{if(0===e.getSize())return void Lb("Transfer Function Has No Points!");const a=Math.floor(255*e.getAlpha()+.5),i=t.getNumberOfTuples(),s=t.getNumberOfComponents(),l=n.getData(),u=t.getData(),c=[];if(r===Ob.RGBA)for(let d=0;d<i;d++){const t=u[d*s+o];e.getColor(t,c),l[4*d]=Math.floor(255*c[0]+.5),l[4*d+1]=Math.floor(255*c[1]+.5),l[4*d+2]=Math.floor(255*c[2]+.5),l[4*d+3]=a}if(r===Ob.RGB)for(let d=0;d<i;d++){const t=u[d*s+o];e.getColor(t,c),l[3*d]=Math.floor(255*c[0]+.5),l[3*d+1]=Math.floor(255*c[1]+.5),l[3*d+2]=Math.floor(255*c[2]+.5)}if(r===Ob.LUMINANCE)for(let d=0;d<i;d++){const t=u[d*s+o];e.getColor(t,c),l[d]=Math.floor(76.5*c[0]+150.45*c[1]+28.05*c[2]+.5)}if(r===Ob.LUMINANCE_ALPHA)for(let d=0;d<i;d++){const t=u[d*s+o];e.getColor(t,c),l[2*d]=Math.floor(76.5*c[0]+150.45*c[1]+28.05*c[2]+.5),l[2*d+1]=a}},e.applyColorMap=n=>{const r=JSON.stringify(t.colorSpace);n.ColorSpace&&(t.colorSpace=Eb[n.ColorSpace.toUpperCase()],void 0===t.colorSpace&&(Rb("ColorSpace ".concat(n.ColorSpace," not supported, using RGB instead")),t.colorSpace=Eb.RGB));let o=r!==JSON.stringify(t.colorSpace);const a=o||JSON.stringify(t.nanColor);if(n.NanColor)for(t.nanColor=[].concat(n.NanColor);t.nanColor.length<4;)t.nanColor.push(1);o=o||a!==JSON.stringify(t.nanColor);const i=o||JSON.stringify(t.nodes);if(n.RGBPoints){const e=n.RGBPoints.length;t.nodes=[];const r=.5,o=0;for(let a=0;a<e;a+=4)t.nodes.push({x:n.RGBPoints[a],r:n.RGBPoints[a+1],g:n.RGBPoints[a+2],b:n.RGBPoints[a+3],midpoint:r,sharpness:o})}const s=e.sortAndUpdateRange(),l=!s&&(o||i!==JSON.stringify(t.nodes));return l&&e.modified(),s||l}}(e,t)}var Fb=u({newInstance:dn.newInstance(Vb,"vtkColorTransferFunction"),extend:Vb},Ab);const Ub=11102230246251565e-32,zb=134217729,Gb=(3+8*Ub)*Ub;function Wb(e,t,n,r,o){let a,i,s,l,u=t[0],c=r[0],d=0,f=0;c>u===c>-u?(a=u,u=t[++d]):(a=c,c=r[++f]);let p=0;if(d<e&&f<n)for(c>u===c>-u?(i=u+a,s=a-(i-u),u=t[++d]):(i=c+a,s=a-(i-c),c=r[++f]),a=i,0!==s&&(o[p++]=s);d<e&&f<n;)c>u===c>-u?(i=a+u,l=i-a,s=a-(i-l)+(u-l),u=t[++d]):(i=a+c,l=i-a,s=a-(i-l)+(c-l),c=r[++f]),a=i,0!==s&&(o[p++]=s);for(;d<e;)i=a+u,l=i-a,s=a-(i-l)+(u-l),u=t[++d],a=i,0!==s&&(o[p++]=s);for(;f<n;)i=a+c,l=i-a,s=a-(i-l)+(c-l),c=r[++f],a=i,0!==s&&(o[p++]=s);return 0===a&&0!==p||(o[p++]=a),p}function Hb(e){return new Float64Array(e)}const jb=Hb(4),Kb=Hb(8),Zb=Hb(12),qb=Hb(16),Xb=Hb(4);function Yb(e,t,n,r,o,a){const i=(t-a)*(n-o),s=(e-o)*(r-a),l=i-s,u=Math.abs(i+s);return Math.abs(l)>=33306690738754716e-32*u?l:-function(e,t,n,r,o,a,i){let s,l,u,c,d,f,p,h,m,g,v,y,b,_,T,x,S,w;const C=e-o,P=n-o,A=t-a,E=r-a;_=C*E,f=zb*C,p=f-(f-C),h=C-p,f=zb*E,m=f-(f-E),g=E-m,T=h*g-(_-p*m-h*m-p*g),x=A*P,f=zb*A,p=f-(f-A),h=A-p,f=zb*P,m=f-(f-P),g=P-m,S=h*g-(x-p*m-h*m-p*g),v=T-S,d=T-v,jb[0]=T-(v+d)+(d-S),y=_+v,d=y-_,b=_-(y-d)+(v-d),v=b-x,d=b-v,jb[1]=b-(v+d)+(d-x),w=y+v,d=w-y,jb[2]=y-(w-d)+(v-d),jb[3]=w;let I=function(e,t){let n=t[0];for(let r=1;r<e;r++)n+=t[r];return n}(4,jb),O=22204460492503146e-32*i;if(I>=O||-I>=O)return I;if(d=e-C,s=e-(C+d)+(d-o),d=n-P,u=n-(P+d)+(d-o),d=t-A,l=t-(A+d)+(d-a),d=r-E,c=r-(E+d)+(d-a),0===s&&0===l&&0===u&&0===c)return I;if(O=11093356479670487e-47*i+Gb*Math.abs(I),I+=C*c+E*s-(A*u+P*l),I>=O||-I>=O)return I;_=s*E,f=zb*s,p=f-(f-s),h=s-p,f=zb*E,m=f-(f-E),g=E-m,T=h*g-(_-p*m-h*m-p*g),x=l*P,f=zb*l,p=f-(f-l),h=l-p,f=zb*P,m=f-(f-P),g=P-m,S=h*g-(x-p*m-h*m-p*g),v=T-S,d=T-v,Xb[0]=T-(v+d)+(d-S),y=_+v,d=y-_,b=_-(y-d)+(v-d),v=b-x,d=b-v,Xb[1]=b-(v+d)+(d-x),w=y+v,d=w-y,Xb[2]=y-(w-d)+(v-d),Xb[3]=w;const M=Wb(4,jb,4,Xb,Kb);_=C*c,f=zb*C,p=f-(f-C),h=C-p,f=zb*c,m=f-(f-c),g=c-m,T=h*g-(_-p*m-h*m-p*g),x=A*u,f=zb*A,p=f-(f-A),h=A-p,f=zb*u,m=f-(f-u),g=u-m,S=h*g-(x-p*m-h*m-p*g),v=T-S,d=T-v,Xb[0]=T-(v+d)+(d-S),y=_+v,d=y-_,b=_-(y-d)+(v-d),v=b-x,d=b-v,Xb[1]=b-(v+d)+(d-x),w=y+v,d=w-y,Xb[2]=y-(w-d)+(v-d),Xb[3]=w;const R=Wb(M,Kb,4,Xb,Zb);_=s*c,f=zb*s,p=f-(f-s),h=s-p,f=zb*c,m=f-(f-c),g=c-m,T=h*g-(_-p*m-h*m-p*g),x=l*u,f=zb*l,p=f-(f-l),h=l-p,f=zb*u,m=f-(f-u),g=u-m,S=h*g-(x-p*m-h*m-p*g),v=T-S,d=T-v,Xb[0]=T-(v+d)+(d-S),y=_+v,d=y-_,b=_-(y-d)+(v-d),v=b-x,d=b-v,Xb[1]=b-(v+d)+(d-x),w=y+v,d=w-y,Xb[2]=y-(w-d)+(v-d),Xb[3]=w;const L=Wb(R,Zb,4,Xb,qb);return qb[L-1]}(e,t,n,r,o,a,u)}Hb(4),Hb(4),Hb(4),Hb(4),Hb(4),Hb(4),Hb(4),Hb(4),Hb(4),Hb(8),Hb(8),Hb(8),Hb(4),Hb(8),Hb(8),Hb(8),Hb(12);Hb(192),Hb(192);Hb(4),Hb(4),Hb(4),Hb(4),Hb(4),Hb(4),Hb(4),Hb(4),Hb(8),Hb(8),Hb(8),Hb(8),Hb(8),Hb(8),Hb(8),Hb(8),Hb(8),Hb(4),Hb(4),Hb(4),Hb(8),Hb(16),Hb(16),Hb(16),Hb(32),Hb(32),Hb(48),Hb(64);Hb(1152),Hb(1152);Hb(4),Hb(4),Hb(4),Hb(4),Hb(4),Hb(4),Hb(4),Hb(4),Hb(4),Hb(4),Hb(24),Hb(24),Hb(24),Hb(24),Hb(24),Hb(24),Hb(24),Hb(24),Hb(24),Hb(24),Hb(1152),Hb(1152),Hb(1152),Hb(1152),Hb(1152),Hb(2304),Hb(2304),Hb(3456),Hb(5760),Hb(8),Hb(8),Hb(8),Hb(16),Hb(24),Hb(48),Hb(48),Hb(96),Hb(192),Hb(384),Hb(384),Hb(384),Hb(768);Hb(96),Hb(96),Hb(96),Hb(1152);const Qb=Math.pow(2,-52),$b=new Uint32Array(512);class Jb{static from(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a_,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i_;const r=e.length,o=new Float64Array(2*r);for(let a=0;a<r;a++){const r=e[a];o[2*a]=t(r),o[2*a+1]=n(r)}return new Jb(o)}constructor(e){const t=e.length>>1;if(t>0&&"number"!==typeof e[0])throw new Error("Expected coords to contain numbers.");this.coords=e;const n=Math.max(2*t-5,0);this._triangles=new Uint32Array(3*n),this._halfedges=new Int32Array(3*n),this._hashSize=Math.ceil(Math.sqrt(t)),this._hullPrev=new Uint32Array(t),this._hullNext=new Uint32Array(t),this._hullTri=new Uint32Array(t),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(t),this._dists=new Float64Array(t),this.update()}update(){const{coords:e,_hullPrev:t,_hullNext:n,_hullTri:r,_hullHash:o}=this,a=e.length>>1;let i=1/0,s=1/0,l=-1/0,u=-1/0;for(let w=0;w<a;w++){const t=e[2*w],n=e[2*w+1];t<i&&(i=t),n<s&&(s=n),t>l&&(l=t),n>u&&(u=n),this._ids[w]=w}const c=(i+l)/2,d=(s+u)/2;let f,p,h;for(let w=0,C=1/0;w<a;w++){const t=e_(c,d,e[2*w],e[2*w+1]);t<C&&(f=w,C=t)}const m=e[2*f],g=e[2*f+1];for(let w=0,C=1/0;w<a;w++){if(w===f)continue;const t=e_(m,g,e[2*w],e[2*w+1]);t<C&&t>0&&(p=w,C=t)}let v=e[2*p],y=e[2*p+1],b=1/0;for(let w=0;w<a;w++){if(w===f||w===p)continue;const t=n_(m,g,v,y,e[2*w],e[2*w+1]);t<b&&(h=w,b=t)}let _=e[2*h],T=e[2*h+1];if(b===1/0){for(let r=0;r<a;r++)this._dists[r]=e[2*r]-e[0]||e[2*r+1]-e[1];r_(this._ids,this._dists,0,a-1);const t=new Uint32Array(a);let n=0;for(let e=0,r=-1/0;e<a;e++){const o=this._ids[e],a=this._dists[o];a>r&&(t[n++]=o,r=a)}return this.hull=t.subarray(0,n),this.triangles=new Uint32Array(0),void(this.halfedges=new Uint32Array(0))}if(Yb(m,g,v,y,_,T)<0){const e=p,t=v,n=y;p=h,v=_,y=T,h=e,_=t,T=n}const x=function(e,t,n,r,o,a){const i=n-e,s=r-t,l=o-e,u=a-t,c=i*i+s*s,d=l*l+u*u,f=.5/(i*u-s*l);return{x:e+(u*c-s*d)*f,y:t+(i*d-l*c)*f}}(m,g,v,y,_,T);this._cx=x.x,this._cy=x.y;for(let w=0;w<a;w++)this._dists[w]=e_(e[2*w],e[2*w+1],x.x,x.y);r_(this._ids,this._dists,0,a-1),this._hullStart=f;let S=3;n[f]=t[h]=p,n[p]=t[f]=h,n[h]=t[p]=f,r[f]=0,r[p]=1,r[h]=2,o.fill(-1),o[this._hashKey(m,g)]=f,o[this._hashKey(v,y)]=p,o[this._hashKey(_,T)]=h,this.trianglesLen=0,this._addTriangle(f,p,h,-1,-1,-1);for(let w,C,P=0;P<this._ids.length;P++){const a=this._ids[P],i=e[2*a],s=e[2*a+1];if(P>0&&Math.abs(i-w)<=Qb&&Math.abs(s-C)<=Qb)continue;if(w=i,C=s,a===f||a===p||a===h)continue;let l=0;for(let e=0,t=this._hashKey(i,s);e<this._hashSize&&(l=o[(t+e)%this._hashSize],-1===l||l===n[l]);e++);l=t[l];let u,c=l;for(;u=n[c],Yb(i,s,e[2*c],e[2*c+1],e[2*u],e[2*u+1])>=0;)if(c=u,c===l){c=-1;break}if(-1===c)continue;let d=this._addTriangle(c,a,n[c],-1,-1,r[c]);r[a]=this._legalize(d+2),r[c]=d,S++;let m=n[c];for(;u=n[m],Yb(i,s,e[2*m],e[2*m+1],e[2*u],e[2*u+1])<0;)d=this._addTriangle(m,a,u,r[a],-1,r[m]),r[a]=this._legalize(d+2),n[m]=m,S--,m=u;if(c===l)for(;u=t[c],Yb(i,s,e[2*u],e[2*u+1],e[2*c],e[2*c+1])<0;)d=this._addTriangle(u,a,c,-1,r[c],r[u]),this._legalize(d+2),r[u]=d,n[c]=c,S--,c=u;this._hullStart=t[a]=c,n[c]=t[m]=a,n[a]=m,o[this._hashKey(i,s)]=a,o[this._hashKey(e[2*c],e[2*c+1])]=c}this.hull=new Uint32Array(S);for(let w=0,C=this._hullStart;w<S;w++)this.hull[w]=C,C=n[C];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(e,t){return Math.floor(function(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}(e-this._cx,t-this._cy)*this._hashSize)%this._hashSize}_legalize(e){const{_triangles:t,_halfedges:n,coords:r}=this;let o=0,a=0;for(;;){const i=n[e],s=e-e%3;if(a=s+(e+2)%3,-1===i){if(0===o)break;e=$b[--o];continue}const l=i-i%3,u=s+(e+1)%3,c=l+(i+2)%3,d=t[a],f=t[e],p=t[u],h=t[c];if(t_(r[2*d],r[2*d+1],r[2*f],r[2*f+1],r[2*p],r[2*p+1],r[2*h],r[2*h+1])){t[e]=h,t[i]=d;const r=n[c];if(-1===r){let t=this._hullStart;do{if(this._hullTri[t]===c){this._hullTri[t]=e;break}t=this._hullPrev[t]}while(t!==this._hullStart)}this._link(e,r),this._link(i,n[a]),this._link(a,c);const s=l+(i+1)%3;o<$b.length&&($b[o++]=s)}else{if(0===o)break;e=$b[--o]}}return a}_link(e,t){this._halfedges[e]=t,-1!==t&&(this._halfedges[t]=e)}_addTriangle(e,t,n,r,o,a){const i=this.trianglesLen;return this._triangles[i]=e,this._triangles[i+1]=t,this._triangles[i+2]=n,this._link(i,r),this._link(i+1,o),this._link(i+2,a),this.trianglesLen+=3,i}}function e_(e,t,n,r){const o=e-n,a=t-r;return o*o+a*a}function t_(e,t,n,r,o,a,i,s){const l=e-i,u=t-s,c=n-i,d=r-s,f=o-i,p=a-s,h=c*c+d*d,m=f*f+p*p;return l*(d*m-h*p)-u*(c*m-h*f)+(l*l+u*u)*(c*p-d*f)<0}function n_(e,t,n,r,o,a){const i=n-e,s=r-t,l=o-e,u=a-t,c=i*i+s*s,d=l*l+u*u,f=.5/(i*u-s*l),p=(u*c-s*d)*f,h=(i*d-l*c)*f;return p*p+h*h}function r_(e,t,n,r){if(r-n<=20)for(let o=n+1;o<=r;o++){const r=e[o],a=t[r];let i=o-1;for(;i>=n&&t[e[i]]>a;)e[i+1]=e[i--];e[i+1]=r}else{let o=n+1,a=r;o_(e,n+r>>1,o),t[e[n]]>t[e[r]]&&o_(e,n,r),t[e[o]]>t[e[r]]&&o_(e,o,r),t[e[n]]>t[e[o]]&&o_(e,n,o);const i=e[o],s=t[i];for(;;){do{o++}while(t[e[o]]<s);do{a--}while(t[e[a]]>s);if(a<o)break;o_(e,o,a)}e[n+1]=e[a],e[a]=i,r-o+1>=a-n?(r_(e,t,o,r),r_(e,t,n,a-1)):(r_(e,t,n,a-1),r_(e,t,o,r))}}function o_(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function a_(e){return e[0]}function i_(e){return e[1]}const s_=e=>{let{demData:t,colorizedImageUrl:n,bounds:o,opacity:a=.7}=e;const i=(0,r.useRef)(null),[s,l]=(0,r.useState)(!0),[u,c]=(0,r.useState)(null),[d,f]=(0,r.useState)(null);return(0,r.useEffect)(()=>{(async()=>{try{l(!0);const e="".concat("/h2-viewer","/POC-land_surface_vertices.xyz"),t=await fetch(e);if(!t.ok)throw new Error("Failed to load file: ".concat(t.statusText));const n=(await t.text()).trim().split("\n"),r=[],o=[],a=[];for(const i of n){const e=i.trim();if(0===e.length||e.startsWith("#"))continue;const t=e.split(/\s+/).map(parseFloat);if(t.length>=3&&t.every(e=>!isNaN(e))){const[e,n,i]=t;r.push(e,n,i),o.push(e,n),a.push(i)}}if(0===r.length)throw new Error("No valid data points found in file");let s=1/0,u=-1/0;a.forEach(e=>{e<s&&(s=e),e>u&&(u=e)});const d=r.length/3;console.log("Loaded ".concat(d," points from POC-land_surface_vertices.xyz")),console.log("Z range: ".concat(s.toFixed(2)," to ").concat(u.toFixed(2)));const p=Jb.from(o.reduce((e,t,n)=>(n%2===0&&e.push([t,o[n+1]]),e),[]));if(console.log("Created ".concat(p.triangles.length/3," triangles")),f({numPoints:d,numTriangles:p.triangles.length/3,minZ:s,maxZ:u}),!i.current)return;i.current.innerHTML="";const h=Pb.newInstance({rootContainer:i.current,containerStyle:{height:"600px",width:"100%",position:"relative"}}),m=h.getRenderer(),g=h.getRenderWindow(),v=Ad.newInstance(),y=_c.newInstance();y.setData(Float32Array.from(r),3),v.setPoints(y);const b=p.triangles.length/3,_=new Uint32Array(4*b);for(let i=0;i<b;i++)_[4*i]=3,_[4*i+1]=p.triangles[3*i],_[4*i+2]=p.triangles[3*i+1],_[4*i+3]=p.triangles[3*i+2];const T=gc.newInstance({values:_});v.setPolys(T);const x=Wl.newInstance({name:"Elevation",values:Float32Array.from(a)});v.getPointData().setScalars(x);const S=cc.newInstance();S.setInputData(v),S.setScalarModeToUsePointData(),S.setScalarRange(s,u);const w=Fb.newInstance();w.addRGBPoint(s,0,0,1),w.addRGBPoint(s+.25*(u-s),0,1,1),w.addRGBPoint(s+.5*(u-s),0,1,0),w.addRGBPoint(s+.75*(u-s),1,1,0),w.addRGBPoint(u,1,0,0),S.setLookupTable(w);const C=Ol.newInstance();return C.setMapper(S),m.addActor(C),m.resetCamera(),m.getActiveCamera().elevation(-30),m.getActiveCamera().azimuth(45),m.resetCameraClippingRange(),m.setBackground(.95,.95,.97),g.render(),l(!1),c(null),()=>{h.delete()}}catch(e){c("Error loading DEM file: ".concat(e.message)),l(!1),console.error("Error in DEMVisu:",e)}})()},[]),(0,P.jsxs)("div",{style:{backgroundColor:"#f9fafb",padding:"2rem",minHeight:"100vh"},children:[(0,P.jsxs)("div",{style:{marginBottom:"1.5rem"},children:[(0,P.jsx)("h1",{style:{fontSize:"2rem",fontWeight:"bold",marginBottom:"0.5rem",color:"#1f2937"},children:"DEM Visualization with VTK.js + Delaunator"}),(0,P.jsx)("p",{style:{color:"#6b7280",marginBottom:"1rem",fontSize:"1rem"},children:"POC-land_surface_vertices.xyz - 3D Terrain Surface"}),d&&(0,P.jsxs)("div",{style:{fontSize:"0.875rem",color:"#4b5563",backgroundColor:"white",padding:"1rem",borderRadius:"0.5rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[(0,P.jsxs)("p",{style:{margin:"0.25rem 0"},children:[(0,P.jsx)("strong",{children:"File:"})," POC-land_surface_vertices.xyz (auto-loaded)"]}),(0,P.jsxs)("p",{style:{margin:"0.25rem 0"},children:[(0,P.jsx)("strong",{children:"Total points:"})," ",d.numPoints]}),(0,P.jsxs)("p",{style:{margin:"0.25rem 0"},children:[(0,P.jsx)("strong",{children:"Triangles:"})," ",d.numTriangles]}),(0,P.jsxs)("p",{style:{margin:"0.25rem 0"},children:[(0,P.jsx)("strong",{children:"Elevation range:"})," ",d.minZ.toFixed(2)," - ",d.maxZ.toFixed(2)]}),(0,P.jsx)("p",{style:{margin:"0.75rem 0 0 0",fontSize:"0.75rem",fontStyle:"italic",color:"#6b7280"},children:"Use mouse to rotate, zoom, and pan the 3D view"})]})]}),s&&(0,P.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"600px",fontSize:"1.25rem",color:"#4b5563",backgroundColor:"white",borderRadius:"0.5rem"},children:"Loading POC-land_surface_vertices.xyz and creating 3D visualization..."}),u&&(0,P.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"600px",fontSize:"1.25rem",color:"#dc2626",backgroundColor:"white",borderRadius:"0.5rem"},children:u}),(0,P.jsx)("div",{ref:i,style:{width:"100%",height:"600px",backgroundColor:"white",borderRadius:"0.5rem",boxShadow:"0 10px 15px -3px rgba(0,0,0,0.1), 0 4px 6px -2px rgba(0,0,0,0.05)",display:s||u?"none":"block"}})]})};const l_=class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.data=e,this.model=t.model||"exponential",this.nugget=t.nugget||0,this.sill=t.sill||null,this.range=t.range||null,null!==this.sill&&null!==this.range||this.fitVariogram(),this.K=null,this.M=null,this.prepareMatrices()}distance(e,t){return Math.sqrt(Math.pow(e.lon-t.lon,2)+Math.pow(e.lat-t.lat,2))}variogram(e){if(0===e)return 0;const{nugget:t,sill:n,range:r}=this,o=n-t;switch(this.model){case"exponential":default:return t+o*(1-Math.exp(-3*e/r));case"gaussian":return t+o*(1-Math.exp(-3*Math.pow(e/r,2)));case"spherical":return e>=r?n:t+o*(1.5*e/r-.5*Math.pow(e/r,3))}}fitVariogram(){const e=this.data.length,t=[],n=[];for(let s=0;s<e;s++)for(let r=s+1;r<e;r++){const e=this.distance(this.data[s],this.data[r]),o=.5*Math.pow(this.data[s].h2-this.data[r].h2,2);t.push(e),n.push(o)}const r=this.data.map(e=>e.h2),o=r.reduce((e,t)=>e+t,0)/r.length,a=r.reduce((e,t)=>e+Math.pow(t-o,2),0)/r.length;this.sill=1.2*a;const i=Math.max(...t);this.range=.3*i,0===this.nugget&&(this.nugget=.05*this.sill)}prepareMatrices(){const e=this.data.length;this.K=Array(e).fill(0).map(()=>Array(e).fill(0));for(let t=0;t<e;t++)for(let n=0;n<e;n++){const e=this.distance(this.data[t],this.data[n]);this.K[t][n]=this.sill-this.variogram(e)}this.M=this.invertMatrix(this.K)}invertMatrix(e){const t=e.length,n=Array(t).fill(0).map((e,n)=>Array(t).fill(0).map((e,t)=>n===t?1:0)),r=e.map((e,t)=>[...e,...n[t]]);for(let o=0;o<t;o++){let e=o;for(let a=o+1;a<t;a++)Math.abs(r[a][o])>Math.abs(r[e][o])&&(e=a);[r[o],r[e]]=[r[e],r[o]];const n=r[o][o];if(Math.abs(n)<1e-10)console.warn("Matrice singuli\xe8re d\xe9tect\xe9e");else{for(let e=0;e<2*t;e++)r[o][e]/=n;for(let e=0;e<t;e++)if(e!==o){const n=r[e][o];for(let a=0;a<2*t;a++)r[e][a]-=n*r[o][a]}}}return r.map(e=>e.slice(t))}interpolate(e,t){const n=this.data.length,r=Array(n).fill(0);for(let i=0;i<n;i++){const n=this.distance({lon:e,lat:t},this.data[i]);r[i]=this.sill-this.variogram(n)}const o=Array(n).fill(0);for(let i=0;i<n;i++)for(let e=0;e<n;e++)o[i]+=this.M[i][e]*r[e];let a=0;for(let i=0;i<n;i++)a+=o[i]*this.data[i].h2;return a}variance(e,t){const n=this.data.length,r=Array(n).fill(0);for(let i=0;i<n;i++){const n=this.distance({lon:e,lat:t},this.data[i]);r[i]=this.sill-this.variogram(n)}const o=Array(n).fill(0);for(let i=0;i<n;i++)for(let e=0;e<n;e++)o[i]+=this.M[i][e]*r[e];let a=this.sill;for(let i=0;i<n;i++)a-=o[i]*r[i];return Math.max(0,a)}getParameters(){return{model:this.model,nugget:this.nugget,sill:this.sill,range:this.range}}};function u_(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1e-4,a=0,i=0;for(const s of n){const n=Math.sqrt(Math.pow(s.lon-e,2)+Math.pow(s.lat-t,2));if(n<o)return s.h2;const l=1/Math.pow(n,r);a+=l,i+=l*s.h2}return i/a}const c_=()=>{const[e,t]=(0,r.useState)([]),[n,o]=(0,r.useState)(null),[a,i]=(0,r.useState)(null),[s,l]=(0,r.useState)("kriging"),[u,c]=(0,r.useState)(.6),[d,f]=(0,r.useState)("exponential");return(0,r.useEffect)(()=>{(async()=>{try{const e="".concat("/h2-viewer","/h2_frantz.csv"),n=await fetch(e),r=await n.text(),o=r.trim().split("\n").slice(1).map(e=>{const[t,n,r]=e.split(";").map(e=>parseFloat(e.trim()));return{lat:t,lon:n,h2:r}}).filter(e=>!isNaN(e.lat)&&!isNaN(e.lon)&&!isNaN(e.h2));t(o);const a=o.map(e=>e.lat),s=o.map(e=>e.lon);i([Math.min(...s),Math.min(...a),Math.max(...s),Math.max(...a)])}catch(e){console.error("Error loading H2 data:",e)}})()},[]),(0,r.useEffect)(()=>{0!==e.length&&a&&function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"kriging",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"exponential";const o=document.createElement("canvas");o.width=800,o.height=600;const a=o.getContext("2d"),[i,s,l,u]=t,c=l-i,d=u-s,f=e.map(e=>e.h2),p=Math.min(...f),h=Math.max(...f);let m=null;"kriging"===n&&(m=new l_(e,{model:r}));const g=e=>{const t=(e-p)/(h-p);let n,r,o;if(t<.25){const e=t/.25;n=Math.round(0+68*e),r=Math.round(0+119*e),o=Math.round(255-74*e)}else if(t<.5){const e=(t-.25)/.25;n=Math.round(68+92*e),r=Math.round(119+91*e),o=Math.round(181-111*e)}else if(t<.75){const e=(t-.5)/.25;n=Math.round(160+91*e),r=Math.round(210+35*e),o=Math.round(70-70*e)}else{const e=(t-.75)/.25;n=Math.round(251+4*e),r=Math.round(245-58*e),o=Math.round(0)}return"rgb(".concat(n,", ").concat(r,", ").concat(o,")")},v=50;for(let y=0;y<v;y++)for(let e=0;e<v;e++){const t=i+c*(y+.5)/v,r=u-d*(e+.5)/v;let o;o="kriging"===n?m.interpolate(t,r):u_(t,r);const s=g(o);a.fillStyle=s,a.fillRect(16*y,12*e,16,12)}return o.toDataURL()}(e,a,s).then(e=>{o(e)})},[e,a,s,d]),(0,P.jsxs)("div",{style:{width:"100%",height:"100vh"},children:[(0,P.jsxs)("div",{style:{position:"absolute",top:"20px",right:"20px",zIndex:1e3,backgroundColor:"white",padding:"15px",borderRadius:"8px",boxShadow:"0 2px 8px rgba(0,0,0,0.15)"},children:[(0,P.jsx)("h3",{style:{margin:"0 0 10px 0",fontSize:"16px"},children:"H2 Heatmap Controls"}),(0,P.jsxs)("div",{style:{marginBottom:"10px"},children:[(0,P.jsx)("label",{style:{display:"block",marginBottom:"5px",fontSize:"14px"},children:"Algorithm"}),(0,P.jsxs)("select",{value:s,onChange:e=>l(e.target.value),style:{width:"100%",padding:"5px"},children:[(0,P.jsx)("option",{value:"kriging",children:"Kriging"}),(0,P.jsx)("option",{value:"idw",children:"IDW"})]})]}),"kriging"===s&&(0,P.jsxs)("div",{style:{marginBottom:"10px"},children:[(0,P.jsx)("label",{style:{display:"block",marginBottom:"5px",fontSize:"14px"},children:"Variogram Model"}),(0,P.jsxs)("select",{value:d,onChange:e=>f(e.target.value),style:{width:"100%",padding:"5px"},children:[(0,P.jsx)("option",{value:"exponential",children:"Exponential"}),(0,P.jsx)("option",{value:"gaussian",children:"Gaussian"}),(0,P.jsx)("option",{value:"spherical",children:"Spherical"})]})]}),(0,P.jsxs)("div",{style:{marginBottom:"10px"},children:[(0,P.jsxs)("label",{style:{display:"block",marginBottom:"5px",fontSize:"14px"},children:["Opacity: ",u.toFixed(2)]}),(0,P.jsx)("input",{type:"range",min:"0",max:"1",step:"0.05",value:u,onChange:e=>c(parseFloat(e.target.value)),style:{width:"100%"}})]}),(0,P.jsxs)("div",{style:{fontSize:"12px",color:"#666",marginTop:"10px"},children:[e.length," data points loaded"]})]}),(0,P.jsx)(E,{colorizedImageUrl:n,bounds:a,opacity:u}),(0,P.jsx)(s_,{colorizedImageUrl:n,bounds:a,opacity:u})]})};o.createRoot(document.getElementById("root")).render((0,P.jsx)(r.StrictMode,{children:(0,P.jsx)(c_,{})}))})()})();
//# sourceMappingURL=main.f4042650.js.map